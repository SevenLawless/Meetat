var e,t,n;import{r,a as o,u as i,L as s,b as a,c as l,g as c,R as u,d,e as h,O as p,f,h as g,N as m,B as v}from"./vendor-DAeE1A57.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var y={exports:{}},b={},w=r,C=Symbol.for("react.element"),x=Symbol.for("react.fragment"),S=Object.prototype.hasOwnProperty,k=w.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,P={key:!0,ref:!0,__self:!0,__source:!0};function j(e,t,n){var r,o={},i=null,s=null;for(r in void 0!==n&&(i=""+n),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(s=t.ref),t)S.call(t,r)&&!P.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:C,type:e,key:i,ref:s,props:o,_owner:k.current}}b.Fragment=x,b.jsx=j,b.jsxs=j,y.exports=b;var O=y.exports,R={},E=o;R.createRoot=E.createRoot,R.hydrateRoot=E.hydrateRoot;const D="/api";const M=new class{constructor(){this.token=localStorage.getItem("token")}setToken(e){this.token=e,e?localStorage.setItem("token",e):localStorage.removeItem("token")}getToken(){return this.token||localStorage.getItem("token")}async request(e,t={}){const n=`${D}${e}`,r={"Content-Type":"application/json",...t.headers};this.getToken()&&(r.Authorization=`Bearer ${this.getToken()}`);const o=await fetch(n,{...t,headers:r});if(!o.ok&&0===o.status)throw new Error("Unable to connect to server. Please ensure the backend is running.");let i;const s=o.headers.get("content-type");if(!s||!s.includes("application/json")){const e=await o.text();throw new Error(`Server error: ${o.status} ${o.statusText} - ${e.substring(0,100)}`)}try{i=await o.json()}catch(a){throw new Error(`Failed to parse JSON response: ${o.status} ${o.statusText}`)}if(!o.ok){const e=(null==i?void 0:i.error)||(null==i?void 0:i.message)||`Request failed with status ${o.status}`;throw new Error(e)}return i}async register(e,t,n){const r=await this.request("/auth/register",{method:"POST",body:JSON.stringify({email:e,password:t,name:n})});return this.setToken(r.token),r}async login(e,t){const n=await this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return this.setToken(n.token),n}async getMe(){return this.request("/auth/me")}logout(){this.setToken(null)}async getUsers(e=""){const t=e?`?search=${encodeURIComponent(e)}`:"";return this.request(`/users${t}`)}async getUser(e){return this.request(`/users/${e}`)}async getProjects(){return this.request("/projects")}async getProject(e){return this.request(`/projects/${e}`)}async createProject(e,t){return this.request("/projects",{method:"POST",body:JSON.stringify({name:e,description:t})})}async updateProject(e,t){return this.request(`/projects/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteProject(e){return this.request(`/projects/${e}`,{method:"DELETE"})}async addProjectMember(e,t,n="member"){return this.request(`/projects/${e}/members`,{method:"POST",body:JSON.stringify({user_id:t,role:n})})}async removeProjectMember(e,t){return this.request(`/projects/${e}/members/${t}`,{method:"DELETE"})}async getProjectMembers(e){return this.request(`/projects/${e}/members`)}async getMissions(e){return this.request(`/missions/project/${e}`)}async getMission(e){return this.request(`/missions/${e}`)}async createMission(e,t,n){return this.request("/missions",{method:"POST",body:JSON.stringify({project_id:e,name:t,description:n})})}async updateMission(e,t){return this.request(`/missions/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteMission(e){return this.request(`/missions/${e}`,{method:"DELETE"})}async reorderMissions(e,t){return this.request(`/missions/reorder/${e}`,{method:"PUT",body:JSON.stringify({order:t})})}async getTasks(e){return this.request(`/tasks/mission/${e}`)}async getTask(e){return this.request(`/tasks/${e}`)}async createTask(e){return this.request("/tasks",{method:"POST",body:JSON.stringify(e)})}async updateTask(e,t){return this.request(`/tasks/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteTask(e){return this.request(`/tasks/${e}`,{method:"DELETE"})}async uploadAttachment(e,t){const n=new FormData;n.append("file",t);const r=await fetch(`${D}/tasks/${e}/attachments`,{method:"POST",headers:{Authorization:`Bearer ${this.getToken()}`},body:n}),o=await r.json();if(!r.ok)throw new Error(o.error||"Upload failed");return o}async deleteAttachment(e,t){return this.request(`/tasks/${e}/attachments/${t}`,{method:"DELETE"})}async getComments(e){return this.request(`/comments/task/${e}`)}async addComment(e,t){return this.request(`/comments/task/${e}`,{method:"POST",body:JSON.stringify({content:t})})}async updateComment(e,t){return this.request(`/comments/${e}`,{method:"PUT",body:JSON.stringify({content:t})})}async deleteComment(e){return this.request(`/comments/${e}`,{method:"DELETE"})}async getNotifications(e=!1){const t=e?"?unread_only=true":"";return this.request(`/notifications${t}`)}async markNotificationRead(e){return this.request(`/notifications/${e}/read`,{method:"PUT"})}async markAllNotificationsRead(){return this.request("/notifications/read-all",{method:"PUT"})}async deleteNotification(e){return this.request(`/notifications/${e}`,{method:"DELETE"})}async dismissNotifications(e){return this.request("/notifications/dismiss",{method:"POST",body:JSON.stringify({notification_ids:e})})}async getTodos(){return this.request("/todos")}async createTodo(e,t,n){return this.request("/todos",{method:"POST",body:JSON.stringify({title:e,notes:t,reminder_at:n})})}async updateTodo(e,t){return this.request(`/todos/${e}`,{method:"PUT",body:JSON.stringify(t)})}async toggleTodo(e){return this.request(`/todos/${e}/toggle`,{method:"PUT"})}async reorderTodos(e){return this.request("/todos/reorder",{method:"PUT",body:JSON.stringify({order:e})})}async deleteTodo(e){return this.request(`/todos/${e}`,{method:"DELETE"})}async getCampaigns(e){return this.request(`/campaigns/project/${e}`)}async getCampaign(e){return this.request(`/campaigns/${e}`)}async createCampaign(e){return this.request("/campaigns",{method:"POST",body:JSON.stringify(e)})}async updateCampaign(e,t){return this.request(`/campaigns/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteCampaign(e){return this.request(`/campaigns/${e}`,{method:"DELETE"})}async ingestMetrics(e,t){return this.request(`/campaigns/${e}/metrics`,{method:"POST",body:JSON.stringify({metrics:t})})}async getAggregatedMetrics(e,t={}){const n=new URLSearchParams;return t.startDate&&n.append("start_date",t.startDate),t.endDate&&n.append("end_date",t.endDate),t.groupBy&&n.append("group_by",t.groupBy),this.request(`/campaigns/project/${e}/aggregate?${n}`)}async getMarketingOverview(){return this.request("/marketing/overview")}async createMarketingCard(e){return this.request("/marketing/cards",{method:"POST",body:JSON.stringify(e)})}async updateMarketingCard(e,t){return this.request(`/marketing/cards/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteMarketingCard(e){return this.request(`/marketing/cards/${e}`,{method:"DELETE"})}async getMarketingCardTransactions(e){return this.request(`/marketing/cards/${e}/transactions`)}async deleteMarketingTransaction(e){return this.request(`/marketing/transactions/${e}`,{method:"DELETE"})}async createMarketingRevenueColdToReal(e){return this.request("/marketing/transactions/revenue/cold-to-real",{method:"POST",body:JSON.stringify(e)})}async createMarketingRevenueFromOtherCardCold(e){return this.request("/marketing/transactions/revenue/from-card-cold",{method:"POST",body:JSON.stringify(e)})}async createMarketingExpenseSpend(e){return this.request("/marketing/transactions/expense/spend",{method:"POST",body:JSON.stringify(e)})}async createMarketingExpenseRealToCold(e){return this.request("/marketing/transactions/expense/real-to-cold",{method:"POST",body:JSON.stringify(e)})}async createMarketingAdAccount(e){return this.request("/marketing/ad-accounts",{method:"POST",body:JSON.stringify(e)})}async updateMarketingAdAccount(e,t){return this.request(`/marketing/ad-accounts/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteMarketingAdAccount(e){return this.request(`/marketing/ad-accounts/${e}`,{method:"DELETE"})}async getAuditLogs(e={}){const t=new URLSearchParams;return e.userId&&t.append("user_id",e.userId),e.objectType&&t.append("object_type",e.objectType),e.action&&t.append("action",e.action),e.startDate&&t.append("start_date",e.startDate),e.endDate&&t.append("end_date",e.endDate),e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),this.request(`/audit?${t}`)}async getAuditStats(){return this.request("/audit/stats")}},A=r.createContext(null),N=()=>{const e=r.useContext(A);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},T=({children:e})=>{const[t,n]=r.useState(null),[o,i]=r.useState(!0);r.useEffect(()=>{s()},[]);const s=async()=>{if(M.getToken())try{const e=await M.getMe();n(e.user)}catch(e){console.error("Auth check failed:",e),M.logout()}finally{i(!1)}else i(!1)},a="admin"===(null==t?void 0:t.role);return O.jsx(A.Provider,{value:{user:t,loading:o,login:async(e,t)=>{const r=await M.login(e,t);return n(r.user),r},register:async(e,t,r)=>{const o=await M.register(e,t,r);return n(o.user),o},logout:()=>{M.logout(),n(null)},isAdmin:a},children:e})};
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var F={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=(e,t)=>{const n=r.forwardRef(({color:n="currentColor",size:o=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:a="",children:l,...c},u)=>{return r.createElement("svg",{ref:u,...F,width:o,height:o,stroke:n,strokeWidth:s?24*Number(i)/Number(o):i,className:["lucide",`lucide-${d=e,d.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()}`,a].join(" "),...c},[...t.map(([e,t])=>r.createElement(e,t)),...Array.isArray(l)?l:[l]]);var d});return n.displayName=`${e}`,n},L=I("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),B=I("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),H=I("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),_=I("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),G=I("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]),V=I("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),W=I("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),z=I("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]),$=I("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),U=I("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),K=I("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),q=I("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),X=I("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Y=I("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Z=I("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),J=I("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Q=I("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),ee=I("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),te=I("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),ne=I("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),re=I("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),oe=I("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),ie=I("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]),se=I("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),ae=I("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),le=I("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),ce=I("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),ue=I("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),de=I("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),he=I("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]),pe=I("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),fe=I("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),ge=I("MousePointer",[["path",{d:"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z",key:"y2ucgo"}],["path",{d:"m13 13 6 6",key:"1nhxnf"}]]),me=I("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),ve=I("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),ye=I("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),be=I("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),we=I("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),Ce=I("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),xe=I("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Se=I("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),ke=I("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),Pe=I("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),je=I("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Oe=I("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),Re=I("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Ee=I("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),De=I("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Me=I("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Ae=I("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ne=()=>{const[e,t]=r.useState(""),[n,o]=r.useState(""),[a,l]=r.useState(""),[c,u]=r.useState(!1),{login:d}=N(),h=i();return O.jsx("div",{className:"min-h-screen bg-surface-50 flex items-center justify-center p-4",children:O.jsxs("div",{className:"w-full max-w-md",children:[O.jsxs("div",{className:"text-center mb-8 animate-fade-in",children:[O.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-xl bg-primary-800 mb-4 shadow-soft",children:O.jsx(ie,{className:"w-7 h-7 text-white"})}),O.jsx("h1",{className:"text-2xl font-bold text-surface-900",children:"Meetat"}),O.jsx("p",{className:"text-surface-500 mt-1",children:"Project Management for Startups"})]}),O.jsxs("div",{className:"card p-8 animate-slide-up",children:[O.jsx("h2",{className:"text-xl font-semibold text-surface-900 mb-6",children:"Welcome back"}),a&&O.jsxs("div",{className:"flex items-center gap-3 p-4 mb-6 bg-red-50 border border-red-200 rounded-lg text-red-700",children:[O.jsx(B,{className:"w-5 h-5 flex-shrink-0"}),O.jsx("span",{className:"text-sm",children:a})]}),O.jsxs("form",{onSubmit:async t=>{t.preventDefault(),l(""),u(!0);try{await d(e,n),h("/")}catch(r){l(r.message)}finally{u(!1)}},className:"space-y-5",children:[O.jsxs("div",{children:[O.jsx("label",{className:"label",children:"Email"}),O.jsxs("div",{className:"relative",children:[O.jsx(de,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 w-5 h-5 text-surface-400"}),O.jsx("input",{type:"email",value:e,onChange:e=>t(e.target.value),className:"input pl-11",placeholder:"you@example.com",required:!0})]})]}),O.jsxs("div",{children:[O.jsx("label",{className:"label",children:"Password"}),O.jsxs("div",{className:"relative",children:[O.jsx(ce,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 w-5 h-5 text-surface-400"}),O.jsx("input",{type:"password",value:n,onChange:e=>o(e.target.value),className:"input pl-11",placeholder:"••••••••",required:!0})]})]}),O.jsx("button",{type:"submit",disabled:c,className:"w-full btn-primary btn-lg",children:c?O.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):O.jsxs(O.Fragment,{children:["Sign in",O.jsx(_,{className:"w-4 h-4"})]})})]}),O.jsxs("p",{className:"mt-6 text-center text-surface-600 text-sm",children:["Don't have an account?"," ",O.jsx(s,{to:"/register",className:"text-primary-700 hover:text-primary-800 font-medium",children:"Sign up"})]})]})]})})},Te=()=>{const[e,t]=r.useState(""),[n,o]=r.useState(""),[a,l]=r.useState(""),[c,u]=r.useState(""),[d,h]=r.useState(""),[p,f]=r.useState(!1),{register:g}=N(),m=i();return O.jsx("div",{className:"min-h-screen bg-surface-50 flex items-center justify-center p-4",children:O.jsxs("div",{className:"w-full max-w-md",children:[O.jsxs("div",{className:"text-center mb-8 animate-fade-in",children:[O.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-xl bg-primary-800 mb-4 shadow-soft",children:O.jsx(ie,{className:"w-7 h-7 text-white"})}),O.jsx("h1",{className:"text-2xl font-bold text-surface-900",children:"Meetat"}),O.jsx("p",{className:"text-surface-500 mt-1",children:"Create your account"})]}),O.jsxs("div",{className:"card p-8 animate-slide-up",children:[O.jsx("h2",{className:"text-xl font-semibold text-surface-900 mb-6",children:"Get started"}),d&&O.jsxs("div",{className:"flex items-center gap-3 p-4 mb-6 bg-red-50 border border-red-200 rounded-lg text-red-700",children:[O.jsx(B,{className:"w-5 h-5 flex-shrink-0"}),O.jsx("span",{className:"text-sm",children:d})]}),O.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),h(""),a===c)if(a.length<6)h("Password must be at least 6 characters");else{f(!0);try{await g(n,a,e),m("/")}catch(r){h(r.message)}finally{f(!1)}}else h("Passwords do not match")},className:"space-y-4",children:[O.jsxs("div",{children:[O.jsx("label",{className:"label",children:"Full Name"}),O.jsxs("div",{className:"relative",children:[O.jsx(De,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 w-5 h-5 text-surface-400"}),O.jsx("input",{type:"text",value:e,onChange:e=>t(e.target.value),className:"input pl-11",placeholder:"John Doe",required:!0})]})]}),O.jsxs("div",{children:[O.jsx("label",{className:"label",children:"Email"}),O.jsxs("div",{className:"relative",children:[O.jsx(de,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 w-5 h-5 text-surface-400"}),O.jsx("input",{type:"email",value:n,onChange:e=>o(e.target.value),className:"input pl-11",placeholder:"you@example.com",required:!0})]})]}),O.jsxs("div",{children:[O.jsx("label",{className:"label",children:"Password"}),O.jsxs("div",{className:"relative",children:[O.jsx(ce,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 w-5 h-5 text-surface-400"}),O.jsx("input",{type:"password",value:a,onChange:e=>l(e.target.value),className:"input pl-11",placeholder:"••••••••",required:!0,minLength:6})]})]}),O.jsxs("div",{children:[O.jsx("label",{className:"label",children:"Confirm Password"}),O.jsxs("div",{className:"relative",children:[O.jsx(ce,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 w-5 h-5 text-surface-400"}),O.jsx("input",{type:"password",value:c,onChange:e=>u(e.target.value),className:"input pl-11",placeholder:"••••••••",required:!0})]})]}),O.jsx("button",{type:"submit",disabled:p,className:"w-full btn-primary btn-lg mt-2",children:p?O.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):O.jsxs(O.Fragment,{children:["Create account",O.jsx(_,{className:"w-4 h-4"})]})})]}),O.jsxs("p",{className:"mt-6 text-center text-surface-600 text-sm",children:["Already have an account?"," ",O.jsx(s,{to:"/login",className:"text-primary-700 hover:text-primary-800 font-medium",children:"Sign in"})]})]})]})})},Fe=()=>{var e;const{user:t}=N(),[n,o]=r.useState([]),[i,a]=r.useState(!0),[l,c]=r.useState(!1),[u,d]=r.useState(null),[h,p]=r.useState(""),[f,g]=r.useState(""),[m,v]=r.useState(!1),[y,b]=r.useState(null);r.useEffect(()=>{w()},[]);const w=async()=>{try{const e=await M.getProjects();o(e.projects)}catch(e){console.error("Failed to load projects:",e)}finally{a(!1)}},C=()=>{c(!1),d(null),p(""),g("")};return O.jsxs("div",{className:"max-w-6xl mx-auto animate-fade-in",children:[O.jsxs("div",{className:"flex items-center justify-between mb-8",children:[O.jsxs("div",{children:[O.jsxs("h1",{className:"text-2xl font-bold text-surface-900",children:["Welcome back, ",null==(e=null==t?void 0:t.name)?void 0:e.split(" ")[0]]}),O.jsx("p",{className:"text-surface-500 mt-1",children:"Manage your projects and collaborate with your team"})]}),O.jsxs("button",{onClick:()=>c(!0),className:"btn-primary",children:[O.jsx(be,{className:"w-4 h-4"}),"New Project"]})]}),i?O.jsx("div",{className:"flex items-center justify-center py-20",children:O.jsx("div",{className:"w-8 h-8 border-2 border-primary-200 border-t-primary-600 rounded-full animate-spin"})}):0===n.length?O.jsxs("div",{className:"card text-center py-16 px-8",children:[O.jsx("div",{className:"w-16 h-16 rounded-full bg-surface-100 flex items-center justify-center mx-auto mb-4",children:O.jsx(ie,{className:"w-8 h-8 text-surface-400"})}),O.jsx("h3",{className:"text-lg font-semibold text-surface-900 mb-2",children:"No projects yet"}),O.jsx("p",{className:"text-surface-500 mb-6 max-w-sm mx-auto",children:"Create your first project to start organizing tasks and collaborating with your team."}),O.jsxs("button",{onClick:()=>c(!0),className:"btn-primary",children:[O.jsx(be,{className:"w-4 h-4"}),"Create Project"]})]}):O.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",children:n.map((e,t)=>O.jsxs("div",{className:"card-hover p-5 animate-slide-up group",style:{animationDelay:50*t+"ms"},children:[O.jsxs("div",{className:"flex items-start justify-between mb-3",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary-100 flex items-center justify-center",children:O.jsx(ie,{className:"w-5 h-5 text-primary-700"})}),O.jsxs("div",{children:[O.jsx("h3",{className:"font-semibold text-surface-900 group-hover:text-primary-700 transition-colors",children:e.name}),O.jsx("span",{className:"text-xs text-surface-500 capitalize",children:e.member_role})]})]}),"owner"===e.member_role&&O.jsxs("div",{className:"relative",children:[O.jsx("button",{onClick:t=>{t.preventDefault(),b(y===e.id?null:e.id)},className:"icon-btn opacity-0 group-hover:opacity-100 transition-opacity",children:O.jsx(fe,{className:"w-4 h-4"})}),y===e.id&&O.jsxs("div",{className:"absolute right-0 mt-1 w-36 dropdown z-10 animate-scale-in",children:[O.jsxs("button",{onClick:()=>(e=>{d(e),p(e.name),g(e.description||""),c(!0),b(null)})(e),className:"dropdown-item",children:[O.jsx(ye,{className:"w-4 h-4"}),"Edit"]}),O.jsxs("button",{onClick:()=>{(async e=>{if(confirm("Are you sure you want to delete this project? This action cannot be undone."))try{await M.deleteProject(e),o(n.filter(t=>t.id!==e))}catch(t){console.error("Failed to delete project:",t)}})(e.id),b(null)},className:"dropdown-item-danger",children:[O.jsx(je,{className:"w-4 h-4"}),"Delete"]})]})]})]}),e.description&&O.jsx("p",{className:"text-sm text-surface-500 mb-4 line-clamp-2",children:e.description}),O.jsxs("div",{className:"flex items-center gap-4 text-sm text-surface-500 mb-4",children:[O.jsxs("div",{className:"flex items-center gap-1.5",children:[O.jsx(K,{className:"w-4 h-4"}),O.jsxs("span",{children:[e.task_count||0," tasks"]})]}),O.jsxs("div",{className:"flex items-center gap-1.5",children:[O.jsx(ie,{className:"w-4 h-4"}),O.jsxs("span",{children:[e.mission_count||0," missions"]})]})]}),O.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-surface-100",children:[O.jsxs(s,{to:`/project/${e.id}/ads`,className:"flex items-center gap-1.5 text-sm text-surface-500 hover:text-surface-700 transition-colors",children:[O.jsx(he,{className:"w-4 h-4"}),"Ads"]}),O.jsxs(s,{to:`/project/${e.id}`,className:"flex items-center gap-1.5 text-sm text-primary-700 hover:text-primary-800 font-medium transition-colors",children:["Open",O.jsx(_,{className:"w-4 h-4"})]})]})]},e.id))}),l&&O.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:O.jsxs("div",{className:"card w-full max-w-md p-6 animate-scale-in",children:[O.jsxs("div",{className:"flex items-center justify-between mb-6",children:[O.jsx("h2",{className:"text-lg font-semibold text-surface-900",children:u?"Edit Project":"Create Project"}),O.jsx("button",{onClick:C,className:"icon-btn",children:O.jsx(Ae,{className:"w-5 h-5"})})]}),O.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),h.trim()){v(!0);try{u?await M.updateProject(u.id,{name:h,description:f}):await M.createProject(h,f),w(),C()}catch(t){console.error("Failed to save project:",t)}finally{v(!1)}}},className:"space-y-4",children:[O.jsxs("div",{children:[O.jsx("label",{className:"label",children:"Project Name"}),O.jsx("input",{type:"text",value:h,onChange:e=>p(e.target.value),className:"input",placeholder:"My Awesome Project",required:!0})]}),O.jsxs("div",{children:[O.jsx("label",{className:"label",children:"Description (optional)"}),O.jsx("textarea",{value:f,onChange:e=>g(e.target.value),className:"input min-h-24 resize-none",placeholder:"What is this project about?"})]}),O.jsxs("div",{className:"flex gap-3 pt-2",children:[O.jsx("button",{type:"button",onClick:C,className:"flex-1 btn-secondary",children:"Cancel"}),O.jsx("button",{type:"submit",disabled:m||!h.trim(),className:"flex-1 btn-primary",children:m?O.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):u?"Save Changes":"Create Project"})]})]})]})}),y&&O.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>b(null)})]})},Ie=r.createContext(null),Le=()=>{const e=r.useContext(Ie);if(!e)throw new Error("useWebSocket must be used within a WebSocketProvider");return e},Be=({children:e})=>{const{user:t}=N(),[n,o]=r.useState(!1),[i,s]=r.useState([]),[a,l]=r.useState(0),c=r.useRef(null),u=r.useRef(null),d=r.useRef({}),h=r.useRef(null),p=r.useCallback(()=>{var e;if(!t||(null==(e=c.current)?void 0:e.readyState)===WebSocket.OPEN)return;const n=M.getToken();if(!n)return;let r;r=`${"https:"===window.location.protocol?"wss:":"ws:"}//${window.location.host}/ws?token=${n}`;const i=new WebSocket(r);c.current=i,i.onopen=()=>{o(!0),h.current&&i.send(JSON.stringify({type:"sync",lastEventId:h.current}))},i.onmessage=e=>{try{const t=JSON.parse(e.data);m(t)}catch(t){console.error("WebSocket message error:",t)}},i.onclose=e=>{o(!1),c.current=null,t&&(u.current=setTimeout(()=>{p()},3e3))},i.onerror=e=>{}},[t]),f=r.useCallback(()=>{u.current&&clearTimeout(u.current),c.current&&(c.current.close(),c.current=null)},[]);r.useEffect(()=>(t?(p(),g()):(f(),s([]),l(0)),()=>f()),[t,p,f]);const g=async()=>{try{const e=await M.getNotifications();s(e.notifications),l(e.unread_count),e.notifications.length>0&&(h.current=e.notifications[0].id)}catch(e){console.error("Failed to load notifications:",e)}},m=e=>{switch(e.type){case"notification":s(t=>[e.data,...t]),l(e=>e+1),h.current=e.data.id,Object.values(d.current).forEach(t=>{t("notification",e.data)});break;case"task_created":case"task_updated":case"task_deleted":case"comment_added":Object.values(d.current).forEach(t=>{t(e.type,e)});break;case"sync":e.notifications&&(s(t=>{const n=new Set(t.map(e=>e.id));return[...e.notifications.filter(e=>!n.has(e.id)),...t]}),l(t=>t+e.notifications.filter(e=>!e.read).length),e.notifications.length>0&&(h.current=e.notifications[e.notifications.length-1].id));break;case"pong":case"connected":case"subscribed":case"unsubscribed":break;case"task_update":Object.values(d.current).forEach(t=>{t(`task_${e.action}`,e.task)});break;case"error":console.error("WebSocket server error:",e.message)}},v=r.useCallback(e=>{var t;(null==(t=c.current)?void 0:t.readyState)===WebSocket.OPEN&&c.current.send(JSON.stringify(e))},[]),y=r.useCallback(e=>{v({type:"subscribe_project",projectId:e})},[v]),b=r.useCallback(e=>{v({type:"unsubscribe_project",projectId:e})},[v]),w=r.useCallback((e,t)=>{d.current[e]=t},[]),C=r.useCallback(e=>{delete d.current[e]},[]),x=r.useCallback(e=>{s(t=>{const n=t.find(t=>t.id===e);return n&&!n.read&&l(e=>Math.max(0,e-1)),t.filter(t=>t.id!==e)})},[]);return O.jsx(Ie.Provider,{value:{connected:n,notifications:i,unreadCount:a,send:v,subscribeToProject:y,unsubscribeFromProject:b,addListener:w,removeListener:C,markAsRead:async e=>{try{await M.markNotificationRead(e),s(t=>t.map(t=>t.id===e?{...t,read:!0}:t)),l(e=>Math.max(0,e-1))}catch(t){console.error("Failed to mark notification as read:",t)}},markAllAsRead:async()=>{try{await M.markAllNotificationsRead(),s(e=>e.map(e=>({...e,read:!0}))),l(0)}catch(e){console.error("Failed to mark all as read:",e)}},dismissNotifications:async e=>{try{await M.dismissNotifications(e),s(t=>t.filter(t=>!e.includes(t.id))),l(t=>{const n=i.filter(t=>e.includes(t.id)&&!t.read).length;return Math.max(0,t-n)})}catch(t){console.error("Failed to dismiss notifications:",t)}},removeNotification:x,refreshNotifications:g},children:e})},He={"khuna@gmail.com":"khuna.jpg","khtna@gmail.com":"khtna.jpg"},_e=({user:e,size:t="md",className:n="",showName:o=!1})=>{var i,s;const[a,l]=r.useState(!1),c=(e=>e?e.id&&He[e.id]?`/avatars/${He[e.id]}`:e.email&&He[e.email]?`/avatars/${He[e.email]}`:null:null)(e),u=(null==e?void 0:e.name)?e.name.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):(null==(s=null==(i=null==e?void 0:e.email)?void 0:i[0])?void 0:s.toUpperCase())||"?",d=`rounded-full bg-primary-100 text-primary-800 flex items-center justify-center font-semibold border-2 border-white shadow-sm ${{xs:"w-6 h-6 text-xs",sm:"w-7 h-7 text-xs",md:"w-9 h-9 text-sm",lg:"w-12 h-12 text-base",xl:"w-16 h-16 text-xl"}[t]} ${n}`;return c&&!a?O.jsxs("div",{className:"relative inline-block",children:[O.jsx("img",{src:c,alt:(null==e?void 0:e.name)||"Avatar",className:`${d} object-cover`,onError:()=>l(!0)}),o&&(null==e?void 0:e.name)&&O.jsx("span",{className:"ml-2 text-sm font-medium text-surface-700",children:e.name})]}):O.jsxs("div",{className:"relative inline-flex items-center",children:[O.jsx("div",{className:d,children:u}),o&&(null==e?void 0:e.name)&&O.jsx("span",{className:"ml-2 text-sm font-medium text-surface-700",children:e.name})]})},Ge={todo:"To Do","in-progress":"In Progress",done:"Done"},Ve={todo:"badge-default","in-progress":"badge-warning",done:"badge-success"},We={low:"Low",medium:"Medium",high:"High"},ze={low:"badge-default",medium:"badge-warning",high:"badge-danger"},$e=({task:e,onClose:t,onEdit:n,onDelete:o,onUpdate:i})=>{const[s,a]=r.useState((null==e?void 0:e.comments)||[]),[l,c]=r.useState(""),[u,d]=r.useState(!1);r.useEffect(()=>{(null==e?void 0:e.comments)&&a(e.comments)},[e]);const h=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):null;return e?O.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-start justify-center z-50 p-4 overflow-y-auto animate-fade-in",children:O.jsxs("div",{className:"card w-full max-w-2xl my-8 animate-scale-in",children:[O.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-surface-100",children:[O.jsx("h2",{className:"text-lg font-semibold text-surface-900",children:"Task Details"}),O.jsxs("div",{className:"flex items-center gap-1",children:[O.jsxs("button",{onClick:n,className:"btn-secondary btn-sm",title:"Edit task",children:[O.jsx(ye,{className:"w-4 h-4"}),"Edit"]}),O.jsx("button",{onClick:async()=>{if(confirm("Delete this task?"))try{await M.deleteTask(e.id),o&&o()}catch(t){console.error("Failed to delete task:",t)}},className:"icon-btn text-red-500 hover:text-red-600 hover:bg-red-50",title:"Delete task",children:O.jsx(je,{className:"w-5 h-5"})}),O.jsx("button",{onClick:t,className:"icon-btn",children:O.jsx(Ae,{className:"w-5 h-5"})})]})]}),O.jsxs("div",{className:"p-6",children:[O.jsx("h1",{className:"text-xl font-semibold text-surface-900 mb-4",children:e.title}),O.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[O.jsx("span",{className:`badge ${Ve[e.status]}`,children:Ge[e.status]}),O.jsxs("span",{className:`badge ${ze[e.priority]}`,children:[We[e.priority]," Priority"]})]}),e.description&&O.jsxs("div",{className:"mb-6",children:[O.jsx("h3",{className:"text-sm font-medium text-surface-600 mb-2",children:"Description"}),O.jsx("p",{className:"text-surface-700 whitespace-pre-wrap bg-surface-50 p-4 rounded-lg border border-surface-100",children:e.description})]}),O.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[O.jsxs("div",{className:"bg-surface-50 p-4 rounded-lg border border-surface-100",children:[O.jsxs("div",{className:"flex items-center gap-2 text-surface-500 text-sm mb-1",children:[O.jsx(W,{className:"w-4 h-4"}),"Due Date"]}),O.jsx("p",{className:"text-surface-900 font-medium",children:e.due_date?h(e.due_date):"Not set"})]}),O.jsxs("div",{className:"bg-surface-50 p-4 rounded-lg border border-surface-100",children:[O.jsxs("div",{className:"flex items-center gap-2 text-surface-500 text-sm mb-1",children:[O.jsx(Q,{className:"w-4 h-4"}),"Created"]}),O.jsx("p",{className:"text-surface-900 font-medium",children:h(e.created_at)})]})]}),e.assigned_users&&e.assigned_users.length>0&&O.jsxs("div",{className:"mb-6",children:[O.jsxs("h3",{className:"text-sm font-medium text-surface-600 mb-2 flex items-center gap-2",children:[O.jsx(Me,{className:"w-4 h-4"}),"Assigned To"]}),O.jsx("div",{className:"flex flex-wrap gap-2",children:e.assigned_users.map(e=>O.jsxs("div",{className:"flex items-center gap-2 bg-surface-50 px-3 py-2 rounded-lg border border-surface-100",children:[O.jsx(_e,{user:e,size:"sm"}),O.jsxs("div",{children:[O.jsx("p",{className:"text-sm font-medium text-surface-900",children:e.name}),O.jsx("p",{className:"text-xs text-surface-500",children:e.email})]})]},e.id))})]}),e.tags&&e.tags.length>0&&O.jsxs("div",{className:"mb-6",children:[O.jsxs("h3",{className:"text-sm font-medium text-surface-600 mb-2 flex items-center gap-2",children:[O.jsx(ke,{className:"w-4 h-4"}),"Tags"]}),O.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map((e,t)=>O.jsx("span",{className:"badge badge-primary",children:e},t))})]}),e.attachments&&e.attachments.length>0&&O.jsxs("div",{className:"mb-6",children:[O.jsxs("h3",{className:"text-sm font-medium text-surface-600 mb-2 flex items-center gap-2",children:[O.jsx(me,{className:"w-4 h-4"}),"Attachments (",e.attachments.length,")"]}),O.jsx("div",{className:"space-y-2",children:e.attachments.map(e=>{return O.jsxs("div",{className:"flex items-center justify-between p-3 bg-surface-50 rounded-lg border border-surface-100",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx(me,{className:"w-4 h-4 text-surface-400"}),O.jsxs("div",{children:[O.jsx("p",{className:"text-sm text-surface-900",children:e.original_name}),O.jsx("p",{className:"text-xs text-surface-500",children:(t=e.size,t<1024?t+" B":t<1048576?(t/1024).toFixed(1)+" KB":(t/1048576).toFixed(1)+" MB")})]})]}),O.jsx("a",{href:`/uploads/${e.filename}`,download:e.original_name,className:"btn-secondary btn-sm",children:O.jsx(ne,{className:"w-4 h-4"})})]},e.id);var t})})]}),O.jsxs("div",{children:[O.jsxs("h3",{className:"text-sm font-medium text-surface-600 mb-3 flex items-center gap-2",children:[O.jsx(pe,{className:"w-4 h-4"}),"Comments (",s.length,")"]}),O.jsx("div",{className:"space-y-3 mb-4 max-h-64 overflow-y-auto",children:0===s.length?O.jsx("p",{className:"text-sm text-surface-500 py-4 text-center bg-surface-50 rounded-lg",children:"No comments yet. Be the first to comment!"}):s.map(e=>O.jsxs("div",{className:"p-4 bg-surface-50 rounded-lg border border-surface-100",children:[O.jsxs("div",{className:"flex items-center justify-between mb-2",children:[O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx(_e,{user:{name:e.author_name},size:"sm"}),O.jsx("span",{className:"text-sm font-medium text-surface-900",children:e.author_name})]}),O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("span",{className:"text-xs text-surface-500",children:new Date(e.created_at).toLocaleString()}),O.jsx("button",{onClick:()=>(async e=>{try{await M.deleteComment(e),a(s.filter(t=>t.id!==e))}catch(t){console.error("Failed to delete comment:",t)}})(e.id),className:"icon-btn p-1 text-surface-400 hover:text-red-500",children:O.jsx(je,{className:"w-3 h-3"})})]})]}),O.jsx("p",{className:"text-sm text-surface-700 whitespace-pre-wrap",children:e.content})]},e.id))}),O.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),l.trim()&&e){d(!0);try{const t=await M.addComment(e.id,l);a([...s,t]),c(""),i&&i()}catch(n){console.error("Failed to add comment:",n)}finally{d(!1)}}},className:"flex gap-2",children:[O.jsx("input",{type:"text",value:l,onChange:e=>c(e.target.value),className:"input flex-1 text-sm",placeholder:"Write a comment... (supports @mentions)",disabled:u}),O.jsx("button",{type:"submit",disabled:u||!l.trim(),className:"btn-primary btn-sm",children:u?O.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):O.jsx(xe,{className:"w-4 h-4"})})]})]})]})]})}):null},Ue=({task:e,missionId:t,projectId:n,members:o,onClose:i,onSave:s})=>{const[a,l]=r.useState({title:"",description:"",status:"todo",priority:"medium",due_date:"",assigned_users:[],tags:[]}),[c,u]=r.useState([]),[d,h]=r.useState(""),[p,f]=r.useState(!1),[g,m]=r.useState(!1);r.useEffect(()=>{var t;e?(l({title:e.title||"",description:e.description||"",status:e.status||"todo",priority:e.priority||"medium",due_date:e.due_date?e.due_date.split("T")[0]:"",assigned_users:(null==(t=e.assigned_users)?void 0:t.map(e=>e.id))||[],tags:e.tags||[]}),u(e.attachments||[])):(l({title:"",description:"",status:"todo",priority:"medium",due_date:"",assigned_users:[],tags:[]}),u([]))},[e]);const v=()=>{d.trim()&&!a.tags.includes(d.trim())&&(l({...a,tags:[...a.tags,d.trim()]}),h(""))},y=e=>{const t=a.assigned_users.includes(e);l({...a,assigned_users:t?a.assigned_users.filter(t=>t!==e):[...a.assigned_users,e]})};return O.jsxs("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-start justify-center z-50 p-4 overflow-y-auto animate-fade-in",children:[O.jsxs("div",{className:"card w-full max-w-2xl my-8 animate-scale-in",children:[O.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-surface-100",children:[O.jsx("h2",{className:"text-lg font-semibold text-surface-900",children:e?"Edit Task":"New Task"}),O.jsx("button",{onClick:i,className:"icon-btn",children:O.jsx(Ae,{className:"w-5 h-5"})})]}),O.jsxs("form",{onSubmit:async n=>{if(n.preventDefault(),a.title.trim()){f(!0);try{const n={...a,due_date:a.due_date||null};e?await M.updateTask(e.id,n):await M.createTask({mission_id:t,...n}),s()}catch(r){console.error("Failed to save task:",r),alert("Failed to save task: "+r.message)}finally{f(!1)}}},className:"p-6",children:[O.jsxs("div",{className:"mb-4",children:[O.jsx("label",{className:"label",children:"Title"}),O.jsx("input",{type:"text",value:a.title,onChange:e=>l({...a,title:e.target.value}),className:"input",placeholder:"Task title...",required:!0,autoFocus:!0})]}),O.jsxs("div",{className:"mb-4",children:[O.jsx("label",{className:"label",children:"Description"}),O.jsx("textarea",{value:a.description,onChange:e=>l({...a,description:e.target.value}),className:"input min-h-24 resize-none text-sm",placeholder:"Add description... Use @username to mention someone"})]}),O.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[O.jsxs("div",{children:[O.jsx("label",{className:"label",children:"Status"}),O.jsxs("select",{value:a.status,onChange:e=>l({...a,status:e.target.value}),className:"input",children:[O.jsx("option",{value:"todo",children:"To Do"}),O.jsx("option",{value:"in-progress",children:"In Progress"}),O.jsx("option",{value:"done",children:"Done"})]})]}),O.jsxs("div",{children:[O.jsx("label",{className:"label",children:"Priority"}),O.jsxs("select",{value:a.priority,onChange:e=>l({...a,priority:e.target.value}),className:"input",children:[O.jsx("option",{value:"low",children:"Low"}),O.jsx("option",{value:"medium",children:"Medium"}),O.jsx("option",{value:"high",children:"High"})]})]}),O.jsxs("div",{children:[O.jsxs("label",{className:"label flex items-center gap-1",children:[O.jsx(W,{className:"w-3.5 h-3.5"}),"Due Date"]}),O.jsx("input",{type:"date",value:a.due_date,onChange:e=>l({...a,due_date:e.target.value}),className:"input"})]})]}),O.jsxs("div",{className:"mb-4",children:[O.jsxs("label",{className:"label flex items-center gap-1",children:[O.jsx(Me,{className:"w-3.5 h-3.5"}),"Assigned To"]}),O.jsxs("div",{className:"relative",children:[O.jsxs("button",{type:"button",onClick:()=>m(!g),className:"input text-left flex items-center justify-between",children:[O.jsx("span",{className:"text-surface-500",children:0===a.assigned_users.length?"Select members...":`${a.assigned_users.length} member(s) assigned`}),O.jsx(be,{className:"w-4 h-4 text-surface-400"})]}),g&&O.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 dropdown z-10 max-h-48 overflow-y-auto",children:o.map(e=>O.jsxs("button",{type:"button",onClick:()=>y(e.id),className:"dropdown-item "+(a.assigned_users.includes(e.id)?"bg-primary-50":""),children:[O.jsx(_e,{user:e,size:"sm"}),O.jsx("span",{className:"flex-1 text-left",children:e.name}),a.assigned_users.includes(e.id)&&O.jsx("span",{className:"text-primary-600 font-medium",children:"✓"})]},e.id))})]}),a.assigned_users.length>0&&O.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:a.assigned_users.map(e=>{const t=o.find(t=>t.id===e);return t?O.jsxs("span",{className:"badge badge-primary flex items-center gap-1",children:[t.name,O.jsx("button",{type:"button",onClick:()=>y(e),className:"hover:text-primary-900",children:O.jsx(Ae,{className:"w-3 h-3"})})]},e):null})})]}),O.jsxs("div",{className:"mb-4",children:[O.jsxs("label",{className:"label flex items-center gap-1",children:[O.jsx(ke,{className:"w-3.5 h-3.5"}),"Tags"]}),O.jsxs("div",{className:"flex gap-2",children:[O.jsx("input",{type:"text",value:d,onChange:e=>h(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),v())},className:"input flex-1",placeholder:"Add tag..."}),O.jsx("button",{type:"button",onClick:v,className:"btn-secondary btn-sm",children:"Add"})]}),a.tags.length>0&&O.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:a.tags.map(e=>O.jsxs("span",{className:"badge badge-default flex items-center gap-1",children:[e,O.jsx("button",{type:"button",onClick:()=>(e=>{l({...a,tags:a.tags.filter(t=>t!==e)})})(e),className:"hover:text-surface-900",children:O.jsx(Ae,{className:"w-3 h-3"})})]},e))})]}),e&&O.jsxs("div",{className:"mb-6",children:[O.jsxs("label",{className:"label flex items-center gap-1",children:[O.jsx(me,{className:"w-3.5 h-3.5"}),"Attachments"]}),O.jsx("input",{type:"file",id:"file-upload",className:"hidden",onChange:async t=>{var n;const r=null==(n=t.target.files)?void 0:n[0];if(r&&e)try{const t=await M.uploadAttachment(e.id,r);u([...c,t])}catch(o){console.error("Failed to upload file:",o)}}}),O.jsxs("label",{htmlFor:"file-upload",className:"btn-secondary btn-sm inline-flex cursor-pointer",children:[O.jsx(be,{className:"w-4 h-4"}),"Add File"]}),c.length>0&&O.jsx("div",{className:"mt-2 space-y-2",children:c.map(t=>{return O.jsxs("div",{className:"flex items-center justify-between p-3 bg-surface-50 rounded-lg border border-surface-100",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx(me,{className:"w-4 h-4 text-surface-400"}),O.jsxs("div",{children:[O.jsx("p",{className:"text-sm text-surface-900",children:t.original_name}),O.jsx("p",{className:"text-xs text-surface-500",children:(n=t.size,n<1024?n+" B":n<1048576?(n/1024).toFixed(1)+" KB":(n/1048576).toFixed(1)+" MB")})]})]}),O.jsxs("div",{className:"flex items-center gap-1",children:[O.jsx("a",{href:`/uploads/${t.filename}`,download:t.original_name,className:"icon-btn p-1",children:O.jsx(ne,{className:"w-4 h-4"})}),O.jsx("button",{type:"button",onClick:()=>(async t=>{try{await M.deleteAttachment(e.id,t),u(c.filter(e=>e.id!==t))}catch(n){console.error("Failed to delete attachment:",n)}})(t.id),className:"icon-btn p-1 text-red-500 hover:text-red-600",children:O.jsx(je,{className:"w-4 h-4"})})]})]},t.id);var n})})]}),O.jsxs("div",{className:"flex gap-3 pt-4 border-t border-surface-100",children:[O.jsx("button",{type:"button",onClick:i,className:"flex-1 btn-secondary",children:"Cancel"}),O.jsx("button",{type:"submit",disabled:p||!a.title.trim(),className:"flex-1 btn-primary",children:p?O.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e?"Save Changes":"Create Task"})]})]})]}),g&&O.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>m(!1)})]})},Ke=({projectId:e,members:t,isOwner:n,onClose:o,onUpdate:i})=>{const[s,a]=r.useState(""),[l,c]=r.useState([]),[u,d]=r.useState(!1),[h,p]=r.useState(null);r.useEffect(()=>{s.length>=2?f():c([])},[s]);const f=async()=>{d(!0);try{const e=await M.getUsers(s),n=t.map(e=>e.id);c(e.users.filter(e=>!n.includes(e.id)))}catch(e){console.error("Failed to search users:",e)}finally{d(!1)}};return O.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:O.jsxs("div",{className:"card w-full max-w-md animate-scale-in",children:[O.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-surface-100",children:[O.jsx("h2",{className:"text-lg font-semibold text-surface-900",children:"Project Members"}),O.jsx("button",{onClick:o,className:"icon-btn",children:O.jsx(Ae,{className:"w-5 h-5"})})]}),O.jsxs("div",{className:"p-6",children:[n&&O.jsxs("div",{className:"mb-6",children:[O.jsxs("label",{className:"label flex items-center gap-1",children:[O.jsx(Ee,{className:"w-3.5 h-3.5"}),"Add Member"]}),O.jsxs("div",{className:"relative",children:[O.jsx(Ce,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 w-4 h-4 text-surface-400"}),O.jsx("input",{type:"text",value:s,onChange:e=>a(e.target.value),className:"input pl-10 text-sm",placeholder:"Search by name or email..."})]}),l.length>0&&O.jsx("div",{className:"mt-2 dropdown max-h-48 overflow-y-auto",children:l.map(t=>O.jsxs("div",{className:"flex items-center justify-between px-4 py-2 hover:bg-surface-50",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx(_e,{user:t,size:"sm"}),O.jsxs("div",{children:[O.jsx("p",{className:"text-sm text-surface-900",children:t.name}),O.jsx("p",{className:"text-xs text-surface-500",children:t.email})]})]}),O.jsx("button",{onClick:()=>(async t=>{p(t);try{await M.addProjectMember(e,t),i(),a(""),c([])}catch(n){console.error("Failed to add member:",n)}finally{p(null)}})(t.id),disabled:h===t.id,className:"text-sm text-primary-700 hover:text-primary-800 font-medium disabled:opacity-50",children:h===t.id?"Adding...":"Add"})]},t.id))}),u&&O.jsx("div",{className:"mt-2 text-center py-4",children:O.jsx("div",{className:"w-5 h-5 border-2 border-primary-200 border-t-primary-600 rounded-full animate-spin mx-auto"})}),s.length>=2&&!u&&0===l.length&&O.jsx("p",{className:"mt-2 text-sm text-surface-500 text-center py-4",children:"No users found"})]}),O.jsxs("div",{children:[O.jsxs("h3",{className:"label",children:["Members (",t.length,")"]}),O.jsx("div",{className:"space-y-2",children:t.map(t=>O.jsxs("div",{className:"flex items-center justify-between p-3 bg-surface-50 rounded-lg border border-surface-100",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx(_e,{user:t,size:"md"}),O.jsxs("div",{children:[O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("p",{className:"text-sm font-medium text-surface-900",children:t.name}),"owner"===t.role&&O.jsx(ee,{className:"w-3.5 h-3.5 text-amber-500"})]}),O.jsx("p",{className:"text-xs text-surface-500",children:t.email})]})]}),n&&"owner"!==t.role&&O.jsx("button",{onClick:()=>(async t=>{if(confirm("Remove this member from the project?"))try{await M.removeProjectMember(e,t),i()}catch(n){console.error("Failed to remove member:",n)}})(t.id),className:"icon-btn text-surface-400 hover:text-red-500",children:O.jsx(je,{className:"w-4 h-4"})})]},t.id))})]})]})]})})},qe={todo:{label:"To Do",class:"status-todo",icon:J,color:"bg-surface-100 text-surface-700 border-surface-200"},"in-progress":{label:"In Progress",class:"status-in-progress",icon:B,color:"bg-amber-50 text-amber-700 border-amber-200"},done:{label:"Done",class:"status-done",icon:$,color:"bg-emerald-50 text-emerald-700 border-emerald-200"}},Xe={low:{label:"Low",class:"priority-low",color:"text-surface-500",dotColor:"bg-surface-400"},medium:{label:"Medium",class:"priority-medium",color:"text-amber-600",dotColor:"bg-amber-500"},high:{label:"High",class:"priority-high",color:"text-red-600",dotColor:"bg-red-500"}},Ye=()=>{var e;const{projectId:t}=a(),{subscribeToProject:n,unsubscribeFromProject:o,addListener:i,removeListener:l}=Le(),[c,u]=r.useState(null),[d,h]=r.useState([]),[p,f]=r.useState({}),[g,m]=r.useState(!0),[v,y]=r.useState(null),[b,w]=r.useState(null),[C,x]=r.useState(!1),[S,k]=r.useState(!1),[P,j]=r.useState(null),[R,E]=r.useState(""),[D,A]=r.useState(!1),[N,T]=r.useState(!1),[F,I]=r.useState(null),[L,_]=r.useState(null),G=async()=>{try{const[e,n]=await Promise.all([M.getProject(t),M.getMissions(t)]);u(e.project),h(n.missions);const r=n.missions.map(e=>M.getTasks(e.id)),o=await Promise.all(r),i={};n.missions.forEach((e,t)=>{i[e.id]=o[t].tasks}),f(i)}catch(e){console.error("Failed to load project:",e)}finally{m(!1)}},V=r.useCallback(async()=>{if(0===d.length)return;const e=d.map(e=>M.getTasks(e.id)),t=await Promise.all(e),n={};d.forEach((e,r)=>{n[e.id]=t[r].tasks}),f(n)},[d]),W=r.useCallback((e,t)=>{switch(e){case"task_created":V();break;case"task_updated":t.task&&t.mission_id?f(e=>{const n=e[t.mission_id]||[],r=n.findIndex(e=>e.id===t.task.id);if(r>=0){const o=[...n];return o[r]=t.task,{...e,[t.mission_id]:o}}return V(),e}):V();break;case"task_deleted":f(e=>{const n={};for(const[r,o]of Object.entries(e))n[r]=o.filter(e=>e.id!==t.taskId);return n})}},[V]);r.useEffect(()=>{G(),n(parseInt(t));const e=`project-${t}`;return i(e,W),()=>{o(parseInt(t)),l(e)}},[t,W,n,o,i,l]);const z=async(e,t)=>{try{await M.updateMission(e,{name:t}),h(d.map(n=>n.id===e?{...n,name:t}:n)),_(null)}catch(n){console.error("Failed to update mission:",n)}},U=e=>{j(e),w(null),x(!0)};return g?O.jsx("div",{className:"flex items-center justify-center py-20",children:O.jsx("div",{className:"w-8 h-8 border-2 border-primary-200 border-t-primary-600 rounded-full animate-spin"})}):c?O.jsxs("div",{className:"max-w-full animate-fade-in",children:[O.jsxs("div",{className:"flex items-center justify-between mb-8",children:[O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx(s,{to:"/",className:"icon-btn",children:O.jsx(H,{className:"w-5 h-5"})}),O.jsxs("div",{children:[O.jsx("h1",{className:"text-2xl font-bold text-surface-900",children:c.name}),c.description&&O.jsx("p",{className:"text-surface-500 text-sm mt-1",children:c.description})]})]}),O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsxs(s,{to:`/project/${t}/ads`,className:"btn-secondary btn-sm",children:[O.jsx(he,{className:"w-4 h-4"}),O.jsx("span",{className:"hidden sm:inline",children:"Ads"})]}),O.jsxs("button",{onClick:()=>k(!0),className:"btn-secondary btn-sm",children:[O.jsx(Me,{className:"w-4 h-4"}),O.jsx("span",{className:"hidden sm:inline",children:"Members"}),O.jsx("span",{className:"text-xs bg-surface-200 px-1.5 py-0.5 rounded-full ml-1",children:(null==(e=c.members)?void 0:e.length)||0})]}),O.jsxs("button",{onClick:()=>T(!0),className:"btn-primary btn-sm",children:[O.jsx(be,{className:"w-4 h-4"}),O.jsx("span",{className:"hidden sm:inline",children:"Add Mission"})]})]})]}),O.jsxs("div",{className:"space-y-8",children:[d.map(e=>{const t=p[e.id]||[],n=t.filter(e=>"done"===e.status).length,r=t.filter(e=>"in-progress"===e.status).length,o=t.filter(e=>"todo"===e.status).length;return O.jsxs("div",{className:"card overflow-hidden bg-surface-100",children:[O.jsx("div",{className:"px-6 py-5 border-b border-surface-200 bg-gradient-to-r from-surface-200 via-surface-100 to-surface-200",children:O.jsxs("div",{className:"flex items-center justify-between mb-3",children:[O.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[L===e.id?O.jsx("input",{type:"text",defaultValue:e.name,autoFocus:!0,className:"flex-1 bg-transparent text-surface-900 font-bold text-xl focus:outline-none border-b-2 border-primary-500",onBlur:t=>z(e.id,t.target.value),onKeyDown:t=>{"Enter"===t.key&&z(e.id,t.target.value),"Escape"===t.key&&_(null)}}):O.jsx("h2",{className:"font-bold text-xl text-surface-900",children:e.name}),O.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("span",{className:"text-surface-500",children:"Total:"}),O.jsx("span",{className:"font-semibold text-surface-900",children:t.length})]}),O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx(J,{className:"w-4 h-4 text-surface-400"}),O.jsx("span",{className:"text-surface-600",children:o})]}),O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx(B,{className:"w-4 h-4 text-amber-500"}),O.jsx("span",{className:"text-surface-600",children:r})]}),O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx($,{className:"w-4 h-4 text-emerald-600"}),O.jsx("span",{className:"text-surface-600",children:n})]})]})]}),O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsxs("button",{onClick:()=>U(e.id),className:"btn-primary btn-sm",children:[O.jsx(be,{className:"w-4 h-4"}),"Add Task"]}),O.jsxs("div",{className:"relative",children:[O.jsx("button",{onClick:()=>I(F===e.id?null:e.id),className:"icon-btn p-2",children:O.jsx(fe,{className:"w-5 h-5"})}),F===e.id&&O.jsxs("div",{className:"absolute right-0 mt-1 w-40 dropdown z-10 animate-scale-in",children:[O.jsxs("button",{onClick:()=>{_(e.id),I(null)},className:"dropdown-item",children:[O.jsx(ye,{className:"w-4 h-4"}),"Rename Mission"]}),O.jsxs("button",{onClick:()=>(async e=>{if(confirm("Delete this mission and all its tasks?")){try{await M.deleteMission(e),h(d.filter(t=>t.id!==e));const t={...p};delete t[e],f(t)}catch(t){console.error("Failed to delete mission:",t)}I(null)}})(e.id),className:"dropdown-item-danger",children:[O.jsx(je,{className:"w-4 h-4"}),"Delete Mission"]})]})]})]})]})}),O.jsx("div",{className:"p-6",children:0===t.length?O.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-surface-200 rounded-xl bg-surface-200/50",children:[O.jsx(oe,{className:"w-12 h-12 text-surface-300 mx-auto mb-3"}),O.jsx("p",{className:"text-surface-500 font-medium mb-2",children:"No tasks yet"}),O.jsx("p",{className:"text-sm text-surface-400 mb-4",children:"Get started by creating your first task"}),O.jsxs("button",{onClick:()=>U(e.id),className:"btn-primary btn-sm",children:[O.jsx(be,{className:"w-4 h-4"}),"Create First Task"]})]}):O.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:t.map(t=>{var n;null==(n=qe[t.status])||n.icon;const r=qe[t.status],o=Xe[t.priority],i=!!(s=t.due_date)&&new Date(s)<new Date&&new Date(s).toDateString()!==(new Date).toDateString();var s,a;return O.jsxs("div",{onClick:()=>(async e=>{try{const t=await M.getTask(e);y(t.task)}catch(t){console.error("Failed to load task:",t)}})(t.id),className:"p-5 bg-surface-100 border-2 border-surface-200 rounded-xl cursor-pointer hover:border-primary-400 hover:shadow-medium transition-all duration-200 group",children:[O.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[O.jsxs("div",{className:"flex-1 min-w-0",children:[O.jsx("h3",{className:"font-semibold text-base text-surface-900 leading-snug group-hover:text-primary-700 transition-colors mb-2",children:t.title}),t.assigned_users&&t.assigned_users.length>0&&O.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[O.jsx(Me,{className:"w-3.5 h-3.5 text-surface-400 flex-shrink-0"}),O.jsx("div",{className:"flex items-center gap-1.5 flex-wrap",children:t.assigned_users.map((e,t)=>O.jsxs("div",{className:"flex items-center gap-1.5 bg-white px-2 py-1 rounded-md border border-surface-200 shadow-sm hover:border-primary-300 transition-colors",title:e.name,children:[O.jsx(_e,{user:e,size:"sm",className:"border border-surface-200"}),O.jsx("span",{className:"text-xs font-medium text-surface-700 whitespace-nowrap",children:e.name})]},e.id||t))})]})]}),O.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[O.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${o.dotColor}`}),O.jsx("span",{className:`badge text-[10px] ${o.class}`,children:o.label})]})]}),t.description&&O.jsx("p",{className:"text-sm text-surface-600 mb-4 line-clamp-3 leading-relaxed",children:t.description}),O.jsx("div",{className:"mb-4",children:O.jsxs("select",{value:t.status,onChange:n=>{n.stopPropagation(),(async(e,t,n)=>{try{await M.updateTask(e,{status:t}),f(r=>({...r,[n]:r[n].map(n=>n.id===e?{...n,status:t}:n)}))}catch(r){console.error("Failed to update status:",r)}})(t.id,n.target.value,e.id)},onClick:e=>e.stopPropagation(),className:`text-xs px-3 py-2 rounded-lg border font-medium w-full cursor-pointer focus:outline-none transition-colors ${r.color}`,children:[O.jsx("option",{value:"todo",children:"To Do"}),O.jsx("option",{value:"in-progress",children:"In Progress"}),O.jsx("option",{value:"done",children:"Done"})]})}),t.tags&&t.tags.length>0&&O.jsx("div",{className:"mb-4 flex flex-wrap gap-2",children:t.tags.map((e,t)=>O.jsxs("span",{className:"badge badge-primary text-xs flex items-center gap-1.5 px-2.5 py-1",children:[O.jsx(ke,{className:"w-3 h-3"}),e]},t))}),O.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-surface-100",children:[O.jsx("div",{className:"flex items-center gap-3",children:t.due_date&&O.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium "+(i?"text-red-600":"text-surface-600"),children:[O.jsx(Q,{className:"w-3.5 h-3.5 "+(i?"text-red-500":"text-surface-400")}),O.jsxs("span",{className:i?"font-semibold":"",children:[(a=t.due_date,a?new Date(a).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}):null),i&&" (Overdue)"]})]})}),O.jsxs("div",{className:"flex items-center gap-3",children:[t.comment_count>0&&O.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-surface-500",children:[O.jsx(pe,{className:"w-3.5 h-3.5"}),O.jsx("span",{className:"font-medium",children:t.comment_count})]}),t.attachment_count>0&&O.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-surface-500",children:[O.jsx(me,{className:"w-3.5 h-3.5"}),O.jsx("span",{className:"font-medium",children:t.attachment_count})]})]})]})]},t.id)})})})]},e.id)}),N&&O.jsx("div",{className:"card p-6 animate-scale-in bg-surface-100",children:O.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),R.trim()){A(!0);try{const e=await M.createMission(t,R);h([...d,e]),f({...p,[e.id]:[]}),E(""),T(!1)}catch(n){console.error("Failed to create mission:",n)}finally{A(!1)}}},children:[O.jsx("label",{className:"label mb-2 text-base",children:"Mission Name"}),O.jsx("input",{type:"text",value:R,onChange:e=>E(e.target.value),placeholder:"Enter mission name...",className:"input mb-4",autoFocus:!0}),O.jsxs("div",{className:"flex gap-3",children:[O.jsx("button",{type:"button",onClick:()=>{T(!1),E("")},className:"flex-1 btn-secondary",children:"Cancel"}),O.jsx("button",{type:"submit",disabled:D||!R.trim(),className:"flex-1 btn-primary",children:D?"Creating...":"Create Mission"})]})]})}),0===d.length&&!N&&O.jsxs("div",{className:"card p-16 text-center bg-surface-100",children:[O.jsx("div",{className:"w-20 h-20 rounded-full bg-surface-100 flex items-center justify-center mx-auto mb-6",children:O.jsx(be,{className:"w-10 h-10 text-surface-400"})}),O.jsx("h3",{className:"text-lg font-semibold text-surface-900 mb-2",children:"No missions yet"}),O.jsx("p",{className:"text-surface-500 mb-8 max-w-md mx-auto",children:"Create your first mission to start organizing tasks and tracking progress"}),O.jsxs("button",{onClick:()=>T(!0),className:"btn-primary",children:[O.jsx(be,{className:"w-5 h-5"}),"Create First Mission"]})]})]}),v&&O.jsx($e,{task:v,onClose:()=>y(null),onEdit:()=>{w(v),y(null),x(!0)},onDelete:()=>{V(),y(null)},onUpdate:V}),C&&O.jsx(Ue,{task:b,missionId:P,projectId:parseInt(t),members:c.members||[],onClose:()=>{x(!1),w(null),j(null)},onSave:()=>{V(),x(!1),w(null),j(null)}}),S&&O.jsx(Ke,{projectId:parseInt(t),members:c.members||[],isOwner:"owner"===c.member_role,onClose:()=>k(!1),onUpdate:()=>G()}),F&&O.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>I(null)})]}):O.jsxs("div",{className:"text-center py-20",children:[O.jsx("p",{className:"text-surface-500",children:"Project not found"}),O.jsx(s,{to:"/",className:"text-primary-700 hover:text-primary-800 mt-2 inline-block font-medium",children:"Back to Dashboard"})]})};function Ze(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=Ze(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Je(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=Ze(e))&&(r&&(r+=" "),r+=t);return r}var Qe=Array.isArray,et="object"==typeof l&&l&&l.Object===Object&&l,tt=et,nt="object"==typeof self&&self&&self.Object===Object&&self,rt=tt||nt||Function("return this")(),ot=rt.Symbol,it=ot,st=Object.prototype,at=st.hasOwnProperty,lt=st.toString,ct=it?it.toStringTag:void 0;var ut=function(e){var t=at.call(e,ct),n=e[ct];try{e[ct]=void 0;var r=!0}catch(i){}var o=lt.call(e);return r&&(t?e[ct]=n:delete e[ct]),o},dt=Object.prototype.toString;var ht=ut,pt=function(e){return dt.call(e)},ft=ot?ot.toStringTag:void 0;var gt=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ft&&ft in Object(e)?ht(e):pt(e)};var mt=function(e){return null!=e&&"object"==typeof e},vt=gt,yt=mt;var bt=function(e){return"symbol"==typeof e||yt(e)&&"[object Symbol]"==vt(e)},wt=Qe,Ct=bt,xt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,St=/^\w*$/;var kt=function(e,t){if(wt(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Ct(e))||(St.test(e)||!xt.test(e)||null!=t&&e in Object(t))};var Pt=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const jt=c(Pt);var Ot=gt,Rt=Pt;var Et=function(e){if(!Rt(e))return!1;var t=Ot(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const Dt=c(Et);var Mt,At=rt["__core-js_shared__"],Nt=(Mt=/[^.]+$/.exec(At&&At.keys&&At.keys.IE_PROTO||""))?"Symbol(src)_1."+Mt:"";var Tt=function(e){return!!Nt&&Nt in e},Ft=Function.prototype.toString;var It=function(e){if(null!=e){try{return Ft.call(e)}catch(t){}try{return e+""}catch(t){}}return""},Lt=Et,Bt=Tt,Ht=Pt,_t=It,Gt=/^\[object .+?Constructor\]$/,Vt=Function.prototype,Wt=Object.prototype,zt=Vt.toString,$t=Wt.hasOwnProperty,Ut=RegExp("^"+zt.call($t).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Kt=function(e){return!(!Ht(e)||Bt(e))&&(Lt(e)?Ut:Gt).test(_t(e))},qt=function(e,t){return null==e?void 0:e[t]};var Xt=function(e,t){var n=qt(e,t);return Kt(n)?n:void 0},Yt=Xt(Object,"create"),Zt=Yt;var Jt=function(){this.__data__=Zt?Zt(null):{},this.size=0};var Qt=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},en=Yt,tn=Object.prototype.hasOwnProperty;var nn=function(e){var t=this.__data__;if(en){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return tn.call(t,e)?t[e]:void 0},rn=Yt,on=Object.prototype.hasOwnProperty;var sn=Yt;var an=Jt,ln=Qt,cn=nn,un=function(e){var t=this.__data__;return rn?void 0!==t[e]:on.call(t,e)},dn=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=sn&&void 0===t?"__lodash_hash_undefined__":t,this};function hn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}hn.prototype.clear=an,hn.prototype.delete=ln,hn.prototype.get=cn,hn.prototype.has=un,hn.prototype.set=dn;var pn=hn;var fn=function(){this.__data__=[],this.size=0};var gn=function(e,t){return e===t||e!=e&&t!=t},mn=gn;var vn=function(e,t){for(var n=e.length;n--;)if(mn(e[n][0],t))return n;return-1},yn=vn,bn=Array.prototype.splice;var wn=vn;var Cn=vn;var xn=vn;var Sn=fn,kn=function(e){var t=this.__data__,n=yn(t,e);return!(n<0)&&(n==t.length-1?t.pop():bn.call(t,n,1),--this.size,!0)},Pn=function(e){var t=this.__data__,n=wn(t,e);return n<0?void 0:t[n][1]},jn=function(e){return Cn(this.__data__,e)>-1},On=function(e,t){var n=this.__data__,r=xn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function Rn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Rn.prototype.clear=Sn,Rn.prototype.delete=kn,Rn.prototype.get=Pn,Rn.prototype.has=jn,Rn.prototype.set=On;var En=Rn,Dn=Xt(rt,"Map"),Mn=pn,An=En,Nn=Dn;var Tn=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Fn=function(e,t){var n=e.__data__;return Tn(t)?n["string"==typeof t?"string":"hash"]:n.map},In=Fn;var Ln=Fn;var Bn=Fn;var Hn=Fn;var _n=function(){this.size=0,this.__data__={hash:new Mn,map:new(Nn||An),string:new Mn}},Gn=function(e){var t=In(this,e).delete(e);return this.size-=t?1:0,t},Vn=function(e){return Ln(this,e).get(e)},Wn=function(e){return Bn(this,e).has(e)},zn=function(e,t){var n=Hn(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function $n(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}$n.prototype.clear=_n,$n.prototype.delete=Gn,$n.prototype.get=Vn,$n.prototype.has=Wn,$n.prototype.set=zn;var Un=$n,Kn=Un;function qn(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var s=e.apply(this,r);return n.cache=i.set(o,s)||i,s};return n.cache=new(qn.Cache||Kn),n}qn.Cache=Kn;var Xn=qn;const Yn=c(Xn);var Zn=Xn;var Jn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qn=/\\(\\)?/g,er=function(e){var t=Zn(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Jn,function(e,n,r,o){t.push(r?o.replace(Qn,"$1"):n||e)}),t});var tr=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o},nr=tr,rr=Qe,or=bt,ir=ot?ot.prototype:void 0,sr=ir?ir.toString:void 0;var ar=function e(t){if("string"==typeof t)return t;if(rr(t))return nr(t,e)+"";if(or(t))return sr?sr.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},lr=ar;var cr=function(e){return null==e?"":lr(e)},ur=Qe,dr=kt,hr=er,pr=cr;var fr=function(e,t){return ur(e)?e:dr(e,t)?[e]:hr(pr(e))},gr=bt;var mr=function(e){if("string"==typeof e||gr(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},vr=fr,yr=mr;var br=function(e,t){for(var n=0,r=(t=vr(t,e)).length;null!=e&&n<r;)e=e[yr(t[n++])];return n&&n==r?e:void 0},wr=br;var Cr=function(e,t,n){var r=null==e?void 0:wr(e,t);return void 0===r?n:r};const xr=c(Cr);const Sr=c(function(e){return null==e});var kr=gt,Pr=Qe,jr=mt;const Or=c(function(e){return"string"==typeof e||!Pr(e)&&jr(e)&&"[object String]"==kr(e)});var Rr,Er={exports:{}},Dr={},Mr=Symbol.for("react.element"),Ar=Symbol.for("react.portal"),Nr=Symbol.for("react.fragment"),Tr=Symbol.for("react.strict_mode"),Fr=Symbol.for("react.profiler"),Ir=Symbol.for("react.provider"),Lr=Symbol.for("react.context"),Br=Symbol.for("react.server_context"),Hr=Symbol.for("react.forward_ref"),_r=Symbol.for("react.suspense"),Gr=Symbol.for("react.suspense_list"),Vr=Symbol.for("react.memo"),Wr=Symbol.for("react.lazy"),zr=Symbol.for("react.offscreen");function $r(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case Mr:switch(e=e.type){case Nr:case Fr:case Tr:case _r:case Gr:return e;default:switch(e=e&&e.$$typeof){case Br:case Lr:case Hr:case Wr:case Vr:case Ir:return e;default:return t}}case Ar:return t}}}Rr=Symbol.for("react.module.reference"),Dr.ContextConsumer=Lr,Dr.ContextProvider=Ir,Dr.Element=Mr,Dr.ForwardRef=Hr,Dr.Fragment=Nr,Dr.Lazy=Wr,Dr.Memo=Vr,Dr.Portal=Ar,Dr.Profiler=Fr,Dr.StrictMode=Tr,Dr.Suspense=_r,Dr.SuspenseList=Gr,Dr.isAsyncMode=function(){return!1},Dr.isConcurrentMode=function(){return!1},Dr.isContextConsumer=function(e){return $r(e)===Lr},Dr.isContextProvider=function(e){return $r(e)===Ir},Dr.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Mr},Dr.isForwardRef=function(e){return $r(e)===Hr},Dr.isFragment=function(e){return $r(e)===Nr},Dr.isLazy=function(e){return $r(e)===Wr},Dr.isMemo=function(e){return $r(e)===Vr},Dr.isPortal=function(e){return $r(e)===Ar},Dr.isProfiler=function(e){return $r(e)===Fr},Dr.isStrictMode=function(e){return $r(e)===Tr},Dr.isSuspense=function(e){return $r(e)===_r},Dr.isSuspenseList=function(e){return $r(e)===Gr},Dr.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===Nr||e===Fr||e===Tr||e===_r||e===Gr||e===zr||"object"==typeof e&&null!==e&&(e.$$typeof===Wr||e.$$typeof===Vr||e.$$typeof===Ir||e.$$typeof===Lr||e.$$typeof===Hr||e.$$typeof===Rr||void 0!==e.getModuleId)},Dr.typeOf=$r,Er.exports=Dr;var Ur=Er.exports,Kr=gt,qr=mt;var Xr=function(e){return"number"==typeof e||qr(e)&&"[object Number]"==Kr(e)};const Yr=c(Xr);var Zr=Xr;const Jr=c(function(e){return Zr(e)&&e!=+e});var Qr=function(e){return 0===e?0:e>0?1:-1},eo=function(e){return Or(e)&&e.indexOf("%")===e.length-1},to=function(e){return Yr(e)&&!Jr(e)},no=function(e){return to(e)||Or(e)},ro=0,oo=function(e){var t=++ro;return"".concat(e||"").concat(t)},io=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!to(e)&&!Or(e))return r;if(eo(e)){var i=e.indexOf("%");n=t*parseFloat(e.slice(0,i))/100}else n=+e;return Jr(n)&&(n=r),o&&n>t&&(n=t),n},so=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},ao=function(e,t){return to(e)&&to(t)?function(n){return e+n*(t-e)}:function(){return t}};function lo(e,t,n){return e&&e.length?e.find(function(e){return e&&("function"==typeof t?t(e):xr(e,t))===n}):null}var co=function(e,t){return to(e)&&to(t)?e-t:Or(e)&&Or(t)?e.localeCompare(t):e instanceof Date&&t instanceof Date?e.getTime()-t.getTime():String(e).localeCompare(String(t))};function uo(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function ho(e){return(ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var po=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],fo=["points","pathLength"],go={svg:["viewBox","children"],polygon:fo,polyline:fo},mo=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],vo=function(e,t){if(!e||"function"==typeof e||"boolean"==typeof e)return null;var n=e;if(r.isValidElement(e)&&(n=e.props),!jt(n))return null;var o={};return Object.keys(n).forEach(function(e){mo.includes(e)&&(o[e]=t||function(t){return n[e](n,t)})}),o},yo=function(e,t,n){if(!jt(e)||"object"!==ho(e))return null;var r=null;return Object.keys(e).forEach(function(o){var i=e[o];mo.includes(o)&&"function"==typeof i&&(r||(r={}),r[o]=function(e,t,n){return function(r){return e(t,n,r),null}}(i,t,n))}),r},bo=["children"],wo=["children"];function Co(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function xo(e){return(xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var So={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},ko=function(e){return"string"==typeof e?e:e?e.displayName||e.name||"Component":""},Po=null,jo=null,Oo=function e(t){if(t===Po&&Array.isArray(jo))return jo;var n=[];return r.Children.forEach(t,function(t){Sr(t)||(Ur.isFragment(t)?n=n.concat(e(t.props.children)):n.push(t))}),jo=n,Po=t,n};function Ro(e,t){var n=[],r=[];return r=Array.isArray(t)?t.map(function(e){return ko(e)}):[ko(t)],Oo(e).forEach(function(e){var t=xr(e,"type.displayName")||xr(e,"type.name");-1!==r.indexOf(t)&&n.push(e)}),n}function Eo(e,t){var n=Ro(e,t);return n&&n[0]}var Do=function(e){if(!e||!e.props)return!1;var t=e.props,n=t.width,r=t.height;return!(!to(n)||n<=0||!to(r)||r<=0)},Mo=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Ao=function(e,t,n){if(!e||"function"==typeof e||"boolean"==typeof e)return null;var o=e;if(r.isValidElement(e)&&(o=e.props),!jt(o))return null;var i={};return Object.keys(o).forEach(function(e){var r;(function(e,t,n,r){var o,i=null!==(o=null==go?void 0:go[r])&&void 0!==o?o:[];return t.startsWith("data-")||!Dt(e)&&(r&&i.includes(t)||po.includes(t))||n&&mo.includes(t)})(null===(r=o)||void 0===r?void 0:r[e],e,t,n)&&(i[e]=o[e])}),i},No=function e(t,n){if(t===n)return!0;var o=r.Children.count(t);if(o!==r.Children.count(n))return!1;if(0===o)return!0;if(1===o)return To(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var i=0;i<o;i++){var s=t[i],a=n[i];if(Array.isArray(s)||Array.isArray(a)){if(!e(s,a))return!1}else if(!To(s,a))return!1}return!0},To=function(e,t){if(Sr(e)&&Sr(t))return!0;if(!Sr(e)&&!Sr(t)){var n=e.props||{},r=n.children,o=Co(n,bo),i=t.props||{},s=i.children,a=Co(i,wo);return r&&s?uo(o,a)&&No(r,s):!r&&!s&&uo(o,a)}return!1},Fo=function(e,t){var n=[],r={};return Oo(e).forEach(function(e,o){if(function(e){return e&&e.type&&Or(e.type)&&Mo.indexOf(e.type)>=0}(e))n.push(e);else if(e){var i=ko(e.type),s=t[i]||{},a=s.handler,l=s.once;if(a&&(!l||!r[i])){var c=a(e,i,o);n.push(c),r[i]=!0}}}),n},Io=["children","width","height","viewBox","className","style","title","desc"];function Lo(){return Lo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lo.apply(this,arguments)}function Bo(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Ho(e){var t=e.children,n=e.width,r=e.height,o=e.viewBox,i=e.className,s=e.style,a=e.title,l=e.desc,c=Bo(e,Io),d=o||{width:n,height:r,x:0,y:0},h=Je("recharts-surface",i);return u.createElement("svg",Lo({},Ao(c,!0,"svg"),{className:h,width:n,height:r,style:s,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),u.createElement("title",null,a),u.createElement("desc",null,l),t)}var _o=["children","className"];function Go(){return Go=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Go.apply(this,arguments)}function Vo(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Wo=u.forwardRef(function(e,t){var n=e.children,r=e.className,o=Vo(e,_o),i=Je("recharts-layer",r);return u.createElement("g",Go({className:i},Ao(o,!0),{ref:t}),n)}),zo=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o]};var $o=function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i};var Uo=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:$o(e,t,n)},Ko=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var qo=function(e){return Ko.test(e)};var Xo=function(e){return e.split("")},Yo="\\ud800-\\udfff",Zo="["+Yo+"]",Jo="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Qo="\\ud83c[\\udffb-\\udfff]",ei="[^"+Yo+"]",ti="(?:\\ud83c[\\udde6-\\uddff]){2}",ni="[\\ud800-\\udbff][\\udc00-\\udfff]",ri="(?:"+Jo+"|"+Qo+")"+"?",oi="[\\ufe0e\\ufe0f]?",ii=oi+ri+("(?:\\u200d(?:"+[ei,ti,ni].join("|")+")"+oi+ri+")*"),si="(?:"+[ei+Jo+"?",Jo,ti,ni,Zo].join("|")+")",ai=RegExp(Qo+"(?="+Qo+")|"+si+ii,"g");var li=Xo,ci=qo,ui=function(e){return e.match(ai)||[]};var di=Uo,hi=qo,pi=function(e){return ci(e)?ui(e):li(e)},fi=cr;const gi=c(function(e){return function(t){t=fi(t);var n=hi(t)?pi(t):void 0,r=n?n[0]:t.charAt(0),o=n?di(n,1).join(""):t.slice(1);return r[e]()+o}}("toUpperCase"));function mi(e){return function(){return e}}const vi=Math.cos,yi=Math.sin,bi=Math.sqrt,wi=Math.PI,Ci=2*wi,xi=Math.PI,Si=2*xi,ki=1e-6,Pi=Si-ki;function ji(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class Oi{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?ji:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return ji;const n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,r){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(e,t,n,r,o,i){this._append`C${+e},${+t},${+n},${+r},${this._x1=+o},${this._y1=+i}`}arcTo(e,t,n,r,o){if(e=+e,t=+t,n=+n,r=+r,(o=+o)<0)throw new Error(`negative radius: ${o}`);let i=this._x1,s=this._y1,a=n-e,l=r-t,c=i-e,u=s-t,d=c*c+u*u;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(d>ki)if(Math.abs(u*a-l*c)>ki&&o){let h=n-i,p=r-s,f=a*a+l*l,g=h*h+p*p,m=Math.sqrt(f),v=Math.sqrt(d),y=o*Math.tan((xi-Math.acos((f+d-g)/(2*m*v)))/2),b=y/v,w=y/m;Math.abs(b-1)>ki&&this._append`L${e+b*c},${t+b*u}`,this._append`A${o},${o},0,0,${+(u*h>c*p)},${this._x1=e+w*a},${this._y1=t+w*l}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,n,r,o,i){if(e=+e,t=+t,i=!!i,(n=+n)<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(r),a=n*Math.sin(r),l=e+s,c=t+a,u=1^i,d=i?r-o:o-r;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>ki||Math.abs(this._y1-c)>ki)&&this._append`L${l},${c}`,n&&(d<0&&(d=d%Si+Si),d>Pi?this._append`A${n},${n},0,1,${u},${e-s},${t-a}A${n},${n},0,1,${u},${this._x1=l},${this._y1=c}`:d>ki&&this._append`A${n},${n},0,${+(d>=xi)},${u},${this._x1=e+n*Math.cos(o)},${this._y1=t+n*Math.sin(o)}`)}rect(e,t,n,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function Ri(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);t=e}return e},()=>new Oi(t)}function Ei(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Di(e){this._context=e}function Mi(e){return new Di(e)}function Ai(e){return e[0]}function Ni(e){return e[1]}function Ti(e,t){var n=mi(!0),r=null,o=Mi,i=null,s=Ri(a);function a(a){var l,c,u,d=(a=Ei(a)).length,h=!1;for(null==r&&(i=o(u=s())),l=0;l<=d;++l)!(l<d&&n(c=a[l],l,a))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(c,l,a),+t(c,l,a));if(u)return i=null,u+""||null}return e="function"==typeof e?e:void 0===e?Ai:mi(e),t="function"==typeof t?t:void 0===t?Ni:mi(t),a.x=function(t){return arguments.length?(e="function"==typeof t?t:mi(+t),a):e},a.y=function(e){return arguments.length?(t="function"==typeof e?e:mi(+e),a):t},a.defined=function(e){return arguments.length?(n="function"==typeof e?e:mi(!!e),a):n},a.curve=function(e){return arguments.length?(o=e,null!=r&&(i=o(r)),a):o},a.context=function(e){return arguments.length?(null==e?r=i=null:i=o(r=e),a):r},a}function Fi(e,t,n){var r=null,o=mi(!0),i=null,s=Mi,a=null,l=Ri(c);function c(c){var u,d,h,p,f,g=(c=Ei(c)).length,m=!1,v=new Array(g),y=new Array(g);for(null==i&&(a=s(f=l())),u=0;u<=g;++u){if(!(u<g&&o(p=c[u],u,c))===m)if(m=!m)d=u,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),h=u-1;h>=d;--h)a.point(v[h],y[h]);a.lineEnd(),a.areaEnd()}m&&(v[u]=+e(p,u,c),y[u]=+t(p,u,c),a.point(r?+r(p,u,c):v[u],n?+n(p,u,c):y[u]))}if(f)return a=null,f+""||null}function u(){return Ti().defined(o).curve(s).context(i)}return e="function"==typeof e?e:void 0===e?Ai:mi(+e),t="function"==typeof t?t:mi(void 0===t?0:+t),n="function"==typeof n?n:void 0===n?Ni:mi(+n),c.x=function(t){return arguments.length?(e="function"==typeof t?t:mi(+t),r=null,c):e},c.x0=function(t){return arguments.length?(e="function"==typeof t?t:mi(+t),c):e},c.x1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:mi(+e),c):r},c.y=function(e){return arguments.length?(t="function"==typeof e?e:mi(+e),n=null,c):t},c.y0=function(e){return arguments.length?(t="function"==typeof e?e:mi(+e),c):t},c.y1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:mi(+e),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(r).y(t)},c.defined=function(e){return arguments.length?(o="function"==typeof e?e:mi(!!e),c):o},c.curve=function(e){return arguments.length?(s=e,null!=i&&(a=s(i)),c):s},c.context=function(e){return arguments.length?(null==e?i=a=null:a=s(i=e),c):i},c}Di.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};class Ii{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}const Li={draw(e,t){const n=bi(t/wi);e.moveTo(n,0),e.arc(0,0,n,0,Ci)}},Bi={draw(e,t){const n=bi(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Hi=bi(1/3),_i=2*Hi,Gi={draw(e,t){const n=bi(t/_i),r=n*Hi;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Vi={draw(e,t){const n=bi(t),r=-n/2;e.rect(r,r,n,n)}},Wi=yi(wi/10)/yi(7*wi/10),zi=yi(Ci/10)*Wi,$i=-vi(Ci/10)*Wi,Ui={draw(e,t){const n=bi(.8908130915292852*t),r=zi*n,o=$i*n;e.moveTo(0,-n),e.lineTo(r,o);for(let i=1;i<5;++i){const t=Ci*i/5,s=vi(t),a=yi(t);e.lineTo(a*n,-s*n),e.lineTo(s*r-a*o,a*r+s*o)}e.closePath()}},Ki=bi(3),qi={draw(e,t){const n=-bi(t/(3*Ki));e.moveTo(0,2*n),e.lineTo(-Ki*n,-n),e.lineTo(Ki*n,-n),e.closePath()}},Xi=-.5,Yi=bi(3)/2,Zi=1/bi(12),Ji=3*(Zi/2+1),Qi={draw(e,t){const n=bi(t/Ji),r=n/2,o=n*Zi,i=r,s=n*Zi+n,a=-i,l=s;e.moveTo(r,o),e.lineTo(i,s),e.lineTo(a,l),e.lineTo(Xi*r-Yi*o,Yi*r+Xi*o),e.lineTo(Xi*i-Yi*s,Yi*i+Xi*s),e.lineTo(Xi*a-Yi*l,Yi*a+Xi*l),e.lineTo(Xi*r+Yi*o,Xi*o-Yi*r),e.lineTo(Xi*i+Yi*s,Xi*s-Yi*i),e.lineTo(Xi*a+Yi*l,Xi*l-Yi*a),e.closePath()}};function es(){}function ts(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function ns(e){this._context=e}function rs(e){this._context=e}function os(e){this._context=e}function is(e){this._context=e}function ss(e){return e<0?-1:1}function as(e,t,n){var r=e._x1-e._x0,o=t-e._x1,i=(e._y1-e._y0)/(r||o<0&&-0),s=(n-e._y1)/(o||r<0&&-0),a=(i*o+s*r)/(r+o);return(ss(i)+ss(s))*Math.min(Math.abs(i),Math.abs(s),.5*Math.abs(a))||0}function ls(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function cs(e,t,n){var r=e._x0,o=e._y0,i=e._x1,s=e._y1,a=(i-r)/3;e._context.bezierCurveTo(r+a,o+a*t,i-a,s-a*n,i,s)}function us(e){this._context=e}function ds(e){this._context=new hs(e)}function hs(e){this._context=e}function ps(e){this._context=e}function fs(e){var t,n,r=e.length-1,o=new Array(r),i=new Array(r),s=new Array(r);for(o[0]=0,i[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)o[t]=1,i[t]=4,s[t]=4*e[t]+2*e[t+1];for(o[r-1]=2,i[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=o[t]/i[t-1],i[t]-=n,s[t]-=n*s[t-1];for(o[r-1]=s[r-1]/i[r-1],t=r-2;t>=0;--t)o[t]=(s[t]-o[t+1])/i[t];for(i[r-1]=(e[r]+o[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-o[t+1];return[o,i]}function gs(e,t){this._context=e,this._t=t}function ms(e,t){if((o=e.length)>1)for(var n,r,o,i=1,s=e[t[0]],a=s.length;i<o;++i)for(r=s,s=e[t[i]],n=0;n<a;++n)s[n][1]+=s[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function vs(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function ys(e,t){return e[t]}function bs(e){const t=[];return t.key=e,t}function ws(e){return(ws="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}ns.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ts(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ts(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},rs.prototype={areaStart:es,areaEnd:es,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ts(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},os.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ts(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},is.prototype={areaStart:es,areaEnd:es,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},us.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:cs(this,this._t0,ls(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,cs(this,ls(this,n=as(this,e,t)),n);break;default:cs(this,this._t0,n=as(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(ds.prototype=Object.create(us.prototype)).point=function(e,t){us.prototype.point.call(this,t,e)},hs.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,o,i){this._context.bezierCurveTo(t,e,r,n,i,o)}},ps.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=fs(e),o=fs(t),i=0,s=1;s<n;++i,++s)this._context.bezierCurveTo(r[0][i],o[0][i],r[1][i],o[1][i],e[s],t[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},gs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var Cs=["type","size","sizeType"];function xs(){return xs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xs.apply(this,arguments)}function Ss(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ks(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ss(Object(n),!0).forEach(function(t){Ps(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ss(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ps(e,t,n){var r;return r=function(e,t){if("object"!=ws(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=ws(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==ws(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function js(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Os={symbolCircle:Li,symbolCross:Bi,symbolDiamond:Gi,symbolSquare:Vi,symbolStar:Ui,symbolTriangle:qi,symbolWye:Qi},Rs=Math.PI/180,Es=function(e){var t,n,r=e.type,o=void 0===r?"circle":r,i=e.size,s=void 0===i?64:i,a=e.sizeType,l=void 0===a?"area":a,c=ks(ks({},js(e,Cs)),{},{type:o,size:s,sizeType:l}),d=c.className,h=c.cx,p=c.cy,f=Ao(c,!0);return h===+h&&p===+p&&s===+s?u.createElement("path",xs({},f,{className:Je("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(p,")"),d:(t=function(e){var t="symbol".concat(gi(e));return Os[t]||Li}(o),n=function(e,t){let n=null,r=Ri(o);function o(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return e="function"==typeof e?e:mi(e||Li),t="function"==typeof t?t:mi(void 0===t?64:+t),o.type=function(t){return arguments.length?(e="function"==typeof t?t:mi(t),o):e},o.size=function(e){return arguments.length?(t="function"==typeof e?e:mi(+e),o):t},o.context=function(e){return arguments.length?(n=null==e?null:e,o):n},o}().type(t).size(function(e,t,n){if("area"===t)return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var r=18*Rs;return 1.25*e*e*(Math.tan(r)-Math.tan(2*r)*Math.pow(Math.tan(r),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}}(s,l,o)),n())})):null};function Ds(e){return(Ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ms(){return Ms=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ms.apply(this,arguments)}function As(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ns(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Hs(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ts(e,t,n){return t=Is(t),function(e,t){if(t&&("object"===Ds(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Fs()?Reflect.construct(t,n||[],Is(e).constructor):t.apply(e,n))}function Fs(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Fs=function(){return!!e})()}function Is(e){return(Is=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ls(e,t){return(Ls=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Bs(e,t,n){return(t=Hs(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hs(e){var t=function(e,t){if("object"!=Ds(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Ds(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Ds(t)?t:t+""}Es.registerSymbol=function(e,t){Os["symbol".concat(gi(e))]=t};var _s=32,Gs=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ts(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ls(e,t)}(e,r.PureComponent),Ns(e,[{key:"renderIcon",value:function(e){var t=this.props.inactiveColor,n=16,r=_s/6,o=_s/3,i=e.inactive?t:e.color;if("plainline"===e.type)return u.createElement("line",{strokeWidth:4,fill:"none",stroke:i,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:n,x2:_s,y2:n,className:"recharts-legend-icon"});if("line"===e.type)return u.createElement("path",{strokeWidth:4,fill:"none",stroke:i,d:"M0,".concat(n,"h").concat(o,"\n            A").concat(r,",").concat(r,",0,1,1,").concat(2*o,",").concat(n,"\n            H").concat(_s,"M").concat(2*o,",").concat(n,"\n            A").concat(r,",").concat(r,",0,1,1,").concat(o,",").concat(n),className:"recharts-legend-icon"});if("rect"===e.type)return u.createElement("path",{stroke:"none",fill:i,d:"M0,".concat(4,"h").concat(_s,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(u.isValidElement(e.legendIcon)){var s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?As(Object(n),!0).forEach(function(t){Bs(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):As(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);return delete s.legendIcon,u.cloneElement(e.legendIcon,s)}return u.createElement(Es,{fill:i,cx:n,cy:n,size:_s,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,t=this.props,n=t.payload,r=t.iconSize,o=t.layout,i=t.formatter,s=t.inactiveColor,a={x:0,y:0,width:_s,height:_s},l={display:"horizontal"===o?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return n.map(function(t,n){var o=t.formatter||i,d=Je(Bs(Bs({"recharts-legend-item":!0},"legend-item-".concat(n),!0),"inactive",t.inactive));if("none"===t.type)return null;var h=Dt(t.value)?null:t.value;zo(!Dt(t.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var p=t.inactive?s:t.color;return u.createElement("li",Ms({className:d,style:l,key:"legend-item-".concat(n)},yo(e.props,t,n)),u.createElement(Ho,{width:r,height:r,viewBox:a,style:c},e.renderIcon(t)),u.createElement("span",{className:"recharts-legend-item-text",style:{color:p}},o?o(h,t,n):h))})}},{key:"render",value:function(){var e=this.props,t=e.payload,n=e.layout,r=e.align;if(!t||!t.length)return null;var o={padding:0,margin:0,textAlign:"horizontal"===n?r:"left"};return u.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}();Bs(Gs,"displayName","Legend"),Bs(Gs,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Vs=En;var Ws=En,zs=Dn,$s=Un;var Us=En,Ks=function(){this.__data__=new Vs,this.size=0},qs=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Xs=function(e){return this.__data__.get(e)},Ys=function(e){return this.__data__.has(e)},Zs=function(e,t){var n=this.__data__;if(n instanceof Ws){var r=n.__data__;if(!zs||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new $s(r)}return n.set(e,t),this.size=n.size,this};function Js(e){var t=this.__data__=new Us(e);this.size=t.size}Js.prototype.clear=Ks,Js.prototype.delete=qs,Js.prototype.get=Xs,Js.prototype.has=Ys,Js.prototype.set=Zs;var Qs=Js;var ea=Un,ta=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},na=function(e){return this.__data__.has(e)};function ra(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ea;++t<n;)this.add(e[t])}ra.prototype.add=ra.prototype.push=ta,ra.prototype.has=na;var oa=ra;var ia=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};var sa=function(e,t){return e.has(t)},aa=oa,la=ia,ca=sa;var ua=function(e,t,n,r,o,i){var s=1&n,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var c=i.get(e),u=i.get(t);if(c&&u)return c==t&&u==e;var d=-1,h=!0,p=2&n?new aa:void 0;for(i.set(e,t),i.set(t,e);++d<a;){var f=e[d],g=t[d];if(r)var m=s?r(g,f,d,t,e,i):r(f,g,d,e,t,i);if(void 0!==m){if(m)continue;h=!1;break}if(p){if(!la(t,function(e,t){if(!ca(p,t)&&(f===e||o(f,e,n,r,i)))return p.push(t)})){h=!1;break}}else if(f!==g&&!o(f,g,n,r,i)){h=!1;break}}return i.delete(e),i.delete(t),h};var da=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n},ha=rt.Uint8Array,pa=gn,fa=ua,ga=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n},ma=da,va=ot?ot.prototype:void 0,ya=va?va.valueOf:void 0;var ba=function(e,t,n,r,o,i,s){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new ha(e),new ha(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return pa(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=ga;case"[object Set]":var l=1&r;if(a||(a=ma),e.size!=t.size&&!l)return!1;var c=s.get(e);if(c)return c==t;r|=2,s.set(e,t);var u=fa(a(e),a(t),r,o,i,s);return s.delete(e),u;case"[object Symbol]":if(ya)return ya.call(e)==ya.call(t)}return!1};var wa=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e},Ca=wa,xa=Qe;var Sa=function(e,t,n){var r=t(e);return xa(e)?r:Ca(r,n(e))};var ka=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var s=e[n];t(s,n,e)&&(i[o++]=s)}return i},Pa=function(){return[]},ja=Object.prototype.propertyIsEnumerable,Oa=Object.getOwnPropertySymbols,Ra=Oa?function(e){return null==e?[]:(e=Object(e),ka(Oa(e),function(t){return ja.call(e,t)}))}:Pa;var Ea=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},Da=gt,Ma=mt;var Aa,Na,Ta,Fa,Ia,La,Ba,Ha,_a=function(e){return Ma(e)&&"[object Arguments]"==Da(e)},Ga=mt,Va=Object.prototype,Wa=Va.hasOwnProperty,za=Va.propertyIsEnumerable,$a=_a(function(){return arguments}())?_a:function(e){return Ga(e)&&Wa.call(e,"callee")&&!za.call(e,"callee")},Ua={exports:{}};Aa=Ua,Ta=rt,Fa=function(){return!1},Ia=(Na=Ua.exports)&&!Na.nodeType&&Na,La=Ia&&Aa&&!Aa.nodeType&&Aa,Ba=La&&La.exports===Ia?Ta.Buffer:void 0,Ha=(Ba?Ba.isBuffer:void 0)||Fa,Aa.exports=Ha;var Ka=Ua.exports,qa=/^(?:0|[1-9]\d*)$/;var Xa=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&qa.test(e))&&e>-1&&e%1==0&&e<t};var Ya=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},Za=gt,Ja=Ya,Qa=mt,el={};el["[object Float32Array]"]=el["[object Float64Array]"]=el["[object Int8Array]"]=el["[object Int16Array]"]=el["[object Int32Array]"]=el["[object Uint8Array]"]=el["[object Uint8ClampedArray]"]=el["[object Uint16Array]"]=el["[object Uint32Array]"]=!0,el["[object Arguments]"]=el["[object Array]"]=el["[object ArrayBuffer]"]=el["[object Boolean]"]=el["[object DataView]"]=el["[object Date]"]=el["[object Error]"]=el["[object Function]"]=el["[object Map]"]=el["[object Number]"]=el["[object Object]"]=el["[object RegExp]"]=el["[object Set]"]=el["[object String]"]=el["[object WeakMap]"]=!1;var tl=function(e){return Qa(e)&&Ja(e.length)&&!!el[Za(e)]};var nl=function(e){return function(t){return e(t)}},rl={exports:{}};!function(e,t){var n=et,r=t&&!t.nodeType&&t,o=r&&e&&!e.nodeType&&e,i=o&&o.exports===r&&n.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(t){}}();e.exports=s}(rl,rl.exports);var ol=rl.exports,il=tl,sl=nl,al=ol&&ol.isTypedArray,ll=al?sl(al):il,cl=Ea,ul=$a,dl=Qe,hl=Ka,pl=Xa,fl=ll,gl=Object.prototype.hasOwnProperty;var ml=function(e,t){var n=dl(e),r=!n&&ul(e),o=!n&&!r&&hl(e),i=!n&&!r&&!o&&fl(e),s=n||r||o||i,a=s?cl(e.length,String):[],l=a.length;for(var c in e)!t&&!gl.call(e,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||pl(c,l))||a.push(c);return a},vl=Object.prototype;var yl=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||vl)};var bl=function(e,t){return function(n){return e(t(n))}},wl=bl(Object.keys,Object),Cl=yl,xl=wl,Sl=Object.prototype.hasOwnProperty;var kl=Et,Pl=Ya;var jl=function(e){return null!=e&&Pl(e.length)&&!kl(e)},Ol=ml,Rl=function(e){if(!Cl(e))return xl(e);var t=[];for(var n in Object(e))Sl.call(e,n)&&"constructor"!=n&&t.push(n);return t},El=jl;var Dl=function(e){return El(e)?Ol(e):Rl(e)},Ml=Sa,Al=Ra,Nl=Dl;var Tl=function(e){return Ml(e,Nl,Al)},Fl=Object.prototype.hasOwnProperty;var Il=function(e,t,n,r,o,i){var s=1&n,a=Tl(e),l=a.length;if(l!=Tl(t).length&&!s)return!1;for(var c=l;c--;){var u=a[c];if(!(s?u in t:Fl.call(t,u)))return!1}var d=i.get(e),h=i.get(t);if(d&&h)return d==t&&h==e;var p=!0;i.set(e,t),i.set(t,e);for(var f=s;++c<l;){var g=e[u=a[c]],m=t[u];if(r)var v=s?r(m,g,u,t,e,i):r(g,m,u,e,t,i);if(!(void 0===v?g===m||o(g,m,n,r,i):v)){p=!1;break}f||(f="constructor"==u)}if(p&&!f){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(p=!1)}return i.delete(e),i.delete(t),p},Ll=Xt(rt,"DataView"),Bl=Xt(rt,"Promise"),Hl=Xt(rt,"Set"),_l=Ll,Gl=Dn,Vl=Bl,Wl=Hl,zl=Xt(rt,"WeakMap"),$l=gt,Ul=It,Kl="[object Map]",ql="[object Promise]",Xl="[object Set]",Yl="[object WeakMap]",Zl="[object DataView]",Jl=Ul(_l),Ql=Ul(Gl),ec=Ul(Vl),tc=Ul(Wl),nc=Ul(zl),rc=$l;(_l&&rc(new _l(new ArrayBuffer(1)))!=Zl||Gl&&rc(new Gl)!=Kl||Vl&&rc(Vl.resolve())!=ql||Wl&&rc(new Wl)!=Xl||zl&&rc(new zl)!=Yl)&&(rc=function(e){var t=$l(e),n="[object Object]"==t?e.constructor:void 0,r=n?Ul(n):"";if(r)switch(r){case Jl:return Zl;case Ql:return Kl;case ec:return ql;case tc:return Xl;case nc:return Yl}return t});var oc=Qs,ic=ua,sc=ba,ac=Il,lc=rc,cc=Qe,uc=Ka,dc=ll,hc="[object Arguments]",pc="[object Array]",fc="[object Object]",gc=Object.prototype.hasOwnProperty;var mc=function(e,t,n,r,o,i){var s=cc(e),a=cc(t),l=s?pc:lc(e),c=a?pc:lc(t),u=(l=l==hc?fc:l)==fc,d=(c=c==hc?fc:c)==fc,h=l==c;if(h&&uc(e)){if(!uc(t))return!1;s=!0,u=!1}if(h&&!u)return i||(i=new oc),s||dc(e)?ic(e,t,n,r,o,i):sc(e,t,l,n,r,o,i);if(!(1&n)){var p=u&&gc.call(e,"__wrapped__"),f=d&&gc.call(t,"__wrapped__");if(p||f){var g=p?e.value():e,m=f?t.value():t;return i||(i=new oc),o(g,m,n,r,i)}}return!!h&&(i||(i=new oc),ac(e,t,n,r,o,i))},vc=mt;var yc=function e(t,n,r,o,i){return t===n||(null==t||null==n||!vc(t)&&!vc(n)?t!=t&&n!=n:mc(t,n,r,o,e,i))},bc=Qs,wc=yc;var Cc=Pt;var xc=function(e){return e==e&&!Cc(e)},Sc=xc,kc=Dl;var Pc=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}},jc=function(e,t,n,r){var o=n.length,i=o,s=!r;if(null==e)return!i;for(e=Object(e);o--;){var a=n[o];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<i;){var l=(a=n[o])[0],c=e[l],u=a[1];if(s&&a[2]){if(void 0===c&&!(l in e))return!1}else{var d=new bc;if(r)var h=r(c,u,l,e,t,d);if(!(void 0===h?wc(u,c,3,r,d):h))return!1}}return!0},Oc=function(e){for(var t=kc(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,Sc(o)]}return t},Rc=Pc;var Ec=fr,Dc=$a,Mc=Qe,Ac=Xa,Nc=Ya,Tc=mr;var Fc=function(e,t){return null!=e&&t in Object(e)},Ic=function(e,t,n){for(var r=-1,o=(t=Ec(t,e)).length,i=!1;++r<o;){var s=Tc(t[r]);if(!(i=null!=e&&n(e,s)))break;e=e[s]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&Nc(o)&&Ac(s,o)&&(Mc(e)||Dc(e))};var Lc=yc,Bc=Cr,Hc=function(e,t){return null!=e&&Ic(e,t,Fc)},_c=kt,Gc=xc,Vc=Pc,Wc=mr;var zc=function(e){return e};var $c=br;var Uc=function(e){return function(t){return null==t?void 0:t[e]}},Kc=function(e){return function(t){return $c(t,e)}},qc=kt,Xc=mr;var Yc=function(e){var t=Oc(e);return 1==t.length&&t[0][2]?Rc(t[0][0],t[0][1]):function(n){return n===e||jc(n,e,t)}},Zc=function(e,t){return _c(e)&&Gc(t)?Vc(Wc(e),t):function(n){var r=Bc(n,e);return void 0===r&&r===t?Hc(n,e):Lc(t,r,3)}},Jc=zc,Qc=Qe,eu=function(e){return qc(e)?Uc(Xc(e)):Kc(e)};var tu=function(e){return"function"==typeof e?e:null==e?Jc:"object"==typeof e?Qc(e)?Zc(e[0],e[1]):Yc(e):eu(e)};var nu=function(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1};var ru=nu,ou=function(e){return e!=e},iu=function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1};var su=function(e,t,n){return t==t?iu(e,t,n):ru(e,ou,n)};var au=function(e,t){return!!(null==e?0:e.length)&&su(e,t,0)>-1};var lu=function(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1};var cu=Hl,uu=function(){},du=cu&&1/da(new cu([,-0]))[1]==1/0?function(e){return new cu(e)}:uu,hu=oa,pu=au,fu=lu,gu=sa,mu=du,vu=da;var yu=tu,bu=function(e,t,n){var r=-1,o=pu,i=e.length,s=!0,a=[],l=a;if(n)s=!1,o=fu;else if(i>=200){var c=t?null:mu(e);if(c)return vu(c);s=!1,o=gu,l=new hu}else l=t?[]:a;e:for(;++r<i;){var u=e[r],d=t?t(u):u;if(u=n||0!==u?u:0,s&&d==d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),a.push(u)}else o(l,d,n)||(l!==a&&l.push(d),a.push(u))}return a};const wu=c(function(e,t){return e&&e.length?bu(e,yu(t)):[]});function Cu(e,t,n){return!0===t?wu(e,n):Dt(t)?wu(e,t):e}function xu(e){return(xu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Su=["ref"];function ku(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Pu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ku(Object(n),!0).forEach(function(t){Mu(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ku(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ju(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Au(r.key),r)}}function Ou(e,t,n){return t=Eu(t),function(e,t){if(t&&("object"===xu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ru()?Reflect.construct(t,n||[],Eu(e).constructor):t.apply(e,n))}function Ru(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ru=function(){return!!e})()}function Eu(e){return(Eu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Du(e,t){return(Du=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Mu(e,t,n){return(t=Au(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Au(e){var t=function(e,t){if("object"!=xu(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=xu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==xu(t)?t:t+""}function Nu(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Tu(e){return e.value}var Fu=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return Mu(t=Ou(this,e,[].concat(r)),"lastBoundingBox",{width:-1,height:-1}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Du(e,t)}(e,r.PureComponent),t=e,o=[{key:"getWithHeight",value:function(e,t){var n=Pu(Pu({},this.defaultProps),e.props).layout;return"vertical"===n&&to(e.props.height)?{height:e.props.height}:"horizontal"===n?{width:e.props.width||t}:null}}],(n=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();return e.height=this.wrapperNode.offsetHeight,e.width=this.wrapperNode.offsetWidth,e}return null}},{key:"updateBBox",value:function(){var e=this.props.onBBoxUpdate,t=this.getBBox();t?(Math.abs(t.width-this.lastBoundingBox.width)>1||Math.abs(t.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=t.width,this.lastBoundingBox.height=t.height,e&&e(t)):-1===this.lastBoundingBox.width&&-1===this.lastBoundingBox.height||(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,e&&e(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Pu({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(e){var t,n,r=this.props,o=r.layout,i=r.align,s=r.verticalAlign,a=r.margin,l=r.chartWidth,c=r.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===i&&"vertical"===o?{left:((l||0)-this.getBBoxSnapshot().width)/2}:"right"===i?{right:a&&a.right||0}:{left:a&&a.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(n="middle"===s?{top:((c||0)-this.getBBoxSnapshot().height)/2}:"bottom"===s?{bottom:a&&a.bottom||0}:{top:a&&a.top||0}),Pu(Pu({},t),n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.content,r=t.width,o=t.height,i=t.wrapperStyle,s=t.payloadUniqBy,a=t.payload,l=Pu(Pu({position:"absolute",width:r||"auto",height:o||"auto"},this.getDefaultPosition(i)),i);return u.createElement("div",{className:"recharts-legend-wrapper",style:l,ref:function(t){e.wrapperNode=t}},function(e,t){if(u.isValidElement(e))return u.cloneElement(e,t);if("function"==typeof e)return u.createElement(e,t);t.ref;var n=Nu(t,Su);return u.createElement(Gs,n)}(n,Pu(Pu({},this.props),{},{payload:Cu(a,s,Tu)})))}}])&&ju(t.prototype,n),o&&ju(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,o}();Mu(Fu,"displayName","Legend"),Mu(Fu,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Iu=$a,Lu=Qe,Bu=ot?ot.isConcatSpreadable:void 0;var Hu=wa,_u=function(e){return Lu(e)||Iu(e)||!!(Bu&&e&&e[Bu])};var Gu=function e(t,n,r,o,i){var s=-1,a=t.length;for(r||(r=_u),i||(i=[]);++s<a;){var l=t[s];n>0&&r(l)?n>1?e(l,n-1,r,o,i):Hu(i,l):o||(i[i.length]=l)}return i};var Vu=function(e){return function(t,n,r){for(var o=-1,i=Object(t),s=r(t),a=s.length;a--;){var l=s[e?a:++o];if(!1===n(i[l],l,i))break}return t}}(),Wu=Dl;var zu=function(e,t){return e&&Vu(e,t,Wu)},$u=jl;var Uu=function(e,t){return function(n,r){if(null==n)return n;if(!$u(n))return e(n,r);for(var o=n.length,i=t?o:-1,s=Object(n);(t?i--:++i<o)&&!1!==r(s[i],i,s););return n}}(zu),Ku=Uu,qu=jl;var Xu=function(e,t){var n=-1,r=qu(e)?Array(e.length):[];return Ku(e,function(e,o,i){r[++n]=t(e,o,i)}),r};var Yu=bt;var Zu=function(e,t){if(e!==t){var n=void 0!==e,r=null===e,o=e==e,i=Yu(e),s=void 0!==t,a=null===t,l=t==t,c=Yu(t);if(!a&&!c&&!i&&e>t||i&&s&&l&&!a&&!c||r&&s&&l||!n&&l||!o)return 1;if(!r&&!i&&!c&&e<t||c&&n&&o&&!r&&!i||a&&n&&o||!s&&o||!l)return-1}return 0};var Ju=tr,Qu=br,ed=tu,td=Xu,nd=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},rd=nl,od=function(e,t,n){for(var r=-1,o=e.criteria,i=t.criteria,s=o.length,a=n.length;++r<s;){var l=Zu(o[r],i[r]);if(l)return r>=a?l:l*("desc"==n[r]?-1:1)}return e.index-t.index},id=zc,sd=Qe;var ad=function(e,t,n){t=t.length?Ju(t,function(e){return sd(e)?function(t){return Qu(t,1===e.length?e[0]:e)}:e}):[id];var r=-1;t=Ju(t,rd(ed));var o=td(e,function(e,n,o){return{criteria:Ju(t,function(t){return t(e)}),index:++r,value:e}});return nd(o,function(e,t){return od(e,t,n)})};var ld=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},cd=Math.max;var ud=function(e,t,n){return t=cd(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=cd(r.length-t,0),s=Array(i);++o<i;)s[o]=r[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=r[o];return a[t]=n(s),ld(e,this,a)}};var dd=function(e){return function(){return e}},hd=Xt,pd=function(){try{var e=hd(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),fd=dd,gd=pd,md=gd?function(e,t){return gd(e,"toString",{configurable:!0,enumerable:!1,value:fd(t),writable:!0})}:zc,vd=Date.now;var yd=function(e){var t=0,n=0;return function(){var r=vd(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(md),bd=zc,wd=ud,Cd=yd;var xd=gn,Sd=jl,kd=Xa,Pd=Pt;var jd=function(e,t,n){if(!Pd(n))return!1;var r=typeof t;return!!("number"==r?Sd(n)&&kd(t,n.length):"string"==r&&t in n)&&xd(n[t],e)},Od=Gu,Rd=ad,Ed=jd;const Dd=c(function(e,t){return Cd(wd(e,t,bd),e+"")}(function(e,t){if(null==e)return[];var n=t.length;return n>1&&Ed(e,t[0],t[1])?t=[]:n>2&&Ed(t[0],t[1],t[2])&&(t=[t[0]]),Rd(e,Od(t,1),[])}));function Md(e){return(Md="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ad(){return Ad=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ad.apply(this,arguments)}function Nd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(u){c=!0,o=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Td(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Td(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Td(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Id(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fd(Object(n),!0).forEach(function(t){Ld(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fd(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ld(e,t,n){var r;return r=function(e,t){if("object"!=Md(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Md(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Md(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bd(e){return Array.isArray(e)&&no(e[0])&&no(e[1])?e.join(" ~ "):e}var Hd=function(e){var t=e.separator,n=void 0===t?" : ":t,r=e.contentStyle,o=void 0===r?{}:r,i=e.itemStyle,s=void 0===i?{}:i,a=e.labelStyle,l=void 0===a?{}:a,c=e.payload,d=e.formatter,h=e.itemSorter,p=e.wrapperClassName,f=e.labelClassName,g=e.label,m=e.labelFormatter,v=e.accessibilityLayer,y=void 0!==v&&v,b=Id({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),w=Id({margin:0},l),C=!Sr(g),x=C?g:"",S=Je("recharts-default-tooltip",p),k=Je("recharts-tooltip-label",f);C&&m&&null!=c&&(x=m(g,c));var P=y?{role:"status","aria-live":"assertive"}:{};return u.createElement("div",Ad({className:S,style:b},P),u.createElement("p",{className:k,style:w},u.isValidElement(x)?x:"".concat(x)),function(){if(c&&c.length){var e=(h?Dd(c,h):c).map(function(e,t){if("none"===e.type)return null;var r=Id({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},s),o=e.formatter||d||Bd,i=e.value,a=e.name,l=i,h=a;if(o&&null!=l&&null!=h){var p=o(i,a,e,t,c);if(Array.isArray(p)){var f=Nd(p,2);l=f[0],h=f[1]}else l=p}return u.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(t),style:r},no(h)?u.createElement("span",{className:"recharts-tooltip-item-name"},h):null,no(h)?u.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,u.createElement("span",{className:"recharts-tooltip-item-value"},l),u.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return u.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null}())};function _d(e){return(_d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gd(e,t,n){var r;return r=function(e,t){if("object"!=_d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=_d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==_d(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vd="recharts-tooltip-wrapper",Wd={visibility:"hidden"};function zd(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return Je(Vd,Gd(Gd(Gd(Gd({},"".concat(Vd,"-right"),to(n)&&t&&to(t.x)&&n>=t.x),"".concat(Vd,"-left"),to(n)&&t&&to(t.x)&&n<t.x),"".concat(Vd,"-bottom"),to(r)&&t&&to(t.y)&&r>=t.y),"".concat(Vd,"-top"),to(r)&&t&&to(t.y)&&r<t.y))}function $d(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,o=e.offsetTopLeft,i=e.position,s=e.reverseDirection,a=e.tooltipDimension,l=e.viewBox,c=e.viewBoxDimension;if(i&&to(i[r]))return i[r];var u=n[r]-a-o,d=n[r]+o;return t[r]?s[r]?u:d:s[r]?u<l[r]?Math.max(d,l[r]):Math.max(u,l[r]):d+a>l[r]+c?Math.max(u,l[r]):Math.max(d,l[r])}function Ud(e){return(Ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function qd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kd(Object(n),!0).forEach(function(t){eh(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kd(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Xd(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,th(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yd(e,t,n){return t=Jd(t),function(e,t){if(t&&("object"===Ud(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Zd()?Reflect.construct(t,n||[],Jd(e).constructor):t.apply(e,n))}function Zd(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Zd=function(){return!!e})()}function Jd(e){return(Jd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qd(e,t){return(Qd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eh(e,t,n){return(t=th(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function th(e){var t=function(e,t){if("object"!=Ud(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Ud(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Ud(t)?t:t+""}var nh=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return eh(t=Yd(this,e,[].concat(r)),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),eh(t,"handleKeyDown",function(e){var n,r,o,i;"Escape"===e.key&&t.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(n=null===(r=t.props.coordinate)||void 0===r?void 0:r.x)&&void 0!==n?n:0,y:null!==(o=null===(i=t.props.coordinate)||void 0===i?void 0:i.y)&&void 0!==o?o:0}})}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qd(e,t)}(e,r.PureComponent),Xd(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();(Math.abs(e.width-this.state.lastBoundingBox.width)>1||Math.abs(e.height-this.state.lastBoundingBox.height)>1)&&this.setState({lastBoundingBox:{width:e.width,height:e.height}})}else-1===this.state.lastBoundingBox.width&&-1===this.state.lastBoundingBox.height||this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var e,t;this.props.active&&this.updateBBox(),this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}},{key:"render",value:function(){var e=this,t=this.props,n=t.active,r=t.allowEscapeViewBox,o=t.animationDuration,i=t.animationEasing,s=t.children,a=t.coordinate,l=t.hasPayload,c=t.isAnimationActive,d=t.offset,h=t.position,p=t.reverseDirection,f=t.useTranslate3d,g=t.viewBox,m=t.wrapperStyle,v=function(e){var t,n,r=e.allowEscapeViewBox,o=e.coordinate,i=e.offsetTopLeft,s=e.position,a=e.reverseDirection,l=e.tooltipBox,c=e.useTranslate3d,u=e.viewBox;return{cssProperties:l.height>0&&l.width>0&&o?function(e){var t=e.translateX,n=e.translateY;return{transform:e.useTranslate3d?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}({translateX:t=$d({allowEscapeViewBox:r,coordinate:o,key:"x",offsetTopLeft:i,position:s,reverseDirection:a,tooltipDimension:l.width,viewBox:u,viewBoxDimension:u.width}),translateY:n=$d({allowEscapeViewBox:r,coordinate:o,key:"y",offsetTopLeft:i,position:s,reverseDirection:a,tooltipDimension:l.height,viewBox:u,viewBoxDimension:u.height}),useTranslate3d:c}):Wd,cssClasses:zd({translateX:t,translateY:n,coordinate:o})}}({allowEscapeViewBox:r,coordinate:a,offsetTopLeft:d,position:h,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:f,viewBox:g}),y=v.cssClasses,b=v.cssProperties,w=qd(qd({transition:c&&n?"transform ".concat(o,"ms ").concat(i):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&n&&l?"visible":"hidden",position:"absolute",top:0,left:0},m);return u.createElement("div",{tabIndex:-1,className:y,style:w,ref:function(t){e.wrapperNode=t}},s)}}])}(),rh=!("undefined"!=typeof window&&window.document&&window.document.createElement&&window.setTimeout);function oh(e){return(oh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ih(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ih(Object(n),!0).forEach(function(t){hh(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ih(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ah(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ph(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function lh(e,t,n){return t=uh(t),function(e,t){if(t&&("object"===oh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ch()?Reflect.construct(t,n||[],uh(e).constructor):t.apply(e,n))}function ch(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(ch=function(){return!!e})()}function uh(e){return(uh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dh(e,t){return(dh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function hh(e,t,n){return(t=ph(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ph(e){var t=function(e,t){if("object"!=oh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=oh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==oh(t)?t:t+""}function fh(e){return e.dataKey}var gh=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),lh(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dh(e,t)}(e,r.PureComponent),ah(e,[{key:"render",value:function(){var e=this,t=this.props,n=t.active,r=t.allowEscapeViewBox,o=t.animationDuration,i=t.animationEasing,s=t.content,a=t.coordinate,l=t.filterNull,c=t.isAnimationActive,d=t.offset,h=t.payload,p=t.payloadUniqBy,f=t.position,g=t.reverseDirection,m=t.useTranslate3d,v=t.viewBox,y=t.wrapperStyle,b=null!=h?h:[];l&&b.length&&(b=Cu(h.filter(function(t){return null!=t.value&&(!0!==t.hide||e.props.includeHidden)}),p,fh));var w=b.length>0;return u.createElement(nh,{allowEscapeViewBox:r,animationDuration:o,animationEasing:i,isAnimationActive:c,active:n,coordinate:a,hasPayload:w,offset:d,position:f,reverseDirection:g,useTranslate3d:m,viewBox:v,wrapperStyle:y},function(e,t){return u.isValidElement(e)?u.cloneElement(e,t):"function"==typeof e?u.createElement(e,t):u.createElement(Hd,t)}(s,sh(sh({},this.props),{},{payload:b})))}}])}();hh(gh,"displayName","Tooltip"),hh(gh,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!rh,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var mh=rt,vh=/\s/;var yh=function(e){for(var t=e.length;t--&&vh.test(e.charAt(t)););return t},bh=/^\s+/;var wh=function(e){return e?e.slice(0,yh(e)+1).replace(bh,""):e},Ch=Pt,xh=bt,Sh=/^[-+]0x[0-9a-f]+$/i,kh=/^0b[01]+$/i,Ph=/^0o[0-7]+$/i,jh=parseInt;var Oh=function(e){if("number"==typeof e)return e;if(xh(e))return NaN;if(Ch(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ch(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=wh(e);var n=kh.test(e);return n||Ph.test(e)?jh(e.slice(2),n?2:8):Sh.test(e)?NaN:+e},Rh=Pt,Eh=function(){return mh.Date.now()},Dh=Oh,Mh=Math.max,Ah=Math.min;var Nh=function(e,t,n){var r,o,i,s,a,l,c=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=r,i=o;return r=o=void 0,c=t,s=e.apply(i,n)}function f(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-c>=i}function g(){var e=Eh();if(f(e))return m(e);a=setTimeout(g,function(e){var n=t-(e-l);return d?Ah(n,i-(e-c)):n}(e))}function m(e){return a=void 0,h&&r?p(e):(r=o=void 0,s)}function v(){var e=Eh(),n=f(e);if(r=arguments,o=this,l=e,n){if(void 0===a)return function(e){return c=e,a=setTimeout(g,t),u?p(e):s}(l);if(d)return clearTimeout(a),a=setTimeout(g,t),p(l)}return void 0===a&&(a=setTimeout(g,t)),s}return t=Dh(t)||0,Rh(n)&&(u=!!n.leading,i=(d="maxWait"in n)?Mh(Dh(n.maxWait)||0,t):i,h="trailing"in n?!!n.trailing:h),v.cancel=function(){void 0!==a&&clearTimeout(a),c=0,r=l=o=a=void 0},v.flush=function(){return void 0===a?s:m(Eh())},v},Th=Pt;const Fh=c(function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Th(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),Nh(e,t,{leading:r,maxWait:t,trailing:o})});function Ih(e){return(Ih="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Bh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lh(Object(n),!0).forEach(function(t){Hh(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Hh(e,t,n){var r;return r=function(e,t){if("object"!=Ih(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Ih(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Ih(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(u){c=!0,o=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Vh=r.forwardRef(function(e,t){var n=e.aspect,o=e.initialDimension,i=void 0===o?{width:-1,height:-1}:o,s=e.width,a=void 0===s?"100%":s,l=e.height,c=void 0===l?"100%":l,d=e.minWidth,h=void 0===d?0:d,p=e.minHeight,f=e.maxHeight,g=e.children,m=e.debounce,v=void 0===m?0:m,y=e.id,b=e.className,w=e.onResize,C=e.style,x=void 0===C?{}:C,S=r.useRef(null),k=r.useRef();k.current=w,r.useImperativeHandle(t,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var P=_h(r.useState({containerWidth:i.width,containerHeight:i.height}),2),j=P[0],O=P[1],R=r.useCallback(function(e,t){O(function(n){var r=Math.round(e),o=Math.round(t);return n.containerWidth===r&&n.containerHeight===o?n:{containerWidth:r,containerHeight:o}})},[]);r.useEffect(function(){var e=function(e){var t,n=e[0].contentRect,r=n.width,o=n.height;R(r,o),null===(t=k.current)||void 0===t||t.call(k,r,o)};v>0&&(e=Fh(e,v,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),n=S.current.getBoundingClientRect(),r=n.width,o=n.height;return R(r,o),t.observe(S.current),function(){t.disconnect()}},[R,v]);var E=r.useMemo(function(){var e=j.containerWidth,t=j.containerHeight;if(e<0||t<0)return null;zo(eo(a)||eo(c),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",a,c),zo(!n||n>0,"The aspect(%s) must be greater than zero.",n);var o=eo(a)?e:a,i=eo(c)?t:c;n&&n>0&&(o?i=o/n:i&&(o=i*n),f&&i>f&&(i=f)),zo(o>0||i>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",o,i,a,c,h,p,n);var s=!Array.isArray(g)&&ko(g.type).endsWith("Chart");return u.Children.map(g,function(e){return u.isValidElement(e)?r.cloneElement(e,Bh({width:o,height:i},s?{style:Bh({height:"100%",width:"100%",maxHeight:i,maxWidth:o},e.props.style)}:{})):e})},[n,g,c,f,p,h,j,a]);return u.createElement("div",{id:y?"".concat(y):void 0,className:Je("recharts-responsive-container",b),style:Bh(Bh({},x),{},{width:a,height:c,minWidth:h,minHeight:p,maxHeight:f}),ref:S},E)}),Wh=function(e){return null};function zh(e){return(zh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Uh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$h(Object(n),!0).forEach(function(t){Kh(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Kh(e,t,n){var r;return r=function(e,t){if("object"!=zh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=zh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==zh(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Wh.displayName="Cell";var qh={widthCache:{},cacheCount:0},Xh={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Yh="recharts_measurement_span";var Zh=function(e){if(null==e||rh)return{width:0,height:0};var t,n=(t=Uh({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),Object.keys(t).forEach(function(e){t[e]||delete t[e]}),t),r=JSON.stringify({text:e,copyStyle:n});if(qh.widthCache[r])return qh.widthCache[r];try{var o=document.getElementById(Yh);o||((o=document.createElement("span")).setAttribute("id",Yh),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var i=Uh(Uh({},Xh),n);Object.assign(o.style,i),o.textContent="".concat(e);var s=o.getBoundingClientRect(),a={width:s.width,height:s.height};return qh.widthCache[r]=a,++qh.cacheCount>2e3&&(qh.cacheCount=0,qh.widthCache={}),a}catch(l){return{width:0,height:0}}};function Jh(e){return(Jh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(u){c=!0,o=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ep(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ep(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ep(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,np(r.key),r)}}function np(e){var t=function(e,t){if("object"!=Jh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Jh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Jh(t)?t:t+""}var rp=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,op=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ip=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,sp=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,ap={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},lp=Object.keys(ap),cp="NaN";var up=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),""===n||ip.test(n)||(this.num=NaN,this.unit=""),lp.includes(n)&&(this.num=function(e,t){return e*ap[t]}(t,n),this.unit="px")}return t=e,r=[{key:"parse",value:function(t){var n,r=Qh(null!==(n=sp.exec(t))&&void 0!==n?n:[],3),o=r[1],i=r[2];return new e(parseFloat(o),null!=i?i:"")}}],(n=[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}])&&tp(t.prototype,n),r&&tp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function dp(e){if(e.includes(cp))return cp;for(var t=e;t.includes("*")||t.includes("/");){var n,r=Qh(null!==(n=rp.exec(t))&&void 0!==n?n:[],4),o=r[1],i=r[2],s=r[3],a=up.parse(null!=o?o:""),l=up.parse(null!=s?s:""),c="*"===i?a.multiply(l):a.divide(l);if(c.isNaN())return cp;t=t.replace(rp,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,d=Qh(null!==(u=op.exec(t))&&void 0!==u?u:[],4),h=d[1],p=d[2],f=d[3],g=up.parse(null!=h?h:""),m=up.parse(null!=f?f:""),v="+"===p?g.add(m):g.subtract(m);if(v.isNaN())return cp;t=t.replace(op,v.toString())}return t}var hp=/\(([^()]*)\)/;function pp(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t=e;t.includes("(");){var n=Qh(hp.exec(t),2)[1];t=t.replace(hp,dp(n))}return t}(t),t=dp(t)}function fp(e){var t=function(e){try{return pp(e)}catch(t){return cp}}(e.slice(5,-1));return t===cp?"":t}var gp=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],mp=["dx","dy","angle","className","breakAll"];function vp(){return vp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vp.apply(this,arguments)}function yp(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function bp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(u){c=!0,o=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Cp=/[ \f\n\r\t\v\u2028\u2029]+/,xp=function(e){var t=e.children,n=e.breakAll,r=e.style;try{var o=[];return Sr(t)||(o=n?t.toString().split(""):t.toString().split(Cp)),{wordsWithComputedWidth:o.map(function(e){return{word:e,width:Zh(e,r).width}}),spaceWidth:n?0:Zh(" ",r).width}}catch(i){return null}},Sp=function(e){return[{words:Sr(e)?[]:e.toString().split(Cp)}]},kp=function(e){var t=e.width,n=e.scaleToFit,r=e.children,o=e.style,i=e.breakAll,s=e.maxLines;if((t||n)&&!rh){var a=xp({breakAll:i,children:r,style:o});return a?function(e,t,n,r,o){var i=e.maxLines,s=e.children,a=e.style,l=e.breakAll,c=to(i),u=s,d=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){var i=t.word,s=t.width,a=e[e.length-1];if(a&&(null==r||o||a.width+s+n<Number(r)))a.words.push(i),a.width+=s+n;else{var l={words:[i],width:s};e.push(l)}return e},[])},h=d(t);if(!c)return h;for(var p,f=function(e){var t=u.slice(0,e),n=xp({breakAll:l,style:a,children:t+"…"}).wordsWithComputedWidth,o=d(n),s=o.length>i||function(e){return e.reduce(function(e,t){return e.width>t.width?e:t})}(o).width>Number(r);return[s,o]},g=0,m=u.length-1,v=0;g<=m&&v<=u.length-1;){var y=Math.floor((g+m)/2),b=bp(f(y-1),2),w=b[0],C=b[1],x=bp(f(y),1)[0];if(w||x||(g=y+1),w&&x&&(m=y-1),!w&&x){p=C;break}v++}return p||h}({breakAll:i,children:r,maxLines:s,style:o},a.wordsWithComputedWidth,a.spaceWidth,t,n):Sp(r)}return Sp(r)},Pp="#808080",jp=function(e){var t=e.x,n=void 0===t?0:t,o=e.y,i=void 0===o?0:o,s=e.lineHeight,a=void 0===s?"1em":s,l=e.capHeight,c=void 0===l?"0.71em":l,d=e.scaleToFit,h=void 0!==d&&d,p=e.textAnchor,f=void 0===p?"start":p,g=e.verticalAnchor,m=void 0===g?"end":g,v=e.fill,y=void 0===v?Pp:v,b=yp(e,gp),w=r.useMemo(function(){return kp({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:h,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,h,b.style,b.width]),C=b.dx,x=b.dy,S=b.angle,k=b.className,P=b.breakAll,j=yp(b,mp);if(!no(n)||!no(i))return null;var O,R=n+(to(C)?C:0),E=i+(to(x)?x:0);switch(m){case"start":O=fp("calc(".concat(c,")"));break;case"middle":O=fp("calc(".concat((w.length-1)/2," * -").concat(a," + (").concat(c," / 2))"));break;default:O=fp("calc(".concat(w.length-1," * -").concat(a,")"))}var D=[];if(h){var M=w[0].width,A=b.width;D.push("scale(".concat((to(A)?A/M:1)/M,")"))}return S&&D.push("rotate(".concat(S,", ").concat(R,", ").concat(E,")")),D.length&&(j.transform=D.join(" ")),u.createElement("text",vp({},Ao(j,!0),{x:R,y:E,className:Je("recharts-text",k),textAnchor:f,fill:y.includes("url")?Pp:y}),w.map(function(e,t){var n=e.words.join(P?"":" ");return u.createElement("tspan",{x:R,dy:0===t?O:a,key:"".concat(n,"-").concat(t)},n)}))};function Op(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Rp(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ep(e){let t,n,r;function o(e,r,o=0,i=e.length){if(o<i){if(0!==t(r,r))return i;do{const t=o+i>>>1;n(e[t],r)<0?o=t+1:i=t}while(o<i)}return o}return 2!==e.length?(t=Op,n=(t,n)=>Op(e(t),n),r=(t,n)=>e(t)-n):(t=e===Op||e===Rp?e:Dp,n=e,r=e),{left:o,center:function(e,t,n=0,i=e.length){const s=o(e,t,n,i-1);return s>n&&r(e[s-1],t)>-r(e[s],t)?s-1:s},right:function(e,r,o=0,i=e.length){if(o<i){if(0!==t(r,r))return i;do{const t=o+i>>>1;n(e[t],r)<=0?o=t+1:i=t}while(o<i)}return o}}}function Dp(){return 0}function Mp(e){return null===e?NaN:+e}const Ap=Ep(Op).right;Ep(Mp).center;class Np extends Map{constructor(e,t=Fp){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(Tp(this,e))}has(e){return super.has(Tp(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},n){const r=t(n);e.has(r)&&(n=e.get(r),e.delete(r));return n}(this,e))}}function Tp({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Fp(e){return null!==e&&"object"==typeof e?e.valueOf():e}function Ip(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}const Lp=Math.sqrt(50),Bp=Math.sqrt(10),Hp=Math.sqrt(2);function _p(e,t,n){const r=(t-e)/Math.max(0,n),o=Math.floor(Math.log10(r)),i=r/Math.pow(10,o),s=i>=Lp?10:i>=Bp?5:i>=Hp?2:1;let a,l,c;return o<0?(c=Math.pow(10,-o)/s,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,o)*s,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=n&&n<2?_p(e,t,2*n):[a,l,c]}function Gp(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const r=t<e,[o,i,s]=r?_p(t,e,n):_p(e,t,n);if(!(i>=o))return[];const a=i-o+1,l=new Array(a);if(r)if(s<0)for(let c=0;c<a;++c)l[c]=(i-c)/-s;else for(let c=0;c<a;++c)l[c]=(i-c)*s;else if(s<0)for(let c=0;c<a;++c)l[c]=(o+c)/-s;else for(let c=0;c<a;++c)l[c]=(o+c)*s;return l}function Vp(e,t,n){return _p(e=+e,t=+t,n=+n)[2]}function Wp(e,t,n){n=+n;const r=(t=+t)<(e=+e),o=r?Vp(t,e,n):Vp(e,t,n);return(r?-1:1)*(o<0?1/-o:o)}function zp(e,t){let n;for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);return n}function $p(e,t){let n;for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);return n}function Up(e,t,n=0,r=1/0,o){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(o=void 0===o?Ip:function(e=Op){if(e===Op)return Ip;if("function"!=typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||0===r?r:(0===e(n,n))-(0===e(t,t))}}(o);r>n;){if(r-n>600){const i=r-n+1,s=t-n+1,a=Math.log(i),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(i-l)/i)*(s-i/2<0?-1:1);Up(e,t,Math.max(n,Math.floor(t-s*l/i+c)),Math.min(r,Math.floor(t+(i-s)*l/i+c)),o)}const i=e[t];let s=n,a=r;for(Kp(e,n,t),o(e[r],i)>0&&Kp(e,n,r);s<a;){for(Kp(e,s,a),++s,--a;o(e[s],i)<0;)++s;for(;o(e[a],i)>0;)--a}0===o(e[n],i)?Kp(e,n,a):(++a,Kp(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function Kp(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function qp(e,t,n=Mp){if((r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,o=(r-1)*t,i=Math.floor(o),s=+n(e[i],i,e);return s+(+n(e[i+1],i+1,e)-s)*(o-i)}}function Xp(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Yp(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}const Zp=Symbol("implicit");function Jp(){var e=new Np,t=[],n=[],r=Zp;function o(o){let i=e.get(o);if(void 0===i){if(r!==Zp)return r;e.set(o,i=t.push(o)-1)}return n[i%n.length]}return o.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Np;for(const r of n)e.has(r)||e.set(r,t.push(r)-1);return o},o.range=function(e){return arguments.length?(n=Array.from(e),o):n.slice()},o.unknown=function(e){return arguments.length?(r=e,o):r},o.copy=function(){return Jp(t,n).unknown(r)},Xp.apply(o,arguments),o}function Qp(){var e,t,n=Jp().unknown(void 0),r=n.domain,o=n.range,i=0,s=1,a=!1,l=0,c=0,u=.5;function d(){var n=r().length,d=s<i,h=d?s:i,p=d?i:s;e=(p-h)/Math.max(1,n-l+2*c),a&&(e=Math.floor(e)),h+=(p-h-e*(n-l))*u,t=e*(1-l),a&&(h=Math.round(h),t=Math.round(t));var f=function(e,t,n){e=+e,t=+t,n=(o=arguments.length)<2?(t=e,e=0,1):o<3?1:+n;for(var r=-1,o=0|Math.max(0,Math.ceil((t-e)/n)),i=new Array(o);++r<o;)i[r]=e+r*n;return i}(n).map(function(t){return h+e*t});return o(d?f.reverse():f)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),d()):r()},n.range=function(e){return arguments.length?([i,s]=e,i=+i,s=+s,d()):[i,s]},n.rangeRound=function(e){return[i,s]=e,i=+i,s=+s,a=!0,d()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(a=!!e,d()):a},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),d()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),d()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,d()):c},n.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),d()):u},n.copy=function(){return Qp(r(),[i,s]).round(a).paddingInner(l).paddingOuter(c).align(u)},Xp.apply(d(),arguments)}function ef(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return ef(t())},e}function tf(){return ef(Qp.apply(null,arguments).paddingInner(1))}function nf(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function rf(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function of(){}var sf=.7,af=1/sf,lf="\\s*([+-]?\\d+)\\s*",cf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",uf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",df=/^#([0-9a-f]{3,8})$/,hf=new RegExp(`^rgb\\(${lf},${lf},${lf}\\)$`),pf=new RegExp(`^rgb\\(${uf},${uf},${uf}\\)$`),ff=new RegExp(`^rgba\\(${lf},${lf},${lf},${cf}\\)$`),gf=new RegExp(`^rgba\\(${uf},${uf},${uf},${cf}\\)$`),mf=new RegExp(`^hsl\\(${cf},${uf},${uf}\\)$`),vf=new RegExp(`^hsla\\(${cf},${uf},${uf},${cf}\\)$`),yf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function bf(){return this.rgb().formatHex()}function wf(){return this.rgb().formatRgb()}function Cf(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=df.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?xf(t):3===n?new Pf(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Sf(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Sf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=hf.exec(e))?new Pf(t[1],t[2],t[3],1):(t=pf.exec(e))?new Pf(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ff.exec(e))?Sf(t[1],t[2],t[3],t[4]):(t=gf.exec(e))?Sf(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=mf.exec(e))?Mf(t[1],t[2]/100,t[3]/100,1):(t=vf.exec(e))?Mf(t[1],t[2]/100,t[3]/100,t[4]):yf.hasOwnProperty(e)?xf(yf[e]):"transparent"===e?new Pf(NaN,NaN,NaN,0):null}function xf(e){return new Pf(e>>16&255,e>>8&255,255&e,1)}function Sf(e,t,n,r){return r<=0&&(e=t=n=NaN),new Pf(e,t,n,r)}function kf(e,t,n,r){return 1===arguments.length?((o=e)instanceof of||(o=Cf(o)),o?new Pf((o=o.rgb()).r,o.g,o.b,o.opacity):new Pf):new Pf(e,t,n,null==r?1:r);var o}function Pf(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function jf(){return`#${Df(this.r)}${Df(this.g)}${Df(this.b)}`}function Of(){const e=Rf(this.opacity);return`${1===e?"rgb(":"rgba("}${Ef(this.r)}, ${Ef(this.g)}, ${Ef(this.b)}${1===e?")":`, ${e})`}`}function Rf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ef(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Df(e){return((e=Ef(e))<16?"0":"")+e.toString(16)}function Mf(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Nf(e,t,n,r)}function Af(e){if(e instanceof Nf)return new Nf(e.h,e.s,e.l,e.opacity);if(e instanceof of||(e=Cf(e)),!e)return new Nf;if(e instanceof Nf)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),s=NaN,a=i-o,l=(i+o)/2;return a?(s=t===i?(n-r)/a+6*(n<r):n===i?(r-t)/a+2:(t-n)/a+4,a/=l<.5?i+o:2-i-o,s*=60):a=l>0&&l<1?0:s,new Nf(s,a,l,e.opacity)}function Nf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Tf(e){return(e=(e||0)%360)<0?e+360:e}function Ff(e){return Math.max(0,Math.min(1,e||0))}function If(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}nf(of,Cf,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:bf,formatHex:bf,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Af(this).formatHsl()},formatRgb:wf,toString:wf}),nf(Pf,kf,rf(of,{brighter(e){return e=null==e?af:Math.pow(af,e),new Pf(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?sf:Math.pow(sf,e),new Pf(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Pf(Ef(this.r),Ef(this.g),Ef(this.b),Rf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:jf,formatHex:jf,formatHex8:function(){return`#${Df(this.r)}${Df(this.g)}${Df(this.b)}${Df(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Of,toString:Of})),nf(Nf,function(e,t,n,r){return 1===arguments.length?Af(e):new Nf(e,t,n,null==r?1:r)},rf(of,{brighter(e){return e=null==e?af:Math.pow(af,e),new Nf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?sf:Math.pow(sf,e),new Nf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Pf(If(e>=240?e-240:e+120,o,r),If(e,o,r),If(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new Nf(Tf(this.h),Ff(this.s),Ff(this.l),Rf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Rf(this.opacity);return`${1===e?"hsl(":"hsla("}${Tf(this.h)}, ${100*Ff(this.s)}%, ${100*Ff(this.l)}%${1===e?")":`, ${e})`}`}}));const Lf=e=>()=>e;function Bf(e){return 1===(e=+e)?Hf:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Lf(isNaN(t)?n:t)}}function Hf(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Lf(isNaN(e)?t:e)}const _f=function e(t){var n=Bf(t);function r(e,t){var r=n((e=kf(e)).r,(t=kf(t)).r),o=n(e.g,t.g),i=n(e.b,t.b),s=Hf(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=o(t),e.b=i(t),e.opacity=s(t),e+""}}return r.gamma=e,r}(1);function Gf(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,o=t.slice();return function(i){for(n=0;n<r;++n)o[n]=e[n]*(1-i)+t[n]*i;return o}}function Vf(e,t){var n,r=t?t.length:0,o=e?Math.min(r,e.length):0,i=new Array(o),s=new Array(r);for(n=0;n<o;++n)i[n]=Xf(e[n],t[n]);for(;n<r;++n)s[n]=t[n];return function(e){for(n=0;n<o;++n)s[n]=i[n](e);return s}}function Wf(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function zf(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function $f(e,t){var n,r={},o={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=Xf(e[n],t[n]):o[n]=t[n];return function(e){for(n in r)o[n]=r[n](e);return o}}var Uf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Kf=new RegExp(Uf.source,"g");function qf(e,t){var n,r,o,i=Uf.lastIndex=Kf.lastIndex=0,s=-1,a=[],l=[];for(e+="",t+="";(n=Uf.exec(e))&&(r=Kf.exec(t));)(o=r.index)>i&&(o=t.slice(i,o),a[s]?a[s]+=o:a[++s]=o),(n=n[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:zf(n,r)})),i=Kf.lastIndex;return i<t.length&&(o=t.slice(i),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)a[(n=l[r]).i]=n.x(e);return a.join("")})}function Xf(e,t){var n,r,o=typeof t;return null==t||"boolean"===o?Lf(t):("number"===o?zf:"string"===o?(n=Cf(t))?(t=n,_f):qf:t instanceof Cf?_f:t instanceof Date?Wf:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?Vf:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?$f:zf:Gf))(e,t)}function Yf(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Zf(e){return+e}var Jf=[0,1];function Qf(e){return e}function eg(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function tg(e,t,n){var r=e[0],o=e[1],i=t[0],s=t[1];return o<r?(r=eg(o,r),i=n(s,i)):(r=eg(r,o),i=n(i,s)),function(e){return i(r(e))}}function ng(e,t,n){var r=Math.min(e.length,t.length)-1,o=new Array(r),i=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)o[s]=eg(e[s],e[s+1]),i[s]=n(t[s],t[s+1]);return function(t){var n=Ap(e,t,1,r)-1;return i[n](o[n](t))}}function rg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function og(){var e,t,n,r,o,i,s=Jf,a=Jf,l=Xf,c=Qf;function u(){var e,t,n,l=Math.min(s.length,a.length);return c!==Qf&&(e=s[0],t=s[l-1],e>t&&(n=e,e=t,t=n),c=function(n){return Math.max(e,Math.min(t,n))}),r=l>2?ng:tg,o=i=null,d}function d(t){return null==t||isNaN(t=+t)?n:(o||(o=r(s.map(e),a,l)))(e(c(t)))}return d.invert=function(n){return c(t((i||(i=r(a,s.map(e),zf)))(n)))},d.domain=function(e){return arguments.length?(s=Array.from(e,Zf),u()):s.slice()},d.range=function(e){return arguments.length?(a=Array.from(e),u()):a.slice()},d.rangeRound=function(e){return a=Array.from(e),l=Yf,u()},d.clamp=function(e){return arguments.length?(c=!!e||Qf,u()):c!==Qf},d.interpolate=function(e){return arguments.length?(l=e,u()):l},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,r){return e=n,t=r,u()}}function ig(){return og()(Qf,Qf)}function sg(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function ag(e){return(e=sg(Math.abs(e)))?e[1]:NaN}var lg,cg=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ug(e){if(!(t=cg.exec(e)))throw new Error("invalid format: "+e);var t;return new dg({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function dg(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function hg(e,t){var n=sg(e,t);if(!n)return e+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}ug.prototype=dg.prototype,dg.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const pg={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>hg(100*e,t),r:hg,s:function(e,t){var n=sg(e,t);if(!n)return e+"";var r=n[0],o=n[1],i=o-(lg=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,s=r.length;return i===s?r:i>s?r+new Array(i-s+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+sg(e,Math.max(0,t+i-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function fg(e){return e}var gg,mg,vg,yg=Array.prototype.map,bg=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function wg(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?fg:(t=yg.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var o=e.length,i=[],s=0,a=t[0],l=0;o>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),i.push(e.substring(o-=a,o+a)),!((l+=a+1)>r));)a=t[s=(s+1)%t.length];return i.reverse().join(n)}),o=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",s=void 0===e.decimal?".":e.decimal+"",a=void 0===e.numerals?fg:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(yg.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"−":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=ug(e)).fill,n=e.align,d=e.sign,h=e.symbol,p=e.zero,f=e.width,g=e.comma,m=e.precision,v=e.trim,y=e.type;"n"===y?(g=!0,y="g"):pg[y]||(void 0===m&&(m=12),v=!0,y="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var b="$"===h?o:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",w="$"===h?i:/[%p]/.test(y)?l:"",C=pg[y],x=/[defgprs%]/.test(y);function S(e){var o,i,l,h=b,S=w;if("c"===y)S=C(e)+S,e="";else{var k=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:C(Math.abs(e),m),v&&(e=function(e){e:for(var t,n=e.length,r=1,o=-1;r<n;++r)switch(e[r]){case".":o=t=r;break;case"0":0===o&&(o=r),t=r;break;default:if(!+e[r])break e;o>0&&(o=0)}return o>0?e.slice(0,o)+e.slice(t+1):e}(e)),k&&0===+e&&"+"!==d&&(k=!1),h=(k?"("===d?d:c:"-"===d||"("===d?"":d)+h,S=("s"===y?bg[8+lg/3]:"")+S+(k&&"("===d?")":""),x)for(o=-1,i=e.length;++o<i;)if(48>(l=e.charCodeAt(o))||l>57){S=(46===l?s+e.slice(o+1):e.slice(o))+S,e=e.slice(0,o);break}}g&&!p&&(e=r(e,1/0));var P=h.length+e.length+S.length,j=P<f?new Array(f-P+1).join(t):"";switch(g&&p&&(e=r(j+e,j.length?f-S.length:1/0),j=""),n){case"<":e=h+e+S+j;break;case"=":e=h+j+e+S;break;case"^":e=j.slice(0,P=j.length>>1)+h+e+S+j.slice(P);break;default:e=j+h+e+S}return a(e)}return m=void 0===m?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),S.toString=function(){return e+""},S}return{format:d,formatPrefix:function(e,t){var n=d(((e=ug(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(ag(t)/3))),o=Math.pow(10,-r),i=bg[8+r/3];return function(e){return n(o*e)+i}}}}function Cg(e,t,n,r){var o,i=Wp(e,t,n);switch((r=ug(null==r?",f":r)).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(o=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ag(t)/3)))-ag(Math.abs(e)))}(i,s))||(r.precision=o),vg(r,s);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(o=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ag(t)-ag(e))+1}(i,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=o-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(o=function(e){return Math.max(0,-ag(Math.abs(e)))}(i))||(r.precision=o-2*("%"===r.type))}return mg(r)}function xg(e){var t=e.domain;return e.ticks=function(e){var n=t();return Gp(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return Cg(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,o,i=t(),s=0,a=i.length-1,l=i[s],c=i[a],u=10;for(c<l&&(o=l,l=c,c=o,o=s,s=a,a=o);u-- >0;){if((o=Vp(l,c,n))===r)return i[s]=l,i[a]=c,t(i);if(o>0)l=Math.floor(l/o)*o,c=Math.ceil(c/o)*o;else{if(!(o<0))break;l=Math.ceil(l*o)/o,c=Math.floor(c*o)/o}r=o}return e},e}function Sg(){var e=ig();return e.copy=function(){return rg(e,Sg())},Xp.apply(e,arguments),xg(e)}function kg(e,t){var n,r=0,o=(e=e.slice()).length-1,i=e[r],s=e[o];return s<i&&(n=r,r=o,o=n,n=i,i=s,s=n),e[r]=t.floor(i),e[o]=t.ceil(s),e}function Pg(e){return Math.log(e)}function jg(e){return Math.exp(e)}function Og(e){return-Math.log(-e)}function Rg(e){return-Math.exp(-e)}function Eg(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Dg(e){return(t,n)=>-e(-t,n)}function Mg(e){const t=e(Pg,jg),n=t.domain;let r,o,i=10;function s(){return r=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(i),o=function(e){return 10===e?Eg:e===Math.E?Math.exp:t=>Math.pow(e,t)}(i),n()[0]<0?(r=Dg(r),o=Dg(o),e(Og,Rg)):e(Pg,jg),t}return t.base=function(e){return arguments.length?(i=+e,s()):i},t.domain=function(e){return arguments.length?(n(e),s()):n()},t.ticks=e=>{const t=n();let s=t[0],a=t[t.length-1];const l=a<s;l&&([s,a]=[a,s]);let c,u,d=r(s),h=r(a);const p=null==e?10:+e;let f=[];if(!(i%1)&&h-d<p){if(d=Math.floor(d),h=Math.ceil(h),s>0){for(;d<=h;++d)for(c=1;c<i;++c)if(u=d<0?c/o(-d):c*o(d),!(u<s)){if(u>a)break;f.push(u)}}else for(;d<=h;++d)for(c=i-1;c>=1;--c)if(u=d>0?c/o(-d):c*o(d),!(u<s)){if(u>a)break;f.push(u)}2*f.length<p&&(f=Gp(s,a,p))}else f=Gp(d,h,Math.min(h-d,p)).map(o);return l?f.reverse():f},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===i?"s":","),"function"!=typeof n&&(i%1||null!=(n=ug(n)).precision||(n.trim=!0),n=mg(n)),e===1/0)return n;const s=Math.max(1,i*e/t.ticks().length);return e=>{let t=e/o(Math.round(r(e)));return t*i<i-.5&&(t*=i),t<=s?n(e):""}},t.nice=()=>n(kg(n(),{floor:e=>o(Math.floor(r(e))),ceil:e=>o(Math.ceil(r(e)))})),t}function Ag(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Ng(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Tg(e){var t=1,n=e(Ag(t),Ng(t));return n.constant=function(n){return arguments.length?e(Ag(t=+n),Ng(t)):t},xg(n)}function Fg(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Ig(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Lg(e){return e<0?-e*e:e*e}function Bg(e){var t=e(Qf,Qf),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(Qf,Qf):.5===n?e(Ig,Lg):e(Fg(n),Fg(1/n)):n},xg(t)}function Hg(){var e=Bg(og());return e.copy=function(){return rg(e,Hg()).exponent(e.exponent())},Xp.apply(e,arguments),e}function _g(e){return Math.sign(e)*e*e}gg=wg({thousands:",",grouping:[3],currency:["$",""]}),mg=gg.format,vg=gg.formatPrefix;const Gg=new Date,Vg=new Date;function Wg(e,t,n,r){function o(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return o.floor=t=>(e(t=new Date(+t)),t),o.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),o.round=e=>{const t=o(e),n=o.ceil(e);return e-t<n-e?t:n},o.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),o.range=(n,r,i)=>{const s=[];if(n=o.ceil(n),i=null==i?1:Math.floor(i),!(n<r&&i>0))return s;let a;do{s.push(a=new Date(+n)),t(n,i),e(n)}while(a<n&&n<r);return s},o.filter=n=>Wg(t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},(e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}),n&&(o.count=(t,r)=>(Gg.setTime(+t),Vg.setTime(+r),e(Gg),e(Vg),Math.floor(n(Gg,Vg))),o.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?o.filter(r?t=>r(t)%e===0:t=>o.count(0,t)%e===0):o:null)),o}const zg=Wg(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);zg.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?Wg(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):zg:null),zg.range;const $g=1e3,Ug=6e4,Kg=36e5,qg=864e5,Xg=6048e5,Yg=2592e6,Zg=31536e6,Jg=Wg(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*$g)},(e,t)=>(t-e)/$g,e=>e.getUTCSeconds());Jg.range;const Qg=Wg(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*$g)},(e,t)=>{e.setTime(+e+t*Ug)},(e,t)=>(t-e)/Ug,e=>e.getMinutes());Qg.range;const em=Wg(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ug)},(e,t)=>(t-e)/Ug,e=>e.getUTCMinutes());em.range;const tm=Wg(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*$g-e.getMinutes()*Ug)},(e,t)=>{e.setTime(+e+t*Kg)},(e,t)=>(t-e)/Kg,e=>e.getHours());tm.range;const nm=Wg(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Kg)},(e,t)=>(t-e)/Kg,e=>e.getUTCHours());nm.range;const rm=Wg(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ug)/qg,e=>e.getDate()-1);rm.range;const om=Wg(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/qg,e=>e.getUTCDate()-1);om.range;const im=Wg(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/qg,e=>Math.floor(e/qg));function sm(e){return Wg(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ug)/Xg)}im.range;const am=sm(0),lm=sm(1),cm=sm(2),um=sm(3),dm=sm(4),hm=sm(5),pm=sm(6);function fm(e){return Wg(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/Xg)}am.range,lm.range,cm.range,um.range,dm.range,hm.range,pm.range;const gm=fm(0),mm=fm(1),vm=fm(2),ym=fm(3),bm=fm(4),wm=fm(5),Cm=fm(6);gm.range,mm.range,vm.range,ym.range,bm.range,wm.range,Cm.range;const xm=Wg(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth());xm.range;const Sm=Wg(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth());Sm.range;const km=Wg(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());km.every=e=>isFinite(e=Math.floor(e))&&e>0?Wg(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}):null,km.range;const Pm=Wg(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());function jm(e,t,n,r,o,i){const s=[[Jg,1,$g],[Jg,5,5e3],[Jg,15,15e3],[Jg,30,3e4],[i,1,Ug],[i,5,3e5],[i,15,9e5],[i,30,18e5],[o,1,Kg],[o,3,108e5],[o,6,216e5],[o,12,432e5],[r,1,qg],[r,2,1728e5],[n,1,Xg],[t,1,Yg],[t,3,7776e6],[e,1,Zg]];function a(t,n,r){const o=Math.abs(n-t)/r,i=Ep(([,,e])=>e).right(s,o);if(i===s.length)return e.every(Wp(t/Zg,n/Zg,r));if(0===i)return zg.every(Math.max(Wp(t,n,r),1));const[a,l]=s[o/s[i-1][2]<s[i][2]/o?i-1:i];return a.every(l)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const o=n&&"function"==typeof n.range?n:a(e,t,n),i=o?o.range(e,+t+1):[];return r?i.reverse():i},a]}Pm.every=e=>isFinite(e=Math.floor(e))&&e>0?Wg(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null,Pm.range;const[Om,Rm]=jm(Pm,Sm,gm,im,nm,em),[Em,Dm]=jm(km,xm,am,rm,tm,Qg);function Mm(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Am(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Nm(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var Tm,Fm,Im,Lm={"-":"",_:" ",0:"0"},Bm=/^\s*\d+/,Hm=/^%/,_m=/[\\^$*+?|[\]().{}]/g;function Gm(e,t,n){var r=e<0?"-":"",o=(r?-e:e)+"",i=o.length;return r+(i<n?new Array(n-i+1).join(t)+o:o)}function Vm(e){return e.replace(_m,"\\$&")}function Wm(e){return new RegExp("^(?:"+e.map(Vm).join("|")+")","i")}function zm(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function $m(e,t,n){var r=Bm.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Um(e,t,n){var r=Bm.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Km(e,t,n){var r=Bm.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function qm(e,t,n){var r=Bm.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Xm(e,t,n){var r=Bm.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Ym(e,t,n){var r=Bm.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Zm(e,t,n){var r=Bm.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Jm(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Qm(e,t,n){var r=Bm.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function ev(e,t,n){var r=Bm.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function tv(e,t,n){var r=Bm.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function nv(e,t,n){var r=Bm.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function rv(e,t,n){var r=Bm.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function ov(e,t,n){var r=Bm.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function iv(e,t,n){var r=Bm.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function sv(e,t,n){var r=Bm.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function av(e,t,n){var r=Bm.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function lv(e,t,n){var r=Hm.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function cv(e,t,n){var r=Bm.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function uv(e,t,n){var r=Bm.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function dv(e,t){return Gm(e.getDate(),t,2)}function hv(e,t){return Gm(e.getHours(),t,2)}function pv(e,t){return Gm(e.getHours()%12||12,t,2)}function fv(e,t){return Gm(1+rm.count(km(e),e),t,3)}function gv(e,t){return Gm(e.getMilliseconds(),t,3)}function mv(e,t){return gv(e,t)+"000"}function vv(e,t){return Gm(e.getMonth()+1,t,2)}function yv(e,t){return Gm(e.getMinutes(),t,2)}function bv(e,t){return Gm(e.getSeconds(),t,2)}function wv(e){var t=e.getDay();return 0===t?7:t}function Cv(e,t){return Gm(am.count(km(e)-1,e),t,2)}function xv(e){var t=e.getDay();return t>=4||0===t?dm(e):dm.ceil(e)}function Sv(e,t){return e=xv(e),Gm(dm.count(km(e),e)+(4===km(e).getDay()),t,2)}function kv(e){return e.getDay()}function Pv(e,t){return Gm(lm.count(km(e)-1,e),t,2)}function jv(e,t){return Gm(e.getFullYear()%100,t,2)}function Ov(e,t){return Gm((e=xv(e)).getFullYear()%100,t,2)}function Rv(e,t){return Gm(e.getFullYear()%1e4,t,4)}function Ev(e,t){var n=e.getDay();return Gm((e=n>=4||0===n?dm(e):dm.ceil(e)).getFullYear()%1e4,t,4)}function Dv(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Gm(t/60|0,"0",2)+Gm(t%60,"0",2)}function Mv(e,t){return Gm(e.getUTCDate(),t,2)}function Av(e,t){return Gm(e.getUTCHours(),t,2)}function Nv(e,t){return Gm(e.getUTCHours()%12||12,t,2)}function Tv(e,t){return Gm(1+om.count(Pm(e),e),t,3)}function Fv(e,t){return Gm(e.getUTCMilliseconds(),t,3)}function Iv(e,t){return Fv(e,t)+"000"}function Lv(e,t){return Gm(e.getUTCMonth()+1,t,2)}function Bv(e,t){return Gm(e.getUTCMinutes(),t,2)}function Hv(e,t){return Gm(e.getUTCSeconds(),t,2)}function _v(e){var t=e.getUTCDay();return 0===t?7:t}function Gv(e,t){return Gm(gm.count(Pm(e)-1,e),t,2)}function Vv(e){var t=e.getUTCDay();return t>=4||0===t?bm(e):bm.ceil(e)}function Wv(e,t){return e=Vv(e),Gm(bm.count(Pm(e),e)+(4===Pm(e).getUTCDay()),t,2)}function zv(e){return e.getUTCDay()}function $v(e,t){return Gm(mm.count(Pm(e)-1,e),t,2)}function Uv(e,t){return Gm(e.getUTCFullYear()%100,t,2)}function Kv(e,t){return Gm((e=Vv(e)).getUTCFullYear()%100,t,2)}function qv(e,t){return Gm(e.getUTCFullYear()%1e4,t,4)}function Xv(e,t){var n=e.getUTCDay();return Gm((e=n>=4||0===n?bm(e):bm.ceil(e)).getUTCFullYear()%1e4,t,4)}function Yv(){return"+0000"}function Zv(){return"%"}function Jv(e){return+e}function Qv(e){return Math.floor(+e/1e3)}function ey(e){return new Date(e)}function ty(e){return e instanceof Date?+e:+new Date(+e)}function ny(e,t,n,r,o,i,s,a,l,c){var u=ig(),d=u.invert,h=u.domain,p=c(".%L"),f=c(":%S"),g=c("%I:%M"),m=c("%I %p"),v=c("%a %d"),y=c("%b %d"),b=c("%B"),w=c("%Y");function C(e){return(l(e)<e?p:a(e)<e?f:s(e)<e?g:i(e)<e?m:r(e)<e?o(e)<e?v:y:n(e)<e?b:w)(e)}return u.invert=function(e){return new Date(d(e))},u.domain=function(e){return arguments.length?h(Array.from(e,ty)):h().map(ey)},u.ticks=function(t){var n=h();return e(n[0],n[n.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?C:c(t)},u.nice=function(e){var n=h();return e&&"function"==typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?h(kg(n,e)):u},u.copy=function(){return rg(u,ny(e,t,n,r,o,i,s,a,l,c))},u}function ry(){var e,t,n,r,o,i=0,s=1,a=Qf,l=!1;function c(t){return null==t||isNaN(t=+t)?o:a(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var n,r;return arguments.length?([n,r]=t,a=e(n,r),c):[a(0),a(1)]}}return c.domain=function(o){return arguments.length?([i,s]=o,e=r(i=+i),t=r(s=+s),n=e===t?0:1/(t-e),c):[i,s]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(a=e,c):a},c.range=u(Xf),c.rangeRound=u(Yf),c.unknown=function(e){return arguments.length?(o=e,c):o},function(o){return r=o,e=o(i),t=o(s),n=e===t?0:1/(t-e),c}}function oy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function iy(){var e=Bg(ry());return e.copy=function(){return oy(e,iy()).exponent(e.exponent())},Yp.apply(e,arguments)}function sy(){var e,t,n,r,o,i,s,a=0,l=.5,c=1,u=1,d=Qf,h=!1;function p(e){return isNaN(e=+e)?s:(e=.5+((e=+i(e))-t)*(u*e<u*t?r:o),d(h?Math.max(0,Math.min(1,e)):e))}function f(e){return function(t){var n,r,o;return arguments.length?([n,r,o]=t,d=function(e,t){void 0===t&&(t=e,e=Xf);for(var n=0,r=t.length-1,o=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(o,o=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return i[t](e-t)}}(e,[n,r,o]),p):[d(0),d(.5),d(1)]}}return p.domain=function(s){return arguments.length?([a,l,c]=s,e=i(a=+a),t=i(l=+l),n=i(c=+c),r=e===t?0:.5/(t-e),o=t===n?0:.5/(n-t),u=t<e?-1:1,p):[a,l,c]},p.clamp=function(e){return arguments.length?(h=!!e,p):h},p.interpolator=function(e){return arguments.length?(d=e,p):d},p.range=f(Xf),p.rangeRound=f(Yf),p.unknown=function(e){return arguments.length?(s=e,p):s},function(s){return i=s,e=s(a),t=s(l),n=s(c),r=e===t?0:.5/(t-e),o=t===n?0:.5/(n-t),u=t<e?-1:1,p}}function ay(){var e=Bg(sy());return e.copy=function(){return oy(e,ay()).exponent(e.exponent())},Yp.apply(e,arguments)}!function(e){Tm=function(e){var t=e.dateTime,n=e.date,r=e.time,o=e.periods,i=e.days,s=e.shortDays,a=e.months,l=e.shortMonths,c=Wm(o),u=zm(o),d=Wm(i),h=zm(i),p=Wm(s),f=zm(s),g=Wm(a),m=zm(a),v=Wm(l),y=zm(l),b={a:function(e){return s[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return a[e.getMonth()]},c:null,d:dv,e:dv,f:mv,g:Ov,G:Ev,H:hv,I:pv,j:fv,L:gv,m:vv,M:yv,p:function(e){return o[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Jv,s:Qv,S:bv,u:wv,U:Cv,V:Sv,w:kv,W:Pv,x:null,X:null,y:jv,Y:Rv,Z:Dv,"%":Zv},w={a:function(e){return s[e.getUTCDay()]},A:function(e){return i[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return a[e.getUTCMonth()]},c:null,d:Mv,e:Mv,f:Iv,g:Kv,G:Xv,H:Av,I:Nv,j:Tv,L:Fv,m:Lv,M:Bv,p:function(e){return o[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Jv,s:Qv,S:Hv,u:_v,U:Gv,V:Wv,w:zv,W:$v,x:null,X:null,y:Uv,Y:qv,Z:Yv,"%":Zv},C={a:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=f.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=g.exec(t.slice(n));return r?(e.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return k(e,t,n,r)},d:tv,e:tv,f:av,g:Zm,G:Ym,H:rv,I:rv,j:nv,L:sv,m:ev,M:ov,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:Qm,Q:cv,s:uv,S:iv,u:Um,U:Km,V:qm,w:$m,W:Xm,x:function(e,t,r){return k(e,n,t,r)},X:function(e,t,n){return k(e,r,t,n)},y:Zm,Y:Ym,Z:Jm,"%":lv};function x(e,t){return function(n){var r,o,i,s=[],a=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++a<c;)37===e.charCodeAt(a)&&(s.push(e.slice(l,a)),null!=(o=Lm[r=e.charAt(++a)])?r=e.charAt(++a):o="e"===r?" ":"0",(i=t[r])&&(r=i(n,o)),s.push(r),l=a+1);return s.push(e.slice(l,a)),s.join("")}}function S(e,t){return function(n){var r,o,i=Nm(1900,void 0,1);if(k(i,e,n+="",0)!=n.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(t&&!("Z"in i)&&(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||i.V>53)return null;"w"in i||(i.w=1),"Z"in i?(o=(r=Am(Nm(i.y,0,1))).getUTCDay(),r=o>4||0===o?mm.ceil(r):mm(r),r=om.offset(r,7*(i.V-1)),i.y=r.getUTCFullYear(),i.m=r.getUTCMonth(),i.d=r.getUTCDate()+(i.w+6)%7):(o=(r=Mm(Nm(i.y,0,1))).getDay(),r=o>4||0===o?lm.ceil(r):lm(r),r=rm.offset(r,7*(i.V-1)),i.y=r.getFullYear(),i.m=r.getMonth(),i.d=r.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),o="Z"in i?Am(Nm(i.y,0,1)).getUTCDay():Mm(Nm(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(o+5)%7:i.w+7*i.U-(o+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,Am(i)):Mm(i)}}function k(e,t,n,r){for(var o,i,s=0,a=t.length,l=n.length;s<a;){if(r>=l)return-1;if(37===(o=t.charCodeAt(s++))){if(o=t.charAt(s++),!(i=C[o in Lm?t.charAt(s++):o])||(r=i(e,n,r))<0)return-1}else if(o!=n.charCodeAt(r++))return-1}return r}return b.x=x(n,b),b.X=x(r,b),b.c=x(t,b),w.x=x(n,w),w.X=x(r,w),w.c=x(t,w),{format:function(e){var t=x(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=S(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=x(e+="",w);return t.toString=function(){return e},t},utcParse:function(e){var t=S(e+="",!0);return t.toString=function(){return e},t}}}(e),Fm=Tm.format,Tm.parse,Im=Tm.utcFormat,Tm.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const ly=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Qp,scaleDiverging:function e(){var t=xg(sy()(Qf));return t.copy=function(){return oy(t,e())},Yp.apply(t,arguments)},scaleDivergingLog:function e(){var t=Mg(sy()).domain([.1,1,10]);return t.copy=function(){return oy(t,e()).base(t.base())},Yp.apply(t,arguments)},scaleDivergingPow:ay,scaleDivergingSqrt:function(){return ay.apply(null,arguments).exponent(.5)},scaleDivergingSymlog:function e(){var t=Tg(sy());return t.copy=function(){return oy(t,e()).constant(t.constant())},Yp.apply(t,arguments)},scaleIdentity:function e(t){var n;function r(e){return null==e||isNaN(e=+e)?n:e}return r.invert=r,r.domain=r.range=function(e){return arguments.length?(t=Array.from(e,Zf),r):t.slice()},r.unknown=function(e){return arguments.length?(n=e,r):n},r.copy=function(){return e(t).unknown(n)},t=arguments.length?Array.from(t,Zf):[0,1],xg(r)},scaleImplicit:Zp,scaleLinear:Sg,scaleLog:function e(){const t=Mg(og()).domain([1,10]);return t.copy=()=>rg(t,e()).base(t.base()),Xp.apply(t,arguments),t},scaleOrdinal:Jp,scalePoint:tf,scalePow:Hg,scaleQuantile:function e(){var t,n=[],r=[],o=[];function i(){var e=0,t=Math.max(1,r.length);for(o=new Array(t-1);++e<t;)o[e-1]=qp(n,e/t);return s}function s(e){return null==e||isNaN(e=+e)?t:r[Ap(o,e)]}return s.invertExtent=function(e){var t=r.indexOf(e);return t<0?[NaN,NaN]:[t>0?o[t-1]:n[0],t<o.length?o[t]:n[n.length-1]]},s.domain=function(e){if(!arguments.length)return n.slice();n=[];for(let t of e)null==t||isNaN(t=+t)||n.push(t);return n.sort(Op),i()},s.range=function(e){return arguments.length?(r=Array.from(e),i()):r.slice()},s.unknown=function(e){return arguments.length?(t=e,s):t},s.quantiles=function(){return o.slice()},s.copy=function(){return e().domain(n).range(r).unknown(t)},Xp.apply(s,arguments)},scaleQuantize:function e(){var t,n=0,r=1,o=1,i=[.5],s=[0,1];function a(e){return null!=e&&e<=e?s[Ap(i,e,0,o)]:t}function l(){var e=-1;for(i=new Array(o);++e<o;)i[e]=((e+1)*r-(e-o)*n)/(o+1);return a}return a.domain=function(e){return arguments.length?([n,r]=e,n=+n,r=+r,l()):[n,r]},a.range=function(e){return arguments.length?(o=(s=Array.from(e)).length-1,l()):s.slice()},a.invertExtent=function(e){var t=s.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,i[0]]:t>=o?[i[o-1],r]:[i[t-1],i[t]]},a.unknown=function(e){return arguments.length?(t=e,a):a},a.thresholds=function(){return i.slice()},a.copy=function(){return e().domain([n,r]).range(s).unknown(t)},Xp.apply(xg(a),arguments)},scaleRadial:function e(){var t,n=ig(),r=[0,1],o=!1;function i(e){var r=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(n(e));return isNaN(r)?t:o?Math.round(r):r}return i.invert=function(e){return n.invert(_g(e))},i.domain=function(e){return arguments.length?(n.domain(e),i):n.domain()},i.range=function(e){return arguments.length?(n.range((r=Array.from(e,Zf)).map(_g)),i):r.slice()},i.rangeRound=function(e){return i.range(e).round(!0)},i.round=function(e){return arguments.length?(o=!!e,i):o},i.clamp=function(e){return arguments.length?(n.clamp(e),i):n.clamp()},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return e(n.domain(),r).round(o).clamp(n.clamp()).unknown(t)},Xp.apply(i,arguments),xg(i)},scaleSequential:function e(){var t=xg(ry()(Qf));return t.copy=function(){return oy(t,e())},Yp.apply(t,arguments)},scaleSequentialLog:function e(){var t=Mg(ry()).domain([1,10]);return t.copy=function(){return oy(t,e()).base(t.base())},Yp.apply(t,arguments)},scaleSequentialPow:iy,scaleSequentialQuantile:function e(){var t=[],n=Qf;function r(e){if(null!=e&&!isNaN(e=+e))return n((Ap(t,e,1)-1)/(t.length-1))}return r.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(Op),r},r.interpolator=function(e){return arguments.length?(n=e,r):n},r.range=function(){return t.map((e,r)=>n(r/(t.length-1)))},r.quantiles=function(e){return Array.from({length:e+1},(n,r)=>function(e,t){if((n=(e=Float64Array.from(function*(e){for(let t of e)null!=t&&(t=+t)>=t&&(yield t)}(e))).length)&&!isNaN(t=+t)){if(t<=0||n<2)return $p(e);if(t>=1)return zp(e);var n,r=(n-1)*t,o=Math.floor(r),i=zp(Up(e,o).subarray(0,o+1));return i+($p(e.subarray(o+1))-i)*(r-o)}}(t,r/e))},r.copy=function(){return e(n).domain(t)},Yp.apply(r,arguments)},scaleSequentialSqrt:function(){return iy.apply(null,arguments).exponent(.5)},scaleSequentialSymlog:function e(){var t=Tg(ry());return t.copy=function(){return oy(t,e()).constant(t.constant())},Yp.apply(t,arguments)},scaleSqrt:function(){return Hg.apply(null,arguments).exponent(.5)},scaleSymlog:function e(){var t=Tg(og());return t.copy=function(){return rg(t,e()).constant(t.constant())},Xp.apply(t,arguments)},scaleThreshold:function e(){var t,n=[.5],r=[0,1],o=1;function i(e){return null!=e&&e<=e?r[Ap(n,e,0,o)]:t}return i.domain=function(e){return arguments.length?(n=Array.from(e),o=Math.min(n.length,r.length-1),i):n.slice()},i.range=function(e){return arguments.length?(r=Array.from(e),o=Math.min(n.length,r.length-1),i):r.slice()},i.invertExtent=function(e){var t=r.indexOf(e);return[n[t-1],n[t]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return e().domain(n).range(r).unknown(t)},Xp.apply(i,arguments)},scaleTime:function(){return Xp.apply(ny(Em,Dm,km,xm,am,rm,tm,Qg,Jg,Fm).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},scaleUtc:function(){return Xp.apply(ny(Om,Rm,Pm,Sm,gm,om,nm,em,Jg,Im).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},tickFormat:Cg},Symbol.toStringTag,{value:"Module"}));var cy=bt;var uy=function(e,t,n){for(var r=-1,o=e.length;++r<o;){var i=e[r],s=t(i);if(null!=s&&(void 0===a?s==s&&!cy(s):n(s,a)))var a=s,l=i}return l};var dy=function(e,t){return e>t},hy=uy,py=dy,fy=zc;const gy=c(function(e){return e&&e.length?hy(e,fy,py):void 0});var my=function(e,t){return e<t},vy=uy,yy=my,by=zc;const wy=c(function(e){return e&&e.length?vy(e,by,yy):void 0});var Cy=tr,xy=tu,Sy=Xu,ky=Qe;var Py=Gu,jy=function(e,t){return(ky(e)?Cy:Sy)(e,xy(t))};const Oy=c(function(e,t){return Py(jy(e,t),1)});var Ry=yc;const Ey=c(function(e,t){return Ry(e,t)});var Dy,My=1e9,Ay=!0,Ny="[DecimalError] ",Ty=Ny+"Invalid argument: ",Fy=Ny+"Exponent out of range: ",Iy=Math.floor,Ly=Math.pow,By=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Hy=1e7,_y=9007199254740991,Gy=Iy(1286742750677284.5),Vy={};function Wy(e,t){var n,r,o,i,s,a,l,c,u=e.constructor,d=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),Ay?Qy(t,d):t;if(l=e.d,c=t.d,s=e.e,o=t.e,l=l.slice(),i=s-o){for(i<0?(r=l,i=-i,a=c.length):(r=c,o=s,a=l.length),i>(a=(s=Math.ceil(d/7))>a?s+1:a+1)&&(i=a,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for((a=l.length)-(i=c.length)<0&&(i=a,r=c,c=l,l=r),n=0;i;)n=(l[--i]=l[i]+c[i]+n)/Hy|0,l[i]%=Hy;for(n&&(l.unshift(n),++o),a=l.length;0==l[--a];)l.pop();return t.d=l,t.e=o,Ay?Qy(t,d):t}function zy(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Ty+e)}function $y(e){var t,n,r,o=e.length-1,i="",s=e[0];if(o>0){for(i+=s,t=1;t<o;t++)(n=7-(r=e[t]+"").length)&&(i+=Yy(n)),i+=r;(n=7-(r=(s=e[t])+"").length)&&(i+=Yy(n))}else if(0===s)return"0";for(;s%10==0;)s/=10;return i+s}Vy.absoluteValue=Vy.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},Vy.comparedTo=Vy.cmp=function(e){var t,n,r,o,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(t=0,n=(r=i.d.length)<(o=e.d.length)?r:o;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return r===o?0:r>o^i.s<0?1:-1},Vy.decimalPlaces=Vy.dp=function(){var e=this,t=e.d.length-1,n=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},Vy.dividedBy=Vy.div=function(e){return Uy(this,new this.constructor(e))},Vy.dividedToIntegerBy=Vy.idiv=function(e){var t=this.constructor;return Qy(Uy(this,new t(e),0,1),t.precision)},Vy.equals=Vy.eq=function(e){return!this.cmp(e)},Vy.exponent=function(){return qy(this)},Vy.greaterThan=Vy.gt=function(e){return this.cmp(e)>0},Vy.greaterThanOrEqualTo=Vy.gte=function(e){return this.cmp(e)>=0},Vy.isInteger=Vy.isint=function(){return this.e>this.d.length-2},Vy.isNegative=Vy.isneg=function(){return this.s<0},Vy.isPositive=Vy.ispos=function(){return this.s>0},Vy.isZero=function(){return 0===this.s},Vy.lessThan=Vy.lt=function(e){return this.cmp(e)<0},Vy.lessThanOrEqualTo=Vy.lte=function(e){return this.cmp(e)<1},Vy.logarithm=Vy.log=function(e){var t,n=this,r=n.constructor,o=r.precision,i=o+5;if(void 0===e)e=new r(10);else if((e=new r(e)).s<1||e.eq(Dy))throw Error(Ny+"NaN");if(n.s<1)throw Error(Ny+(n.s?"NaN":"-Infinity"));return n.eq(Dy)?new r(0):(Ay=!1,t=Uy(Zy(n,i),Zy(e,i),i),Ay=!0,Qy(t,o))},Vy.minus=Vy.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?eb(t,e):Wy(t,(e.s=-e.s,e))},Vy.modulo=Vy.mod=function(e){var t,n=this,r=n.constructor,o=r.precision;if(!(e=new r(e)).s)throw Error(Ny+"NaN");return n.s?(Ay=!1,t=Uy(n,e,0,1).times(e),Ay=!0,n.minus(t)):Qy(new r(n),o)},Vy.naturalExponential=Vy.exp=function(){return Ky(this)},Vy.naturalLogarithm=Vy.ln=function(){return Zy(this)},Vy.negated=Vy.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},Vy.plus=Vy.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Wy(t,e):eb(t,(e.s=-e.s,e))},Vy.precision=Vy.sd=function(e){var t,n,r,o=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(Ty+e);if(t=qy(o)+1,n=7*(r=o.d.length-1)+1,r=o.d[r]){for(;r%10==0;r/=10)n--;for(r=o.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},Vy.squareRoot=Vy.sqrt=function(){var e,t,n,r,o,i,s,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(Ny+"NaN")}for(e=qy(a),Ay=!1,0==(o=Math.sqrt(+a))||o==1/0?(((t=$y(a.d)).length+e)%2==0&&(t+="0"),o=Math.sqrt(t),e=Iy((e+1)/2)-(e<0||e%2),r=new l(t=o==1/0?"5e"+e:(t=o.toExponential()).slice(0,t.indexOf("e")+1)+e)):r=new l(o.toString()),o=s=(n=l.precision)+3;;)if(r=(i=r).plus(Uy(a,i,s+2)).times(.5),$y(i.d).slice(0,s)===(t=$y(r.d)).slice(0,s)){if(t=t.slice(s-3,s+1),o==s&&"4999"==t){if(Qy(i,n+1,0),i.times(i).eq(a)){r=i;break}}else if("9999"!=t)break;s+=4}return Ay=!0,Qy(r,n)},Vy.times=Vy.mul=function(e){var t,n,r,o,i,s,a,l,c,u=this,d=u.constructor,h=u.d,p=(e=new d(e)).d;if(!u.s||!e.s)return new d(0);for(e.s*=u.s,n=u.e+e.e,(l=h.length)<(c=p.length)&&(i=h,h=p,p=i,s=l,l=c,c=s),i=[],r=s=l+c;r--;)i.push(0);for(r=c;--r>=0;){for(t=0,o=l+r;o>r;)a=i[o]+p[r]*h[o-r-1]+t,i[o--]=a%Hy|0,t=a/Hy|0;i[o]=(i[o]+t)%Hy|0}for(;!i[--s];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,Ay?Qy(e,d.precision):e},Vy.toDecimalPlaces=Vy.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(zy(e,0,My),void 0===t?t=r.rounding:zy(t,0,8),Qy(n,e+qy(n)+1,t))},Vy.toExponential=function(e,t){var n,r=this,o=r.constructor;return void 0===e?n=tb(r,!0):(zy(e,0,My),void 0===t?t=o.rounding:zy(t,0,8),n=tb(r=Qy(new o(r),e+1,t),!0,e+1)),n},Vy.toFixed=function(e,t){var n,r,o=this,i=o.constructor;return void 0===e?tb(o):(zy(e,0,My),void 0===t?t=i.rounding:zy(t,0,8),n=tb((r=Qy(new i(o),e+qy(o)+1,t)).abs(),!1,e+qy(r)+1),o.isneg()&&!o.isZero()?"-"+n:n)},Vy.toInteger=Vy.toint=function(){var e=this,t=e.constructor;return Qy(new t(e),qy(e)+1,t.rounding)},Vy.toNumber=function(){return+this},Vy.toPower=Vy.pow=function(e){var t,n,r,o,i,s,a=this,l=a.constructor,c=+(e=new l(e));if(!e.s)return new l(Dy);if(!(a=new l(a)).s){if(e.s<1)throw Error(Ny+"Infinity");return a}if(a.eq(Dy))return a;if(r=l.precision,e.eq(Dy))return Qy(a,r);if(s=(t=e.e)>=(n=e.d.length-1),i=a.s,s){if((n=c<0?-c:c)<=_y){for(o=new l(Dy),t=Math.ceil(r/7+4),Ay=!1;n%2&&nb((o=o.times(a)).d,t),0!==(n=Iy(n/2));)nb((a=a.times(a)).d,t);return Ay=!0,e.s<0?new l(Dy).div(o):Qy(o,r)}}else if(i<0)throw Error(Ny+"NaN");return i=i<0&&1&e.d[Math.max(t,n)]?-1:1,a.s=1,Ay=!1,o=e.times(Zy(a,r+12)),Ay=!0,(o=Ky(o)).s=i,o},Vy.toPrecision=function(e,t){var n,r,o=this,i=o.constructor;return void 0===e?r=tb(o,(n=qy(o))<=i.toExpNeg||n>=i.toExpPos):(zy(e,1,My),void 0===t?t=i.rounding:zy(t,0,8),r=tb(o=Qy(new i(o),e,t),e<=(n=qy(o))||n<=i.toExpNeg,e)),r},Vy.toSignificantDigits=Vy.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(zy(e,1,My),void 0===t?t=n.rounding:zy(t,0,8)),Qy(new n(this),e,t)},Vy.toString=Vy.valueOf=Vy.val=Vy.toJSON=Vy[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=qy(e),n=e.constructor;return tb(e,t<=n.toExpNeg||t>=n.toExpPos)};var Uy=function(){function e(e,t){var n,r=0,o=e.length;for(e=e.slice();o--;)n=e[o]*t+r,e[o]=n%Hy|0,r=n/Hy|0;return r&&e.unshift(r),e}function t(e,t,n,r){var o,i;if(n!=r)i=n>r?1:-1;else for(o=i=0;o<n;o++)if(e[o]!=t[o]){i=e[o]>t[o]?1:-1;break}return i}function n(e,t,n){for(var r=0;n--;)e[n]-=r,r=e[n]<t[n]?1:0,e[n]=r*Hy+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,o,i,s){var a,l,c,u,d,h,p,f,g,m,v,y,b,w,C,x,S,k,P=r.constructor,j=r.s==o.s?1:-1,O=r.d,R=o.d;if(!r.s)return new P(r);if(!o.s)throw Error(Ny+"Division by zero");for(l=r.e-o.e,S=R.length,C=O.length,f=(p=new P(j)).d=[],c=0;R[c]==(O[c]||0);)++c;if(R[c]>(O[c]||0)&&--l,(y=null==i?i=P.precision:s?i+(qy(r)-qy(o))+1:i)<0)return new P(0);if(y=y/7+2|0,c=0,1==S)for(u=0,R=R[0],y++;(c<C||u)&&y--;c++)b=u*Hy+(O[c]||0),f[c]=b/R|0,u=b%R|0;else{for((u=Hy/(R[0]+1)|0)>1&&(R=e(R,u),O=e(O,u),S=R.length,C=O.length),w=S,m=(g=O.slice(0,S)).length;m<S;)g[m++]=0;(k=R.slice()).unshift(0),x=R[0],R[1]>=Hy/2&&++x;do{u=0,(a=t(R,g,S,m))<0?(v=g[0],S!=m&&(v=v*Hy+(g[1]||0)),(u=v/x|0)>1?(u>=Hy&&(u=Hy-1),1==(a=t(d=e(R,u),g,h=d.length,m=g.length))&&(u--,n(d,S<h?k:R,h))):(0==u&&(a=u=1),d=R.slice()),(h=d.length)<m&&d.unshift(0),n(g,d,m),-1==a&&(a=t(R,g,S,m=g.length))<1&&(u++,n(g,S<m?k:R,m)),m=g.length):0===a&&(u++,g=[0]),f[c++]=u,a&&g[0]?g[m++]=O[w]||0:(g=[O[w]],m=1)}while((w++<C||void 0!==g[0])&&y--)}return f[0]||f.shift(),p.e=l,Qy(p,s?i+qy(p)+1:i)}}();function Ky(e,t){var n,r,o,i,s,a=0,l=0,c=e.constructor,u=c.precision;if(qy(e)>16)throw Error(Fy+qy(e));if(!e.s)return new c(Dy);for(Ay=!1,s=u,i=new c(.03125);e.abs().gte(.1);)e=e.times(i),l+=5;for(s+=Math.log(Ly(2,l))/Math.LN10*2+5|0,n=r=o=new c(Dy),c.precision=s;;){if(r=Qy(r.times(e),s),n=n.times(++a),$y((i=o.plus(Uy(r,n,s))).d).slice(0,s)===$y(o.d).slice(0,s)){for(;l--;)o=Qy(o.times(o),s);return c.precision=u,null==t?(Ay=!0,Qy(o,u)):o}o=i}}function qy(e){for(var t=7*e.e,n=e.d[0];n>=10;n/=10)t++;return t}function Xy(e,t,n){if(t>e.LN10.sd())throw Ay=!0,n&&(e.precision=n),Error(Ny+"LN10 precision limit exceeded");return Qy(new e(e.LN10),t)}function Yy(e){for(var t="";e--;)t+="0";return t}function Zy(e,t){var n,r,o,i,s,a,l,c,u,d=1,h=e,p=h.d,f=h.constructor,g=f.precision;if(h.s<1)throw Error(Ny+(h.s?"NaN":"-Infinity"));if(h.eq(Dy))return new f(0);if(null==t?(Ay=!1,c=g):c=t,h.eq(10))return null==t&&(Ay=!0),Xy(f,c);if(c+=10,f.precision=c,r=(n=$y(p)).charAt(0),i=qy(h),!(Math.abs(i)<15e14))return l=Xy(f,c+2,g).times(i+""),h=Zy(new f(r+"."+n.slice(1)),c-10).plus(l),f.precision=g,null==t?(Ay=!0,Qy(h,g)):h;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=$y((h=h.times(e)).d)).charAt(0),d++;for(i=qy(h),r>1?(h=new f("0."+n),i++):h=new f(r+"."+n.slice(1)),a=s=h=Uy(h.minus(Dy),h.plus(Dy),c),u=Qy(h.times(h),c),o=3;;){if(s=Qy(s.times(u),c),$y((l=a.plus(Uy(s,new f(o),c))).d).slice(0,c)===$y(a.d).slice(0,c))return a=a.times(2),0!==i&&(a=a.plus(Xy(f,c+2,g).times(i+""))),a=Uy(a,new f(d),c),f.precision=g,null==t?(Ay=!0,Qy(a,g)):a;a=l,o+=2}}function Jy(e,t){var n,r,o;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);)++r;for(o=t.length;48===t.charCodeAt(o-1);)--o;if(t=t.slice(r,o)){if(o-=r,n=n-r-1,e.e=Iy(n/7),e.d=[],r=(n+1)%7,n<0&&(r+=7),r<o){for(r&&e.d.push(+t.slice(0,r)),o-=7;r<o;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=o;for(;r--;)t+="0";if(e.d.push(+t),Ay&&(e.e>Gy||e.e<-Gy))throw Error(Fy+n)}else e.s=0,e.e=0,e.d=[0];return e}function Qy(e,t,n){var r,o,i,s,a,l,c,u,d=e.d;for(s=1,i=d[0];i>=10;i/=10)s++;if((r=t-s)<0)r+=7,o=t,c=d[u=0];else{if((u=Math.ceil((r+1)/7))>=(i=d.length))return e;for(c=i=d[u],s=1;i>=10;i/=10)s++;o=(r%=7)-7+s}if(void 0!==n&&(a=c/(i=Ly(10,s-o-1))%10|0,l=t<0||void 0!==d[u+1]||c%i,l=n<4?(a||l)&&(0==n||n==(e.s<0?3:2)):a>5||5==a&&(4==n||l||6==n&&(r>0?o>0?c/Ly(10,s-o):0:d[u-1])%10&1||n==(e.s<0?8:7))),t<1||!d[0])return l?(i=qy(e),d.length=1,t=t-i-1,d[0]=Ly(10,(7-t%7)%7),e.e=Iy(-t/7)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(0==r?(d.length=u,i=1,u--):(d.length=u+1,i=Ly(10,7-r),d[u]=o>0?(c/Ly(10,s-o)%Ly(10,o)|0)*i:0),l)for(;;){if(0==u){(d[0]+=i)==Hy&&(d[0]=1,++e.e);break}if(d[u]+=i,d[u]!=Hy)break;d[u--]=0,i=1}for(r=d.length;0===d[--r];)d.pop();if(Ay&&(e.e>Gy||e.e<-Gy))throw Error(Fy+qy(e));return e}function eb(e,t){var n,r,o,i,s,a,l,c,u,d,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Ay?Qy(t,p):t;if(l=e.d,d=t.d,r=t.e,c=e.e,l=l.slice(),s=c-r){for((u=s<0)?(n=l,s=-s,a=d.length):(n=d,r=c,a=l.length),s>(o=Math.max(Math.ceil(p/7),a)+2)&&(s=o,n.length=1),n.reverse(),o=s;o--;)n.push(0);n.reverse()}else{for((u=(o=l.length)<(a=d.length))&&(a=o),o=0;o<a;o++)if(l[o]!=d[o]){u=l[o]<d[o];break}s=0}for(u&&(n=l,l=d,d=n,t.s=-t.s),a=l.length,o=d.length-a;o>0;--o)l[a++]=0;for(o=d.length;o>s;){if(l[--o]<d[o]){for(i=o;i&&0===l[--i];)l[i]=Hy-1;--l[i],l[o]+=Hy}l[o]-=d[o]}for(;0===l[--a];)l.pop();for(;0===l[0];l.shift())--r;return l[0]?(t.d=l,t.e=r,Ay?Qy(t,p):t):new h(0)}function tb(e,t,n){var r,o=qy(e),i=$y(e.d),s=i.length;return t?(n&&(r=n-s)>0?i=i.charAt(0)+"."+i.slice(1)+Yy(r):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(o<0?"e":"e+")+o):o<0?(i="0."+Yy(-o-1)+i,n&&(r=n-s)>0&&(i+=Yy(r))):o>=s?(i+=Yy(o+1-s),n&&(r=n-o-1)>0&&(i=i+"."+Yy(r))):((r=o+1)<s&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-s)>0&&(o+1===s&&(i+="."),i+=Yy(r))),e.s<0?"-"+i:i}function nb(e,t){if(e.length>t)return e.length=t,!0}function rb(e){if(!e||"object"!=typeof e)throw Error(Ny+"Object expected");var t,n,r,o=["precision",1,My,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<o.length;t+=3)if(void 0!==(r=e[n=o[t]])){if(!(Iy(r)===r&&r>=o[t+1]&&r<=o[t+2]))throw Error(Ty+n+": "+r);this[n]=r}if(void 0!==(r=e[n="LN10"])){if(r!=Math.LN10)throw Error(Ty+n+": "+r);this[n]=new this(r)}return this}var ob=function e(t){var n,r,o;function i(e){var t=this;if(!(t instanceof i))return new i(e);if(t.constructor=i,e instanceof i)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"==typeof e){if(0*e!=0)throw Error(Ty+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):Jy(t,e.toString())}if("string"!=typeof e)throw Error(Ty+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!By.test(e))throw Error(Ty+e);Jy(t,e)}if(i.prototype=Vy,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=e,i.config=i.set=rb,void 0===t&&(t={}),t)for(o=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<o.length;)t.hasOwnProperty(r=o[n++])||(t[r]=this[r]);return i.config(t),i}({precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"});Dy=new ob(1);const ib=ob;function sb(e){return function(e){if(Array.isArray(e))return ab(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ab(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ab(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ab(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lb=function(e){return e},cb={},ub=function(e){return e===cb},db=function(e){return function t(){return 0===arguments.length||1===arguments.length&&ub(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},hb=function e(t,n){return 1===t?n:db(function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var s=o.filter(function(e){return e!==cb}).length;return s>=t?n.apply(void 0,o):e(t-s,db(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=o.map(function(e){return ub(e)?t.shift():e});return n.apply(void 0,sb(i).concat(t))}))})},pb=function(e){return hb(e.length,e)},fb=function(e,t){for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},gb=pb(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(e){return t[e]}).map(e)}),mb=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},vb=function(e){var t=null,n=null;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t&&o.every(function(e,n){return e===t[n]})?n:(t=o,n=e.apply(void 0,o))}};const yb={rangeStep:function(e,t,n){for(var r=new ib(e),o=0,i=[];r.lt(t)&&o<1e5;)i.push(r.toNumber()),r=r.add(n),o++;return i},getDigitCount:function(e){return 0===e?1:Math.floor(new ib(e).abs().log(10).toNumber())+1},interpolateNumber:pb(function(e,t,n){var r=+e;return r+n*(+t-r)}),uninterpolateNumber:pb(function(e,t,n){var r=t-+e;return(n-e)/(r=r||1/0)}),uninterpolateTruncation:pb(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))})};function bb(e){return function(e){if(Array.isArray(e))return xb(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Cb(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){o=!0,i=l}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||Cb(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cb(e,t){if(e){if("string"==typeof e)return xb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xb(e,t):void 0}}function xb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sb(e){var t=wb(e,2),n=t[0],r=t[1],o=n,i=r;return n>r&&(o=r,i=n),[o,i]}function kb(e,t,n){if(e.lte(0))return new ib(0);var r=yb.getDigitCount(e.toNumber()),o=new ib(10).pow(r),i=e.div(o),s=1!==r?.05:.1,a=new ib(Math.ceil(i.div(s).toNumber())).add(n).mul(s).mul(o);return t?a:new ib(Math.ceil(a))}function Pb(e,t,n){var r=1,o=new ib(e);if(!o.isint()&&n){var i=Math.abs(e);i<1?(r=new ib(10).pow(yb.getDigitCount(e)-1),o=new ib(Math.floor(o.div(r).toNumber())).mul(r)):i>1&&(o=new ib(Math.floor(e)))}else 0===e?o=new ib(Math.floor((t-1)/2)):n||(o=new ib(Math.floor(e)));var s=Math.floor((t-1)/2),a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return lb;var r=t.reverse(),o=r[0],i=r.slice(1);return function(){return i.reduce(function(e,t){return t(e)},o.apply(void 0,arguments))}}(gb(function(e){return o.add(new ib(e-s).mul(r)).toNumber()}),fb);return a(0,t)}function jb(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new ib(0),tickMin:new ib(0),tickMax:new ib(0)};var i,s=kb(new ib(t).sub(e).div(n-1),r,o);i=e<=0&&t>=0?new ib(0):(i=new ib(e).add(t).div(2)).sub(new ib(i).mod(s));var a=Math.ceil(i.sub(e).div(s).toNumber()),l=Math.ceil(new ib(t).sub(i).div(s).toNumber()),c=a+l+1;return c>n?jb(e,t,n,r,o+1):(c<n&&(l=t>0?l+(n-c):l,a=t>0?a:a+(n-c)),{step:s,tickMin:i.sub(new ib(a).mul(s)),tickMax:i.add(new ib(l).mul(s))})}var Ob=vb(function(e){var t=wb(e,2),n=t[0],r=t[1],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=Math.max(o,2),a=wb(Sb([n,r]),2),l=a[0],c=a[1];if(l===-1/0||c===1/0){var u=c===1/0?[l].concat(bb(fb(0,o-1).map(function(){return 1/0}))):[].concat(bb(fb(0,o-1).map(function(){return-1/0})),[c]);return n>r?mb(u):u}if(l===c)return Pb(l,o,i);var d=jb(l,c,s,i),h=d.step,p=d.tickMin,f=d.tickMax,g=yb.rangeStep(p,f.add(new ib(.1).mul(h)),h);return n>r?mb(g):g}),Rb=vb(function(e,t){var n=wb(e,2),r=n[0],o=n[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=wb(Sb([r,o]),2),a=s[0],l=s[1];if(a===-1/0||l===1/0)return[r,o];if(a===l)return[a];var c=Math.max(t,2),u=kb(new ib(l).sub(a).div(c-1),i,0),d=[].concat(bb(yb.rangeStep(new ib(a),new ib(l).sub(new ib(.99).mul(u)),u)),[l]);return r>o?mb(d):d});function Eb(e,t){throw new Error("Invariant failed")}var Db=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Mb(e){return(Mb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ab(){return Ab=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ab.apply(this,arguments)}function Nb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(u){c=!0,o=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Tb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tb(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fb(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Ib(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Vb(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lb(e,t,n){return t=Hb(t),function(e,t){if(t&&("object"===Mb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Bb()?Reflect.construct(t,n||[],Hb(e).constructor):t.apply(e,n))}function Bb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Bb=function(){return!!e})()}function Hb(e){return(Hb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _b(e,t){return(_b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Gb(e,t,n){return(t=Vb(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vb(e){var t=function(e,t){if("object"!=Mb(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Mb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Mb(t)?t:t+""}var Wb=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Lb(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_b(e,t)}(e,u.Component),Ib(e,[{key:"render",value:function(){var e=this.props,t=e.offset,n=e.layout,r=e.width,o=e.dataKey,i=e.data,s=e.dataPointFormatter,a=e.xAxis,l=e.yAxis,c=Fb(e,Db),d=Ao(c,!1);"x"===this.props.direction&&"number"!==a.type&&Eb();var h=i.map(function(e){var i=s(e,o),c=i.x,h=i.y,p=i.value,f=i.errorVal;if(!f)return null;var g,m,v=[];if(Array.isArray(f)){var y=Nb(f,2);g=y[0],m=y[1]}else g=m=f;if("vertical"===n){var b=a.scale,w=h+t,C=w+r,x=w-r,S=b(p-g),k=b(p+m);v.push({x1:k,y1:C,x2:k,y2:x}),v.push({x1:S,y1:w,x2:k,y2:w}),v.push({x1:S,y1:C,x2:S,y2:x})}else if("horizontal"===n){var P=l.scale,j=c+t,O=j-r,R=j+r,E=P(p-g),D=P(p+m);v.push({x1:O,y1:D,x2:R,y2:D}),v.push({x1:j,y1:E,x2:j,y2:D}),v.push({x1:O,y1:E,x2:R,y2:E})}return u.createElement(Wo,Ab({className:"recharts-errorBar",key:"bar-".concat(v.map(function(e){return"".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))},d),v.map(function(e){return u.createElement("line",Ab({},e,{key:"line-".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))}))});return u.createElement(Wo,{className:"recharts-errorBars"},h)}}])}();function zb(e){return(zb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ub(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$b(Object(n),!0).forEach(function(t){Kb(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Kb(e,t,n){var r;return r=function(e,t){if("object"!=zb(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=zb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==zb(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Gb(Wb,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),Gb(Wb,"displayName","ErrorBar");var qb=function(e){var t=e.children,n=e.formattedGraphicalItems,r=e.legendWidth,o=e.legendContent,i=Eo(t,Fu);if(!i)return null;var s,a=Fu.defaultProps,l=void 0!==a?Ub(Ub({},a),i.props):{};return s=i.props&&i.props.payload?i.props&&i.props.payload:"children"===o?(n||[]).reduce(function(e,t){var n=t.item,r=t.props,o=r.sectors||r.data||[];return e.concat(o.map(function(e){return{type:i.props.iconType||n.props.legendType,value:e.name,color:e.fill,payload:e}}))},[]):(n||[]).map(function(e){var t=e.item,n=t.type.defaultProps,r=void 0!==n?Ub(Ub({},n),t.props):{},o=r.dataKey,i=r.name,s=r.legendType;return{inactive:r.hide,dataKey:o,type:l.iconType||s||"square",color:rw(t),value:i||o,payload:r}}),Ub(Ub(Ub({},l),Fu.getWithHeight(i,r)),{},{payload:s,item:i})};function Xb(e){return(Xb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yb(e){return function(e){if(Array.isArray(e))return Zb(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Zb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zb(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Qb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jb(Object(n),!0).forEach(function(t){ew(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jb(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ew(e,t,n){var r;return r=function(e,t){if("object"!=Xb(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Xb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Xb(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tw(e,t,n){return Sr(e)||Sr(t)?n:no(t)?xr(e,t,n):Dt(t)?t(e):n}function nw(e,t,n,r){var o=Oy(e,function(e){return tw(e,t)});if("number"===n){var i=o.filter(function(e){return to(e)||parseFloat(e)});return i.length?[wy(i),gy(i)]:[1/0,-1/0]}return(r?o.filter(function(e){return!Sr(e)}):o).map(function(e){return no(e)||e instanceof Date?e:""})}var rw=function(e){var t,n,r=e.type.displayName,o=null!==(t=e.type)&&void 0!==t&&t.defaultProps?Qb(Qb({},e.type.defaultProps),e.props):e.props,i=o.stroke,s=o.fill;switch(r){case"Line":n=i;break;case"Area":case"Radar":n=i&&"none"!==i?i:s;break;default:n=s}return n},ow=function(e,t,n,r,o){var i=Ro(t.props.children,Wb).filter(function(e){return function(e,t,n){return!!Sr(t)||("horizontal"===e?"yAxis"===t:"vertical"===e||"x"===n?"xAxis"===t:"y"!==n||"yAxis"===t)}(r,o,e.props.direction)});if(i&&i.length){var s=i.map(function(e){return e.props.dataKey});return e.reduce(function(e,t){var r=tw(t,n);if(Sr(r))return e;var o=Array.isArray(r)?[wy(r),gy(r)]:[r,r],i=s.reduce(function(e,n){var r=tw(t,n,0),i=o[0]-Math.abs(Array.isArray(r)?r[0]:r),s=o[1]+Math.abs(Array.isArray(r)?r[1]:r);return[Math.min(i,e[0]),Math.max(s,e[1])]},[1/0,-1/0]);return[Math.min(i[0],e[0]),Math.max(i[1],e[1])]},[1/0,-1/0])}return null},iw=function(e,t,n,r,o){var i=t.map(function(t){var i=t.props.dataKey;return"number"===n&&i&&ow(e,t,i,r)||nw(e,i,n,o)});if("number"===n)return i.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]);var s={};return i.reduce(function(e,t){for(var n=0,r=t.length;n<r;n++)s[t[n]]||(s[t[n]]=!0,e.push(t[n]));return e},[])},sw=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},aw=function(e,t,n,r){if(r)return e.map(function(e){return e.coordinate});var o,i,s=e.map(function(e){return e.coordinate===t&&(o=!0),e.coordinate===n&&(i=!0),e.coordinate});return o||s.push(t),i||s.push(n),s},lw=function(e,t,n){if(!e)return null;var r=e.scale,o=e.duplicateDomain,i=e.type,s=e.range,a="scaleBand"===e.realScaleType?r.bandwidth()/2:2,l=(t||n)&&"category"===i&&r.bandwidth?r.bandwidth()/a:0;return l="angleAxis"===e.axisType&&(null==s?void 0:s.length)>=2?2*Qr(s[0]-s[1])*l:l,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map(function(e){var t=o?o.indexOf(e):e;return{coordinate:r(t)+l,value:e,offset:l}}).filter(function(e){return!Jr(e.coordinate)}):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(e,t){return{coordinate:r(e)+l,value:e,index:t,offset:l}}):r.ticks&&!n?r.ticks(e.tickCount).map(function(e){return{coordinate:r(e)+l,value:e,offset:l}}):r.domain().map(function(e,t){return{coordinate:r(e)+l,value:o?o[e]:e,index:t,offset:l}})},cw=new WeakMap,uw=function(e,t){if("function"!=typeof t)return e;cw.has(e)||cw.set(e,new WeakMap);var n=cw.get(e);if(n.has(t))return n.get(t);var r=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return n.set(t,r),r},dw=function(e,t,n){var r=e.scale,o=e.type,i=e.layout,s=e.axisType;if("auto"===r)return"radial"===i&&"radiusAxis"===s?{scale:Qp(),realScaleType:"band"}:"radial"===i&&"angleAxis"===s?{scale:Sg(),realScaleType:"linear"}:"category"===o&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!n)?{scale:tf(),realScaleType:"point"}:"category"===o?{scale:Qp(),realScaleType:"band"}:{scale:Sg(),realScaleType:"linear"};if(Or(r)){var a="scale".concat(gi(r));return{scale:(ly[a]||tf)(),realScaleType:ly[a]?a:"point"}}return Dt(r)?{scale:r}:{scale:tf(),realScaleType:"point"}},hw=1e-4,pw=function(e){var t=e.domain();if(t&&!(t.length<=2)){var n=t.length,r=e.range(),o=Math.min(r[0],r[1])-hw,i=Math.max(r[0],r[1])+hw,s=e(t[0]),a=e(t[n-1]);(s<o||s>i||a<o||a>i)&&e.domain([t[0],t[n-1]])}},fw={sign:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var o=0,i=0,s=0;s<t;++s){var a=Jr(e[s][n][1])?e[s][n][0]:e[s][n][1];a>=0?(e[s][n][0]=o,e[s][n][1]=o+a,o=e[s][n][1]):(e[s][n][0]=i,e[s][n][1]=i+a,i=e[s][n][1])}},expand:function(e,t){if((r=e.length)>0){for(var n,r,o,i=0,s=e[0].length;i<s;++i){for(o=n=0;n<r;++n)o+=e[n][i][1]||0;if(o)for(n=0;n<r;++n)e[n][i][1]/=o}ms(e,t)}},none:ms,silhouette:function(e,t){if((n=e.length)>0){for(var n,r=0,o=e[t[0]],i=o.length;r<i;++r){for(var s=0,a=0;s<n;++s)a+=e[s][r][1]||0;o[r][1]+=o[r][0]=-a/2}ms(e,t)}},wiggle:function(e,t){if((o=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,o,i=0,s=1;s<r;++s){for(var a=0,l=0,c=0;a<o;++a){for(var u=e[t[a]],d=u[s][1]||0,h=(d-(u[s-1][1]||0))/2,p=0;p<a;++p){var f=e[t[p]];h+=(f[s][1]||0)-(f[s-1][1]||0)}l+=d,c+=h*d}n[s-1][1]+=n[s-1][0]=i,l&&(i-=c/l)}n[s-1][1]+=n[s-1][0]=i,ms(e,t)}},positive:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var o=0,i=0;i<t;++i){var s=Jr(e[i][n][1])?e[i][n][0]:e[i][n][1];s>=0?(e[i][n][0]=o,e[i][n][1]=o+s,o=e[i][n][1]):(e[i][n][0]=0,e[i][n][1]=0)}}},gw=function(e,t,n){var r=t.map(function(e){return e.props.dataKey}),o=fw[n],i=function(){var e=mi([]),t=vs,n=ms,r=ys;function o(o){var i,s,a=Array.from(e.apply(this,arguments),bs),l=a.length,c=-1;for(const e of o)for(i=0,++c;i<l;++i)(a[i][c]=[0,+r(e,a[i].key,c,o)]).data=e;for(i=0,s=Ei(t(a));i<l;++i)a[s[i]].index=i;return n(a,s),a}return o.keys=function(t){return arguments.length?(e="function"==typeof t?t:mi(Array.from(t)),o):e},o.value=function(e){return arguments.length?(r="function"==typeof e?e:mi(+e),o):r},o.order=function(e){return arguments.length?(t=null==e?vs:"function"==typeof e?e:mi(Array.from(e)),o):t},o.offset=function(e){return arguments.length?(n=null==e?ms:e,o):n},o}().keys(r).value(function(e,t){return+tw(e,t,0)}).order(vs).offset(o);return i(e)},mw=function(e,t){var n=t.realScaleType,r=t.type,o=t.tickCount,i=t.originalDomain,s=t.allowDecimals,a=n||t.scale;if("auto"!==a&&"linear"!==a)return null;if(o&&"number"===r&&i&&("auto"===i[0]||"auto"===i[1])){var l=e.domain();if(!l.length)return null;var c=Ob(l,o,s);return e.domain([wy(c),gy(c)]),{niceTicks:c}}if(o&&"number"===r){var u=e.domain();return{niceTicks:Rb(u,o,s)}}return null};function vw(e){var t=e.axis,n=e.ticks,r=e.bandSize,o=e.entry,i=e.index,s=e.dataKey;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!Sr(o[t.dataKey])){var a=lo(n,"value",o[t.dataKey]);if(a)return a.coordinate+r/2}return n[i]?n[i].coordinate+r/2:null}var l=tw(o,Sr(s)?t.dataKey:s);return Sr(l)?null:t.scale(l)}var yw=function(e){var t=e.axis,n=e.ticks,r=e.offset,o=e.bandSize,i=e.entry,s=e.index;if("category"===t.type)return n[s]?n[s].coordinate+r:null;var a=tw(i,t.dataKey,t.domain[s]);return Sr(a)?null:t.scale(a)-o/2+r},bw=function(e,t,n){return Object.keys(e).reduce(function(r,o){var i=e[o].stackedData.reduce(function(e,r){var o=r.slice(t,n+1).reduce(function(e,t){return[wy(t.concat([e[0]]).filter(to)),gy(t.concat([e[1]]).filter(to))]},[1/0,-1/0]);return[Math.min(e[0],o[0]),Math.max(e[1],o[1])]},[1/0,-1/0]);return[Math.min(i[0],r[0]),Math.max(i[1],r[1])]},[1/0,-1/0]).map(function(e){return e===1/0||e===-1/0?0:e})},ww=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Cw=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,xw=function(e,t,n){if(Dt(e))return e(t,n);if(!Array.isArray(e))return t;var r=[];if(to(e[0]))r[0]=n?e[0]:Math.min(e[0],t[0]);else if(ww.test(e[0])){var o=+ww.exec(e[0])[1];r[0]=t[0]-o}else Dt(e[0])?r[0]=e[0](t[0]):r[0]=t[0];if(to(e[1]))r[1]=n?e[1]:Math.max(e[1],t[1]);else if(Cw.test(e[1])){var i=+Cw.exec(e[1])[1];r[1]=t[1]+i}else Dt(e[1])?r[1]=e[1](t[1]):r[1]=t[1];return r},Sw=function(e,t,n){if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var o=Dd(t,function(e){return e.coordinate}),i=1/0,s=1,a=o.length;s<a;s++){var l=o[s],c=o[s-1];i=Math.min((l.coordinate||0)-(c.coordinate||0),i)}return i===1/0?0:i}return n?void 0:0},kw=function(e,t,n){return e&&e.length?Ey(e,xr(n,"type.defaultProps.domain"))?t:e:t},Pw=function(e,t){var n=e.type.defaultProps?Qb(Qb({},e.type.defaultProps),e.props):e.props,r=n.dataKey,o=n.name,i=n.unit,s=n.formatter,a=n.tooltipType,l=n.chartType,c=n.hide;return Qb(Qb({},Ao(e,!1)),{},{dataKey:r,unit:i,formatter:s,name:o||r,color:rw(e),value:tw(t,r),type:a,payload:t,chartType:l,hide:c})};function jw(e){return(jw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ow(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Rw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ow(Object(n),!0).forEach(function(t){Ew(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ow(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ew(e,t,n){var r;return r=function(e,t){if("object"!=jw(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=jw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==jw(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(u){c=!0,o=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Mw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mw(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Aw=Math.PI/180,Nw=function(e){return 180*e/Math.PI},Tw=function(e,t,n,r){return{x:e+Math.cos(-Aw*r)*n,y:t+Math.sin(-Aw*r)*n}},Fw=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(t-(n.top||0)-(n.bottom||0)))/2},Iw=function(e,t){var n=e.x,r=e.y,o=t.cx,i=t.cy,s=function(e,t){var n=e.x,r=e.y,o=t.x,i=t.y;return Math.sqrt(Math.pow(n-o,2)+Math.pow(r-i,2))}({x:n,y:r},{x:o,y:i});if(s<=0)return{radius:s};var a=(n-o)/s,l=Math.acos(a);return r>i&&(l=2*Math.PI-l),{radius:s,angle:Nw(l),angleInRadian:l}},Lw=function(e,t){var n=t.startAngle,r=t.endAngle,o=Math.floor(n/360),i=Math.floor(r/360);return e+360*Math.min(o,i)},Bw=function(e,t){var n=e.x,r=e.y,o=Iw({x:n,y:r},t),i=o.radius,s=o.angle,a=t.innerRadius,l=t.outerRadius;if(i<a||i>l)return!1;if(0===i)return!0;var c,u=function(e){var t=e.startAngle,n=e.endAngle,r=Math.floor(t/360),o=Math.floor(n/360),i=Math.min(r,o);return{startAngle:t-360*i,endAngle:n-360*i}}(t),d=u.startAngle,h=u.endAngle,p=s;if(d<=h){for(;p>h;)p-=360;for(;p<d;)p+=360;c=p>=d&&p<=h}else{for(;p>d;)p-=360;for(;p<h;)p+=360;c=p>=h&&p<=d}return c?Rw(Rw({},t),{},{radius:i,angle:Lw(p,t)}):null},Hw=function(e){return r.isValidElement(e)||Dt(e)||"boolean"==typeof e?"":e.className};function _w(e){return(_w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Gw=["offset"];function Vw(e){return function(e){if(Array.isArray(e))return Ww(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ww(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ww(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ww(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zw(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function $w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Uw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$w(Object(n),!0).forEach(function(t){Kw(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Kw(e,t,n){var r;return r=function(e,t){if("object"!=_w(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=_w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==_w(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qw(){return qw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qw.apply(this,arguments)}var Xw=function(e,t,n){var r,o,i=e.position,s=e.viewBox,a=e.offset,l=e.className,c=s,d=c.cx,h=c.cy,p=c.innerRadius,f=c.outerRadius,g=c.startAngle,m=c.endAngle,v=c.clockWise,y=(p+f)/2,b=function(e,t){return Qr(t-e)*Math.min(Math.abs(t-e),360)}(g,m),w=b>=0?1:-1;"insideStart"===i?(r=g+w*a,o=v):"insideEnd"===i?(r=m-w*a,o=!v):"end"===i&&(r=m+w*a,o=v),o=b<=0?o:!o;var C=Tw(d,h,y,r),x=Tw(d,h,y,r+359*(o?1:-1)),S="M".concat(C.x,",").concat(C.y,"\n    A").concat(y,",").concat(y,",0,1,").concat(o?0:1,",\n    ").concat(x.x,",").concat(x.y),k=Sr(e.id)?oo("recharts-radial-line-"):e.id;return u.createElement("text",qw({},n,{dominantBaseline:"central",className:Je("recharts-radial-bar-label",l)}),u.createElement("defs",null,u.createElement("path",{id:k,d:S})),u.createElement("textPath",{xlinkHref:"#".concat(k)},t))};function Yw(e){var t,n=e.offset,o=Uw({offset:void 0===n?5:n},zw(e,Gw)),i=o.viewBox,s=o.position,a=o.value,l=o.children,c=o.content,d=o.className,h=void 0===d?"":d,p=o.textBreakAll;if(!i||Sr(a)&&Sr(l)&&!r.isValidElement(c)&&!Dt(c))return null;if(r.isValidElement(c))return r.cloneElement(c,o);if(Dt(c)){if(t=r.createElement(c,o),r.isValidElement(t))return t}else t=function(e){var t=e.value,n=e.formatter,r=Sr(e.children)?t:e.children;return Dt(n)?n(r):r}(o);var f=function(e){return"cx"in e&&to(e.cx)}(i),g=Ao(o,!0);if(f&&("insideStart"===s||"insideEnd"===s||"end"===s))return Xw(o,t,g);var m=f?function(e){var t=e.viewBox,n=e.offset,r=e.position,o=t,i=o.cx,s=o.cy,a=o.innerRadius,l=o.outerRadius,c=(o.startAngle+o.endAngle)/2;if("outside"===r){var u=Tw(i,s,l+n,c),d=u.x;return{x:d,y:u.y,textAnchor:d>=i?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:i,y:s,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:i,y:s,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:i,y:s,textAnchor:"middle",verticalAnchor:"end"};var h=Tw(i,s,(a+l)/2,c);return{x:h.x,y:h.y,textAnchor:"middle",verticalAnchor:"middle"}}(o):function(e){var t=e.viewBox,n=e.parentViewBox,r=e.offset,o=e.position,i=t,s=i.x,a=i.y,l=i.width,c=i.height,u=c>=0?1:-1,d=u*r,h=u>0?"end":"start",p=u>0?"start":"end",f=l>=0?1:-1,g=f*r,m=f>0?"end":"start",v=f>0?"start":"end";if("top"===o)return Uw(Uw({},{x:s+l/2,y:a-u*r,textAnchor:"middle",verticalAnchor:h}),n?{height:Math.max(a-n.y,0),width:l}:{});if("bottom"===o)return Uw(Uw({},{x:s+l/2,y:a+c+d,textAnchor:"middle",verticalAnchor:p}),n?{height:Math.max(n.y+n.height-(a+c),0),width:l}:{});if("left"===o){var y={x:s-g,y:a+c/2,textAnchor:m,verticalAnchor:"middle"};return Uw(Uw({},y),n?{width:Math.max(y.x-n.x,0),height:c}:{})}if("right"===o){var b={x:s+l+g,y:a+c/2,textAnchor:v,verticalAnchor:"middle"};return Uw(Uw({},b),n?{width:Math.max(n.x+n.width-b.x,0),height:c}:{})}var w=n?{width:l,height:c}:{};return"insideLeft"===o?Uw({x:s+g,y:a+c/2,textAnchor:v,verticalAnchor:"middle"},w):"insideRight"===o?Uw({x:s+l-g,y:a+c/2,textAnchor:m,verticalAnchor:"middle"},w):"insideTop"===o?Uw({x:s+l/2,y:a+d,textAnchor:"middle",verticalAnchor:p},w):"insideBottom"===o?Uw({x:s+l/2,y:a+c-d,textAnchor:"middle",verticalAnchor:h},w):"insideTopLeft"===o?Uw({x:s+g,y:a+d,textAnchor:v,verticalAnchor:p},w):"insideTopRight"===o?Uw({x:s+l-g,y:a+d,textAnchor:m,verticalAnchor:p},w):"insideBottomLeft"===o?Uw({x:s+g,y:a+c-d,textAnchor:v,verticalAnchor:h},w):"insideBottomRight"===o?Uw({x:s+l-g,y:a+c-d,textAnchor:m,verticalAnchor:h},w):jt(o)&&(to(o.x)||eo(o.x))&&(to(o.y)||eo(o.y))?Uw({x:s+io(o.x,l),y:a+io(o.y,c),textAnchor:"end",verticalAnchor:"end"},w):Uw({x:s+l/2,y:a+c/2,textAnchor:"middle",verticalAnchor:"middle"},w)}(o);return u.createElement(jp,qw({className:Je("recharts-label",h)},g,m,{breakAll:p}),t)}Yw.displayName="Label";var Zw=function(e){var t=e.cx,n=e.cy,r=e.angle,o=e.startAngle,i=e.endAngle,s=e.r,a=e.radius,l=e.innerRadius,c=e.outerRadius,u=e.x,d=e.y,h=e.top,p=e.left,f=e.width,g=e.height,m=e.clockWise,v=e.labelViewBox;if(v)return v;if(to(f)&&to(g)){if(to(u)&&to(d))return{x:u,y:d,width:f,height:g};if(to(h)&&to(p))return{x:h,y:p,width:f,height:g}}return to(u)&&to(d)?{x:u,y:d,width:0,height:0}:to(t)&&to(n)?{cx:t,cy:n,startAngle:o||r||0,endAngle:i||r||0,innerRadius:l||0,outerRadius:c||a||s||0,clockWise:m}:e.viewBox?e.viewBox:{}};Yw.parseViewBox=Zw,Yw.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var o=e.children,i=Zw(e),s=Ro(o,Yw).map(function(e,n){return r.cloneElement(e,{viewBox:t||i,key:"label-".concat(n)})});if(!n)return s;var a=function(e,t){return e?!0===e?u.createElement(Yw,{key:"label-implicit",viewBox:t}):no(e)?u.createElement(Yw,{key:"label-implicit",viewBox:t,value:e}):r.isValidElement(e)?e.type===Yw?r.cloneElement(e,{key:"label-implicit",viewBox:t}):u.createElement(Yw,{key:"label-implicit",content:e,viewBox:t}):Dt(e)?u.createElement(Yw,{key:"label-implicit",content:e,viewBox:t}):jt(e)?u.createElement(Yw,qw({viewBox:t},e,{key:"label-implicit"})):null:null}(e.label,t||i);return[a].concat(Vw(s))};const Jw=c(function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0});function Qw(e){return(Qw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var eC=["valueAccessor"],tC=["data","dataKey","clockWise","id","textBreakAll"];function nC(e){return function(e){if(Array.isArray(e))return rC(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return rC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rC(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oC(){return oC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oC.apply(this,arguments)}function iC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iC(Object(n),!0).forEach(function(t){aC(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function aC(e,t,n){var r;return r=function(e,t){if("object"!=Qw(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Qw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Qw(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lC(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var cC=function(e){return Array.isArray(e.value)?Jw(e.value):e.value};function uC(e){var t=e.valueAccessor,n=void 0===t?cC:t,r=lC(e,eC),o=r.data,i=r.dataKey,s=r.clockWise,a=r.id,l=r.textBreakAll,c=lC(r,tC);return o&&o.length?u.createElement(Wo,{className:"recharts-label-list"},o.map(function(e,t){var r=Sr(i)?n(e,t):tw(e&&e.payload,i),o=Sr(a)?{}:{id:"".concat(a,"-").concat(t)};return u.createElement(Yw,oC({},Ao(e,!0),c,o,{parentViewBox:e.parentViewBox,value:r,textBreakAll:l,viewBox:Yw.parseViewBox(Sr(s)?e:sC(sC({},e),{},{clockWise:s})),key:"label-".concat(t),index:t}))})):null}function dC(e){return(dC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hC(){return hC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hC.apply(this,arguments)}function pC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function fC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pC(Object(n),!0).forEach(function(t){gC(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function gC(e,t,n){var r;return r=function(e,t){if("object"!=dC(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=dC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==dC(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}uC.displayName="LabelList",uC.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var o=Ro(e.children,uC).map(function(e,n){return r.cloneElement(e,{data:t,key:"labelList-".concat(n)})});return n?[function(e,t){return e?!0===e?u.createElement(uC,{key:"labelList-implicit",data:t}):u.isValidElement(e)||Dt(e)?u.createElement(uC,{key:"labelList-implicit",data:t,content:e}):jt(e)?u.createElement(uC,oC({data:t},e,{key:"labelList-implicit"})):null:null}(e.label,t)].concat(nC(o)):o};var mC=function(e){var t=e.cx,n=e.cy,r=e.radius,o=e.angle,i=e.sign,s=e.isExternal,a=e.cornerRadius,l=e.cornerIsExternal,c=a*(s?1:-1)+r,u=Math.asin(a/c)/Aw,d=l?o:o+i*u,h=l?o-i*u:o;return{center:Tw(t,n,c,d),circleTangency:Tw(t,n,r,d),lineTangency:Tw(t,n,c*Math.cos(u*Aw),h),theta:u}},vC=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,o=e.outerRadius,i=e.startAngle,s=function(e,t){return Qr(t-e)*Math.min(Math.abs(t-e),359.999)}(i,e.endAngle),a=i+s,l=Tw(t,n,o,i),c=Tw(t,n,o,a),u="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(o,",").concat(o,",0,\n    ").concat(+(Math.abs(s)>180),",").concat(+(i>a),",\n    ").concat(c.x,",").concat(c.y,"\n  ");if(r>0){var d=Tw(t,n,r,i),h=Tw(t,n,r,a);u+="L ".concat(h.x,",").concat(h.y,"\n            A ").concat(r,",").concat(r,",0,\n            ").concat(+(Math.abs(s)>180),",").concat(+(i<=a),",\n            ").concat(d.x,",").concat(d.y," Z")}else u+="L ".concat(t,",").concat(n," Z");return u},yC={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},bC=function(e){var t=fC(fC({},yC),e),n=t.cx,r=t.cy,o=t.innerRadius,i=t.outerRadius,s=t.cornerRadius,a=t.forceCornerRadius,l=t.cornerIsExternal,c=t.startAngle,d=t.endAngle,h=t.className;if(i<o||c===d)return null;var p,f=Je("recharts-sector",h),g=i-o,m=io(s,g,0,!0);return p=m>0&&Math.abs(c-d)<360?function(e){var t=e.cx,n=e.cy,r=e.innerRadius,o=e.outerRadius,i=e.cornerRadius,s=e.forceCornerRadius,a=e.cornerIsExternal,l=e.startAngle,c=e.endAngle,u=Qr(c-l),d=mC({cx:t,cy:n,radius:o,angle:l,sign:u,cornerRadius:i,cornerIsExternal:a}),h=d.circleTangency,p=d.lineTangency,f=d.theta,g=mC({cx:t,cy:n,radius:o,angle:c,sign:-u,cornerRadius:i,cornerIsExternal:a}),m=g.circleTangency,v=g.lineTangency,y=g.theta,b=a?Math.abs(l-c):Math.abs(l-c)-f-y;if(b<0)return s?"M ".concat(p.x,",").concat(p.y,"\n        a").concat(i,",").concat(i,",0,0,1,").concat(2*i,",0\n        a").concat(i,",").concat(i,",0,0,1,").concat(2*-i,",0\n      "):vC({cx:t,cy:n,innerRadius:r,outerRadius:o,startAngle:l,endAngle:c});var w="M ".concat(p.x,",").concat(p.y,"\n    A").concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(h.x,",").concat(h.y,"\n    A").concat(o,",").concat(o,",0,").concat(+(b>180),",").concat(+(u<0),",").concat(m.x,",").concat(m.y,"\n    A").concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(v.x,",").concat(v.y,"\n  ");if(r>0){var C=mC({cx:t,cy:n,radius:r,angle:l,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:a}),x=C.circleTangency,S=C.lineTangency,k=C.theta,P=mC({cx:t,cy:n,radius:r,angle:c,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:a}),j=P.circleTangency,O=P.lineTangency,R=P.theta,E=a?Math.abs(l-c):Math.abs(l-c)-k-R;if(E<0&&0===i)return"".concat(w,"L").concat(t,",").concat(n,"Z");w+="L".concat(O.x,",").concat(O.y,"\n      A").concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(j.x,",").concat(j.y,"\n      A").concat(r,",").concat(r,",0,").concat(+(E>180),",").concat(+(u>0),",").concat(x.x,",").concat(x.y,"\n      A").concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(S.x,",").concat(S.y,"Z")}else w+="L".concat(t,",").concat(n,"Z");return w}({cx:n,cy:r,innerRadius:o,outerRadius:i,cornerRadius:Math.min(m,g/2),forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:d}):vC({cx:n,cy:r,innerRadius:o,outerRadius:i,startAngle:c,endAngle:d}),u.createElement("path",hC({},Ao(t,!0),{className:f,d:p,role:"img"}))};function wC(e){return(wC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CC(){return CC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CC.apply(this,arguments)}function xC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function SC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xC(Object(n),!0).forEach(function(t){kC(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function kC(e,t,n){var r;return r=function(e,t){if("object"!=wC(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=wC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==wC(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var PC={curveBasisClosed:function(e){return new rs(e)},curveBasisOpen:function(e){return new os(e)},curveBasis:function(e){return new ns(e)},curveBumpX:function(e){return new Ii(e,!0)},curveBumpY:function(e){return new Ii(e,!1)},curveLinearClosed:function(e){return new is(e)},curveLinear:Mi,curveMonotoneX:function(e){return new us(e)},curveMonotoneY:function(e){return new ds(e)},curveNatural:function(e){return new ps(e)},curveStep:function(e){return new gs(e,.5)},curveStepAfter:function(e){return new gs(e,1)},curveStepBefore:function(e){return new gs(e,0)}},jC=function(e){return e.x===+e.x&&e.y===+e.y},OC=function(e){return e.x},RC=function(e){return e.y},EC=function(e){var t,n=e.type,r=void 0===n?"linear":n,o=e.points,i=void 0===o?[]:o,s=e.baseLine,a=e.layout,l=e.connectNulls,c=void 0!==l&&l,u=function(e,t){if(Dt(e))return e;var n="curve".concat(gi(e));return"curveMonotone"!==n&&"curveBump"!==n||!t?PC[n]||Mi:PC["".concat(n).concat("vertical"===t?"Y":"X")]}(r,a),d=c?i.filter(function(e){return jC(e)}):i;if(Array.isArray(s)){var h=c?s.filter(function(e){return jC(e)}):s,p=d.map(function(e,t){return SC(SC({},e),{},{base:h[t]})});return(t="vertical"===a?Fi().y(RC).x1(OC).x0(function(e){return e.base.x}):Fi().x(OC).y1(RC).y0(function(e){return e.base.y})).defined(jC).curve(u),t(p)}return(t="vertical"===a&&to(s)?Fi().y(RC).x1(OC).x0(s):to(s)?Fi().x(OC).y1(RC).y0(s):Ti().x(OC).y(RC)).defined(jC).curve(u),t(d)},DC=function(e){var t=e.className,n=e.points,o=e.path,i=e.pathRef;if(!(n&&n.length||o))return null;var s=n&&n.length?EC(e):o;return r.createElement("path",CC({},Ao(e,!1),vo(e),{className:Je("recharts-curve",t),d:s,ref:i}))},MC={exports:{}};function AC(){}function NC(){}NC.resetWarningCache=AC;MC.exports=function(){function e(e,t,n,r,o,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:NC,resetWarningCache:AC};return n.PropTypes=n,n}();const TC=c(MC.exports),{getOwnPropertyNames:FC,getOwnPropertySymbols:IC}=Object,{hasOwnProperty:LC}=Object.prototype;function BC(e,t){return function(n,r,o){return e(n,r,o)&&t(n,r,o)}}function HC(e){return function(t,n,r){if(!t||!n||"object"!=typeof t||"object"!=typeof n)return e(t,n,r);const{cache:o}=r,i=o.get(t),s=o.get(n);if(i&&s)return i===n&&s===t;o.set(t,n),o.set(n,t);const a=e(t,n,r);return o.delete(t),o.delete(n),a}}function _C(e){return FC(e).concat(IC(e))}const GC=Object.hasOwn||((e,t)=>LC.call(e,t));function VC(e,t){return e===t||!e&&!t&&e!=e&&t!=t}const{getOwnPropertyDescriptor:WC,keys:zC}=Object;function $C(e,t){return e.byteLength===t.byteLength&&ox(new Uint8Array(e),new Uint8Array(t))}function UC(e,t,n){let r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function KC(e,t){return e.byteLength===t.byteLength&&ox(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function qC(e,t){return VC(e.getTime(),t.getTime())}function XC(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function YC(e,t){return e===t}function ZC(e,t,n){const r=e.size;if(r!==t.size)return!1;if(!r)return!0;const o=new Array(r),i=e.entries();let s,a,l=0;for(;(s=i.next())&&!s.done;){const r=t.entries();let i=!1,c=0;for(;(a=r.next())&&!a.done;){if(o[c]){c++;continue}const r=s.value,u=a.value;if(n.equals(r[0],u[0],l,c,e,t,n)&&n.equals(r[1],u[1],r[0],u[0],e,t,n)){i=o[c]=!0;break}c++}if(!i)return!1;l++}return!0}const JC=VC;function QC(e,t,n){const r=zC(e);let o=r.length;if(zC(t).length!==o)return!1;for(;o-- >0;)if(!sx(e,t,n,r[o]))return!1;return!0}function ex(e,t,n){const r=_C(e);let o,i,s,a=r.length;if(_C(t).length!==a)return!1;for(;a-- >0;){if(o=r[a],!sx(e,t,n,o))return!1;if(i=WC(e,o),s=WC(t,o),(i||s)&&(!i||!s||i.configurable!==s.configurable||i.enumerable!==s.enumerable||i.writable!==s.writable))return!1}return!0}function tx(e,t){return VC(e.valueOf(),t.valueOf())}function nx(e,t){return e.source===t.source&&e.flags===t.flags}function rx(e,t,n){const r=e.size;if(r!==t.size)return!1;if(!r)return!0;const o=new Array(r),i=e.values();let s,a;for(;(s=i.next())&&!s.done;){const r=t.values();let i=!1,l=0;for(;(a=r.next())&&!a.done;){if(!o[l]&&n.equals(s.value,a.value,s.value,a.value,e,t,n)){i=o[l]=!0;break}l++}if(!i)return!1}return!0}function ox(e,t){let n=e.byteLength;if(t.byteLength!==n||e.byteOffset!==t.byteOffset)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function ix(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function sx(e,t,n,r){return!("_owner"!==r&&"__o"!==r&&"__v"!==r||!e.$$typeof&&!t.$$typeof)||GC(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}const ax={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},lx=Object.prototype.toString;function cx({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:o,areFunctionsEqual:i,areMapsEqual:s,areNumbersEqual:a,areObjectsEqual:l,arePrimitiveWrappersEqual:c,areRegExpsEqual:u,areSetsEqual:d,areTypedArraysEqual:h,areUrlsEqual:p,unknownTagComparators:f}){return function(g,m,v){if(g===m)return!0;if(null==g||null==m)return!1;const y=typeof g;if(y!==typeof m)return!1;if("object"!==y)return"number"===y?a(g,m,v):"function"===y&&i(g,m,v);const b=g.constructor;if(b!==m.constructor)return!1;if(b===Object)return l(g,m,v);if(Array.isArray(g))return t(g,m,v);if(b===Date)return r(g,m,v);if(b===RegExp)return u(g,m,v);if(b===Map)return s(g,m,v);if(b===Set)return d(g,m,v);const w=lx.call(g);if("[object Date]"===w)return r(g,m,v);if("[object RegExp]"===w)return u(g,m,v);if("[object Map]"===w)return s(g,m,v);if("[object Set]"===w)return d(g,m,v);if("[object Object]"===w)return"function"!=typeof g.then&&"function"!=typeof m.then&&l(g,m,v);if("[object URL]"===w)return p(g,m,v);if("[object Error]"===w)return o(g,m,v);if("[object Arguments]"===w)return l(g,m,v);if(ax[w])return h(g,m,v);if("[object ArrayBuffer]"===w)return e(g,m,v);if("[object DataView]"===w)return n(g,m,v);if("[object Boolean]"===w||"[object Number]"===w||"[object String]"===w)return c(g,m,v);if(f){let e=f[w];if(!e){const t=null!=(C=g)?C[Symbol.toStringTag]:void 0;t&&(e=f[t])}if(e)return e(g,m,v)}var C;return!1}}const ux=dx();function dx(e={}){const{circular:t=!1,createInternalComparator:n,createState:r,strict:o=!1}=e,i=function({circular:e,createCustomConfig:t,strict:n}){let r={areArrayBuffersEqual:$C,areArraysEqual:n?ex:UC,areDataViewsEqual:KC,areDatesEqual:qC,areErrorsEqual:XC,areFunctionsEqual:YC,areMapsEqual:n?BC(ZC,ex):ZC,areNumbersEqual:JC,areObjectsEqual:n?ex:QC,arePrimitiveWrappersEqual:tx,areRegExpsEqual:nx,areSetsEqual:n?BC(rx,ex):rx,areTypedArraysEqual:n?BC(ox,ex):ox,areUrlsEqual:ix,unknownTagComparators:void 0};if(t&&(r=Object.assign({},r,t(r))),e){const e=HC(r.areArraysEqual),t=HC(r.areMapsEqual),n=HC(r.areObjectsEqual),o=HC(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:e,areMapsEqual:t,areObjectsEqual:n,areSetsEqual:o})}return r}(e),s=cx(i);var a;return function({circular:e,comparator:t,createState:n,equals:r,strict:o}){if(n)return function(i,s){const{cache:a=(e?new WeakMap:void 0),meta:l}=n();return t(i,s,{cache:a,equals:r,meta:l,strict:o})};if(e)return function(e,n){return t(e,n,{cache:new WeakMap,equals:r,meta:void 0,strict:o})};const i={cache:void 0,equals:r,meta:void 0,strict:o};return function(e,n){return t(e,n,i)}}({circular:t,comparator:s,createState:r,equals:n?n(s):(a=s,function(e,t,n,r,o,i,s){return a(e,t,s)}),strict:o})}function hx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1;requestAnimationFrame(function r(o){n<0&&(n=o),o-n>t?(e(o),n=-1):function(e){"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame(e)}(r)})}function px(e){return(px="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fx(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return gx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gx(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mx(){var e=function(){return null},t=!1,n=function n(r){if(!t){if(Array.isArray(r)){if(!r.length)return;var o=fx(r),i=o[0],s=o.slice(1);return"number"==typeof i?void hx(n.bind(null,s),i):(n(i),void hx(n.bind(null,s)))}"object"===px(r)&&e(r),"function"==typeof r&&r()}};return{stop:function(){t=!0},start:function(e){t=!1,n(e)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}function vx(e){return(vx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function bx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yx(Object(n),!0).forEach(function(t){wx(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yx(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function wx(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==vx(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!==vx(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===vx(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}dx({strict:!0}),dx({circular:!0}),dx({circular:!0,strict:!0}),dx({createInternalComparator:()=>VC}),dx({strict:!0,createInternalComparator:()=>VC}),dx({circular:!0,createInternalComparator:()=>VC}),dx({circular:!0,createInternalComparator:()=>VC,strict:!0});var Cx=function(e){return e},xx=function(e,t){return Object.keys(t).reduce(function(n,r){return bx(bx({},n),{},wx({},r,e(r,t[r])))},{})},Sx=function(e,t,n){return e.map(function(e){return"".concat((r=e,r.replace(/([A-Z])/g,function(e){return"-".concat(e.toLowerCase())}))," ").concat(t,"ms ").concat(n);var r}).join(",")};function kx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(u){c=!0,o=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||jx(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Px(e){return function(e){if(Array.isArray(e))return Ox(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||jx(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jx(e,t){if(e){if("string"==typeof e)return Ox(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ox(e,t):void 0}}function Ox(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Rx=1e-4,Ex=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},Dx=function(e,t){return e.map(function(e,n){return e*Math.pow(t,n)}).reduce(function(e,t){return e+t})},Mx=function(e,t){return function(n){var r=Ex(e,t);return Dx(r,n)}},Ax=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],o=t[1],i=t[2],s=t[3];if(1===t.length)switch(t[0]){case"linear":r=0,o=0,i=1,s=1;break;case"ease":r=.25,o=.1,i=.25,s=1;break;case"ease-in":r=.42,o=0,i=1,s=1;break;case"ease-out":r=.42,o=0,i=.58,s=1;break;case"ease-in-out":r=0,o=0,i=.58,s=1;break;default:var a=t[0].split("(");if("cubic-bezier"===a[0]&&4===a[1].split(")")[0].split(",").length){var l=kx(a[1].split(")")[0].split(",").map(function(e){return parseFloat(e)}),4);r=l[0],o=l[1],i=l[2],s=l[3]}}var c,u,d=Mx(r,i),h=Mx(o,s),p=(c=r,u=i,function(e){var t=Ex(c,u),n=[].concat(Px(t.map(function(e,t){return e*t}).slice(1)),[0]);return Dx(n,e)}),f=function(e){return e>1?1:e<0?0:e},g=function(e){for(var t=e>1?1:e,n=t,r=0;r<8;++r){var o=d(n)-t,i=p(n);if(Math.abs(o-t)<Rx||i<Rx)return h(n);n=f(n-o/i)}return h(n)};return g.isStepper=!1,g},Nx=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if("string"==typeof r)switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Ax(r);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,n=void 0===t?100:t,r=e.damping,o=void 0===r?8:r,i=e.dt,s=void 0===i?17:i,a=function(e,t,r){var i=r+(-(e-t)*n-r*o)*s/1e3,a=r*s/1e3+e;return Math.abs(a-t)<Rx&&Math.abs(i)<Rx?[t,0]:[a,i]};return a.isStepper=!0,a.dt=s,a}();default:if("cubic-bezier"===r.split("(")[0])return Ax(r)}return"function"==typeof r?r:null};function Tx(e){return(Tx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fx(e){return function(e){if(Array.isArray(e))return Gx(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_x(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ix(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Lx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ix(Object(n),!0).forEach(function(t){Bx(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ix(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Bx(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Tx(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!==Tx(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Tx(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(u){c=!0,o=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||_x(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _x(e,t){if(e){if("string"==typeof e)return Gx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gx(e,t):void 0}}function Gx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Vx=function(e,t,n){return e+(t-e)*n},Wx=function(e){return e.from!==e.to},zx=function e(t,n,r){var o=xx(function(e,n){if(Wx(n)){var r=Hx(t(n.from,n.to,n.velocity),2),o=r[0],i=r[1];return Lx(Lx({},n),{},{from:o,velocity:i})}return n},n);return r<1?xx(function(e,t){return Wx(t)?Lx(Lx({},t),{},{velocity:Vx(t.velocity,o[e].velocity,r),from:Vx(t.from,o[e].from,r)}):t},n):e(t,o,r-1)};const $x=function(e,t,n,r,o){var i,s,a,l,c=(i=e,s=t,[Object.keys(i),Object.keys(s)].reduce(function(e,t){return e.filter(function(e){return t.includes(e)})})),u=c.reduce(function(n,r){return Lx(Lx({},n),{},Bx({},r,[e[r],t[r]]))},{}),d=c.reduce(function(n,r){return Lx(Lx({},n),{},Bx({},r,{from:e[r],velocity:0,to:t[r]}))},{}),h=-1,p=function(){return null};return p=n.isStepper?function(r){a||(a=r);var i=(r-a)/n.dt;d=zx(n,d,i),o(Lx(Lx(Lx({},e),t),xx(function(e,t){return t.from},d))),a=r,Object.values(d).filter(Wx).length&&(h=requestAnimationFrame(p))}:function(i){l||(l=i);var s=(i-l)/r,a=xx(function(e,t){return Vx.apply(void 0,Fx(t).concat([n(s)]))},u);if(o(Lx(Lx(Lx({},e),t),a)),s<1)h=requestAnimationFrame(p);else{var c=xx(function(e,t){return Vx.apply(void 0,Fx(t).concat([n(1)]))},u);o(Lx(Lx(Lx({},e),t),c))}},function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(h)}}};function Ux(e){return(Ux="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Kx=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function qx(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Xx(e){return function(e){if(Array.isArray(e))return Yx(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Yx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yx(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Jx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zx(Object(n),!0).forEach(function(t){Qx(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zx(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Qx(e,t,n){return(t=tS(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eS(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tS(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tS(e){var t=function(e,t){if("object"!==Ux(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!==Ux(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ux(t)?t:String(t)}function nS(e,t){return(nS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function rS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=sS(e);if(t){var o=sS(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return oS(this,n)}}function oS(e,t){if(t&&("object"===Ux(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return iS(e)}function iS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sS(e){return(sS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var aS=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nS(e,t)}(t,r.PureComponent);var e=rS(t);function t(n,r){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=(o=e.call(this,n,r)).props,s=i.isActive,a=i.attributeName,l=i.from,c=i.to,u=i.steps,d=i.children,h=i.duration;if(o.handleStyleChange=o.handleStyleChange.bind(iS(o)),o.changeStyle=o.changeStyle.bind(iS(o)),!s||h<=0)return o.state={style:{}},"function"==typeof d&&(o.state={style:c}),oS(o);if(u&&u.length)o.state={style:u[0].style};else if(l){if("function"==typeof d)return o.state={style:l},oS(o);o.state={style:a?Qx({},a,l):l}}else o.state={style:{}};return o}return eS(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,n=e.canBegin;this.mounted=!0,t&&n&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isActive,r=t.canBegin,o=t.attributeName,i=t.shouldReAnimate,s=t.to,a=t.from,l=this.state.style;if(r)if(n){if(!(ux(e.to,s)&&e.canBegin&&e.isActive)){var c=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var u=c||i?a:e.to;if(this.state&&l){var d={style:o?Qx({},o,u):u};(o&&l[o]!==u||!o&&l!==u)&&this.setState(d)}this.runAnimation(Jx(Jx({},this.props),{},{from:u,begin:0}))}}else{var h={style:o?Qx({},o,s):s};this.state&&l&&(o&&l[o]!==s||!o&&l!==s)&&this.setState(h)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"runJSAnimation",value:function(e){var t=this,n=e.from,r=e.to,o=e.duration,i=e.easing,s=e.begin,a=e.onAnimationEnd,l=e.onAnimationStart,c=$x(n,r,Nx(i),o,this.changeStyle);this.manager.start([l,s,function(){t.stopJSAnimation=c()},o,a])}},{key:"runStepAnimation",value:function(e){var t=this,n=e.steps,r=e.begin,o=e.onAnimationStart,i=n[0],s=i.style,a=i.duration,l=void 0===a?0:a;return this.manager.start([o].concat(Xx(n.reduce(function(e,r,o){if(0===o)return e;var i=r.duration,s=r.easing,a=void 0===s?"ease":s,l=r.style,c=r.properties,u=r.onAnimationEnd,d=o>0?n[o-1]:r,h=c||Object.keys(l);if("function"==typeof a||"spring"===a)return[].concat(Xx(e),[t.runJSAnimation.bind(t,{from:d.style,to:l,duration:i,easing:a}),i]);var p=Sx(h,i,a),f=Jx(Jx(Jx({},d.style),l),{},{transition:p});return[].concat(Xx(e),[f,i,u]).filter(Cx)},[s,Math.max(l,r)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=mx());var t=e.begin,n=e.duration,r=e.attributeName,o=e.to,i=e.easing,s=e.onAnimationStart,a=e.onAnimationEnd,l=e.steps,c=e.children,u=this.manager;if(this.unSubscribe=u.subscribe(this.handleStyleChange),"function"!=typeof i&&"function"!=typeof c&&"spring"!==i)if(l.length>1)this.runStepAnimation(e);else{var d=r?Qx({},r,o):o,h=Sx(Object.keys(d),n,i);u.start([s,t,Jx(Jx({},d),{},{transition:h}),n,a])}else this.runJSAnimation(e)}},{key:"render",value:function(){var e=this.props,t=e.children;e.begin;var n=e.duration;e.attributeName,e.easing;var o=e.isActive;e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart;var i=qx(e,Kx),s=r.Children.count(t),a=this.state.style;if("function"==typeof t)return t(a);if(!o||0===s||n<=0)return t;var l=function(e){var t=e.props,n=t.style,o=void 0===n?{}:n,s=t.className;return r.cloneElement(e,Jx(Jx({},i),{},{style:Jx(Jx({},o),a),className:s}))};return 1===s?l(r.Children.only(t)):u.createElement("div",null,r.Children.map(t,function(e){return l(e)}))}}]),t}();function lS(e){return(lS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cS(){return cS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cS.apply(this,arguments)}function uS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(u){c=!0,o=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return dS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dS(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function pS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hS(Object(n),!0).forEach(function(t){fS(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function fS(e,t,n){var r;return r=function(e,t){if("object"!=lS(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=lS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==lS(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}aS.displayName="Animate",aS.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},aS.propTypes={from:TC.oneOfType([TC.object,TC.string]),to:TC.oneOfType([TC.object,TC.string]),attributeName:TC.string,duration:TC.number,begin:TC.number,easing:TC.oneOfType([TC.string,TC.func]),steps:TC.arrayOf(TC.shape({duration:TC.number.isRequired,style:TC.object.isRequired,easing:TC.oneOfType([TC.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),TC.func]),properties:TC.arrayOf("string"),onAnimationEnd:TC.func})),children:TC.oneOfType([TC.node,TC.func]),isActive:TC.bool,canBegin:TC.bool,onAnimationEnd:TC.func,shouldReAnimate:TC.bool,onAnimationStart:TC.func,onAnimationReStart:TC.func};var gS=function(e,t,n,r,o){var i,s=Math.min(Math.abs(n)/2,Math.abs(r)/2),a=r>=0?1:-1,l=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0;if(s>0&&o instanceof Array){for(var u=[0,0,0,0],d=0;d<4;d++)u[d]=o[d]>s?s:o[d];i="M".concat(e,",").concat(t+a*u[0]),u[0]>0&&(i+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+l*u[0],",").concat(t)),i+="L ".concat(e+n-l*u[1],",").concat(t),u[1]>0&&(i+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,",\n        ").concat(e+n,",").concat(t+a*u[1])),i+="L ".concat(e+n,",").concat(t+r-a*u[2]),u[2]>0&&(i+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,",\n        ").concat(e+n-l*u[2],",").concat(t+r)),i+="L ".concat(e+l*u[3],",").concat(t+r),u[3]>0&&(i+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+r-a*u[3])),i+="Z"}else if(s>0&&o===+o&&o>0){var h=Math.min(s,o);i="M ".concat(e,",").concat(t+a*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+l*h,",").concat(t,"\n            L ").concat(e+n-l*h,",").concat(t,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+n,",").concat(t+a*h,"\n            L ").concat(e+n,",").concat(t+r-a*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+n-l*h,",").concat(t+r,"\n            L ").concat(e+l*h,",").concat(t+r,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+r-a*h," Z")}else i="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return i},mS=function(e,t){if(!e||!t)return!1;var n=e.x,r=e.y,o=t.x,i=t.y,s=t.width,a=t.height;if(Math.abs(s)>0&&Math.abs(a)>0){var l=Math.min(o,o+s),c=Math.max(o,o+s),u=Math.min(i,i+a),d=Math.max(i,i+a);return n>=l&&n<=c&&r>=u&&r<=d}return!1},vS={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},yS=function(e){var t=pS(pS({},vS),e),n=r.useRef(),o=uS(r.useState(-1),2),i=o[0],s=o[1];r.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&s(e)}catch(t){}},[]);var a=t.x,l=t.y,c=t.width,d=t.height,h=t.radius,p=t.className,f=t.animationEasing,g=t.animationDuration,m=t.animationBegin,v=t.isAnimationActive,y=t.isUpdateAnimationActive;if(a!==+a||l!==+l||c!==+c||d!==+d||0===c||0===d)return null;var b=Je("recharts-rectangle",p);return y?u.createElement(aS,{canBegin:i>0,from:{width:c,height:d,x:a,y:l},to:{width:c,height:d,x:a,y:l},duration:g,animationEasing:f,isActive:y},function(e){var r=e.width,o=e.height,s=e.x,a=e.y;return u.createElement(aS,{canBegin:i>0,from:"0px ".concat(-1===i?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:g,isActive:v,easing:f},u.createElement("path",cS({},Ao(t,!0),{className:b,d:gS(s,a,r,o,h),ref:n})))}):u.createElement("path",cS({},Ao(t,!0),{className:b,d:gS(a,l,c,d,h)}))},bS=["points","className","baseLinePoints","connectNulls"];function wS(){return wS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wS.apply(this,arguments)}function CS(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function xS(e){return function(e){if(Array.isArray(e))return SS(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return SS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SS(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var kS=function(e){return e&&e.x===+e.x&&e.y===+e.y},PS=function(e,t){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[]];return e.forEach(function(e){kS(e)?t[t.length-1].push(e):t[t.length-1].length>0&&t.push([])}),kS(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t}(e);t&&(n=[n.reduce(function(e,t){return[].concat(xS(e),xS(t))},[])]);var r=n.map(function(e){return e.reduce(function(e,t,n){return"".concat(e).concat(0===n?"M":"L").concat(t.x,",").concat(t.y)},"")}).join("");return 1===n.length?"".concat(r,"Z"):r},jS=function(e){var t=e.points,n=e.className,r=e.baseLinePoints,o=e.connectNulls,i=CS(e,bS);if(!t||!t.length)return null;var s=Je("recharts-polygon",n);if(r&&r.length){var a=i.stroke&&"none"!==i.stroke,l=function(e,t,n){var r=PS(e,n);return"".concat("Z"===r.slice(-1)?r.slice(0,-1):r,"L").concat(PS(t.reverse(),n).slice(1))}(t,r,o);return u.createElement("g",{className:s},u.createElement("path",wS({},Ao(i,!0),{fill:"Z"===l.slice(-1)?i.fill:"none",stroke:"none",d:l})),a?u.createElement("path",wS({},Ao(i,!0),{fill:"none",d:PS(t,o)})):null,a?u.createElement("path",wS({},Ao(i,!0),{fill:"none",d:PS(r,o)})):null)}var c=PS(t,o);return u.createElement("path",wS({},Ao(i,!0),{fill:"Z"===c.slice(-1)?i.fill:"none",className:s,d:c}))};function OS(){return OS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OS.apply(this,arguments)}var RS=function(e){var t=e.cx,n=e.cy,o=e.r,i=Je("recharts-dot",e.className);return t===+t&&n===+n&&o===+o?r.createElement("circle",OS({},Ao(e,!1),vo(e),{className:i,cx:t,cy:n,r:o})):null};function ES(e){return(ES="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var DS=["x","y","top","left","width","height","className"];function MS(){return MS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MS.apply(this,arguments)}function AS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function NS(e,t,n){var r;return r=function(e,t){if("object"!=ES(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=ES(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==ES(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TS(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var FS=function(e,t,n,r,o,i){return"M".concat(e,",").concat(o,"v").concat(r,"M").concat(i,",").concat(t,"h").concat(n)},IS=function(e){var t=e.x,n=void 0===t?0:t,r=e.y,o=void 0===r?0:r,i=e.top,s=void 0===i?0:i,a=e.left,l=void 0===a?0:a,c=e.width,d=void 0===c?0:c,h=e.height,p=void 0===h?0:h,f=e.className,g=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AS(Object(n),!0).forEach(function(t){NS(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({x:n,y:o,top:s,left:l,width:d,height:p},TS(e,DS));return to(n)&&to(o)&&to(d)&&to(p)&&to(s)&&to(l)?u.createElement("path",MS({},Ao(g,!0),{className:Je("recharts-cross",f),d:FS(n,o,d,p,s,l)})):null},LS=uy,BS=dy,HS=tu;const _S=c(function(e,t){return e&&e.length?LS(e,HS(t),BS):void 0});var GS=uy,VS=tu,WS=my;const zS=c(function(e,t){return e&&e.length?GS(e,VS(t),WS):void 0});var $S=["cx","cy","angle","ticks","axisLine"],US=["ticks","tick","angle","tickFormatter","stroke"];function KS(e){return(KS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qS(){return qS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qS.apply(this,arguments)}function XS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function YS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XS(Object(n),!0).forEach(function(t){rk(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ZS(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function JS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ok(r.key),r)}}function QS(e,t,n){return t=tk(t),function(e,t){if(t&&("object"===KS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ek()?Reflect.construct(t,n||[],tk(e).constructor):t.apply(e,n))}function ek(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(ek=function(){return!!e})()}function tk(e){return(tk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nk(e,t){return(nk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function rk(e,t,n){return(t=ok(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ok(e){var t=function(e,t){if("object"!=KS(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=KS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==KS(t)?t:t+""}var ik=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),QS(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nk(e,t)}(e,r.PureComponent),t=e,o=[{key:"renderTickItem",value:function(e,t,n){return u.isValidElement(e)?u.cloneElement(e,t):Dt(e)?e(t):u.createElement(jp,qS({},t,{className:"recharts-polar-radius-axis-tick-value"}),n)}}],(n=[{key:"getTickValueCoord",value:function(e){var t=e.coordinate,n=this.props,r=n.angle,o=n.cx,i=n.cy;return Tw(o,i,t,r)}},{key:"getTickTextAnchor",value:function(){var e;switch(this.props.orientation){case"left":e="end";break;case"right":e="start";break;default:e="middle"}return e}},{key:"getViewBox",value:function(){var e=this.props,t=e.cx,n=e.cy,r=e.angle,o=e.ticks,i=_S(o,function(e){return e.coordinate||0});return{cx:t,cy:n,startAngle:r,endAngle:r,innerRadius:zS(o,function(e){return e.coordinate||0}).coordinate||0,outerRadius:i.coordinate||0}}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,n=e.cy,r=e.angle,o=e.ticks,i=e.axisLine,s=ZS(e,$S),a=o.reduce(function(e,t){return[Math.min(e[0],t.coordinate),Math.max(e[1],t.coordinate)]},[1/0,-1/0]),l=Tw(t,n,a[0],r),c=Tw(t,n,a[1],r),d=YS(YS(YS({},Ao(s,!1)),{},{fill:"none"},Ao(i,!1)),{},{x1:l.x,y1:l.y,x2:c.x,y2:c.y});return u.createElement("line",qS({className:"recharts-polar-radius-axis-line"},d))}},{key:"renderTicks",value:function(){var t=this,n=this.props,r=n.ticks,o=n.tick,i=n.angle,s=n.tickFormatter,a=n.stroke,l=ZS(n,US),c=this.getTickTextAnchor(),d=Ao(l,!1),h=Ao(o,!1),p=r.map(function(n,r){var l=t.getTickValueCoord(n),p=YS(YS(YS(YS({textAnchor:c,transform:"rotate(".concat(90-i,", ").concat(l.x,", ").concat(l.y,")")},d),{},{stroke:"none",fill:a},h),{},{index:r},l),{},{payload:n});return u.createElement(Wo,qS({className:Je("recharts-polar-radius-axis-tick",Hw(o)),key:"tick-".concat(n.coordinate)},yo(t.props,n,r)),e.renderTickItem(o,p,s?s(n.value,r):n.value))});return u.createElement(Wo,{className:"recharts-polar-radius-axis-ticks"},p)}},{key:"render",value:function(){var e=this.props,t=e.ticks,n=e.axisLine,r=e.tick;return t&&t.length?u.createElement(Wo,{className:Je("recharts-polar-radius-axis",this.props.className)},n&&this.renderAxisLine(),r&&this.renderTicks(),Yw.renderCallByParent(this.props,this.getViewBox())):null}}])&&JS(t.prototype,n),o&&JS(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,o}();function sk(e){return(sk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ak(){return ak=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ak.apply(this,arguments)}function lk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ck(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lk(Object(n),!0).forEach(function(t){gk(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lk(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function uk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mk(r.key),r)}}function dk(e,t,n){return t=pk(t),function(e,t){if(t&&("object"===sk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,hk()?Reflect.construct(t,n||[],pk(e).constructor):t.apply(e,n))}function hk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(hk=function(){return!!e})()}function pk(e){return(pk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fk(e,t){return(fk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gk(e,t,n){return(t=mk(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mk(e){var t=function(e,t){if("object"!=sk(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=sk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==sk(t)?t:t+""}rk(ik,"displayName","PolarRadiusAxis"),rk(ik,"axisType","radiusAxis"),rk(ik,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});var vk=Math.PI/180,yk=1e-5,bk=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),dk(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fk(e,t)}(e,r.PureComponent),t=e,o=[{key:"renderTickItem",value:function(e,t,n){return u.isValidElement(e)?u.cloneElement(e,t):Dt(e)?e(t):u.createElement(jp,ak({},t,{className:"recharts-polar-angle-axis-tick-value"}),n)}}],(n=[{key:"getTickLineCoord",value:function(e){var t=this.props,n=t.cx,r=t.cy,o=t.radius,i=t.orientation,s=t.tickSize||8,a=Tw(n,r,o,e.coordinate),l=Tw(n,r,o+("inner"===i?-1:1)*s,e.coordinate);return{x1:a.x,y1:a.y,x2:l.x,y2:l.y}}},{key:"getTickTextAnchor",value:function(e){var t=this.props.orientation,n=Math.cos(-e.coordinate*vk);return n>yk?"outer"===t?"start":"end":n<-yk?"outer"===t?"end":"start":"middle"}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,n=e.cy,r=e.radius,o=e.axisLine,i=e.axisLineType,s=ck(ck({},Ao(this.props,!1)),{},{fill:"none"},Ao(o,!1));if("circle"===i)return u.createElement(RS,ak({className:"recharts-polar-angle-axis-line"},s,{cx:t,cy:n,r:r}));var a=this.props.ticks.map(function(e){return Tw(t,n,r,e.coordinate)});return u.createElement(jS,ak({className:"recharts-polar-angle-axis-line"},s,{points:a}))}},{key:"renderTicks",value:function(){var t=this,n=this.props,r=n.ticks,o=n.tick,i=n.tickLine,s=n.tickFormatter,a=n.stroke,l=Ao(this.props,!1),c=Ao(o,!1),d=ck(ck({},l),{},{fill:"none"},Ao(i,!1)),h=r.map(function(n,r){var h=t.getTickLineCoord(n),p=ck(ck(ck({textAnchor:t.getTickTextAnchor(n)},l),{},{stroke:"none",fill:a},c),{},{index:r,payload:n,x:h.x2,y:h.y2});return u.createElement(Wo,ak({className:Je("recharts-polar-angle-axis-tick",Hw(o)),key:"tick-".concat(n.coordinate)},yo(t.props,n,r)),i&&u.createElement("line",ak({className:"recharts-polar-angle-axis-tick-line"},d,h)),o&&e.renderTickItem(o,p,s?s(n.value,r):n.value))});return u.createElement(Wo,{className:"recharts-polar-angle-axis-ticks"},h)}},{key:"render",value:function(){var e=this.props,t=e.ticks,n=e.radius,r=e.axisLine;return n<=0||!t||!t.length?null:u.createElement(Wo,{className:Je("recharts-polar-angle-axis",this.props.className)},r&&this.renderAxisLine(),this.renderTicks())}}])&&uk(t.prototype,n),o&&uk(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,o}();gk(bk,"displayName","PolarAngleAxis"),gk(bk,"axisType","angleAxis"),gk(bk,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var wk=bl(Object.getPrototypeOf,Object),Ck=gt,xk=wk,Sk=mt,kk=Function.prototype,Pk=Object.prototype,jk=kk.toString,Ok=Pk.hasOwnProperty,Rk=jk.call(Object);const Ek=c(function(e){if(!Sk(e)||"[object Object]"!=Ck(e))return!1;var t=xk(e);if(null===t)return!0;var n=Ok.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&jk.call(n)==Rk});var Dk=gt,Mk=mt;const Ak=c(function(e){return!0===e||!1===e||Mk(e)&&"[object Boolean]"==Dk(e)});function Nk(e){return(Nk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tk(){return Tk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tk.apply(this,arguments)}function Fk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(u){c=!0,o=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ik(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ik(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ik(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Bk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lk(Object(n),!0).forEach(function(t){Hk(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lk(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Hk(e,t,n){var r;return r=function(e,t){if("object"!=Nk(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Nk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Nk(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _k,Gk=function(e,t,n,r,o){var i,s=n-r;return i="M ".concat(e,",").concat(t),i+="L ".concat(e+n,",").concat(t),i+="L ".concat(e+n-s/2,",").concat(t+o),i+="L ".concat(e+n-s/2-r,",").concat(t+o),i+="L ".concat(e,",").concat(t," Z")},Vk={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Wk=function(e){var t=Bk(Bk({},Vk),e),n=r.useRef(),o=Fk(r.useState(-1),2),i=o[0],s=o[1];r.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&s(e)}catch(t){}},[]);var a=t.x,l=t.y,c=t.upperWidth,d=t.lowerWidth,h=t.height,p=t.className,f=t.animationEasing,g=t.animationDuration,m=t.animationBegin,v=t.isUpdateAnimationActive;if(a!==+a||l!==+l||c!==+c||d!==+d||h!==+h||0===c&&0===d||0===h)return null;var y=Je("recharts-trapezoid",p);return v?u.createElement(aS,{canBegin:i>0,from:{upperWidth:0,lowerWidth:0,height:h,x:a,y:l},to:{upperWidth:c,lowerWidth:d,height:h,x:a,y:l},duration:g,animationEasing:f,isActive:v},function(e){var r=e.upperWidth,o=e.lowerWidth,s=e.height,a=e.x,l=e.y;return u.createElement(aS,{canBegin:i>0,from:"0px ".concat(-1===i?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:g,easing:f},u.createElement("path",Tk({},Ao(t,!0),{className:y,d:Gk(a,l,r,o,s),ref:n})))}):u.createElement("g",null,u.createElement("path",Tk({},Ao(t,!0),{className:y,d:Gk(a,l,c,d,h)})))},zk=["option","shapeType","propTransformer","activeClassName","isActive"];function $k(e){return($k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uk(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Kk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function qk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kk(Object(n),!0).forEach(function(t){Xk(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kk(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Xk(e,t,n){var r;return r=function(e,t){if("object"!=$k(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=$k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==$k(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yk(e,t){return qk(qk({},t),e)}function Zk(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return u.createElement(yS,n);case"trapezoid":return u.createElement(Wk,n);case"sector":return u.createElement(bC,n);case"symbols":if(function(e){return"symbols"===e}(t))return u.createElement(Es,n);break;default:return null}}function Jk(e){var t,n=e.option,o=e.shapeType,i=e.propTransformer,s=void 0===i?Yk:i,a=e.activeClassName,l=void 0===a?"recharts-active-shape":a,c=e.isActive,d=Uk(e,zk);if(r.isValidElement(n))t=r.cloneElement(n,qk(qk({},d),function(e){return r.isValidElement(e)?e.props:e}(n)));else if(Dt(n))t=n(d);else if(Ek(n)&&!Ak(n)){var h=s(n,d);t=u.createElement(Zk,{shapeType:o,elementProps:h})}else{var p=d;t=u.createElement(Zk,{shapeType:o,elementProps:p})}return c?u.createElement(Wo,{className:l},t):t}function Qk(e,t){return null!=t&&"trapezoids"in e.props}function eP(e,t){return null!=t&&"sectors"in e.props}function tP(e,t){return null!=t&&"points"in e.props}function nP(e,t){var n,r,o=e.x===(null==t||null===(n=t.labelViewBox)||void 0===n?void 0:n.x)||e.x===t.x,i=e.y===(null==t||null===(r=t.labelViewBox)||void 0===r?void 0:r.y)||e.y===t.y;return o&&i}function rP(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function oP(e,t){var n=e.x===t.x,r=e.y===t.y,o=e.z===t.z;return n&&r&&o}function iP(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,o=function(e,t){var n;return Qk(e,t)?n="trapezoids":eP(e,t)?n="sectors":tP(e,t)&&(n="points"),n}(n,t),i=function(e,t){var n,r;return Qk(e,t)?null===(n=t.tooltipPayload)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.payload:eP(e,t)?null===(r=t.tooltipPayload)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.payload)||void 0===r?void 0:r.payload:tP(e,t)?t.payload:{}}(n,t),s=r.filter(function(e,r){var s=Ey(i,e),a=n.props[o].filter(function(e){var r=function(e,t){var n;return Qk(e,t)?n=nP:eP(e,t)?n=rP:tP(e,t)&&(n=oP),n}(n,t);return r(e,t)}),l=n.props[o].indexOf(a[a.length-1]);return s&&r===l});return r.indexOf(s[s.length-1])}function sP(e){return(sP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aP(){return aP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aP.apply(this,arguments)}function lP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function cP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lP(Object(n),!0).forEach(function(t){gP(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function uP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mP(r.key),r)}}function dP(e,t,n){return t=pP(t),function(e,t){if(t&&("object"===sP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,hP()?Reflect.construct(t,n||[],pP(e).constructor):t.apply(e,n))}function hP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(hP=function(){return!!e})()}function pP(e){return(pP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fP(e,t){return(fP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gP(e,t,n){return(t=mP(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mP(e){var t=function(e,t){if("object"!=sP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=sP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==sP(t)?t:t+""}var vP=function(){function e(t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),gP(n=dP(this,e,[t]),"pieRef",null),gP(n,"sectorRefs",[]),gP(n,"id",oo("recharts-pie-")),gP(n,"handleAnimationEnd",function(){var e=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Dt(e)&&e()}),gP(n,"handleAnimationStart",function(){var e=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Dt(e)&&e()}),n.state={isAnimationFinished:!t.isAnimationActive,prevIsAnimationActive:t.isAnimationActive,prevAnimationId:t.animationId,sectorToFocus:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fP(e,t)}(e,r.PureComponent),t=e,o=[{key:"getDerivedStateFromProps",value:function(e,t){return t.prevIsAnimationActive!==e.isAnimationActive?{prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:[],isAnimationFinished:!0}:e.isAnimationActive&&e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:t.curSectors,isAnimationFinished:!0}:e.sectors!==t.curSectors?{curSectors:e.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(e,t){return e>t?"start":e<t?"end":"middle"}},{key:"renderLabelLineItem",value:function(e,t,n){if(u.isValidElement(e))return u.cloneElement(e,t);if(Dt(e))return e(t);var r=Je("recharts-pie-label-line","boolean"!=typeof e?e.className:"");return u.createElement(DC,aP({},t,{key:n,type:"linear",className:r}))}},{key:"renderLabelItem",value:function(e,t,n){if(u.isValidElement(e))return u.cloneElement(e,t);var r=n;if(Dt(e)&&(r=e(t),u.isValidElement(r)))return r;var o=Je("recharts-pie-label-text","boolean"==typeof e||Dt(e)?"":e.className);return u.createElement(jp,aP({},t,{alignmentBaseline:"middle",className:o}),r)}}],(n=[{key:"isActiveIndex",value:function(e){var t=this.props.activeIndex;return Array.isArray(t)?-1!==t.indexOf(e):e===t}},{key:"hasActiveIndex",value:function(){var e=this.props.activeIndex;return Array.isArray(e)?0!==e.length:e||0===e}},{key:"renderLabels",value:function(t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,r=n.label,o=n.labelLine,i=n.dataKey,s=n.valueKey,a=Ao(this.props,!1),l=Ao(r,!1),c=Ao(o,!1),d=r&&r.offsetRadius||20,h=t.map(function(t,n){var h=(t.startAngle+t.endAngle)/2,p=Tw(t.cx,t.cy,t.outerRadius+d,h),f=cP(cP(cP(cP({},a),t),{},{stroke:"none"},l),{},{index:n,textAnchor:e.getTextAnchor(p.x,t.cx)},p),g=cP(cP(cP(cP({},a),t),{},{fill:"none",stroke:t.fill},c),{},{index:n,points:[Tw(t.cx,t.cy,t.outerRadius,h),p]}),m=i;return Sr(i)&&Sr(s)?m="value":Sr(i)&&(m=s),u.createElement(Wo,{key:"label-".concat(t.startAngle,"-").concat(t.endAngle,"-").concat(t.midAngle,"-").concat(n)},o&&e.renderLabelLineItem(o,g,"line"),e.renderLabelItem(r,f,tw(t,m)))});return u.createElement(Wo,{className:"recharts-pie-labels"},h)}},{key:"renderSectorsStatically",value:function(e){var t=this,n=this.props,r=n.activeShape,o=n.blendStroke,i=n.inactiveShape;return e.map(function(n,s){if(0===(null==n?void 0:n.startAngle)&&0===(null==n?void 0:n.endAngle)&&1!==e.length)return null;var a=t.isActiveIndex(s),l=i&&t.hasActiveIndex()?i:null,c=a?r:l,d=cP(cP({},n),{},{stroke:o?n.fill:n.stroke,tabIndex:-1});return u.createElement(Wo,aP({ref:function(e){e&&!t.sectorRefs.includes(e)&&t.sectorRefs.push(e)},tabIndex:-1,className:"recharts-pie-sector"},yo(t.props,n,s),{key:"sector-".concat(null==n?void 0:n.startAngle,"-").concat(null==n?void 0:n.endAngle,"-").concat(n.midAngle,"-").concat(s)}),u.createElement(Jk,aP({option:c,isActive:a,shapeType:"sector"},d)))})}},{key:"renderSectorsWithAnimation",value:function(){var e=this,t=this.props,n=t.sectors,r=t.isAnimationActive,o=t.animationBegin,i=t.animationDuration,s=t.animationEasing,a=t.animationId,l=this.state,c=l.prevSectors,d=l.prevIsAnimationActive;return u.createElement(aS,{begin:o,duration:i,isActive:r,easing:s,from:{t:0},to:{t:1},key:"pie-".concat(a,"-").concat(d),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(t){var r=t.t,o=[],i=(n&&n[0]).startAngle;return n.forEach(function(e,t){var n=c&&c[t],s=t>0?xr(e,"paddingAngle",0):0;if(n){var a=ao(n.endAngle-n.startAngle,e.endAngle-e.startAngle),l=cP(cP({},e),{},{startAngle:i+s,endAngle:i+a(r)+s});o.push(l),i=l.endAngle}else{var u=e.endAngle,d=e.startAngle,h=ao(0,u-d)(r),p=cP(cP({},e),{},{startAngle:i+s,endAngle:i+h+s});o.push(p),i=p.endAngle}}),u.createElement(Wo,null,e.renderSectorsStatically(o))})}},{key:"attachKeyboardHandlers",value:function(e){var t=this;e.onkeydown=function(e){if(!e.altKey)switch(e.key){case"ArrowLeft":var n=++t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[n].focus(),t.setState({sectorToFocus:n});break;case"ArrowRight":var r=--t.state.sectorToFocus<0?t.sectorRefs.length-1:t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[r].focus(),t.setState({sectorToFocus:r});break;case"Escape":t.sectorRefs[t.state.sectorToFocus].blur(),t.setState({sectorToFocus:0})}}}},{key:"renderSectors",value:function(){var e=this.props,t=e.sectors,n=e.isAnimationActive,r=this.state.prevSectors;return!(n&&t&&t.length)||r&&Ey(r,t)?this.renderSectorsStatically(t):this.renderSectorsWithAnimation()}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var e=this,t=this.props,n=t.hide,r=t.sectors,o=t.className,i=t.label,s=t.cx,a=t.cy,l=t.innerRadius,c=t.outerRadius,d=t.isAnimationActive,h=this.state.isAnimationFinished;if(n||!r||!r.length||!to(s)||!to(a)||!to(l)||!to(c))return null;var p=Je("recharts-pie",o);return u.createElement(Wo,{tabIndex:this.props.rootTabIndex,className:p,ref:function(t){e.pieRef=t}},this.renderSectors(),i&&this.renderLabels(r),Yw.renderCallByParent(this.props,null,!1),(!d||h)&&uC.renderCallByParent(this.props,r,!1))}}])&&uP(t.prototype,n),o&&uP(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,o}();_k=vP,gP(vP,"displayName","Pie"),gP(vP,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!rh,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0}),gP(vP,"parseDeltaAngle",function(e,t){return Qr(t-e)*Math.min(Math.abs(t-e),360)}),gP(vP,"getRealPieData",function(e){var t=e.data,n=e.children,r=Ao(e,!1),o=Ro(n,Wh);return t&&t.length?t.map(function(e,t){return cP(cP(cP({payload:e},r),e),o&&o[t]&&o[t].props)}):o&&o.length?o.map(function(e){return cP(cP({},r),e.props)}):[]}),gP(vP,"parseCoordinateOfPie",function(e,t){var n=t.top,r=t.left,o=t.width,i=t.height,s=Fw(o,i);return{cx:r+io(e.cx,o,o/2),cy:n+io(e.cy,i,i/2),innerRadius:io(e.innerRadius,s,0),outerRadius:io(e.outerRadius,s,.8*s),maxRadius:e.maxRadius||Math.sqrt(o*o+i*i)/2}}),gP(vP,"getComposedData",function(e){var t=e.item,n=e.offset,r=void 0!==t.type.defaultProps?cP(cP({},t.type.defaultProps),t.props):t.props,o=_k.getRealPieData(r);if(!o||!o.length)return null;var i=r.cornerRadius,s=r.startAngle,a=r.endAngle,l=r.paddingAngle,c=r.dataKey,u=r.nameKey,d=r.valueKey,h=r.tooltipType,p=Math.abs(r.minAngle),f=_k.parseCoordinateOfPie(r,n),g=_k.parseDeltaAngle(s,a),m=Math.abs(g),v=c;Sr(c)&&Sr(d)?(zo(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),v="value"):Sr(c)&&(zo(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),v=d);var y,b,w=o.filter(function(e){return 0!==tw(e,v,0)}).length,C=m-w*p-(m>=360?w:w-1)*l,x=o.reduce(function(e,t){var n=tw(t,v,0);return e+(to(n)?n:0)},0);x>0&&(y=o.map(function(e,t){var n,r=tw(e,v,0),o=tw(e,u,t),a=(to(r)?r:0)/x,c=(n=t?b.endAngle+Qr(g)*l*(0!==r?1:0):s)+Qr(g)*((0!==r?p:0)+a*C),d=(n+c)/2,m=(f.innerRadius+f.outerRadius)/2,y=[{name:o,value:r,payload:e,dataKey:v,type:h}],w=Tw(f.cx,f.cy,m,d);return b=cP(cP(cP({percent:a,cornerRadius:i,name:o,tooltipPayload:y,midAngle:d,middleRadius:m,tooltipPosition:w},e),f),{},{value:tw(e,v),startAngle:n,endAngle:c,payload:e,paddingAngle:Qr(g)*l})}));return cP(cP({},f),{},{sectors:y,data:o})});var yP=Math.ceil,bP=Math.max;var wP=Oh,CP=1/0;var xP=function(e){return e?(e=wP(e))===CP||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0},SP=function(e,t,n,r){for(var o=-1,i=bP(yP((t-e)/(n||1)),0),s=Array(i);i--;)s[r?i:++o]=e,e+=n;return s},kP=jd,PP=xP;const jP=c(function(e){return function(t,n,r){return r&&"number"!=typeof r&&kP(t,n,r)&&(n=r=void 0),t=PP(t),void 0===n?(n=t,t=0):n=PP(n),r=void 0===r?t<n?1:-1:PP(r),SP(t,n,r,e)}}());function OP(e){return(OP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function EP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RP(Object(n),!0).forEach(function(t){DP(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function DP(e,t,n){var r;return r=function(e,t){if("object"!=OP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=OP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==OP(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var MP=["Webkit","Moz","O","ms"];function AP(e){return(AP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NP(){return NP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NP.apply(this,arguments)}function TP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function FP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TP(Object(n),!0).forEach(function(t){GP(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function IP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,VP(r.key),r)}}function LP(e,t,n){return t=HP(t),function(e,t){if(t&&("object"===AP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,BP()?Reflect.construct(t,n||[],HP(e).constructor):t.apply(e,n))}function BP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(BP=function(){return!!e})()}function HP(e){return(HP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _P(e,t){return(_P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function GP(e,t,n){return(t=VP(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VP(e){var t=function(e,t){if("object"!=AP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=AP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==AP(t)?t:t+""}var WP=function(e){return e.changedTouches&&!!e.changedTouches.length},zP=function(){function e(t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),GP(n=LP(this,e,[t]),"handleDrag",function(e){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(e):n.state.isSlideMoving&&n.handleSlideDrag(e)}),GP(n,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&n.handleDrag(e.changedTouches[0])}),GP(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var e=n.props,t=e.endIndex,r=e.onDragEnd,o=e.startIndex;null==r||r({endIndex:t,startIndex:o})}),n.detachDragEndListener()}),GP(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),GP(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),GP(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),GP(n,"handleSlideDragStart",function(e){var t=WP(e)?e.changedTouches[0]:e;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:t.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_P(e,t)}(e,r.PureComponent),t=e,o=[{key:"renderDefaultTraveller",value:function(e){var t=e.x,n=e.y,r=e.width,o=e.height,i=e.stroke,s=Math.floor(n+o/2)-1;return u.createElement(u.Fragment,null,u.createElement("rect",{x:t,y:n,width:r,height:o,fill:i,stroke:"none"}),u.createElement("line",{x1:t+1,y1:s,x2:t+r-1,y2:s,fill:"none",stroke:"#fff"}),u.createElement("line",{x1:t+1,y1:s+2,x2:t+r-1,y2:s+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(t,n){return u.isValidElement(t)?u.cloneElement(t,n):Dt(t)?t(n):e.renderDefaultTraveller(n)}},{key:"getDerivedStateFromProps",value:function(e,t){var n=e.data,r=e.width,o=e.x,i=e.travellerWidth,s=e.updateId,a=e.startIndex,l=e.endIndex;if(n!==t.prevData||s!==t.prevUpdateId)return FP({prevData:n,prevTravellerWidth:i,prevUpdateId:s,prevX:o,prevWidth:r},n&&n.length?function(e){var t=e.data,n=e.startIndex,r=e.endIndex,o=e.x,i=e.width,s=e.travellerWidth;if(!t||!t.length)return{};var a=t.length,l=tf().domain(jP(0,a)).range([o,o+i-s]),c=l.domain().map(function(e){return l(e)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(n),endX:l(r),scale:l,scaleValues:c}}({data:n,width:r,x:o,travellerWidth:i,startIndex:a,endIndex:l}):{scale:null,scaleValues:null});if(t.scale&&(r!==t.prevWidth||o!==t.prevX||i!==t.prevTravellerWidth)){t.scale.range([o,o+r-i]);var c=t.scale.domain().map(function(e){return t.scale(e)});return{prevData:n,prevTravellerWidth:i,prevUpdateId:s,prevX:o,prevWidth:r,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:c}}return null}},{key:"getIndexInRange",value:function(e,t){for(var n=0,r=e.length-1;r-n>1;){var o=Math.floor((n+r)/2);e[o]>t?r=o:n=o}return t>=e[r]?r:n}}],(n=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(t){var n=t.startX,r=t.endX,o=this.state.scaleValues,i=this.props,s=i.gap,a=i.data.length-1,l=Math.min(n,r),c=Math.max(n,r),u=e.getIndexInRange(o,l),d=e.getIndexInRange(o,c);return{startIndex:u-u%s,endIndex:d===a?a:d-d%s}}},{key:"getTextOfTick",value:function(e){var t=this.props,n=t.data,r=t.tickFormatter,o=t.dataKey,i=tw(n[e],o,e);return Dt(r)?r(i,e):i}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,n=t.slideMoveStartX,r=t.startX,o=t.endX,i=this.props,s=i.x,a=i.width,l=i.travellerWidth,c=i.startIndex,u=i.endIndex,d=i.onChange,h=e.pageX-n;h>0?h=Math.min(h,s+a-l-o,s+a-l-r):h<0&&(h=Math.max(h,s-r,s-o));var p=this.getIndex({startX:r+h,endX:o+h});p.startIndex===c&&p.endIndex===u||!d||d(p),this.setState({startX:r+h,endX:o+h,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var n=WP(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:n.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t=this.state,n=t.brushMoveStartX,r=t.movingTravellerId,o=t.endX,i=t.startX,s=this.state[r],a=this.props,l=a.x,c=a.width,u=a.travellerWidth,d=a.onChange,h=a.gap,p=a.data,f={startX:this.state.startX,endX:this.state.endX},g=e.pageX-n;g>0?g=Math.min(g,l+c-u-s):g<0&&(g=Math.max(g,l-s)),f[r]=s+g;var m=this.getIndex(f),v=m.startIndex,y=m.endIndex;this.setState(GP(GP({},r,s+g),"brushMoveStartX",e.pageX),function(){var e;d&&(e=p.length-1,("startX"===r&&(o>i?v%h===0:y%h===0)||o<i&&y===e||"endX"===r&&(o>i?y%h===0:v%h===0)||o>i&&y===e)&&d(m))})}},{key:"handleTravellerMoveKeyboard",value:function(e,t){var n=this,r=this.state,o=r.scaleValues,i=r.startX,s=r.endX,a=this.state[t],l=o.indexOf(a);if(-1!==l){var c=l+e;if(!(-1===c||c>=o.length)){var u=o[c];"startX"===t&&u>=s||"endX"===t&&u<=i||this.setState(GP({},t,u),function(){n.props.onChange(n.getIndex({startX:n.state.startX,endX:n.state.endX}))})}}}},{key:"renderBackground",value:function(){var e=this.props,t=e.x,n=e.y,r=e.width,o=e.height,i=e.fill,s=e.stroke;return u.createElement("rect",{stroke:s,fill:i,x:t,y:n,width:r,height:o})}},{key:"renderPanorama",value:function(){var e=this.props,t=e.x,n=e.y,o=e.width,i=e.height,s=e.data,a=e.children,l=e.padding,c=r.Children.only(a);return c?u.cloneElement(c,{x:t,y:n,width:o,height:i,margin:l,compact:!0,data:s}):null}},{key:"renderTravellerLayer",value:function(t,n){var r,o,i=this,s=this.props,a=s.y,l=s.travellerWidth,c=s.height,d=s.traveller,h=s.ariaLabel,p=s.data,f=s.startIndex,g=s.endIndex,m=Math.max(t,this.props.x),v=FP(FP({},Ao(this.props,!1)),{},{x:m,y:a,width:l,height:c}),y=h||"Min value: ".concat(null===(r=p[f])||void 0===r?void 0:r.name,", Max value: ").concat(null===(o=p[g])||void 0===o?void 0:o.name);return u.createElement(Wo,{tabIndex:0,role:"slider","aria-label":y,"aria-valuenow":t,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[n],onTouchStart:this.travellerDragStartHandlers[n],onKeyDown:function(e){["ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),i.handleTravellerMoveKeyboard("ArrowRight"===e.key?1:-1,n))},onFocus:function(){i.setState({isTravellerFocused:!0})},onBlur:function(){i.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(d,v))}},{key:"renderSlide",value:function(e,t){var n=this.props,r=n.y,o=n.height,i=n.stroke,s=n.travellerWidth,a=Math.min(e,t)+s,l=Math.max(Math.abs(t-e)-s,0);return u.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:i,fillOpacity:.2,x:a,y:r,width:l,height:o})}},{key:"renderText",value:function(){var e=this.props,t=e.startIndex,n=e.endIndex,r=e.y,o=e.height,i=e.travellerWidth,s=e.stroke,a=this.state,l=a.startX,c=a.endX,d={pointerEvents:"none",fill:s};return u.createElement(Wo,{className:"recharts-brush-texts"},u.createElement(jp,NP({textAnchor:"end",verticalAnchor:"middle",x:Math.min(l,c)-5,y:r+o/2},d),this.getTextOfTick(t)),u.createElement(jp,NP({textAnchor:"start",verticalAnchor:"middle",x:Math.max(l,c)+i+5,y:r+o/2},d),this.getTextOfTick(n)))}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.className,r=e.children,o=e.x,i=e.y,s=e.width,a=e.height,l=e.alwaysShowText,c=this.state,d=c.startX,h=c.endX,p=c.isTextActive,f=c.isSlideMoving,g=c.isTravellerMoving,m=c.isTravellerFocused;if(!t||!t.length||!to(o)||!to(i)||!to(s)||!to(a)||s<=0||a<=0)return null;var v,y,b,w,C=Je("recharts-brush",n),x=1===u.Children.count(r),S=(y="none",b=(v="userSelect").replace(/(\w)/,function(e){return e.toUpperCase()}),(w=MP.reduce(function(e,t){return EP(EP({},e),{},DP({},t+b,y))},{}))[v]=y,w);return u.createElement(Wo,{className:C,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),x&&this.renderPanorama(),this.renderSlide(d,h),this.renderTravellerLayer(d,"startX"),this.renderTravellerLayer(h,"endX"),(p||f||g||m||l)&&this.renderText())}}])&&IP(t.prototype,n),o&&IP(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,o}();GP(zP,"displayName","Brush"),GP(zP,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var $P=Uu;var UP=ia,KP=tu,qP=function(e,t){var n;return $P(e,function(e,r,o){return!(n=t(e,r,o))}),!!n},XP=Qe,YP=jd;const ZP=c(function(e,t,n){var r=XP(e)?UP:qP;return n&&YP(e,t,n)&&(t=void 0),r(e,KP(t))});var JP=function(e,t){var n=e.alwaysShow,r=e.ifOverflow;return n&&(r="extendDomain"),r===t},QP=pd;var ej=function(e,t,n){"__proto__"==t&&QP?QP(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},tj=zu,nj=tu;const rj=c(function(e,t){var n={};return t=nj(t),tj(e,function(e,r,o){ej(n,r,t(e,r,o))}),n});var oj=Uu;var ij=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0},sj=function(e,t){var n=!0;return oj(e,function(e,r,o){return n=!!t(e,r,o)}),n},aj=tu,lj=Qe,cj=jd;const uj=c(function(e,t,n){var r=lj(e)?ij:sj;return n&&cj(e,t,n)&&(t=void 0),r(e,aj(t))});var dj=["x","y"];function hj(e){return(hj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pj(){return pj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pj.apply(this,arguments)}function fj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function gj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fj(Object(n),!0).forEach(function(t){mj(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fj(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function mj(e,t,n){var r;return r=function(e,t){if("object"!=hj(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=hj(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==hj(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vj(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function yj(e,t){var n=e.x,r=e.y,o=vj(e,dj),i="".concat(n),s=parseInt(i,10),a="".concat(r),l=parseInt(a,10),c="".concat(t.height||o.height),u=parseInt(c,10),d="".concat(t.width||o.width),h=parseInt(d,10);return gj(gj(gj(gj(gj({},t),o),s?{x:s}:{}),l?{y:l}:{}),{},{height:u,width:h,name:t.name,radius:t.radius})}function bj(e){return u.createElement(Jk,pj({shapeType:"rectangle",propTransformer:yj,activeClassName:"recharts-active-bar"},e))}var wj,Cj=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n,r){if("number"==typeof e)return e;var o=to(n)||function(e){return Sr(e)}(n);return o?e(n,r):(o||Eb(),t)}},xj=["value","background"];function Sj(e){return(Sj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kj(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Pj(){return Pj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pj.apply(this,arguments)}function jj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Oj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jj(Object(n),!0).forEach(function(t){Nj(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jj(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Rj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Tj(r.key),r)}}function Ej(e,t,n){return t=Mj(t),function(e,t){if(t&&("object"===Sj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Dj()?Reflect.construct(t,n||[],Mj(e).constructor):t.apply(e,n))}function Dj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Dj=function(){return!!e})()}function Mj(e){return(Mj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Aj(e,t){return(Aj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Nj(e,t,n){return(t=Tj(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tj(e){var t=function(e,t){if("object"!=Sj(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Sj(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Sj(t)?t:t+""}var Fj=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return Nj(t=Ej(this,e,[].concat(r)),"state",{isAnimationFinished:!1}),Nj(t,"id",oo("recharts-bar-")),Nj(t,"handleAnimationEnd",function(){var e=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),e&&e()}),Nj(t,"handleAnimationStart",function(){var e=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),e&&e()}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Aj(e,t)}(e,r.PureComponent),t=e,o=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curData:e.data,prevData:t.curData}:e.data!==t.curData?{curData:e.data}:null}}],(n=[{key:"renderRectanglesStatically",value:function(e){var t=this,n=this.props,r=n.shape,o=n.dataKey,i=n.activeIndex,s=n.activeBar,a=Ao(this.props,!1);return e&&e.map(function(e,n){var l=n===i,c=l?s:r,d=Oj(Oj(Oj({},a),e),{},{isActive:l,option:c,index:n,dataKey:o,onAnimationStart:t.handleAnimationStart,onAnimationEnd:t.handleAnimationEnd});return u.createElement(Wo,Pj({className:"recharts-bar-rectangle"},yo(t.props,e,n),{key:"rectangle-".concat(null==e?void 0:e.x,"-").concat(null==e?void 0:e.y,"-").concat(null==e?void 0:e.value,"-").concat(n)}),u.createElement(bj,d))})}},{key:"renderRectanglesWithAnimation",value:function(){var e=this,t=this.props,n=t.data,r=t.layout,o=t.isAnimationActive,i=t.animationBegin,s=t.animationDuration,a=t.animationEasing,l=t.animationId,c=this.state.prevData;return u.createElement(aS,{begin:i,duration:s,isActive:o,easing:a,from:{t:0},to:{t:1},key:"bar-".concat(l),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(t){var o=t.t,i=n.map(function(e,t){var n=c&&c[t];if(n){var i=ao(n.x,e.x),s=ao(n.y,e.y),a=ao(n.width,e.width),l=ao(n.height,e.height);return Oj(Oj({},e),{},{x:i(o),y:s(o),width:a(o),height:l(o)})}if("horizontal"===r){var u=ao(0,e.height)(o);return Oj(Oj({},e),{},{y:e.y+e.height-u,height:u})}var d=ao(0,e.width)(o);return Oj(Oj({},e),{},{width:d})});return u.createElement(Wo,null,e.renderRectanglesStatically(i))})}},{key:"renderRectangles",value:function(){var e=this.props,t=e.data,n=e.isAnimationActive,r=this.state.prevData;return!(n&&t&&t.length)||r&&Ey(r,t)?this.renderRectanglesStatically(t):this.renderRectanglesWithAnimation()}},{key:"renderBackground",value:function(){var e=this,t=this.props,n=t.data,r=t.dataKey,o=t.activeIndex,i=Ao(this.props.background,!1);return n.map(function(t,n){t.value;var s=t.background,a=kj(t,xj);if(!s)return null;var l=Oj(Oj(Oj(Oj(Oj({},a),{},{fill:"#eee"},s),i),yo(e.props,t,n)),{},{onAnimationStart:e.handleAnimationStart,onAnimationEnd:e.handleAnimationEnd,dataKey:r,index:n,className:"recharts-bar-background-rectangle"});return u.createElement(bj,Pj({key:"background-bar-".concat(n),option:e.props.background,isActive:n===o},l))})}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,r=n.data,o=n.xAxis,i=n.yAxis,s=n.layout,a=Ro(n.children,Wb);if(!a)return null;var l="vertical"===s?r[0].height/2:r[0].width/2,c=function(e,t){var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:tw(e,t)}},d={clipPath:e?"url(#clipPath-".concat(t,")"):null};return u.createElement(Wo,d,a.map(function(e){return u.cloneElement(e,{key:"error-bar-".concat(t,"-").concat(e.props.dataKey),data:r,xAxis:o,yAxis:i,layout:s,offset:l,dataPointFormatter:c})}))}},{key:"render",value:function(){var e=this.props,t=e.hide,n=e.data,r=e.className,o=e.xAxis,i=e.yAxis,s=e.left,a=e.top,l=e.width,c=e.height,d=e.isAnimationActive,h=e.background,p=e.id;if(t||!n||!n.length)return null;var f=this.state.isAnimationFinished,g=Je("recharts-bar",r),m=o&&o.allowDataOverflow,v=i&&i.allowDataOverflow,y=m||v,b=Sr(p)?this.id:p;return u.createElement(Wo,{className:g},m||v?u.createElement("defs",null,u.createElement("clipPath",{id:"clipPath-".concat(b)},u.createElement("rect",{x:m?s:s-l/2,y:v?a:a-c/2,width:m?l:2*l,height:v?c:2*c}))):null,u.createElement(Wo,{className:"recharts-bar-rectangles",clipPath:y?"url(#clipPath-".concat(b,")"):null},h?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(y,b),(!d||f)&&uC.renderCallByParent(this.props,n))}}])&&Rj(t.prototype,n),o&&Rj(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,o}();function Ij(e){return(Ij="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gj(r.key),r)}}function Bj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Hj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bj(Object(n),!0).forEach(function(t){_j(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bj(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _j(e,t,n){return(t=Gj(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gj(e){var t=function(e,t){if("object"!=Ij(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Ij(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ij(t)?t:t+""}wj=Fj,Nj(Fj,"displayName","Bar"),Nj(Fj,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!rh,animationBegin:0,animationDuration:400,animationEasing:"ease"}),Nj(Fj,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,o=e.bandSize,i=e.xAxis,s=e.yAxis,a=e.xAxisTicks,l=e.yAxisTicks,c=e.stackedData,u=e.dataStartIndex,d=e.displayedData,h=e.offset,p=function(e,t){if(!e)return null;for(var n=0,r=e.length;n<r;n++)if(e[n].item===t)return e[n].position;return null}(r,n);if(!p)return null;var f=t.layout,g=n.type.defaultProps,m=void 0!==g?Oj(Oj({},g),n.props):n.props,v=m.dataKey,y=m.children,b=m.minPointSize,w="horizontal"===f?s:i,C=c?w.scale.domain():null,x=function(e){var t=e.numericAxis,n=t.scale.domain();if("number"===t.type){var r=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]);return r<=0&&o>=0?0:o<0?o:r}return n[0]}({numericAxis:w}),S=Ro(y,Wh),k=d.map(function(e,t){var r,d,h,g,m,y;c?r=function(e,t){if(!t||2!==t.length||!to(t[0])||!to(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),o=[e[0],e[1]];return(!to(e[0])||e[0]<n)&&(o[0]=n),(!to(e[1])||e[1]>r)&&(o[1]=r),o[0]>r&&(o[0]=r),o[1]<n&&(o[1]=n),o}(c[u+t],C):(r=tw(e,v),Array.isArray(r)||(r=[x,r]));var w=Cj(b,wj.defaultProps.minPointSize)(r[1],t);if("horizontal"===f){var k,P=[s.scale(r[0]),s.scale(r[1])],j=P[0],O=P[1];d=yw({axis:i,ticks:a,bandSize:o,offset:p.offset,entry:e,index:t}),h=null!==(k=null!=O?O:j)&&void 0!==k?k:void 0,g=p.size;var R=j-O;if(m=Number.isNaN(R)?0:R,y={x:d,y:s.y,width:g,height:s.height},Math.abs(w)>0&&Math.abs(m)<Math.abs(w)){var E=Qr(m||w)*(Math.abs(w)-Math.abs(m));h-=E,m+=E}}else{var D=[i.scale(r[0]),i.scale(r[1])],M=D[0],A=D[1];if(d=M,h=yw({axis:s,ticks:l,bandSize:o,offset:p.offset,entry:e,index:t}),g=A-M,m=p.size,y={x:i.x,y:h,width:i.width,height:m},Math.abs(w)>0&&Math.abs(g)<Math.abs(w))g+=Qr(g||w)*(Math.abs(w)-Math.abs(g))}return Oj(Oj(Oj({},e),{},{x:d,y:h,width:g,height:m,value:c?r:r[1],payload:e,background:y},S&&S[t]&&S[t].props),{},{tooltipPayload:[Pw(n,e)],tooltipPosition:{x:d+g/2,y:h+m/2}})});return Oj({data:k,layout:f},h)});var Vj=function(e,t,n,r,o){var i=e.width,s=e.height,a=e.layout,l=e.children,c=Object.keys(t),u={left:n.left,leftMirror:n.left,right:i-n.right,rightMirror:i-n.right,top:n.top,topMirror:n.top,bottom:s-n.bottom,bottomMirror:s-n.bottom},d=!!Eo(l,Fj);return c.reduce(function(i,s){var l,c,h,p,f,g=t[s],m=g.orientation,v=g.domain,y=g.padding,b=void 0===y?{}:y,w=g.mirror,C=g.reversed,x="".concat(m).concat(w?"Mirror":"");if("number"===g.type&&("gap"===g.padding||"no-gap"===g.padding)){var S=v[1]-v[0],k=1/0,P=g.categoricalDomain.sort(co);if(P.forEach(function(e,t){t>0&&(k=Math.min((e||0)-(P[t-1]||0),k))}),Number.isFinite(k)){var j=k/S,O="vertical"===g.layout?n.height:n.width;if("gap"===g.padding&&(l=j*O/2),"no-gap"===g.padding){var R=io(e.barCategoryGap,j*O),E=j*O/2;l=E-R-(E-R)/O*R}}}c="xAxis"===r?[n.left+(b.left||0)+(l||0),n.left+n.width-(b.right||0)-(l||0)]:"yAxis"===r?"horizontal"===a?[n.top+n.height-(b.bottom||0),n.top+(b.top||0)]:[n.top+(b.top||0)+(l||0),n.top+n.height-(b.bottom||0)-(l||0)]:g.range,C&&(c=[c[1],c[0]]);var D=dw(g,o,d),M=D.scale,A=D.realScaleType;M.domain(v).range(c),pw(M);var N=mw(M,Hj(Hj({},g),{},{realScaleType:A}));"xAxis"===r?(f="top"===m&&!w||"bottom"===m&&w,h=n.left,p=u[x]-f*g.height):"yAxis"===r&&(f="left"===m&&!w||"right"===m&&w,h=u[x]-f*g.width,p=n.top);var T=Hj(Hj(Hj({},g),N),{},{realScaleType:A,x:h,y:p,scale:M,width:"xAxis"===r?n.width:g.width,height:"yAxis"===r?n.height:g.height});return T.bandSize=Sw(T,N),g.hide||"xAxis"!==r?g.hide||(u[x]+=(f?-1:1)*T.width):u[x]+=(f?-1:1)*T.height,Hj(Hj({},i),{},_j({},s,T))},{})},Wj=function(e,t){var n=e.x,r=e.y,o=t.x,i=t.y;return{x:Math.min(n,o),y:Math.min(r,i),width:Math.abs(o-n),height:Math.abs(i-r)}},zj=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scale=t}return t=e,n=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.bandAware,r=t.position;if(void 0!==e){if(r)switch(r){case"start":default:return this.scale(e);case"middle":var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o;case"end":var i=this.bandwidth?this.bandwidth():0;return this.scale(e)+i}if(n){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),n=t[0],r=t[t.length-1];return n<=r?e>=n&&e<=r:e>=r&&e<=n}}],r=[{key:"create",value:function(t){return new e(t)}}],n&&Lj(t.prototype,n),r&&Lj(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();_j(zj,"EPS",1e-4);var $j=function(e){var t=Object.keys(e).reduce(function(t,n){return Hj(Hj({},t),{},_j({},n,zj.create(e[n])))},{});return Hj(Hj({},t),{},{apply:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.bandAware,o=n.position;return rj(e,function(e,n){return t[n].apply(e,{bandAware:r,position:o})})},isInRange:function(e){return uj(e,function(e,n){return t[n].isInRange(e)})}})};var Uj=tu,Kj=jl,qj=Dl;var Xj=function(e){return function(t,n,r){var o=Object(t);if(!Kj(t)){var i=Uj(n);t=qj(t),n=function(e){return i(o[e],e,o)}}var s=e(t,n,r);return s>-1?o[i?t[s]:s]:void 0}},Yj=xP;var Zj=nu,Jj=tu,Qj=function(e){var t=Yj(e),n=t%1;return t==t?n?t-n:t:0},eO=Math.max;const tO=c(Xj(function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:Qj(n);return o<0&&(o=eO(r+o,0)),Zj(e,Jj(t),o)}));var nO=Yn(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),rO=r.createContext(void 0),oO=r.createContext(void 0),iO=r.createContext(void 0),sO=r.createContext({}),aO=r.createContext(void 0),lO=r.createContext(0),cO=r.createContext(0),uO=function(e){var t=e.state,n=t.xAxisMap,r=t.yAxisMap,o=t.offset,i=e.clipPathId,s=e.children,a=e.width,l=e.height,c=nO(o);return u.createElement(rO.Provider,{value:n},u.createElement(oO.Provider,{value:r},u.createElement(sO.Provider,{value:o},u.createElement(iO.Provider,{value:c},u.createElement(aO.Provider,{value:i},u.createElement(lO.Provider,{value:l},u.createElement(cO.Provider,{value:a},s)))))))},dO=function(e){var t=r.useContext(rO);null==t&&Eb();var n=t[e];return null==n&&Eb(),n},hO=function(e){var t=r.useContext(oO);null==t&&Eb();var n=t[e];return null==n&&Eb(),n},pO=function(){return r.useContext(cO)},fO=function(){return r.useContext(lO)};function gO(e){return(gO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mO(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kO(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function vO(e,t,n){return t=bO(t),function(e,t){if(t&&("object"===gO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,yO()?Reflect.construct(t,n||[],bO(e).constructor):t.apply(e,n))}function yO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(yO=function(){return!!e})()}function bO(e){return(bO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wO(e,t){return(wO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function CO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function xO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CO(Object(n),!0).forEach(function(t){SO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function SO(e,t,n){return(t=kO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kO(e){var t=function(e,t){if("object"!=gO(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=gO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==gO(t)?t:t+""}function PO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(u){c=!0,o=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jO(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function OO(){return OO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OO.apply(this,arguments)}function RO(e){var t=e.x,n=e.y,o=e.segment,i=e.xAxisId,s=e.yAxisId,a=e.shape,l=e.className,c=e.alwaysShow,d=r.useContext(aO),h=dO(i),p=hO(s),f=r.useContext(iO);if(!d||!f)return null;zo(void 0===c,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=function(e,t,n,r,o,i,s,a,l){var c=o.x,u=o.y,d=o.width,h=o.height;if(n){var p=l.y,f=e.y.apply(p,{position:i});if(JP(l,"discard")&&!e.y.isInRange(f))return null;var g=[{x:c+d,y:f},{x:c,y:f}];return"left"===a?g.reverse():g}if(t){var m=l.x,v=e.x.apply(m,{position:i});if(JP(l,"discard")&&!e.x.isInRange(v))return null;var y=[{x:v,y:u+h},{x:v,y:u}];return"top"===s?y.reverse():y}if(r){var b=l.segment.map(function(t){return e.apply(t,{position:i})});return JP(l,"discard")&&ZP(b,function(t){return!e.isInRange(t)})?null:b}return null}($j({x:h.scale,y:p.scale}),no(t),no(n),o&&2===o.length,f,e.position,h.orientation,p.orientation,e);if(!g)return null;var m=PO(g,2),v=m[0],y=v.x,b=v.y,w=m[1],C=w.x,x=w.y,S=xO(xO({clipPath:JP(e,"hidden")?"url(#".concat(d,")"):void 0},Ao(e,!0)),{},{x1:y,y1:b,x2:C,y2:x});return u.createElement(Wo,{className:Je("recharts-reference-line",l)},function(e,t){return u.isValidElement(e)?u.cloneElement(e,t):Dt(e)?e(t):u.createElement("line",OO({},t,{className:"recharts-reference-line-line"}))}(a,S),Yw.renderCallByParent(e,function(e){var t=e.x1,n=e.y1,r=e.x2,o=e.y2;return Wj({x:t,y:n},{x:r,y:o})}({x1:y,y1:b,x2:C,y2:x})))}var EO=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),vO(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wO(e,t)}(e,u.Component),mO(e,[{key:"render",value:function(){return u.createElement(RO,this.props)}}])}();function DO(){return DO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DO.apply(this,arguments)}function MO(e){return(MO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function NO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AO(Object(n),!0).forEach(function(t){HO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function TO(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_O(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function FO(e,t,n){return t=LO(t),function(e,t){if(t&&("object"===MO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,IO()?Reflect.construct(t,n||[],LO(e).constructor):t.apply(e,n))}function IO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(IO=function(){return!!e})()}function LO(e){return(LO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BO(e,t){return(BO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function HO(e,t,n){return(t=_O(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _O(e){var t=function(e,t){if("object"!=MO(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=MO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==MO(t)?t:t+""}SO(EO,"displayName","ReferenceLine"),SO(EO,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});var GO=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),FO(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BO(e,t)}(e,u.Component),TO(e,[{key:"render",value:function(){var t=this.props,n=t.x,r=t.y,o=t.r,i=t.alwaysShow,s=t.clipPathId,a=no(n),l=no(r);if(zo(void 0===i,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!a||!l)return null;var c=function(e){var t=e.x,n=e.y,r=e.xAxis,o=e.yAxis,i=$j({x:r.scale,y:o.scale}),s=i.apply({x:t,y:n},{bandAware:!0});return JP(e,"discard")&&!i.isInRange(s)?null:s}(this.props);if(!c)return null;var d=c.x,h=c.y,p=this.props,f=p.shape,g=p.className,m=NO(NO({clipPath:JP(this.props,"hidden")?"url(#".concat(s,")"):void 0},Ao(this.props,!0)),{},{cx:d,cy:h});return u.createElement(Wo,{className:Je("recharts-reference-dot",g)},e.renderDot(f,m),Yw.renderCallByParent(this.props,{x:d-o,y:h-o,width:2*o,height:2*o}))}}])}();function VO(){return VO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VO.apply(this,arguments)}function WO(e){return(WO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zO(Object(n),!0).forEach(function(t){ZO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function UO(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,JO(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function KO(e,t,n){return t=XO(t),function(e,t){if(t&&("object"===WO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,qO()?Reflect.construct(t,n||[],XO(e).constructor):t.apply(e,n))}function qO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(qO=function(){return!!e})()}function XO(e){return(XO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function YO(e,t){return(YO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ZO(e,t,n){return(t=JO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JO(e){var t=function(e,t){if("object"!=WO(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=WO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==WO(t)?t:t+""}HO(GO,"displayName","ReferenceDot"),HO(GO,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),HO(GO,"renderDot",function(e,t){return u.isValidElement(e)?u.cloneElement(e,t):Dt(e)?e(t):u.createElement(RS,DO({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"}))});var QO=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),KO(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YO(e,t)}(e,u.Component),UO(e,[{key:"render",value:function(){var t=this.props,n=t.x1,r=t.x2,o=t.y1,i=t.y2,s=t.className,a=t.alwaysShow,l=t.clipPathId;zo(void 0===a,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var c=no(n),d=no(r),h=no(o),p=no(i),f=this.props.shape;if(!(c||d||h||p||f))return null;var g=function(e,t,n,r,o){var i=o.x1,s=o.x2,a=o.y1,l=o.y2,c=o.xAxis,u=o.yAxis;if(!c||!u)return null;var d=$j({x:c.scale,y:u.scale}),h={x:e?d.x.apply(i,{position:"start"}):d.x.rangeMin,y:n?d.y.apply(a,{position:"start"}):d.y.rangeMin},p={x:t?d.x.apply(s,{position:"end"}):d.x.rangeMax,y:r?d.y.apply(l,{position:"end"}):d.y.rangeMax};return!JP(o,"discard")||d.isInRange(h)&&d.isInRange(p)?Wj(h,p):null}(c,d,h,p,this.props);if(!g&&!f)return null;var m=JP(this.props,"hidden")?"url(#".concat(l,")"):void 0;return u.createElement(Wo,{className:Je("recharts-reference-area",s)},e.renderRect(f,$O($O({clipPath:m},Ao(this.props,!0)),g)),Yw.renderCallByParent(this.props,g))}}])}();function eR(e,t,n){if(t<1)return[];if(1===t&&void 0===n)return e;for(var r=[],o=0;o<e.length;o+=t)r.push(e[o]);return r}function tR(e,t,n){return function(e){var t=e.width,n=e.height,r=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),o=r*Math.PI/180,i=Math.atan(n/t),s=o>i&&o<Math.PI-i?n/Math.sin(o):t/Math.cos(o);return Math.abs(s)}({width:e.width+t.width,height:e.height+t.height},n)}function nR(e,t,n,r,o){if(e*t<e*r||e*t>e*o)return!1;var i=n();return e*(t-e*i/2-r)>=0&&e*(t+e*i/2-o)<=0}function rR(e){return(rR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function iR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oR(Object(n),!0).forEach(function(t){sR(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oR(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function sR(e,t,n){var r;return r=function(e,t){if("object"!=rR(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=rR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==rR(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aR(e,t,n){var r=e.tick,o=e.ticks,i=e.viewBox,s=e.minTickGap,a=e.orientation,l=e.interval,c=e.tickFormatter,u=e.unit,d=e.angle;if(!o||!o.length||!r)return[];if(to(l)||rh)return function(e,t){return eR(e,t+1)}(o,"number"==typeof l&&to(l)?l:0);var h=[],p="top"===a||"bottom"===a?"width":"height",f=u&&"width"===p?Zh(u,{fontSize:t,letterSpacing:n}):{width:0,height:0},g=function(e,r){var o=Dt(c)?c(e.value,r):e.value;return"width"===p?tR(Zh(o,{fontSize:t,letterSpacing:n}),f,d):Zh(o,{fontSize:t,letterSpacing:n})[p]},m=o.length>=2?Qr(o[1].coordinate-o[0].coordinate):1,v=function(e,t,n){var r="width"===n,o=e.x,i=e.y,s=e.width,a=e.height;return 1===t?{start:r?o:i,end:r?o+s:i+a}:{start:r?o+s:i+a,end:r?o:i}}(i,m,p);return"equidistantPreserveStart"===l?function(e,t,n,r,o){for(var i,s=(r||[]).slice(),a=t.start,l=t.end,c=0,u=1,d=a,h=function(){var t=null==r?void 0:r[c];if(void 0===t)return{v:eR(r,u)};var i,s=c,h=function(){return void 0===i&&(i=n(t,s)),i},p=t.coordinate,f=0===c||nR(e,p,h,d,l);f||(c=0,d=a,u+=1),f&&(d=p+e*(h()/2+o),c+=u)};u<=s.length;)if(i=h())return i.v;return[]}(m,v,g,o,s):(h="preserveStart"===l||"preserveStartEnd"===l?function(e,t,n,r,o,i){var s=(r||[]).slice(),a=s.length,l=t.start,c=t.end;if(i){var u=r[a-1],d=n(u,a-1),h=e*(u.coordinate+e*d/2-c);s[a-1]=u=iR(iR({},u),{},{tickCoord:h>0?u.coordinate-h*e:u.coordinate}),nR(e,u.tickCoord,function(){return d},l,c)&&(c=u.tickCoord-e*(d/2+o),s[a-1]=iR(iR({},u),{},{isShow:!0}))}for(var p=i?a-1:a,f=function(t){var r,i=s[t],a=function(){return void 0===r&&(r=n(i,t)),r};if(0===t){var u=e*(i.coordinate-e*a()/2-l);s[t]=i=iR(iR({},i),{},{tickCoord:u<0?i.coordinate-u*e:i.coordinate})}else s[t]=i=iR(iR({},i),{},{tickCoord:i.coordinate});nR(e,i.tickCoord,a,l,c)&&(l=i.tickCoord+e*(a()/2+o),s[t]=iR(iR({},i),{},{isShow:!0}))},g=0;g<p;g++)f(g);return s}(m,v,g,o,s,"preserveStartEnd"===l):function(e,t,n,r,o){for(var i=(r||[]).slice(),s=i.length,a=t.start,l=t.end,c=function(t){var r,c=i[t],u=function(){return void 0===r&&(r=n(c,t)),r};if(t===s-1){var d=e*(c.coordinate+e*u()/2-l);i[t]=c=iR(iR({},c),{},{tickCoord:d>0?c.coordinate-d*e:c.coordinate})}else i[t]=c=iR(iR({},c),{},{tickCoord:c.coordinate});nR(e,c.tickCoord,u,a,l)&&(l=c.tickCoord-e*(u()/2+o),i[t]=iR(iR({},c),{},{isShow:!0}))},u=s-1;u>=0;u--)c(u);return i}(m,v,g,o,s),h.filter(function(e){return e.isShow}))}ZO(QO,"displayName","ReferenceArea"),ZO(QO,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),ZO(QO,"renderRect",function(e,t){return u.isValidElement(e)?u.cloneElement(e,t):Dt(e)?e(t):u.createElement(yS,VO({},t,{className:"recharts-reference-area-rect"}))});var lR=["viewBox"],cR=["viewBox"],uR=["ticks"];function dR(e){return(dR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hR(){return hR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hR.apply(this,arguments)}function pR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function fR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pR(Object(n),!0).forEach(function(t){CR(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pR(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function gR(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function mR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xR(r.key),r)}}function vR(e,t,n){return t=bR(t),function(e,t){if(t&&("object"===dR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,yR()?Reflect.construct(t,n||[],bR(e).constructor):t.apply(e,n))}function yR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(yR=function(){return!!e})()}function bR(e){return(bR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wR(e,t){return(wR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function CR(e,t,n){return(t=xR(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xR(e){var t=function(e,t){if("object"!=dR(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=dR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==dR(t)?t:t+""}var SR=function(){function e(t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(n=vR(this,e,[t])).state={fontSize:"",letterSpacing:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wR(e,t)}(e,r.Component),t=e,o=[{key:"renderTickItem",value:function(e,t,n){var r=Je(t.className,"recharts-cartesian-axis-tick-value");return u.isValidElement(e)?u.cloneElement(e,fR(fR({},t),{},{className:r})):Dt(e)?e(fR(fR({},t),{},{className:r})):u.createElement(jp,hR({},t,{className:"recharts-cartesian-axis-tick-value"}),n)}}],(n=[{key:"shouldComponentUpdate",value:function(e,t){var n=e.viewBox,r=gR(e,lR),o=this.props,i=o.viewBox,s=gR(o,cR);return!uo(n,i)||!uo(r,s)||!uo(t,this.state)}},{key:"componentDidMount",value:function(){var e=this.layerReference;if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];t&&this.setState({fontSize:window.getComputedStyle(t).fontSize,letterSpacing:window.getComputedStyle(t).letterSpacing})}}},{key:"getTickLineCoord",value:function(e){var t,n,r,o,i,s,a=this.props,l=a.x,c=a.y,u=a.width,d=a.height,h=a.orientation,p=a.tickSize,f=a.mirror,g=a.tickMargin,m=f?-1:1,v=e.tickSize||p,y=to(e.tickCoord)?e.tickCoord:e.coordinate;switch(h){case"top":t=n=e.coordinate,s=(r=(o=c+ +!f*d)-m*v)-m*g,i=y;break;case"left":r=o=e.coordinate,i=(t=(n=l+ +!f*u)-m*v)-m*g,s=y;break;case"right":r=o=e.coordinate,i=(t=(n=l+ +f*u)+m*v)+m*g,s=y;break;default:t=n=e.coordinate,s=(r=(o=c+ +f*d)+m*v)+m*g,i=y}return{line:{x1:t,y1:r,x2:n,y2:o},tick:{x:i,y:s}}}},{key:"getTickTextAnchor",value:function(){var e,t=this.props,n=t.orientation,r=t.mirror;switch(n){case"left":e=r?"start":"end";break;case"right":e=r?"end":"start";break;default:e="middle"}return e}},{key:"getTickVerticalAnchor",value:function(){var e=this.props,t=e.orientation,n=e.mirror,r="end";switch(t){case"left":case"right":r="middle";break;case"top":r=n?"start":"end";break;default:r=n?"end":"start"}return r}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.x,n=e.y,r=e.width,o=e.height,i=e.orientation,s=e.mirror,a=e.axisLine,l=fR(fR(fR({},Ao(this.props,!1)),Ao(a,!1)),{},{fill:"none"});if("top"===i||"bottom"===i){var c=+("top"===i&&!s||"bottom"===i&&s);l=fR(fR({},l),{},{x1:t,y1:n+c*o,x2:t+r,y2:n+c*o})}else{var d=+("left"===i&&!s||"right"===i&&s);l=fR(fR({},l),{},{x1:t+d*r,y1:n,x2:t+d*r,y2:n+o})}return u.createElement("line",hR({},l,{className:Je("recharts-cartesian-axis-line",xr(a,"className"))}))}},{key:"renderTicks",value:function(t,n,r){var o=this,i=this.props,s=i.tickLine,a=i.stroke,l=i.tick,c=i.tickFormatter,d=i.unit,h=aR(fR(fR({},this.props),{},{ticks:t}),n,r),p=this.getTickTextAnchor(),f=this.getTickVerticalAnchor(),g=Ao(this.props,!1),m=Ao(l,!1),v=fR(fR({},g),{},{fill:"none"},Ao(s,!1)),y=h.map(function(t,n){var r=o.getTickLineCoord(t),i=r.line,y=r.tick,b=fR(fR(fR(fR({textAnchor:p,verticalAnchor:f},g),{},{stroke:"none",fill:a},m),y),{},{index:n,payload:t,visibleTicksCount:h.length,tickFormatter:c});return u.createElement(Wo,hR({className:"recharts-cartesian-axis-tick",key:"tick-".concat(t.value,"-").concat(t.coordinate,"-").concat(t.tickCoord)},yo(o.props,t,n)),s&&u.createElement("line",hR({},v,i,{className:Je("recharts-cartesian-axis-tick-line",xr(s,"className"))})),l&&e.renderTickItem(l,b,"".concat(Dt(c)?c(t.value,n):t.value).concat(d||"")))});return u.createElement("g",{className:"recharts-cartesian-axis-ticks"},y)}},{key:"render",value:function(){var e=this,t=this.props,n=t.axisLine,r=t.width,o=t.height,i=t.ticksGenerator,s=t.className;if(t.hide)return null;var a=this.props,l=a.ticks,c=gR(a,uR),d=l;return Dt(i)&&(d=l&&l.length>0?i(this.props):i(c)),r<=0||o<=0||!d||!d.length?null:u.createElement(Wo,{className:Je("recharts-cartesian-axis",s),ref:function(t){e.layerReference=t}},n&&this.renderAxisLine(),this.renderTicks(d,this.state.fontSize,this.state.letterSpacing),Yw.renderCallByParent(this.props))}}])&&mR(t.prototype,n),o&&mR(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,o}();CR(SR,"displayName","CartesianAxis"),CR(SR,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var kR=["x1","y1","x2","y2","key"],PR=["offset"];function jR(e){return(jR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function RR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OR(Object(n),!0).forEach(function(t){ER(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OR(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ER(e,t,n){var r;return r=function(e,t){if("object"!=jR(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=jR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==jR(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DR(){return DR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DR.apply(this,arguments)}function MR(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var AR=function(e){var t=e.fill;if(!t||"none"===t)return null;var n=e.fillOpacity,r=e.x,o=e.y,i=e.width,s=e.height,a=e.ry;return u.createElement("rect",{x:r,y:o,ry:a,width:i,height:s,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function NR(e,t){var n;if(u.isValidElement(e))n=u.cloneElement(e,t);else if(Dt(e))n=e(t);else{var r=t.x1,o=t.y1,i=t.x2,s=t.y2,a=t.key,l=MR(t,kR),c=Ao(l,!1);c.offset;var d=MR(c,PR);n=u.createElement("line",DR({},d,{x1:r,y1:o,x2:i,y2:s,fill:"none",key:a}))}return n}function TR(e){var t=e.x,n=e.width,r=e.horizontal,o=void 0===r||r,i=e.horizontalPoints;if(!o||!i||!i.length)return null;var s=i.map(function(r,i){var s=RR(RR({},e),{},{x1:t,y1:r,x2:t+n,y2:r,key:"line-".concat(i),index:i});return NR(o,s)});return u.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function FR(e){var t=e.y,n=e.height,r=e.vertical,o=void 0===r||r,i=e.verticalPoints;if(!o||!i||!i.length)return null;var s=i.map(function(r,i){var s=RR(RR({},e),{},{x1:r,y1:t,x2:r,y2:t+n,key:"line-".concat(i),index:i});return NR(o,s)});return u.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function IR(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,o=e.y,i=e.width,s=e.height,a=e.horizontalPoints,l=e.horizontal;if(!(void 0===l||l)||!t||!t.length)return null;var c=a.map(function(e){return Math.round(e+o-o)}).sort(function(e,t){return e-t});o!==c[0]&&c.unshift(0);var d=c.map(function(e,a){var l=!c[a+1]?o+s-e:c[a+1]-e;if(l<=0)return null;var d=a%t.length;return u.createElement("rect",{key:"react-".concat(a),y:e,x:r,height:l,width:i,stroke:"none",fill:t[d],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return u.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function LR(e){var t=e.vertical,n=void 0===t||t,r=e.verticalFill,o=e.fillOpacity,i=e.x,s=e.y,a=e.width,l=e.height,c=e.verticalPoints;if(!n||!r||!r.length)return null;var d=c.map(function(e){return Math.round(e+i-i)}).sort(function(e,t){return e-t});i!==d[0]&&d.unshift(0);var h=d.map(function(e,t){var n=!d[t+1]?i+a-e:d[t+1]-e;if(n<=0)return null;var c=t%r.length;return u.createElement("rect",{key:"react-".concat(t),x:e,y:s,width:n,height:l,stroke:"none",fill:r[c],fillOpacity:o,className:"recharts-cartesian-grid-bg"})});return u.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var BR=function(e,t){var n=e.xAxis,r=e.width,o=e.height,i=e.offset;return aw(aR(RR(RR(RR({},SR.defaultProps),n),{},{ticks:lw(n,!0),viewBox:{x:0,y:0,width:r,height:o}})),i.left,i.left+i.width,t)},HR=function(e,t){var n=e.yAxis,r=e.width,o=e.height,i=e.offset;return aw(aR(RR(RR(RR({},SR.defaultProps),n),{},{ticks:lw(n,!0),viewBox:{x:0,y:0,width:r,height:o}})),i.top,i.top+i.height,t)},_R={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function GR(e){var t,n,o,i,s,a,l,c,d=pO(),h=fO(),p=r.useContext(sO),f=RR(RR({},e),{},{stroke:null!==(t=e.stroke)&&void 0!==t?t:_R.stroke,fill:null!==(n=e.fill)&&void 0!==n?n:_R.fill,horizontal:null!==(o=e.horizontal)&&void 0!==o?o:_R.horizontal,horizontalFill:null!==(i=e.horizontalFill)&&void 0!==i?i:_R.horizontalFill,vertical:null!==(s=e.vertical)&&void 0!==s?s:_R.vertical,verticalFill:null!==(a=e.verticalFill)&&void 0!==a?a:_R.verticalFill,x:to(e.x)?e.x:p.left,y:to(e.y)?e.y:p.top,width:to(e.width)?e.width:p.width,height:to(e.height)?e.height:p.height}),g=f.x,m=f.y,v=f.width,y=f.height,b=f.syncWithTicks,w=f.horizontalValues,C=f.verticalValues,x=(l=r.useContext(rO),so(l)),S=(c=r.useContext(oO),tO(c,function(e){return uj(e.domain,Number.isFinite)})||so(c));if(!to(v)||v<=0||!to(y)||y<=0||!to(g)||g!==+g||!to(m)||m!==+m)return null;var k=f.verticalCoordinatesGenerator||BR,P=f.horizontalCoordinatesGenerator||HR,j=f.horizontalPoints,O=f.verticalPoints;if((!j||!j.length)&&Dt(P)){var R=w&&w.length,E=P({yAxis:S?RR(RR({},S),{},{ticks:R?w:S.ticks}):void 0,width:d,height:h,offset:p},!!R||b);zo(Array.isArray(E),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(jR(E),"]")),Array.isArray(E)&&(j=E)}if((!O||!O.length)&&Dt(k)){var D=C&&C.length,M=k({xAxis:x?RR(RR({},x),{},{ticks:D?C:x.ticks}):void 0,width:d,height:h,offset:p},!!D||b);zo(Array.isArray(M),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(jR(M),"]")),Array.isArray(M)&&(O=M)}return u.createElement("g",{className:"recharts-cartesian-grid"},u.createElement(AR,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),u.createElement(TR,DR({},f,{offset:p,horizontalPoints:j,xAxis:x,yAxis:S})),u.createElement(FR,DR({},f,{offset:p,verticalPoints:O,xAxis:x,yAxis:S})),u.createElement(IR,DR({},f,{horizontalPoints:j})),u.createElement(LR,DR({},f,{verticalPoints:O})))}GR.displayName="CartesianGrid";var VR=["type","layout","connectNulls","ref"],WR=["key"];function zR(e){return(zR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $R(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function UR(){return UR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UR.apply(this,arguments)}function KR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function qR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KR(Object(n),!0).forEach(function(t){nE(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KR(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function XR(e){return function(e){if(Array.isArray(e))return YR(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return YR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YR(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ZR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rE(r.key),r)}}function JR(e,t,n){return t=eE(t),function(e,t){if(t&&("object"===zR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,QR()?Reflect.construct(t,n||[],eE(e).constructor):t.apply(e,n))}function QR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(QR=function(){return!!e})()}function eE(e){return(eE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tE(e,t){return(tE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nE(e,t,n){return(t=rE(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rE(e){var t=function(e,t){if("object"!=zR(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=zR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==zR(t)?t:t+""}var oE=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return nE(t=JR(this,e,[].concat(r)),"state",{isAnimationFinished:!0,totalLength:0}),nE(t,"generateSimpleStrokeDasharray",function(e,t){return"".concat(t,"px ").concat(e-t,"px")}),nE(t,"getStrokeDasharray",function(n,r,o){var i=o.reduce(function(e,t){return e+t});if(!i)return t.generateSimpleStrokeDasharray(r,n);for(var s=Math.floor(n/i),a=n%i,l=r-n,c=[],u=0,d=0;u<o.length;d+=o[u],++u)if(d+o[u]>a){c=[].concat(XR(o.slice(0,u)),[a-d]);break}var h=c.length%2==0?[0,l]:[l];return[].concat(XR(e.repeat(o,s)),XR(c),h).map(function(e){return"".concat(e,"px")}).join(", ")}),nE(t,"id",oo("recharts-line-")),nE(t,"pathRef",function(e){t.mainCurve=e}),nE(t,"handleAnimationEnd",function(){t.setState({isAnimationFinished:!0}),t.props.onAnimationEnd&&t.props.onAnimationEnd()}),nE(t,"handleAnimationStart",function(){t.setState({isAnimationFinished:!1}),t.props.onAnimationStart&&t.props.onAnimationStart()}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tE(e,t)}(e,r.PureComponent),t=e,o=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:t.curPoints}:e.points!==t.curPoints?{curPoints:e.points}:null}},{key:"repeat",value:function(e,t){for(var n=e.length%2!=0?[].concat(XR(e),[0]):e,r=[],o=0;o<t;++o)r=[].concat(XR(r),XR(n));return r}},{key:"renderDotItem",value:function(e,t){var n;if(u.isValidElement(e))n=u.cloneElement(e,t);else if(Dt(e))n=e(t);else{var r=t.key,o=$R(t,WR),i=Je("recharts-line-dot","boolean"!=typeof e?e.className:"");n=u.createElement(RS,UR({key:r},o,{className:i}))}return n}}],(n=[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();e!==this.state.totalLength&&this.setState({totalLength:e})}}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(t){return 0}}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,r=n.points,o=n.xAxis,i=n.yAxis,s=n.layout,a=Ro(n.children,Wb);if(!a)return null;var l=function(e,t){return{x:e.x,y:e.y,value:e.value,errorVal:tw(e.payload,t)}},c={clipPath:e?"url(#clipPath-".concat(t,")"):null};return u.createElement(Wo,c,a.map(function(e){return u.cloneElement(e,{key:"bar-".concat(e.props.dataKey),data:r,xAxis:o,yAxis:i,layout:s,dataPointFormatter:l})}))}},{key:"renderDots",value:function(t,n,r){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,i=o.dot,s=o.points,a=o.dataKey,l=Ao(this.props,!1),c=Ao(i,!0),d=s.map(function(t,n){var r=qR(qR(qR({key:"dot-".concat(n),r:3},l),c),{},{index:n,cx:t.x,cy:t.y,value:t.value,dataKey:a,payload:t.payload,points:s});return e.renderDotItem(i,r)}),h={clipPath:t?"url(#clipPath-".concat(n?"":"dots-").concat(r,")"):null};return u.createElement(Wo,UR({className:"recharts-line-dots",key:"dots"},h),d)}},{key:"renderCurveStatically",value:function(e,t,n,r){var o=this.props,i=o.type,s=o.layout,a=o.connectNulls;o.ref;var l=$R(o,VR),c=qR(qR(qR({},Ao(l,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:t?"url(#clipPath-".concat(n,")"):null,points:e},r),{},{type:i,layout:s,connectNulls:a});return u.createElement(DC,UR({},c,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(e,t){var n=this,r=this.props,o=r.points,i=r.strokeDasharray,s=r.isAnimationActive,a=r.animationBegin,l=r.animationDuration,c=r.animationEasing,d=r.animationId,h=r.animateNewValues,p=r.width,f=r.height,g=this.state,m=g.prevPoints,v=g.totalLength;return u.createElement(aS,{begin:a,duration:l,isActive:s,easing:c,from:{t:0},to:{t:1},key:"line-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(r){var s=r.t;if(m){var a=m.length/o.length,l=o.map(function(e,t){var n=Math.floor(t*a);if(m[n]){var r=m[n],o=ao(r.x,e.x),i=ao(r.y,e.y);return qR(qR({},e),{},{x:o(s),y:i(s)})}if(h){var l=ao(2*p,e.x),c=ao(f/2,e.y);return qR(qR({},e),{},{x:l(s),y:c(s)})}return qR(qR({},e),{},{x:e.x,y:e.y})});return n.renderCurveStatically(l,e,t)}var c,u=ao(0,v)(s);if(i){var d="".concat(i).split(/[,\s]+/gim).map(function(e){return parseFloat(e)});c=n.getStrokeDasharray(u,v,d)}else c=n.generateSimpleStrokeDasharray(v,u);return n.renderCurveStatically(o,e,t,{strokeDasharray:c})})}},{key:"renderCurve",value:function(e,t){var n=this.props,r=n.points,o=n.isAnimationActive,i=this.state,s=i.prevPoints,a=i.totalLength;return o&&r&&r.length&&(!s&&a>0||!Ey(s,r))?this.renderCurveWithAnimation(e,t):this.renderCurveStatically(r,e,t)}},{key:"render",value:function(){var e,t=this.props,n=t.hide,r=t.dot,o=t.points,i=t.className,s=t.xAxis,a=t.yAxis,l=t.top,c=t.left,d=t.width,h=t.height,p=t.isAnimationActive,f=t.id;if(n||!o||!o.length)return null;var g=this.state.isAnimationFinished,m=1===o.length,v=Je("recharts-line",i),y=s&&s.allowDataOverflow,b=a&&a.allowDataOverflow,w=y||b,C=Sr(f)?this.id:f,x=null!==(e=Ao(r,!1))&&void 0!==e?e:{r:3,strokeWidth:2},S=x.r,k=void 0===S?3:S,P=x.strokeWidth,j=void 0===P?2:P,O=(function(e){return e&&"object"===xo(e)&&"clipDot"in e}(r)?r:{}).clipDot,R=void 0===O||O,E=2*k+j;return u.createElement(Wo,{className:v},y||b?u.createElement("defs",null,u.createElement("clipPath",{id:"clipPath-".concat(C)},u.createElement("rect",{x:y?c:c-d/2,y:b?l:l-h/2,width:y?d:2*d,height:b?h:2*h})),!R&&u.createElement("clipPath",{id:"clipPath-dots-".concat(C)},u.createElement("rect",{x:c-E/2,y:l-E/2,width:d+E,height:h+E}))):null,!m&&this.renderCurve(w,C),this.renderErrorBar(w,C),(m||r)&&this.renderDots(w,R,C),(!p||g)&&uC.renderCallByParent(this.props,o))}}])&&ZR(t.prototype,n),o&&ZR(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,o}();function iE(e){return(iE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sE(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hE(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function aE(e,t,n){return t=cE(t),function(e,t){if(t&&("object"===iE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,lE()?Reflect.construct(t,n||[],cE(e).constructor):t.apply(e,n))}function lE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(lE=function(){return!!e})()}function cE(e){return(cE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uE(e,t){return(uE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function dE(e,t,n){return(t=hE(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hE(e){var t=function(e,t){if("object"!=iE(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=iE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==iE(t)?t:t+""}function pE(){return pE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pE.apply(this,arguments)}function fE(e){var t=e.xAxisId,n=pO(),o=fO(),i=dO(t);return null==i?null:r.createElement(SR,pE({},i,{className:Je("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:o},ticksGenerator:function(e){return lw(e,!0)}}))}nE(oE,"displayName","Line"),nE(oE,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!rh,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1}),nE(oE,"getComposedData",function(e){var t=e.props,n=e.xAxis,r=e.yAxis,o=e.xAxisTicks,i=e.yAxisTicks,s=e.dataKey,a=e.bandSize,l=e.displayedData,c=e.offset,u=t.layout;return qR({points:l.map(function(e,t){var l=tw(e,s);return"horizontal"===u?{x:vw({axis:n,ticks:o,bandSize:a,entry:e,index:t}),y:Sr(l)?null:r.scale(l),value:l,payload:e}:{x:Sr(l)?null:n.scale(l),y:vw({axis:r,ticks:i,bandSize:a,entry:e,index:t}),value:l,payload:e}}),layout:u},c)});var gE=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),aE(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uE(e,t)}(e,r.Component),sE(e,[{key:"render",value:function(){return r.createElement(fE,this.props)}}])}();function mE(e){return(mE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vE(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,SE(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function yE(e,t,n){return t=wE(t),function(e,t){if(t&&("object"===mE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,bE()?Reflect.construct(t,n||[],wE(e).constructor):t.apply(e,n))}function bE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(bE=function(){return!!e})()}function wE(e){return(wE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CE(e,t){return(CE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function xE(e,t,n){return(t=SE(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SE(e){var t=function(e,t){if("object"!=mE(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=mE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==mE(t)?t:t+""}function kE(){return kE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kE.apply(this,arguments)}dE(gE,"displayName","XAxis"),dE(gE,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});var PE=function(e){var t=e.yAxisId,n=pO(),o=fO(),i=hO(t);return null==i?null:r.createElement(SR,kE({},i,{className:Je("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:o},ticksGenerator:function(e){return lw(e,!0)}}))},jE=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),yE(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CE(e,t)}(e,r.Component),vE(e,[{key:"render",value:function(){return r.createElement(PE,this.props)}}])}();function OE(e){return function(e){if(Array.isArray(e))return RE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return RE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RE(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}xE(jE,"displayName","YAxis"),xE(jE,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});var EE=function(e,t,n,r,o){var i=Ro(e,EO),s=Ro(e,GO),a=[].concat(OE(i),OE(s)),l=Ro(e,QO),c="".concat(r,"Id"),u=r[0],d=t;if(a.length&&(d=a.reduce(function(e,t){if(t.props[c]===n&&JP(t.props,"extendDomain")&&to(t.props[u])){var r=t.props[u];return[Math.min(e[0],r),Math.max(e[1],r)]}return e},d)),l.length){var h="".concat(u,"1"),p="".concat(u,"2");d=l.reduce(function(e,t){if(t.props[c]===n&&JP(t.props,"extendDomain")&&to(t.props[h])&&to(t.props[p])){var r=t.props[h],o=t.props[p];return[Math.min(e[0],r,o),Math.max(e[1],r,o)]}return e},d)}return o&&o.length&&(d=o.reduce(function(e,t){return to(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e},d)),d},DE={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new o(r,i||e,s),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],a]:e._events[l].push(a):(e._events[l]=a,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,s=new Array(i);o<i;o++)s[o]=r[o].fn;return s},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,o,i,s){var a=n?n+e:e;if(!this._events[a])return!1;var l,c,u=this._events[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,o),!0;case 5:return u.fn.call(u.context,t,r,o,i),!0;case 6:return u.fn.call(u.context,t,r,o,i,s),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,o);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},a.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,o){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||o&&!a.once||r&&a.context!==r||s(this,i);else{for(var l=0,c=[],u=a.length;l<u;l++)(a[l].fn!==t||o&&!a[l].once||r&&a[l].context!==r)&&c.push(a[l]);c.length?this._events[i]=1===c.length?c[0]:c:s(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a}(DE);var ME=new(c(DE.exports)),AE="recharts.syncMouseEvents";function NE(e){return(NE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TE(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,IE(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function FE(e,t,n){return(t=IE(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IE(e){var t=function(e,t){if("object"!=NE(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=NE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==NE(t)?t:t+""}var LE=function(){return TE(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),FE(this,"activeIndex",0),FE(this,"coordinateList",[]),FE(this,"layout","horizontal")},[{key:"setDetails",value:function(e){var t,n=e.coordinateList,r=void 0===n?null:n,o=e.container,i=void 0===o?null:o,s=e.layout,a=void 0===s?null:s,l=e.offset,c=void 0===l?null:l,u=e.mouseHandlerCallback,d=void 0===u?null:u;this.coordinateList=null!==(t=null!=r?r:this.coordinateList)&&void 0!==t?t:[],this.container=null!=i?i:this.container,this.layout=null!=a?a:this.layout,this.offset=null!=c?c:this.offset,this.mouseHandlerCallback=null!=d?d:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(e){if(0!==this.coordinateList.length)switch(e.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"setIndex",value:function(e){this.activeIndex=e}},{key:"spoofMouse",value:function(){var e,t;if("horizontal"===this.layout&&0!==this.coordinateList.length){var n=this.container.getBoundingClientRect(),r=n.x,o=n.y,i=n.height,s=this.coordinateList[this.activeIndex].coordinate,a=(null===(e=window)||void 0===e?void 0:e.scrollX)||0,l=(null===(t=window)||void 0===t?void 0:t.scrollY)||0,c=r+s+a,u=o+this.offset.top+i/2+l;this.mouseHandlerCallback({pageX:c,pageY:u})}}}])}();function BE(e){var t=e.cx,n=e.cy,r=e.radius,o=e.startAngle,i=e.endAngle;return{points:[Tw(t,n,r,o),Tw(t,n,r,i)],cx:t,cy:n,radius:r,startAngle:o,endAngle:i}}function HE(e,t,n){var r,o,i,s;if("horizontal"===e)i=r=t.x,o=n.top,s=n.top+n.height;else if("vertical"===e)s=o=t.y,r=n.left,i=n.left+n.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return BE(t);var a=t.cx,l=t.cy,c=t.innerRadius,u=t.outerRadius,d=t.angle,h=Tw(a,l,c,d),p=Tw(a,l,u,d);r=h.x,o=h.y,i=p.x,s=p.y}return[{x:r,y:o},{x:i,y:s}]}function _E(e){return(_E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function VE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GE(Object(n),!0).forEach(function(t){WE(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GE(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function WE(e,t,n){var r;return r=function(e,t){if("object"!=_E(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=_E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==_E(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zE(e){var t,n,o,i=e.element,s=e.tooltipEventType,a=e.isActive,l=e.activeCoordinate,c=e.activePayload,u=e.offset,d=e.activeTooltipIndex,h=e.tooltipAxisBandSize,p=e.layout,f=e.chartName,g=null!==(t=i.props.cursor)&&void 0!==t?t:null===(n=i.type.defaultProps)||void 0===n?void 0:n.cursor;if(!i||!g||!a||!l||"ScatterChart"!==f&&"axis"!==s)return null;var m=DC;if("ScatterChart"===f)o=l,m=IS;else if("BarChart"===f)o=function(e,t,n,r){var o=r/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-o:n.left+.5,y:"horizontal"===e?n.top+.5:t.y-o,width:"horizontal"===e?r:n.width-1,height:"horizontal"===e?n.height-1:r}}(p,l,u,h),m=yS;else if("radial"===p){var v=BE(l),y=v.cx,b=v.cy,w=v.radius;o={cx:y,cy:b,startAngle:v.startAngle,endAngle:v.endAngle,innerRadius:w,outerRadius:w},m=bC}else o={points:HE(p,l,u)},m=DC;var C=VE(VE(VE(VE({stroke:"#ccc",pointerEvents:"none"},u),o),Ao(g,!1)),{},{payload:c,payloadIndex:d,className:Je("recharts-tooltip-cursor",g.className)});return r.isValidElement(g)?r.cloneElement(g,C):r.createElement(m,C)}var $E=["item"],UE=["children","className","width","height","style","compact","title","desc"];function KE(e){return(KE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qE(){return qE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qE.apply(this,arguments)}function XE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(u){c=!0,o=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||rD(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YE(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ZE(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lD(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function JE(e,t,n){return t=eD(t),function(e,t){if(t&&("object"===KE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,QE()?Reflect.construct(t,n||[],eD(e).constructor):t.apply(e,n))}function QE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(QE=function(){return!!e})()}function eD(e){return(eD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tD(e,t){return(tD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nD(e){return function(e){if(Array.isArray(e))return oD(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rD(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rD(e,t){if(e){if("string"==typeof e)return oD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oD(e,t):void 0}}function oD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function iD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iD(Object(n),!0).forEach(function(t){aD(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iD(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function aD(e,t,n){return(t=lD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lD(e){var t=function(e,t){if("object"!=KE(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=KE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==KE(t)?t:t+""}var cD={xAxis:["bottom","top"],yAxis:["left","right"]},uD={width:"100%",height:"100%"},dD={x:0,y:0};function hD(e){return e}var pD=function(e,t){var n=t.graphicalItems,r=t.dataStartIndex,o=t.dataEndIndex,i=(null!=n?n:[]).reduce(function(e,t){var n=t.props.data;return n&&n.length?[].concat(nD(e),nD(n)):e},[]);return i.length>0?i:e&&e.length&&to(r)&&to(o)?e.slice(r,o+1):[]};function fD(e){return"number"===e?[0,"auto"]:void 0}var gD=function(e,t,n,r){var o=e.graphicalItems,i=e.tooltipAxis,s=pD(t,e);return n<0||!o||!o.length||n>=s.length?null:o.reduce(function(o,a){var l,c,u=null!==(l=a.props.data)&&void 0!==l?l:t;(u&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(u=u.slice(e.dataStartIndex,e.dataEndIndex+1)),i.dataKey&&!i.allowDuplicatedCategory)?c=lo(void 0===u?s:u,i.dataKey,r):c=u&&u[n]||s[n];return c?[].concat(nD(o),[Pw(a,c)]):o},[])},mD=function(e,t,n,r){var o=r||{x:e.chartX,y:e.chartY},i=function(e,t){return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}(o,n),s=e.orderedTooltipTicks,a=e.tooltipAxis,l=e.tooltipTicks,c=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,i=-1,s=null!==(t=null==n?void 0:n.length)&&void 0!==t?t:0;if(s<=1)return 0;if(o&&"angleAxis"===o.axisType&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var a=o.range,l=0;l<s;l++){var c=l>0?r[l-1].coordinate:r[s-1].coordinate,u=r[l].coordinate,d=l>=s-1?r[0].coordinate:r[l+1].coordinate,h=void 0;if(Qr(u-c)!==Qr(d-u)){var p=[];if(Qr(d-u)===Qr(a[1]-a[0])){h=d;var f=u+a[1]-a[0];p[0]=Math.min(f,(f+c)/2),p[1]=Math.max(f,(f+c)/2)}else{h=c;var g=d+a[1]-a[0];p[0]=Math.min(u,(g+u)/2),p[1]=Math.max(u,(g+u)/2)}var m=[Math.min(u,(h+u)/2),Math.max(u,(h+u)/2)];if(e>m[0]&&e<=m[1]||e>=p[0]&&e<=p[1]){i=r[l].index;break}}else{var v=Math.min(c,d),y=Math.max(c,d);if(e>(v+u)/2&&e<=(y+u)/2){i=r[l].index;break}}}else for(var b=0;b<s;b++)if(0===b&&e<=(n[b].coordinate+n[b+1].coordinate)/2||b>0&&b<s-1&&e>(n[b].coordinate+n[b-1].coordinate)/2&&e<=(n[b].coordinate+n[b+1].coordinate)/2||b===s-1&&e>(n[b].coordinate+n[b-1].coordinate)/2){i=n[b].index;break}return i}(i,s,l,a);if(c>=0&&l){var u=l[c]&&l[c].value,d=gD(e,t,c,u),h=function(e,t,n,r){var o=t.find(function(e){return e&&e.index===n});if(o){if("horizontal"===e)return{x:o.coordinate,y:r.y};if("vertical"===e)return{x:r.x,y:o.coordinate};if("centric"===e){var i=o.coordinate,s=r.radius;return sD(sD(sD({},r),Tw(r.cx,r.cy,s,i)),{},{angle:i,radius:s})}var a=o.coordinate,l=r.angle;return sD(sD(sD({},r),Tw(r.cx,r.cy,a,l)),{},{angle:l,radius:a})}return dD}(n,s,c,o);return{activeTooltipIndex:c,activeLabel:u,activePayload:d,activeCoordinate:h}}return null},vD=function(e,t){var n=t.axes,r=t.graphicalItems,o=t.axisType,i=t.axisIdKey,s=t.stackGroups,a=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,u=e.children,d=e.stackOffset,h=sw(c,o);return n.reduce(function(t,n){var p,f=void 0!==n.type.defaultProps?sD(sD({},n.type.defaultProps),n.props):n.props,g=f.type,m=f.dataKey,v=f.allowDataOverflow,y=f.allowDuplicatedCategory,b=f.scale,w=f.ticks,C=f.includeHidden,x=f[i];if(t[x])return t;var S,k,P,j=pD(e.data,{graphicalItems:r.filter(function(e){var t;return(i in e.props?e.props[i]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[i])===x}),dataStartIndex:a,dataEndIndex:l}),O=j.length;(function(e,t,n){if("number"===n&&!0===t&&Array.isArray(e)){var r=null==e?void 0:e[0],o=null==e?void 0:e[1];if(r&&o&&to(r)&&to(o))return!0}return!1})(f.domain,v,g)&&(S=xw(f.domain,null,v),!h||"number"!==g&&"auto"===b||(P=nw(j,m,"category")));var R=fD(g);if(!S||0===S.length){var E,D=null!==(E=f.domain)&&void 0!==E?E:R;if(m){if(S=nw(j,m,g),"category"===g&&h){var M=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++){if(n[e[r]])return!0;n[e[r]]=!0}return!1}(S);y&&M?(k=S,S=jP(0,O)):y||(S=kw(D,S,n).reduce(function(e,t){return e.indexOf(t)>=0?e:[].concat(nD(e),[t])},[]))}else if("category"===g)S=y?S.filter(function(e){return""!==e&&!Sr(e)}):kw(D,S,n).reduce(function(e,t){return e.indexOf(t)>=0||""===t||Sr(t)?e:[].concat(nD(e),[t])},[]);else if("number"===g){var A=function(e,t,n,r,o){var i=t.map(function(t){return ow(e,t,n,o,r)}).filter(function(e){return!Sr(e)});return i&&i.length?i.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]):null}(j,r.filter(function(e){var t,n,r=i in e.props?e.props[i]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[i],o="hide"in e.props?e.props.hide:null===(n=e.type.defaultProps)||void 0===n?void 0:n.hide;return r===x&&(C||!o)}),m,o,c);A&&(S=A)}!h||"number"!==g&&"auto"===b||(P=nw(j,m,"category"))}else S=h?jP(0,O):s&&s[x]&&s[x].hasStack&&"number"===g?"expand"===d?[0,1]:bw(s[x].stackGroups,a,l):iw(j,r.filter(function(e){var t=i in e.props?e.props[i]:e.type.defaultProps[i],n="hide"in e.props?e.props.hide:e.type.defaultProps.hide;return t===x&&(C||!n)}),g,c,!0);if("number"===g)S=EE(u,S,x,o,w),D&&(S=xw(D,S,v));else if("category"===g&&D){var N=D;S.every(function(e){return N.indexOf(e)>=0})&&(S=N)}}return sD(sD({},t),{},aD({},x,sD(sD({},f),{},{axisType:o,domain:S,categoricalDomain:P,duplicateDomain:k,originalDomain:null!==(p=f.domain)&&void 0!==p?p:R,isCategorical:h,layout:c})))},{})},yD=function(e,t){var n=t.axisType,r=void 0===n?"xAxis":n,o=t.AxisComp,i=t.graphicalItems,s=t.stackGroups,a=t.dataStartIndex,l=t.dataEndIndex,c=e.children,u="".concat(r,"Id"),d=Ro(c,o),h={};return d&&d.length?h=vD(e,{axes:d,graphicalItems:i,axisType:r,axisIdKey:u,stackGroups:s,dataStartIndex:a,dataEndIndex:l}):i&&i.length&&(h=function(e,t){var n=t.graphicalItems,r=t.Axis,o=t.axisType,i=t.axisIdKey,s=t.stackGroups,a=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,u=e.children,d=pD(e.data,{graphicalItems:n,dataStartIndex:a,dataEndIndex:l}),h=d.length,p=sw(c,o),f=-1;return n.reduce(function(e,t){var g,m=(void 0!==t.type.defaultProps?sD(sD({},t.type.defaultProps),t.props):t.props)[i],v=fD("number");return e[m]?e:(f++,p?g=jP(0,h):s&&s[m]&&s[m].hasStack?(g=bw(s[m].stackGroups,a,l),g=EE(u,g,m,o)):(g=xw(v,iw(d,n.filter(function(e){var t,n,r=i in e.props?e.props[i]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[i],o="hide"in e.props?e.props.hide:null===(n=e.type.defaultProps)||void 0===n?void 0:n.hide;return r===m&&!o}),"number",c),r.defaultProps.allowDataOverflow),g=EE(u,g,m,o)),sD(sD({},e),{},aD({},m,sD(sD({axisType:o},r.defaultProps),{},{hide:!0,orientation:xr(cD,"".concat(o,".").concat(f%2),null),domain:g,originalDomain:v,isCategorical:p,layout:c}))))},{})}(e,{Axis:o,graphicalItems:i,axisType:r,axisIdKey:u,stackGroups:s,dataStartIndex:a,dataEndIndex:l})),h},bD=function(e){var t=e.children,n=e.defaultShowTooltip,r=Eo(t,zP),o=0,i=0;return e.data&&0!==e.data.length&&(i=e.data.length-1),r&&r.props&&(r.props.startIndex>=0&&(o=r.props.startIndex),r.props.endIndex>=0&&(i=r.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:i,activeTooltipIndex:-1,isTooltipActive:Boolean(n)}},wD=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},CD=function(e,t){var n=e.props,r=(e.graphicalItems,e.xAxisMap),o=void 0===r?{}:r,i=e.yAxisMap,s=void 0===i?{}:i,a=n.width,l=n.height,c=n.children,u=n.margin||{},d=Eo(c,zP),h=Eo(c,Fu),p=Object.keys(s).reduce(function(e,t){var n=s[t],r=n.orientation;return n.mirror||n.hide?e:sD(sD({},e),{},aD({},r,e[r]+n.width))},{left:u.left||0,right:u.right||0}),f=Object.keys(o).reduce(function(e,t){var n=o[t],r=n.orientation;return n.mirror||n.hide?e:sD(sD({},e),{},aD({},r,xr(e,"".concat(r))+n.height))},{top:u.top||0,bottom:u.bottom||0}),g=sD(sD({},f),p),m=g.bottom;d&&(g.bottom+=d.props.height||zP.defaultProps.height),h&&t&&(g=function(e,t,n,r){var o=n.children,i=n.width,s=n.margin,a=i-(s.left||0)-(s.right||0),l=qb({children:o,legendWidth:a});if(l){var c=r||{},u=c.width,d=c.height,h=l.align,p=l.verticalAlign,f=l.layout;if(("vertical"===f||"horizontal"===f&&"middle"===p)&&"center"!==h&&to(e[h]))return Qb(Qb({},e),{},ew({},h,e[h]+(u||0)));if(("horizontal"===f||"vertical"===f&&"center"===h)&&"middle"!==p&&to(e[p]))return Qb(Qb({},e),{},ew({},p,e[p]+(d||0)))}return e}(g,0,n,t));var v=a-g.left-g.right,y=l-g.top-g.bottom;return sD(sD({brushBottom:m},g),{},{width:Math.max(v,0),height:Math.max(y,0)})},xD=function(e,t){return"xAxis"===t?e[t].width:"yAxis"===t?e[t].height:void 0},SD=function(e){var t=e.chartName,n=e.GraphicalChild,o=e.defaultTooltipEventType,i=void 0===o?"axis":o,s=e.validateTooltipEventTypes,a=void 0===s?["axis"]:s,l=e.axisComponents,c=e.legendContent,d=e.formatAxisMap,h=e.defaultProps,p=function(e,t){var n=t.graphicalItems,r=t.stackGroups,o=t.offset,i=t.updateId,s=t.dataStartIndex,a=t.dataEndIndex,c=e.barSize,u=e.layout,d=e.barGap,h=e.barCategoryGap,p=e.maxBarSize,f=wD(u),g=f.numericAxisName,m=f.cateAxisName,v=function(e){return!(!e||!e.length)&&e.some(function(e){var t=ko(e&&e.type);return t&&t.indexOf("Bar")>=0})}(n),y=[];return n.forEach(function(n,f){var b=pD(e.data,{graphicalItems:[n],dataStartIndex:s,dataEndIndex:a}),w=void 0!==n.type.defaultProps?sD(sD({},n.type.defaultProps),n.props):n.props,C=w.dataKey,x=w.maxBarSize,S=w["".concat(g,"Id")],k=w["".concat(m,"Id")],P=l.reduce(function(e,n){var r=t["".concat(n.axisType,"Map")],o=w["".concat(n.axisType,"Id")];r&&r[o]||"zAxis"===n.axisType||Eb();var i=r[o];return sD(sD({},e),{},aD(aD({},n.axisType,i),"".concat(n.axisType,"Ticks"),lw(i)))},{}),j=P[m],O=P["".concat(m,"Ticks")],R=r&&r[S]&&r[S].hasStack&&function(e,t){var n,r=(null!==(n=e.type)&&void 0!==n&&n.defaultProps?Qb(Qb({},e.type.defaultProps),e.props):e.props).stackId;if(no(r)){var o=t[r];if(o){var i=o.items.indexOf(e);return i>=0?o.stackedData[i]:null}}return null}(n,r[S].stackGroups),E=ko(n.type).indexOf("Bar")>=0,D=Sw(j,O),M=[],A=v&&function(e){var t=e.barSize,n=e.totalSize,r=e.stackGroups,o=void 0===r?{}:r;if(!o)return{};for(var i={},s=Object.keys(o),a=0,l=s.length;a<l;a++)for(var c=o[s[a]].stackGroups,u=Object.keys(c),d=0,h=u.length;d<h;d++){var p=c[u[d]],f=p.items,g=p.cateAxisId,m=f.filter(function(e){return ko(e.type).indexOf("Bar")>=0});if(m&&m.length){var v=m[0].type.defaultProps,y=void 0!==v?Qb(Qb({},v),m[0].props):m[0].props,b=y.barSize,w=y[g];i[w]||(i[w]=[]);var C=Sr(b)?t:b;i[w].push({item:m[0],stackList:m.slice(1),barSize:Sr(C)?void 0:io(C,n,0)})}}return i}({barSize:c,stackGroups:r,totalSize:xD(P,m)});if(E){var N,T,F=Sr(x)?p:x,I=null!==(N=null!==(T=Sw(j,O,!0))&&void 0!==T?T:F)&&void 0!==N?N:0;M=function(e){var t=e.barGap,n=e.barCategoryGap,r=e.bandSize,o=e.sizeList,i=void 0===o?[]:o,s=e.maxBarSize,a=i.length;if(a<1)return null;var l,c=io(t,r,0,!0),u=[];if(i[0].barSize===+i[0].barSize){var d=!1,h=r/a,p=i.reduce(function(e,t){return e+t.barSize||0},0);(p+=(a-1)*c)>=r&&(p-=(a-1)*c,c=0),p>=r&&h>0&&(d=!0,p=a*(h*=.9));var f={offset:((r-p)/2|0)-c,size:0};l=i.reduce(function(e,t){var n={item:t.item,position:{offset:f.offset+f.size+c,size:d?h:t.barSize}},r=[].concat(Yb(e),[n]);return f=r[r.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){r.push({item:e,position:f})}),r},u)}else{var g=io(n,r,0,!0);r-2*g-(a-1)*c<=0&&(c=0);var m=(r-2*g-(a-1)*c)/a;m>1&&(m>>=0);var v=s===+s?Math.min(m,s):m;l=i.reduce(function(e,t,n){var r=[].concat(Yb(e),[{item:t.item,position:{offset:g+(m+c)*n+(m-v)/2,size:v}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){r.push({item:e,position:r[r.length-1].position})}),r},u)}return l}({barGap:d,barCategoryGap:h,bandSize:I!==D?I:D,sizeList:A[k],maxBarSize:F}),I!==D&&(M=M.map(function(e){return sD(sD({},e),{},{position:sD(sD({},e.position),{},{offset:e.position.offset-I/2})})}))}var L,B,H=n&&n.type&&n.type.getComposedData;H&&y.push({props:sD(sD({},H(sD(sD({},P),{},{displayedData:b,props:e,dataKey:C,item:n,bandSize:D,barPosition:M,offset:o,stackedData:R,layout:u,dataStartIndex:s,dataEndIndex:a}))),{},aD(aD(aD({key:n.key||"item-".concat(f)},g,P[g]),m,P[m]),"animationId",i)),childIndex:(L=n,B=e.children,Oo(B).indexOf(L)),item:n})}),y},f=function(e,r){var o=e.props,i=e.dataStartIndex,s=e.dataEndIndex,a=e.updateId;if(!Do({props:o}))return null;var c=o.children,u=o.layout,h=o.stackOffset,f=o.data,g=o.reverseStackOrder,m=wD(u),v=m.numericAxisName,y=m.cateAxisName,b=Ro(c,n),w=function(e,t,n,r,o,i){if(!e)return null;var s=(i?t.reverse():t).reduce(function(e,t){var o,i=null!==(o=t.type)&&void 0!==o&&o.defaultProps?Qb(Qb({},t.type.defaultProps),t.props):t.props,s=i.stackId;if(i.hide)return e;var a=i[n],l=e[a]||{hasStack:!1,stackGroups:{}};if(no(s)){var c=l.stackGroups[s]||{numericAxisId:n,cateAxisId:r,items:[]};c.items.push(t),l.hasStack=!0,l.stackGroups[s]=c}else l.stackGroups[oo("_stackId_")]={numericAxisId:n,cateAxisId:r,items:[t]};return Qb(Qb({},e),{},ew({},a,l))},{});return Object.keys(s).reduce(function(t,i){var a=s[i];return a.hasStack&&(a.stackGroups=Object.keys(a.stackGroups).reduce(function(t,i){var s=a.stackGroups[i];return Qb(Qb({},t),{},ew({},i,{numericAxisId:n,cateAxisId:r,items:s.items,stackedData:gw(e,s.items,o)}))},{})),Qb(Qb({},t),{},ew({},i,a))},{})}(f,b,"".concat(v,"Id"),"".concat(y,"Id"),h,g),C=l.reduce(function(e,t){var n="".concat(t.axisType,"Map");return sD(sD({},e),{},aD({},n,yD(o,sD(sD({},t),{},{graphicalItems:b,stackGroups:t.axisType===v&&w,dataStartIndex:i,dataEndIndex:s}))))},{}),x=CD(sD(sD({},C),{},{props:o,graphicalItems:b}),null==r?void 0:r.legendBBox);Object.keys(C).forEach(function(e){C[e]=d(o,C[e],x,e.replace("Map",""),t)});var S,k,P=C["".concat(y,"Map")],j=(S=so(P),{tooltipTicks:k=lw(S,!1,!0),orderedTooltipTicks:Dd(k,function(e){return e.coordinate}),tooltipAxis:S,tooltipAxisBandSize:Sw(S,k)}),O=p(o,sD(sD({},C),{},{dataStartIndex:i,dataEndIndex:s,updateId:a,graphicalItems:b,stackGroups:w,offset:x}));return sD(sD({formattedGraphicalItems:O,graphicalItems:b,offset:x,stackGroups:w},j),C)},g=function(){function e(n){var o,i,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),aD(s=JE(this,e,[n]),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),aD(s,"accessibilityManager",new LE),aD(s,"handleLegendBBoxUpdate",function(e){if(e){var t=s.state,n=t.dataStartIndex,r=t.dataEndIndex,o=t.updateId;s.setState(sD({legendBBox:e},f({props:s.props,dataStartIndex:n,dataEndIndex:r,updateId:o},sD(sD({},s.state),{},{legendBBox:e}))))}}),aD(s,"handleReceiveSyncEvent",function(e,t,n){if(s.props.syncId===e){if(n===s.eventEmitterSymbol&&"function"!=typeof s.props.syncMethod)return;s.applySyncEvent(t)}}),aD(s,"handleBrushChange",function(e){var t=e.startIndex,n=e.endIndex;if(t!==s.state.dataStartIndex||n!==s.state.dataEndIndex){var r=s.state.updateId;s.setState(function(){return sD({dataStartIndex:t,dataEndIndex:n},f({props:s.props,dataStartIndex:t,dataEndIndex:n,updateId:r},s.state))}),s.triggerSyncEvent({dataStartIndex:t,dataEndIndex:n})}}),aD(s,"handleMouseEnter",function(e){var t=s.getMouseInfo(e);if(t){var n=sD(sD({},t),{},{isTooltipActive:!0});s.setState(n),s.triggerSyncEvent(n);var r=s.props.onMouseEnter;Dt(r)&&r(n,e)}}),aD(s,"triggeredAfterMouseMove",function(e){var t=s.getMouseInfo(e),n=t?sD(sD({},t),{},{isTooltipActive:!0}):{isTooltipActive:!1};s.setState(n),s.triggerSyncEvent(n);var r=s.props.onMouseMove;Dt(r)&&r(n,e)}),aD(s,"handleItemMouseEnter",function(e){s.setState(function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}})}),aD(s,"handleItemMouseLeave",function(){s.setState(function(){return{isTooltipActive:!1}})}),aD(s,"handleMouseMove",function(e){e.persist(),s.throttleTriggeredAfterMouseMove(e)}),aD(s,"handleMouseLeave",function(e){s.throttleTriggeredAfterMouseMove.cancel();var t={isTooltipActive:!1};s.setState(t),s.triggerSyncEvent(t);var n=s.props.onMouseLeave;Dt(n)&&n(t,e)}),aD(s,"handleOuterEvent",function(e){var t,n=function(e){var t=e&&e.type;return t&&So[t]?So[t]:null}(e),r=xr(s.props,"".concat(n));n&&Dt(r)&&r(null!==(t=/.*touch.*/i.test(n)?s.getMouseInfo(e.changedTouches[0]):s.getMouseInfo(e))&&void 0!==t?t:{},e)}),aD(s,"handleClick",function(e){var t=s.getMouseInfo(e);if(t){var n=sD(sD({},t),{},{isTooltipActive:!0});s.setState(n),s.triggerSyncEvent(n);var r=s.props.onClick;Dt(r)&&r(n,e)}}),aD(s,"handleMouseDown",function(e){var t=s.props.onMouseDown;Dt(t)&&t(s.getMouseInfo(e),e)}),aD(s,"handleMouseUp",function(e){var t=s.props.onMouseUp;Dt(t)&&t(s.getMouseInfo(e),e)}),aD(s,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&s.throttleTriggeredAfterMouseMove(e.changedTouches[0])}),aD(s,"handleTouchStart",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&s.handleMouseDown(e.changedTouches[0])}),aD(s,"handleTouchEnd",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&s.handleMouseUp(e.changedTouches[0])}),aD(s,"handleDoubleClick",function(e){var t=s.props.onDoubleClick;Dt(t)&&t(s.getMouseInfo(e),e)}),aD(s,"handleContextMenu",function(e){var t=s.props.onContextMenu;Dt(t)&&t(s.getMouseInfo(e),e)}),aD(s,"triggerSyncEvent",function(e){void 0!==s.props.syncId&&ME.emit(AE,s.props.syncId,e,s.eventEmitterSymbol)}),aD(s,"applySyncEvent",function(e){var t=s.props,n=t.layout,r=t.syncMethod,o=s.state.updateId,i=e.dataStartIndex,a=e.dataEndIndex;if(void 0!==e.dataStartIndex||void 0!==e.dataEndIndex)s.setState(sD({dataStartIndex:i,dataEndIndex:a},f({props:s.props,dataStartIndex:i,dataEndIndex:a,updateId:o},s.state)));else if(void 0!==e.activeTooltipIndex){var l=e.chartX,c=e.chartY,u=e.activeTooltipIndex,d=s.state,h=d.offset,p=d.tooltipTicks;if(!h)return;if("function"==typeof r)u=r(p,e);else if("value"===r){u=-1;for(var g=0;g<p.length;g++)if(p[g].value===e.activeLabel){u=g;break}}var m=sD(sD({},h),{},{x:h.left,y:h.top}),v=Math.min(l,m.x+m.width),y=Math.min(c,m.y+m.height),b=p[u]&&p[u].value,w=gD(s.state,s.props.data,u),C=p[u]?{x:"horizontal"===n?p[u].coordinate:v,y:"horizontal"===n?y:p[u].coordinate}:dD;s.setState(sD(sD({},e),{},{activeLabel:b,activeCoordinate:C,activePayload:w,activeTooltipIndex:u}))}else s.setState(e)}),aD(s,"renderCursor",function(e){var n,r=s.state,o=r.isTooltipActive,i=r.activeCoordinate,a=r.activePayload,l=r.offset,c=r.activeTooltipIndex,d=r.tooltipAxisBandSize,h=s.getTooltipEventType(),p=null!==(n=e.props.active)&&void 0!==n?n:o,f=s.props.layout,g=e.key||"_recharts-cursor";return u.createElement(zE,{key:g,activeCoordinate:i,activePayload:a,activeTooltipIndex:c,chartName:t,element:e,isActive:p,layout:f,offset:l,tooltipAxisBandSize:d,tooltipEventType:h})}),aD(s,"renderPolarAxis",function(e,t,n){var o=xr(e,"type.axisType"),i=xr(s.state,"".concat(o,"Map")),a=e.type.defaultProps,l=void 0!==a?sD(sD({},a),e.props):e.props,c=i&&i[l["".concat(o,"Id")]];return r.cloneElement(e,sD(sD({},c),{},{className:Je(o,c.className),key:e.key||"".concat(t,"-").concat(n),ticks:lw(c,!0)}))}),aD(s,"renderPolarGrid",function(e){var t=e.props,n=t.radialLines,o=t.polarAngles,i=t.polarRadius,a=s.state,l=a.radiusAxisMap,c=a.angleAxisMap,u=so(l),d=so(c),h=d.cx,p=d.cy,f=d.innerRadius,g=d.outerRadius;return r.cloneElement(e,{polarAngles:Array.isArray(o)?o:lw(d,!0).map(function(e){return e.coordinate}),polarRadius:Array.isArray(i)?i:lw(u,!0).map(function(e){return e.coordinate}),cx:h,cy:p,innerRadius:f,outerRadius:g,key:e.key||"polar-grid",radialLines:n})}),aD(s,"renderLegend",function(){var e=s.state.formattedGraphicalItems,t=s.props,n=t.children,o=t.width,i=t.height,a=s.props.margin||{},l=o-(a.left||0)-(a.right||0),u=qb({children:n,formattedGraphicalItems:e,legendWidth:l,legendContent:c});if(!u)return null;var d=u.item,h=YE(u,$E);return r.cloneElement(d,sD(sD({},h),{},{chartWidth:o,chartHeight:i,margin:a,onBBoxUpdate:s.handleLegendBBoxUpdate}))}),aD(s,"renderTooltip",function(){var e,t=s.props,n=t.children,o=t.accessibilityLayer,i=Eo(n,gh);if(!i)return null;var a=s.state,l=a.isTooltipActive,c=a.activeCoordinate,u=a.activePayload,d=a.activeLabel,h=a.offset,p=null!==(e=i.props.active)&&void 0!==e?e:l;return r.cloneElement(i,{viewBox:sD(sD({},h),{},{x:h.left,y:h.top}),active:p,label:d,payload:p?u:[],coordinate:c,accessibilityLayer:o})}),aD(s,"renderBrush",function(e){var t=s.props,n=t.margin,o=t.data,i=s.state,a=i.offset,l=i.dataStartIndex,c=i.dataEndIndex,u=i.updateId;return r.cloneElement(e,{key:e.key||"_recharts-brush",onChange:uw(s.handleBrushChange,e.props.onChange),data:o,x:to(e.props.x)?e.props.x:a.left,y:to(e.props.y)?e.props.y:a.top+a.height+a.brushBottom-(n.bottom||0),width:to(e.props.width)?e.props.width:a.width,startIndex:l,endIndex:c,updateId:"brush-".concat(u)})}),aD(s,"renderReferenceElement",function(e,t,n){if(!e)return null;var o=s.clipPathId,i=s.state,a=i.xAxisMap,l=i.yAxisMap,c=i.offset,u=e.type.defaultProps||{},d=e.props,h=d.xAxisId,p=void 0===h?u.xAxisId:h,f=d.yAxisId,g=void 0===f?u.yAxisId:f;return r.cloneElement(e,{key:e.key||"".concat(t,"-").concat(n),xAxis:a[p],yAxis:l[g],viewBox:{x:c.left,y:c.top,width:c.width,height:c.height},clipPathId:o})}),aD(s,"renderActivePoints",function(t){var n=t.item,r=t.activePoint,o=t.basePoint,i=t.childIndex,s=t.isRange,a=[],l=n.props.key,c=void 0!==n.item.type.defaultProps?sD(sD({},n.item.type.defaultProps),n.item.props):n.item.props,u=c.activeDot,d=sD(sD({index:i,dataKey:c.dataKey,cx:r.x,cy:r.y,r:4,fill:rw(n.item),strokeWidth:2,stroke:"#fff",payload:r.payload,value:r.value},Ao(u,!1)),vo(u));return a.push(e.renderActiveDot(u,d,"".concat(l,"-activePoint-").concat(i))),o?a.push(e.renderActiveDot(u,sD(sD({},d),{},{cx:o.x,cy:o.y}),"".concat(l,"-basePoint-").concat(i))):s&&a.push(null),a}),aD(s,"renderGraphicChild",function(e,t,n){var o=s.filterFormatItem(e,t,n);if(!o)return null;var i=s.getTooltipEventType(),a=s.state,l=a.isTooltipActive,c=a.tooltipAxis,u=a.activeTooltipIndex,d=a.activeLabel,h=Eo(s.props.children,gh),p=o.props,f=p.points,g=p.isRange,m=p.baseLine,v=void 0!==o.item.type.defaultProps?sD(sD({},o.item.type.defaultProps),o.item.props):o.item.props,y=v.activeDot,b=v.hide,w=v.activeBar,C=v.activeShape,x=Boolean(!b&&l&&h&&(y||w||C)),S={};"axis"!==i&&h&&"click"===h.props.trigger?S={onClick:uw(s.handleItemMouseEnter,e.props.onClick)}:"axis"!==i&&(S={onMouseLeave:uw(s.handleItemMouseLeave,e.props.onMouseLeave),onMouseEnter:uw(s.handleItemMouseEnter,e.props.onMouseEnter)});var k=r.cloneElement(e,sD(sD({},o.props),S));if(x){if(!(u>=0)){var P,j=(null!==(P=s.getItemByXY(s.state.activeCoordinate))&&void 0!==P?P:{graphicalItem:k}).graphicalItem,O=j.item,R=void 0===O?e:O,E=j.childIndex,D=sD(sD(sD({},o.props),S),{},{activeIndex:E});return[r.cloneElement(R,D),null,null]}var M,A;if(c.dataKey&&!c.allowDuplicatedCategory){var N="function"==typeof c.dataKey?function(e){return"function"==typeof c.dataKey?c.dataKey(e.payload):null}:"payload.".concat(c.dataKey.toString());M=lo(f,N,d),A=g&&m&&lo(m,N,d)}else M=null==f?void 0:f[u],A=g&&m&&m[u];if(C||w){var T=void 0!==e.props.activeIndex?e.props.activeIndex:u;return[r.cloneElement(e,sD(sD(sD({},o.props),S),{},{activeIndex:T})),null,null]}if(!Sr(M))return[k].concat(nD(s.renderActivePoints({item:o,activePoint:M,basePoint:A,childIndex:u,isRange:g})))}return g?[k,null,null]:[k,null]}),aD(s,"renderCustomized",function(e,t,n){return r.cloneElement(e,sD(sD({key:"recharts-customized-".concat(n)},s.props),s.state))}),aD(s,"renderMap",{CartesianGrid:{handler:hD,once:!0},ReferenceArea:{handler:s.renderReferenceElement},ReferenceLine:{handler:hD},ReferenceDot:{handler:s.renderReferenceElement},XAxis:{handler:hD},YAxis:{handler:hD},Brush:{handler:s.renderBrush,once:!0},Bar:{handler:s.renderGraphicChild},Line:{handler:s.renderGraphicChild},Area:{handler:s.renderGraphicChild},Radar:{handler:s.renderGraphicChild},RadialBar:{handler:s.renderGraphicChild},Scatter:{handler:s.renderGraphicChild},Pie:{handler:s.renderGraphicChild},Funnel:{handler:s.renderGraphicChild},Tooltip:{handler:s.renderCursor,once:!0},PolarGrid:{handler:s.renderPolarGrid,once:!0},PolarAngleAxis:{handler:s.renderPolarAxis},PolarRadiusAxis:{handler:s.renderPolarAxis},Customized:{handler:s.renderCustomized}}),s.clipPathId="".concat(null!==(o=n.id)&&void 0!==o?o:oo("recharts"),"-clip"),s.throttleTriggeredAfterMouseMove=Fh(s.triggeredAfterMouseMove,null!==(i=n.throttleDelay)&&void 0!==i?i:1e3/60),s.state={},s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tD(e,t)}(e,r.Component),ZE(e,[{key:"componentDidMount",value:function(){var e,t;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(e=this.props.margin.left)&&void 0!==e?e:0,top:null!==(t=this.props.margin.top)&&void 0!==t?t:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var e=this.props,t=e.children,n=e.data,r=e.height,o=e.layout,i=Eo(t,gh);if(i){var s=i.props.defaultIndex;if(!("number"!=typeof s||s<0||s>this.state.tooltipTicks.length-1)){var a=this.state.tooltipTicks[s]&&this.state.tooltipTicks[s].value,l=gD(this.state,n,s,a),c=this.state.tooltipTicks[s].coordinate,u=(this.state.offset.top+r)/2,d="horizontal"===o?{x:c,y:u}:{y:c,x:u},h=this.state.formattedGraphicalItems.find(function(e){return"Scatter"===e.item.type.name});h&&(d=sD(sD({},d),h.props.points[s].tooltipPosition),l=h.props.points[s].tooltipPayload);var p={activeTooltipIndex:s,isTooltipActive:!0,activeLabel:a,activePayload:l,activeCoordinate:d};this.setState(p),this.renderCursor(i),this.accessibilityManager.setIndex(s)}}}},{key:"getSnapshotBeforeUpdate",value:function(e,t){if(!this.props.accessibilityLayer)return null;var n,r;(this.state.tooltipTicks!==t.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==e.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==e.margin)&&this.accessibilityManager.setDetails({offset:{left:null!==(n=this.props.margin.left)&&void 0!==n?n:0,top:null!==(r=this.props.margin.top)&&void 0!==r?r:0}});return null}},{key:"componentDidUpdate",value:function(e){No([Eo(e.children,gh)],[Eo(this.props.children,gh)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=Eo(this.props.children,gh);if(e&&"boolean"==typeof e.props.shared){var t=e.props.shared?"axis":"item";return a.indexOf(t)>=0?t:i}return i}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t,n=this.container,r=n.getBoundingClientRect(),o={top:(t=r).top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft},i={chartX:Math.round(e.pageX-o.left),chartY:Math.round(e.pageY-o.top)},s=r.width/n.offsetWidth||1,a=this.inRange(i.chartX,i.chartY,s);if(!a)return null;var l=this.state,c=l.xAxisMap,u=l.yAxisMap,d=this.getTooltipEventType(),h=mD(this.state,this.props.data,this.props.layout,a);if("axis"!==d&&c&&u){var p=so(c).scale,f=so(u).scale,g=p&&p.invert?p.invert(i.chartX):null,m=f&&f.invert?f.invert(i.chartY):null;return sD(sD({},i),{},{xValue:g,yValue:m},h)}return h?sD(sD({},i),h):null}},{key:"inRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.props.layout,o=e/n,i=t/n;if("horizontal"===r||"vertical"===r){var s=this.state.offset;return o>=s.left&&o<=s.left+s.width&&i>=s.top&&i<=s.top+s.height?{x:o,y:i}:null}var a=this.state,l=a.angleAxisMap,c=a.radiusAxisMap;if(l&&c){var u=so(l);return Bw({x:o,y:i},u)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),n=Eo(e,gh),r={};return n&&"axis"===t&&(r="click"===n.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu}),sD(sD({},vo(this.props,this.handleOuterEvent)),r)}},{key:"addListener",value:function(){ME.on(AE,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){ME.removeListener(AE,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(e,t,n){for(var r=this.state.formattedGraphicalItems,o=0,i=r.length;o<i;o++){var s=r[o];if(s.item===e||s.props.key===e.key||t===ko(s.item.type)&&n===s.childIndex)return s}return null}},{key:"renderClipPath",value:function(){var e=this.clipPathId,t=this.state.offset,n=t.left,r=t.top,o=t.height,i=t.width;return u.createElement("defs",null,u.createElement("clipPath",{id:e},u.createElement("rect",{x:n,y:r,height:o,width:i})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce(function(e,t){var n=XE(t,2),r=n[0],o=n[1];return sD(sD({},e),{},aD({},r,o.scale))},{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce(function(e,t){var n=XE(t,2),r=n[0],o=n[1];return sD(sD({},e),{},aD({},r,o.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(e){var t;return null===(t=this.state.xAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getYScaleByAxisId",value:function(e){var t;return null===(t=this.state.yAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getItemByXY",value:function(e){var t=this.state,n=t.formattedGraphicalItems,r=t.activeItem;if(n&&n.length)for(var o=0,i=n.length;o<i;o++){var s=n[o],a=s.props,l=s.item,c=void 0!==l.type.defaultProps?sD(sD({},l.type.defaultProps),l.props):l.props,u=ko(l.type);if("Bar"===u){var d=(a.data||[]).find(function(t){return mS(e,t)});if(d)return{graphicalItem:s,payload:d}}else if("RadialBar"===u){var h=(a.data||[]).find(function(t){return Bw(e,t)});if(h)return{graphicalItem:s,payload:h}}else if(Qk(s,r)||eP(s,r)||tP(s,r)){var p=iP({graphicalItem:s,activeTooltipItem:r,itemData:c.data}),f=void 0===c.activeIndex?p:c.activeIndex;return{graphicalItem:sD(sD({},s),{},{childIndex:f}),payload:tP(s,r)?c.data[p]:s.props.data[p]}}}return null}},{key:"render",value:function(){var e=this;if(!Do(this))return null;var t,n,r=this.props,o=r.children,i=r.className,s=r.width,a=r.height,l=r.style,c=r.compact,d=r.title,h=r.desc,p=YE(r,UE),f=Ao(p,!1);if(c)return u.createElement(uO,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},u.createElement(Ho,qE({},f,{width:s,height:a,title:d,desc:h}),this.renderClipPath(),Fo(o,this.renderMap)));this.props.accessibilityLayer&&(f.tabIndex=null!==(t=this.props.tabIndex)&&void 0!==t?t:0,f.role=null!==(n=this.props.role)&&void 0!==n?n:"application",f.onKeyDown=function(t){e.accessibilityManager.keyboardEvent(t)},f.onFocus=function(){e.accessibilityManager.focus()});var g=this.parseEventsOfWrapper();return u.createElement(uO,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},u.createElement("div",qE({className:Je("recharts-wrapper",i),style:sD({position:"relative",cursor:"default",width:s,height:a},l)},g,{ref:function(t){e.container=t}}),u.createElement(Ho,qE({},f,{width:s,height:a,title:d,desc:h,style:uD}),this.renderClipPath(),Fo(o,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}();aD(g,"displayName",t),aD(g,"defaultProps",sD({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),aD(g,"getDerivedStateFromProps",function(e,t){var n=e.dataKey,r=e.data,o=e.children,i=e.width,s=e.height,a=e.layout,l=e.stackOffset,c=e.margin,u=t.dataStartIndex,d=t.dataEndIndex;if(void 0===t.updateId){var h=bD(e);return sD(sD(sD({},h),{},{updateId:0},f(sD(sD({props:e},h),{},{updateId:0}),t)),{},{prevDataKey:n,prevData:r,prevWidth:i,prevHeight:s,prevLayout:a,prevStackOffset:l,prevMargin:c,prevChildren:o})}if(n!==t.prevDataKey||r!==t.prevData||i!==t.prevWidth||s!==t.prevHeight||a!==t.prevLayout||l!==t.prevStackOffset||!uo(c,t.prevMargin)){var p=bD(e),g={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},m=sD(sD({},mD(t,r,a)),{},{updateId:t.updateId+1}),v=sD(sD(sD({},p),g),m);return sD(sD(sD({},v),f(sD({props:e},v),t)),{},{prevDataKey:n,prevData:r,prevWidth:i,prevHeight:s,prevLayout:a,prevStackOffset:l,prevMargin:c,prevChildren:o})}if(!No(o,t.prevChildren)){var y,b,w,C,x=Eo(o,zP),S=x&&null!==(y=null===(b=x.props)||void 0===b?void 0:b.startIndex)&&void 0!==y?y:u,k=x&&null!==(w=null===(C=x.props)||void 0===C?void 0:C.endIndex)&&void 0!==w?w:d,P=S!==u||k!==d,j=!Sr(r)&&!P?t.updateId:t.updateId+1;return sD(sD({updateId:j},f(sD(sD({props:e},t),{},{updateId:j,dataStartIndex:S,dataEndIndex:k}),t)),{},{prevChildren:o,dataStartIndex:S,dataEndIndex:k})}return null}),aD(g,"renderActiveDot",function(e,t,n){var o;return o=r.isValidElement(e)?r.cloneElement(e,t):Dt(e)?e(t):u.createElement(RS,t),u.createElement(Wo,{className:"recharts-active-dot",key:n},o)});var m=r.forwardRef(function(e,t){return u.createElement(g,qE({},e,{ref:t}))});return m.displayName=g.displayName,m},kD=SD({chartName:"LineChart",GraphicalChild:oE,axisComponents:[{axisType:"xAxis",AxisComp:gE},{axisType:"yAxis",AxisComp:jE}],formatAxisMap:Vj}),PD=SD({chartName:"BarChart",GraphicalChild:Fj,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:gE},{axisType:"yAxis",AxisComp:jE}],formatAxisMap:Vj}),jD=SD({chartName:"PieChart",GraphicalChild:vP,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:bk},{axisType:"radiusAxis",AxisComp:ik}],formatAxisMap:function(e,t,n,r,o){var i=e.width,s=e.height,a=e.startAngle,l=e.endAngle,c=io(e.cx,i,i/2),u=io(e.cy,s,s/2),d=Fw(i,s,n),h=io(e.innerRadius,d,0),p=io(e.outerRadius,d,.8*d);return Object.keys(t).reduce(function(e,n){var i,s=t[n],d=s.domain,f=s.reversed;if(Sr(s.range))"angleAxis"===r?i=[a,l]:"radiusAxis"===r&&(i=[h,p]),f&&(i=[i[1],i[0]]);else{var g=Dw(i=s.range,2);a=g[0],l=g[1]}var m=dw(s,o),v=m.realScaleType,y=m.scale;y.domain(d).range(i),pw(y);var b=mw(y,Rw(Rw({},s),{},{realScaleType:v})),w=Rw(Rw(Rw({},s),b),{},{range:i,radius:p,realScaleType:v,scale:y,cx:c,cy:u,innerRadius:h,outerRadius:p,startAngle:a,endAngle:l});return Rw(Rw({},e),{},Ew({},n,w))},{})},defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const OD=["#166534","#22c55e","#86efac","#f59e0b","#ef4444","#8b5cf6"],RD=["facebook","google","tiktok","instagram","twitter","linkedin","youtube","other"],ED=()=>{var e;const{projectId:t}=a(),[n,o]=r.useState([]),[i,l]=r.useState(null),[c,u]=r.useState(!0),[d,h]=r.useState(!1),[p,f]=r.useState(!1),[g,m]=r.useState(null),[v,y]=r.useState({name:"",channel:"facebook",start_date:"",end_date:""}),[b,w]=r.useState([{date:"",impressions:0,clicks:0,spend:0,conversions:0}]),[C,x]=r.useState(!1);r.useEffect(()=>{S()},[t]);const S=async()=>{try{const[e,n]=await Promise.all([M.getCampaigns(t),M.getAggregatedMetrics(t,{groupBy:"day"})]);o(e.campaigns),l(n)}catch(e){console.error("Failed to load ads data:",e)}finally{u(!1)}},k=()=>{h(!1),m(null),y({name:"",channel:"facebook",start_date:"",end_date:""})},P=()=>{f(!1),m(null),w([{date:"",impressions:0,clicks:0,spend:0,conversions:0}])},j=(e,t,n)=>{const r=[...b];r[e][t]="date"===t?n:parseFloat(n)||0,w(r)},R=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e||0),E=e=>new Intl.NumberFormat("en-US").format(e||0);return c?O.jsx("div",{className:"flex items-center justify-center py-20",children:O.jsx("div",{className:"w-8 h-8 border-2 border-primary-200 border-t-primary-600 rounded-full animate-spin"})}):O.jsxs("div",{className:"max-w-6xl mx-auto animate-fade-in",children:[O.jsxs("div",{className:"flex items-center justify-between mb-8",children:[O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx(s,{to:`/project/${t}`,className:"icon-btn",children:O.jsx(H,{className:"w-5 h-5"})}),O.jsxs("div",{children:[O.jsx("h1",{className:"text-xl font-bold text-surface-900",children:"Ads Report"}),O.jsx("p",{className:"text-surface-500 text-sm",children:"Track your advertising performance"})]})]}),O.jsxs("button",{onClick:()=>h(!0),className:"btn-primary",children:[O.jsx(be,{className:"w-4 h-4"}),"New Campaign"]})]}),(null==i?void 0:i.totals)&&O.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[{icon:re,label:"Impressions",value:E(i.totals.total_impressions),color:"text-blue-600",bg:"bg-blue-50"},{icon:ge,label:"Clicks",value:E(i.totals.total_clicks),sub:`CTR: ${i.totals.overall_ctr||0}%`,color:"text-purple-600",bg:"bg-purple-50"},{icon:te,label:"Spend",value:R(i.totals.total_spend),sub:`CPC: ${R(i.totals.overall_cpc)}`,color:"text-emerald-600",bg:"bg-emerald-50"},{icon:Pe,label:"Conversions",value:E(i.totals.total_conversions),sub:`CPA: ${R(i.totals.overall_cpa)}`,color:"text-amber-600",bg:"bg-amber-50"}].map((e,t)=>O.jsxs("div",{className:"card p-5",children:[O.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[O.jsx("div",{className:`p-2 rounded-lg ${e.bg}`,children:O.jsx(e.icon,{className:`w-5 h-5 ${e.color}`})}),O.jsx("span",{className:"text-surface-500 text-sm",children:e.label})]}),O.jsx("p",{className:"text-2xl font-bold text-surface-900",children:e.value}),e.sub&&O.jsx("p",{className:"text-sm text-surface-500 mt-1",children:e.sub})]},t))}),(null==i?void 0:i.daily)&&i.daily.length>0&&O.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[O.jsxs("div",{className:"card p-6",children:[O.jsx("h3",{className:"font-semibold text-surface-900 mb-4",children:"Performance Trend"}),O.jsx(Vh,{width:"100%",height:280,children:O.jsxs(kD,{data:i.daily,children:[O.jsx(GR,{strokeDasharray:"3 3",stroke:"#e5e5e5"}),O.jsx(gE,{dataKey:"period",stroke:"#737373",fontSize:12}),O.jsx(jE,{stroke:"#737373",fontSize:12}),O.jsx(gh,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e5e5",borderRadius:"8px"}}),O.jsx(Fu,{}),O.jsx(oE,{type:"monotone",dataKey:"impressions",stroke:"#166534",strokeWidth:2,name:"Impressions"}),O.jsx(oE,{type:"monotone",dataKey:"clicks",stroke:"#22c55e",strokeWidth:2,name:"Clicks"})]})})]}),O.jsxs("div",{className:"card p-6",children:[O.jsx("h3",{className:"font-semibold text-surface-900 mb-4",children:"Spend & Conversions"}),O.jsx(Vh,{width:"100%",height:280,children:O.jsxs(PD,{data:i.daily,children:[O.jsx(GR,{strokeDasharray:"3 3",stroke:"#e5e5e5"}),O.jsx(gE,{dataKey:"period",stroke:"#737373",fontSize:12}),O.jsx(jE,{stroke:"#737373",fontSize:12}),O.jsx(gh,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e5e5",borderRadius:"8px"}}),O.jsx(Fu,{}),O.jsx(Fj,{dataKey:"spend",fill:"#166534",name:"Spend ($)",radius:[4,4,0,0]}),O.jsx(Fj,{dataKey:"conversions",fill:"#22c55e",name:"Conversions",radius:[4,4,0,0]})]})})]}),(null==(e=null==i?void 0:i.by_channel)?void 0:e.length)>0&&O.jsxs("div",{className:"card p-6 lg:col-span-2",children:[O.jsx("h3",{className:"font-semibold text-surface-900 mb-4",children:"Performance by Channel"}),O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[O.jsx(Vh,{width:"100%",height:220,children:O.jsxs(jD,{children:[O.jsx(vP,{data:i.by_channel,dataKey:"spend",nameKey:"channel",cx:"50%",cy:"50%",outerRadius:80,label:({name:e,percent:t})=>`${e} ${(100*t).toFixed(0)}%`,children:i.by_channel.map((e,t)=>O.jsx(Wh,{fill:OD[t%OD.length]},t))}),O.jsx(gh,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e5e5",borderRadius:"8px"}})]})}),O.jsx("div",{className:"space-y-2",children:i.by_channel.map((e,t)=>O.jsxs("div",{className:"flex items-center justify-between p-3 bg-surface-50 rounded-lg",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:OD[t%OD.length]}}),O.jsx("span",{className:"text-surface-700 capitalize text-sm",children:e.channel})]}),O.jsxs("div",{className:"text-right",children:[O.jsx("p",{className:"text-surface-900 font-medium text-sm",children:R(e.spend)}),O.jsxs("p",{className:"text-xs text-surface-500",children:[E(e.conversions)," conv."]})]})]},e.channel))})]})]})]}),O.jsxs("div",{className:"card",children:[O.jsx("div",{className:"px-6 py-4 border-b border-surface-100",children:O.jsx("h3",{className:"font-semibold text-surface-900",children:"Campaigns"})}),0===n.length?O.jsxs("div",{className:"text-center py-12 px-6",children:[O.jsx("p",{className:"text-surface-500 mb-4",children:"No campaigns yet"}),O.jsxs("button",{onClick:()=>h(!0),className:"btn-primary btn-sm",children:[O.jsx(be,{className:"w-4 h-4"}),"Create First Campaign"]})]}):O.jsx("div",{className:"overflow-x-auto",children:O.jsxs("table",{className:"w-full",children:[O.jsx("thead",{children:O.jsxs("tr",{className:"border-b border-surface-100 bg-surface-50",children:[O.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-surface-600",children:"Name"}),O.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-surface-600",children:"Channel"}),O.jsx("th",{className:"text-right py-3 px-6 text-sm font-medium text-surface-600",children:"Impressions"}),O.jsx("th",{className:"text-right py-3 px-6 text-sm font-medium text-surface-600",children:"Clicks"}),O.jsx("th",{className:"text-right py-3 px-6 text-sm font-medium text-surface-600",children:"Spend"}),O.jsx("th",{className:"text-right py-3 px-6 text-sm font-medium text-surface-600",children:"Conv."}),O.jsx("th",{className:"text-right py-3 px-6 text-sm font-medium text-surface-600",children:"Actions"})]})}),O.jsx("tbody",{children:n.map(e=>O.jsxs("tr",{className:"border-b border-surface-50 hover:bg-surface-50 transition-colors",children:[O.jsx("td",{className:"py-3 px-6 text-surface-900 text-sm",children:e.name}),O.jsx("td",{className:"py-3 px-6",children:O.jsx("span",{className:"badge badge-primary capitalize text-xs",children:e.channel})}),O.jsx("td",{className:"py-3 px-6 text-right text-surface-600 text-sm",children:E(e.total_impressions)}),O.jsx("td",{className:"py-3 px-6 text-right text-surface-600 text-sm",children:E(e.total_clicks)}),O.jsx("td",{className:"py-3 px-6 text-right text-surface-600 text-sm",children:R(e.total_spend)}),O.jsx("td",{className:"py-3 px-6 text-right text-surface-600 text-sm",children:E(e.total_conversions)}),O.jsx("td",{className:"py-3 px-6 text-right",children:O.jsxs("div",{className:"flex items-center justify-end gap-1",children:[O.jsx("button",{onClick:()=>(e=>{m(e),w([{date:"",impressions:0,clicks:0,spend:0,conversions:0}]),f(!0)})(e),className:"text-xs text-primary-700 hover:text-primary-800 font-medium px-2 py-1",children:"Add Metrics"}),O.jsx("button",{onClick:()=>(e=>{var t,n;m(e),y({name:e.name,channel:e.channel,start_date:(null==(t=e.start_date)?void 0:t.split("T")[0])||"",end_date:(null==(n=e.end_date)?void 0:n.split("T")[0])||""}),h(!0)})(e),className:"icon-btn p-1",children:O.jsx(ye,{className:"w-4 h-4"})}),O.jsx("button",{onClick:()=>(async e=>{if(confirm("Delete this campaign and all its metrics?"))try{await M.deleteCampaign(e),S()}catch(t){console.error("Failed to delete campaign:",t)}})(e.id),className:"icon-btn p-1 text-red-500 hover:text-red-600",children:O.jsx(je,{className:"w-4 h-4"})})]})})]},e.id))})]})})]}),d&&O.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:O.jsxs("div",{className:"card w-full max-w-md animate-scale-in",children:[O.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-surface-100",children:[O.jsx("h2",{className:"text-lg font-semibold text-surface-900",children:g?"Edit Campaign":"New Campaign"}),O.jsx("button",{onClick:k,className:"icon-btn",children:O.jsx(Ae,{className:"w-5 h-5"})})]}),O.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),v.name.trim()){x(!0);try{g?await M.updateCampaign(g.id,v):await M.createCampaign({project_id:parseInt(t),...v}),S(),k()}catch(n){console.error("Failed to save campaign:",n)}finally{x(!1)}}},className:"p-6 space-y-4",children:[O.jsxs("div",{children:[O.jsx("label",{className:"label",children:"Campaign Name"}),O.jsx("input",{type:"text",value:v.name,onChange:e=>y({...v,name:e.target.value}),className:"input",placeholder:"Summer Sale Campaign",required:!0})]}),O.jsxs("div",{children:[O.jsx("label",{className:"label",children:"Channel"}),O.jsx("select",{value:v.channel,onChange:e=>y({...v,channel:e.target.value}),className:"input",children:RD.map(e=>O.jsx("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),O.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[O.jsxs("div",{children:[O.jsx("label",{className:"label",children:"Start Date"}),O.jsx("input",{type:"date",value:v.start_date,onChange:e=>y({...v,start_date:e.target.value}),className:"input"})]}),O.jsxs("div",{children:[O.jsx("label",{className:"label",children:"End Date"}),O.jsx("input",{type:"date",value:v.end_date,onChange:e=>y({...v,end_date:e.target.value}),className:"input"})]})]}),O.jsxs("div",{className:"flex gap-3 pt-2",children:[O.jsx("button",{type:"button",onClick:k,className:"flex-1 btn-secondary",children:"Cancel"}),O.jsx("button",{type:"submit",disabled:C,className:"flex-1 btn-primary",children:C?"Saving...":g?"Update":"Create"})]})]})]})}),p&&O.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto animate-fade-in",children:O.jsxs("div",{className:"card w-full max-w-3xl my-8 animate-scale-in",children:[O.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-surface-100",children:[O.jsxs("div",{children:[O.jsx("h2",{className:"text-lg font-semibold text-surface-900",children:"Add Metrics"}),O.jsx("p",{className:"text-sm text-surface-500",children:null==g?void 0:g.name})]}),O.jsx("button",{onClick:P,className:"icon-btn",children:O.jsx(Ae,{className:"w-5 h-5"})})]}),O.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!g)return;const t=b.filter(e=>e.date);if(0!==t.length){x(!0);try{await M.ingestMetrics(g.id,t),S(),P()}catch(n){console.error("Failed to ingest metrics:",n)}finally{x(!1)}}},className:"p-6",children:[O.jsx("div",{className:"overflow-x-auto mb-4",children:O.jsxs("table",{className:"w-full text-sm",children:[O.jsx("thead",{children:O.jsxs("tr",{className:"border-b border-surface-200",children:[O.jsx("th",{className:"text-left py-2 px-2 font-medium text-surface-600",children:"Date"}),O.jsx("th",{className:"text-left py-2 px-2 font-medium text-surface-600",children:"Impressions"}),O.jsx("th",{className:"text-left py-2 px-2 font-medium text-surface-600",children:"Clicks"}),O.jsx("th",{className:"text-left py-2 px-2 font-medium text-surface-600",children:"Spend ($)"}),O.jsx("th",{className:"text-left py-2 px-2 font-medium text-surface-600",children:"Conversions"}),O.jsx("th",{})]})}),O.jsx("tbody",{children:b.map((e,t)=>O.jsxs("tr",{children:[O.jsx("td",{className:"py-2 px-2",children:O.jsx("input",{type:"date",value:e.date,onChange:e=>j(t,"date",e.target.value),className:"input py-1.5 text-sm",required:!0})}),O.jsx("td",{className:"py-2 px-2",children:O.jsx("input",{type:"number",value:e.impressions,onChange:e=>j(t,"impressions",e.target.value),className:"input py-1.5 text-sm",min:"0"})}),O.jsx("td",{className:"py-2 px-2",children:O.jsx("input",{type:"number",value:e.clicks,onChange:e=>j(t,"clicks",e.target.value),className:"input py-1.5 text-sm",min:"0"})}),O.jsx("td",{className:"py-2 px-2",children:O.jsx("input",{type:"number",value:e.spend,onChange:e=>j(t,"spend",e.target.value),className:"input py-1.5 text-sm",min:"0",step:"0.01"})}),O.jsx("td",{className:"py-2 px-2",children:O.jsx("input",{type:"number",value:e.conversions,onChange:e=>j(t,"conversions",e.target.value),className:"input py-1.5 text-sm",min:"0"})}),O.jsx("td",{className:"py-2 px-2",children:b.length>1&&O.jsx("button",{type:"button",onClick:()=>(e=>{b.length>1&&w(b.filter((t,n)=>n!==e))})(t),className:"icon-btn p-1 text-red-500",children:O.jsx(je,{className:"w-4 h-4"})})})]},t))})]})}),O.jsxs("button",{type:"button",onClick:()=>{w([...b,{date:"",impressions:0,clicks:0,spend:0,conversions:0}])},className:"text-sm text-primary-700 hover:text-primary-800 font-medium flex items-center gap-1 mb-4",children:[O.jsx(be,{className:"w-4 h-4"}),"Add Row"]}),O.jsxs("div",{className:"flex gap-3",children:[O.jsx("button",{type:"button",onClick:P,className:"flex-1 btn-secondary",children:"Cancel"}),O.jsx("button",{type:"submit",disabled:C,className:"flex-1 btn-primary",children:C?"Saving...":"Save Metrics"})]})]})]})})]})},DD={create:O.jsx(be,{className:"w-4 h-4 text-emerald-600"}),update:O.jsx(ve,{className:"w-4 h-4 text-amber-600"}),delete:O.jsx(Oe,{className:"w-4 h-4 text-red-600"})},MD=()=>{var e,t,n;const[o,i]=r.useState("logs"),[s,a]=r.useState([]),[l,c]=r.useState(null),[u,d]=r.useState([]),[h,p]=r.useState(!0),[f,g]=r.useState({page:1,totalPages:1,total:0}),[m,v]=r.useState({user_id:"",object_type:"",action:"",start_date:"",end_date:""});r.useEffect(()=>{y()},[o,f.page,m]);const y=async()=>{p(!0);try{if("logs"===o){const e=await M.getAuditLogs({page:f.page,limit:20,...m});a(e.data),g({page:e.pagination.page,totalPages:e.pagination.totalPages,total:e.pagination.total})}else if("stats"===o){const e=await M.getAuditStats();c(e)}else if("users"===o){const e=await M.getUsers();d(e.users)}}catch(e){console.error("Failed to load admin data:",e)}finally{p(!1)}},b=(e,t)=>{v({...m,[e]:t}),g({...f,page:1})},w=e=>{if(!e)return O.jsx("span",{className:"text-surface-400",children:"-"});let t=e;if("string"==typeof e)try{t=JSON.parse(e)}catch{return O.jsx("span",{className:"text-surface-400",children:"-"})}return O.jsx("pre",{className:"text-xs text-surface-600 bg-surface-50 p-2 rounded-lg overflow-x-auto max-w-md border border-surface-100",children:JSON.stringify(t,null,2)})},C=[{id:"logs",label:"Audit Logs",icon:oe},{id:"stats",label:"Statistics",icon:L},{id:"users",label:"Users",icon:Me}];return O.jsxs("div",{className:"max-w-6xl mx-auto animate-fade-in",children:[O.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[O.jsx("div",{className:"p-3 rounded-xl bg-primary-100",children:O.jsx(Se,{className:"w-6 h-6 text-primary-700"})}),O.jsxs("div",{children:[O.jsx("h1",{className:"text-xl font-bold text-surface-900",children:"Admin Panel"}),O.jsx("p",{className:"text-surface-500 text-sm",children:"Monitor user activity and system logs"})]})]}),O.jsx("div",{className:"flex gap-1 mb-6 border-b border-surface-200",children:C.map(e=>{const t=e.icon;return O.jsxs("button",{onClick:()=>{i(e.id),g({page:1,totalPages:1,total:0})},className:"flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 -mb-px transition-all "+(o===e.id?"border-primary-600 text-primary-700":"border-transparent text-surface-500 hover:text-surface-700 hover:border-surface-300"),children:[O.jsx(t,{className:"w-4 h-4"}),e.label]},e.id)})}),"logs"===o&&O.jsxs("div",{className:"card",children:[O.jsxs("div",{className:"flex flex-wrap gap-4 p-6 border-b border-surface-100",children:[O.jsxs("div",{children:[O.jsx("label",{className:"block text-xs text-surface-500 mb-1",children:"Object Type"}),O.jsxs("select",{value:m.object_type,onChange:e=>b("object_type",e.target.value),className:"input py-1.5 text-sm w-32",children:[O.jsx("option",{value:"",children:"All"}),O.jsx("option",{value:"project",children:"Project"}),O.jsx("option",{value:"mission",children:"Mission"}),O.jsx("option",{value:"task",children:"Task"}),O.jsx("option",{value:"comment",children:"Comment"}),O.jsx("option",{value:"campaign",children:"Campaign"})]})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-xs text-surface-500 mb-1",children:"Action"}),O.jsxs("select",{value:m.action,onChange:e=>b("action",e.target.value),className:"input py-1.5 text-sm w-28",children:[O.jsx("option",{value:"",children:"All"}),O.jsx("option",{value:"create",children:"Create"}),O.jsx("option",{value:"update",children:"Update"}),O.jsx("option",{value:"delete",children:"Delete"})]})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-xs text-surface-500 mb-1",children:"Start Date"}),O.jsx("input",{type:"date",value:m.start_date,onChange:e=>b("start_date",e.target.value),className:"input py-1.5 text-sm"})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-xs text-surface-500 mb-1",children:"End Date"}),O.jsx("input",{type:"date",value:m.end_date,onChange:e=>b("end_date",e.target.value),className:"input py-1.5 text-sm"})]})]}),h?O.jsx("div",{className:"flex items-center justify-center py-12",children:O.jsx("div",{className:"w-8 h-8 border-2 border-primary-200 border-t-primary-600 rounded-full animate-spin"})}):0===s.length?O.jsxs("div",{className:"text-center py-12",children:[O.jsx("div",{className:"w-12 h-12 rounded-full bg-surface-100 flex items-center justify-center mx-auto mb-3",children:O.jsx(oe,{className:"w-6 h-6 text-surface-400"})}),O.jsx("p",{className:"text-surface-500",children:"No audit logs found"})]}):O.jsxs(O.Fragment,{children:[O.jsx("div",{className:"overflow-x-auto",children:O.jsxs("table",{className:"w-full text-sm",children:[O.jsx("thead",{children:O.jsxs("tr",{className:"border-b border-surface-100 bg-surface-50",children:[O.jsx("th",{className:"text-left py-3 px-6 font-medium text-surface-600",children:"Time"}),O.jsx("th",{className:"text-left py-3 px-6 font-medium text-surface-600",children:"User"}),O.jsx("th",{className:"text-left py-3 px-6 font-medium text-surface-600",children:"Action"}),O.jsx("th",{className:"text-left py-3 px-6 font-medium text-surface-600",children:"Object"}),O.jsx("th",{className:"text-left py-3 px-6 font-medium text-surface-600",children:"Changes"})]})}),O.jsx("tbody",{children:s.map(e=>{return O.jsxs("tr",{className:"border-b border-surface-50 hover:bg-surface-50 transition-colors",children:[O.jsx("td",{className:"py-3 px-6",children:O.jsxs("div",{className:"flex items-center gap-2 text-surface-500",children:[O.jsx(Q,{className:"w-4 h-4"}),(t=e.created_at,new Date(t).toLocaleString())]})}),O.jsx("td",{className:"py-3 px-6",children:O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx(_e,{user:{name:e.user_name,email:e.user_email},size:"sm"}),O.jsxs("div",{children:[O.jsx("p",{className:"text-surface-900",children:e.user_name||"Unknown"}),O.jsx("p",{className:"text-xs text-surface-500",children:e.user_email})]})]})}),O.jsx("td",{className:"py-3 px-6",children:O.jsxs("div",{className:"flex items-center gap-2",children:[DD[e.action],O.jsx("span",{className:"text-surface-700 capitalize",children:e.action})]})}),O.jsxs("td",{className:"py-3 px-6",children:[O.jsx("span",{className:"badge badge-default capitalize",children:e.object_type}),O.jsxs("span",{className:"text-xs text-surface-500 ml-2",children:["#",e.object_id]})]}),O.jsx("td",{className:"py-3 px-6",children:w(e.changes)})]},e.id);var t})})]})}),O.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-surface-100",children:[O.jsxs("p",{className:"text-sm text-surface-500",children:["Showing ",s.length," of ",f.total," logs"]}),O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("button",{onClick:()=>g({...f,page:f.page-1}),disabled:f.page<=1,className:"icon-btn disabled:opacity-50 disabled:cursor-not-allowed",children:O.jsx(X,{className:"w-5 h-5"})}),O.jsxs("span",{className:"text-sm text-surface-600",children:["Page ",f.page," of ",f.totalPages]}),O.jsx("button",{onClick:()=>g({...f,page:f.page+1}),disabled:f.page>=f.totalPages,className:"icon-btn disabled:opacity-50 disabled:cursor-not-allowed",children:O.jsx(Y,{className:"w-5 h-5"})})]})]})]})]}),"stats"===o&&O.jsx("div",{className:"space-y-6",children:h?O.jsx("div",{className:"flex items-center justify-center py-12",children:O.jsx("div",{className:"w-8 h-8 border-2 border-primary-200 border-t-primary-600 rounded-full animate-spin"})}):l&&O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"card p-6",children:[O.jsx("h3",{className:"font-semibold text-surface-900 mb-4",children:"Most Active Users (Last 7 Days)"}),O.jsx("div",{className:"space-y-2",children:null==(e=l.top_users)?void 0:e.map((e,t)=>O.jsxs("div",{className:"flex items-center justify-between p-3 bg-surface-50 rounded-lg",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsxs("span",{className:"text-lg font-bold text-surface-400 w-6",children:["#",t+1]}),O.jsx(_e,{user:e,size:"md"}),O.jsxs("div",{children:[O.jsx("p",{className:"font-medium text-surface-900 text-sm",children:e.name}),O.jsx("p",{className:"text-xs text-surface-500",children:e.email})]})]}),O.jsxs("div",{className:"text-right",children:[O.jsx("p",{className:"font-bold text-surface-900",children:e.action_count}),O.jsx("p",{className:"text-xs text-surface-500",children:"actions"})]})]},e.id))})]}),O.jsxs("div",{className:"card p-6",children:[O.jsx("h3",{className:"font-semibold text-surface-900 mb-4",children:"Actions by Type"}),O.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:null==(t=l.by_action)?void 0:t.map(e=>O.jsxs("div",{className:"bg-surface-50 p-4 rounded-lg border border-surface-100",children:[O.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[DD[e.action],O.jsx("span",{className:"text-sm text-surface-700 capitalize",children:e.action})]}),O.jsx("p",{className:"text-xs text-surface-500 capitalize",children:e.object_type}),O.jsx("p",{className:"text-xl font-bold text-surface-900 mt-1",children:e.count})]},`${e.action}-${e.object_type}`))})]}),O.jsxs("div",{className:"card p-6",children:[O.jsx("h3",{className:"font-semibold text-surface-900 mb-4",children:"Daily Activity (Last 7 Days)"}),O.jsx("div",{className:"flex items-end gap-2 h-32",children:null==(n=l.daily_activity)?void 0:n.map(e=>{const t=Math.max(...l.daily_activity.map(e=>e.count)),n=t>0?e.count/t*100:0;return O.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2",children:[O.jsx("div",{className:"w-full bg-primary-600 rounded-t-md transition-all duration-300",style:{height:`${n}%`,minHeight:"4px"}}),O.jsx("span",{className:"text-xs text-surface-500",children:new Date(e.date).toLocaleDateString("en-US",{weekday:"short"})}),O.jsx("span",{className:"text-xs font-medium text-surface-700",children:e.count})]},e.date)})})]})]})}),"users"===o&&O.jsxs("div",{className:"card",children:[O.jsx("div",{className:"px-6 py-4 border-b border-surface-100",children:O.jsx("h3",{className:"font-semibold text-surface-900",children:"All Users"})}),h?O.jsx("div",{className:"flex items-center justify-center py-12",children:O.jsx("div",{className:"w-8 h-8 border-2 border-primary-200 border-t-primary-600 rounded-full animate-spin"})}):O.jsx("div",{className:"overflow-x-auto",children:O.jsxs("table",{className:"w-full text-sm",children:[O.jsx("thead",{children:O.jsxs("tr",{className:"border-b border-surface-100 bg-surface-50",children:[O.jsx("th",{className:"text-left py-3 px-6 font-medium text-surface-600",children:"User"}),O.jsx("th",{className:"text-left py-3 px-6 font-medium text-surface-600",children:"Email"}),O.jsx("th",{className:"text-left py-3 px-6 font-medium text-surface-600",children:"Role"}),O.jsx("th",{className:"text-left py-3 px-6 font-medium text-surface-600",children:"Joined"})]})}),O.jsx("tbody",{children:u.map(e=>O.jsxs("tr",{className:"border-b border-surface-50 hover:bg-surface-50 transition-colors",children:[O.jsx("td",{className:"py-3 px-6",children:O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx(_e,{user:e,size:"md"}),O.jsx("span",{className:"text-surface-900",children:e.name})]})}),O.jsx("td",{className:"py-3 px-6 text-surface-600",children:e.email}),O.jsx("td",{className:"py-3 px-6",children:O.jsx("span",{className:"badge capitalize "+("admin"===e.role?"badge-warning":"badge-default"),children:e.role})}),O.jsx("td",{className:"py-3 px-6 text-surface-600",children:new Date(e.created_at).toLocaleDateString()})]},e.id))})]})})]})]})};let AD=0;const ND=()=>{const[e,t]=r.useState([]),n=r.useCallback((e,n="info",r=3e3)=>{const o=++AD,i={id:o,message:e,type:n,duration:r};return t(e=>[...e,i]),o},[]),o=r.useCallback(e=>{t(t=>t.filter(t=>t.id!==e))},[]),i=r.useCallback((e,t)=>n(e,"success",t),[n]),s=r.useCallback((e,t)=>n(e,"error",t),[n]),a=r.useCallback((e,t)=>n(e,"info",t),[n]);return{toasts:e,addToast:n,removeToast:o,success:i,error:s,info:a}},TD=({message:e,type:t="info",onClose:n,duration:o=3e3})=>{r.useEffect(()=>{if(o>0){const e=setTimeout(()=>{n()},o);return()=>clearTimeout(e)}},[o,n]);const i={success:U,error:B,info:ae},s=i[t]||i.info;return O.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-lg border shadow-elevated animate-slide-down ${{success:"bg-emerald-50 text-emerald-700 border-emerald-200",error:"bg-red-50 text-red-700 border-red-200",info:"bg-primary-50 text-primary-700 border-primary-200"}[t]}`,role:"alert",children:[O.jsx(s,{className:"w-5 h-5 flex-shrink-0"}),O.jsx("p",{className:"text-sm font-medium flex-1",children:e}),O.jsx("button",{onClick:n,className:"flex-shrink-0 p-1 rounded hover:bg-black/10 transition-colors","aria-label":"Close",children:O.jsx(Ae,{className:"w-4 h-4"})})]})},FD=({toasts:e,removeToast:t})=>O.jsx("div",{className:"fixed top-4 right-4 z-50 flex flex-col gap-2 max-w-md",children:e.map(e=>O.jsx(TD,{message:e.message,type:e.type,onClose:()=>t(e.id),duration:e.duration},e.id))});var ID=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,n){const r=t?this.allAsyncListeners:this.allSyncListeners;let o=r.get(e);return!o&&n&&(o=new Set,r.set(e,o)),o}noRegisteredListenersExist(){return 0===this.allSyncListeners.size&&0===this.allAsyncListeners.size&&0===this.globalSyncListeners.size&&0===this.globalAsyncListeners.size}addEventListener(e,t,n=!1){this.getListeners(e,n,!0).add(t)}removeEventListener(e,t,n=!1){const r=this.getListeners(e,n,!1);r&&(r.delete(t),0===r.size&&(n?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){this.getGlobalListeners(t).add(e)}removeGlobalListener(e,t=!1){this.getGlobalListeners(t).delete(e)}dispatchEvent(e){this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){const n=e.type;if(t&&"event"in e){const t=e.event;t instanceof Event&&(e.eventPath=t.composedPath())}const{frameworkOverrides:r}=this,o=e=>{const n=r?()=>r.wrapIncoming(e):e;t?this.dispatchAsync(n):n()},i=this.getListeners(n,t,!1);if(((null==i?void 0:i.size)??0)>0){const t=new Set(i);for(const n of t)(null==i?void 0:i.has(n))&&o(()=>n(e))}const s=this.getGlobalListeners(t);if(s.size>0){const t=new Set(s);for(const r of t)o(()=>r(n,e))}}getGlobalListeners(e){return e?this.globalAsyncListeners:this.globalSyncListeners}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const e=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(e):e(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[];for(const t of e)t()}};function LD(e){return null==e||""===e?null:e}function BD(e){return null!=e&&""!==e}function HD(e){return!BD(e)}function _D(e){return null!=e&&"function"==typeof e.toString?e.toString():null}function GD(e,t,n=!1){const r=null==e,o=null==t;if((null==e?void 0:e.toNumber)&&(e=e.toNumber()),(null==t?void 0:t.toNumber)&&(t=t.toNumber()),r&&o)return 0;if(r)return-1;if(o)return 1;function i(e,t){return e>t?1:e<t?-1:0}if("string"!=typeof e)return i(e,t);if(!n)return i(e,t);try{return e.localeCompare(t)}catch(s){return i(e,t)}}var VD=/[&<>"']/g,WD={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function zD(e){return(null==e?void 0:e.toString().toString())??null}function $D(e){var t;return(null==(t=zD(e))?void 0:t.replace(VD,e=>WD[e]))??null}function UD(e){return e.eRootDiv.getRootNode()}function KD(e){return UD(e).activeElement}function qD(e){const{gos:t,eRootDiv:n}=e;let r=null;const o=t.get("getDocument");return o&&BD(o)?r=o():n&&(r=n.ownerDocument),r&&BD(r)?r:document}function XD(e){return qD(e).defaultView||window}function YD(e){let t=null,n=null;try{t=qD(e).fullscreenElement}catch(r){}finally{t||(t=UD(e));const r=t.querySelector("body");n=r||(t instanceof ShadowRoot?t:t instanceof Document?null==t?void 0:t.documentElement:t)}return n}function ZD(e,t,n){null==n||"string"==typeof n&&""==n?QD(e,t):JD(e,t,n)}function JD(e,t,n){e.setAttribute(eM(t),n.toString())}function QD(e,t){e.removeAttribute(eM(t))}function eM(e){return`aria-${e}`}function tM(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function nM(e,t){ZD(e,"label",t)}function rM(e,t){ZD(e,"labelledby",t)}function oM(e,t){ZD(e,"live",t)}function iM(e,t){ZD(e,"invalid",t)}function sM(e,t){ZD(e,"hidden",t)}function aM(e,t){JD(e,"colindex",t)}var lM="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function cM(e){if(!e)return!1;if(!e.matches("input, select, button, textarea"))return!1;return!!e.matches(lM)&&CM(e)}function uM(e,t,n={}){const{skipAriaHidden:r}=n;e.classList.toggle("ag-hidden",!t),r||sM(e,!t)}function dM(e,t){const n="disabled",r=t?e=>e.setAttribute(n,""):e=>e.removeAttribute(n);r(e);const o=e.querySelectorAll("input")??[];for(const i of o)r(i)}function hM(e,t,n){let r=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,"number"==typeof n){if(++r>n)break}else if(e===n)break}return!1}function pM(e){const{height:t,width:n,borderTopWidth:r,borderRightWidth:o,borderBottomWidth:i,borderLeftWidth:s,paddingTop:a,paddingRight:l,paddingBottom:c,paddingLeft:u,marginTop:d,marginRight:h,marginBottom:p,marginLeft:f,boxSizing:g}=window.getComputedStyle(e),m=Number.parseFloat;return{height:m(t||"0"),width:m(n||"0"),borderTopWidth:m(r||"0"),borderRightWidth:m(o||"0"),borderBottomWidth:m(i||"0"),borderLeftWidth:m(s||"0"),paddingTop:m(a||"0"),paddingRight:m(l||"0"),paddingBottom:m(c||"0"),paddingLeft:m(u||"0"),marginTop:m(d||"0"),marginRight:m(h||"0"),marginBottom:m(p||"0"),marginLeft:m(f||"0"),boxSizing:g}}function fM(e){const t=pM(e);return"border-box"===t.boxSizing?t.height-t.paddingTop-t.paddingBottom-t.borderTopWidth-t.borderBottomWidth:t.height}function gM(e){const t=pM(e);return"border-box"===t.boxSizing?t.width-t.paddingLeft-t.paddingRight-t.borderLeftWidth-t.borderRightWidth:t.width}function mM(e,t){let n=e.scrollLeft;return t&&(n=Math.abs(n)),n}function vM(e,t,n){n&&(t*=-1),e.scrollLeft=t}function yM(e){for(;null==e?void 0:e.firstChild;)e.firstChild.remove()}function bM(e){(null==e?void 0:e.parentNode)&&e.remove()}function wM(e){return!!e.offsetParent}function CM(e){if(e.checkVisibility)return e.checkVisibility({checkVisibilityCSS:!0});return!(!wM(e)||"visible"!==window.getComputedStyle(e).visibility)}function xM(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function SM(e,t){"flex"===t?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):kM(e,t)}function kM(e,t){t=jM(t),e.style.width=t,e.style.maxWidth=t,e.style.minWidth=t}function PM(e,t){t=jM(t),e.style.height=t,e.style.maxHeight=t,e.style.minHeight=t}function jM(e){return"number"==typeof e?`${e}px`:e}function OM(e){return e instanceof Node||e instanceof HTMLElement}function RM(e,t,n){null==n||""===n?e.removeAttribute(t):e.setAttribute(t,n.toString())}function EM(e,t,n){const r=XD(e).ResizeObserver,o=r?new r(n):null;return null==o||o.observe(t),()=>null==o?void 0:o.disconnect()}function DM(e,t){const n=XD(e);n.requestAnimationFrame?n.requestAnimationFrame(t):n.webkitRequestAnimationFrame?n.webkitRequestAnimationFrame(t):n.setTimeout(t,0)}var MM,AM="data-ref";function NM(){return MM??(MM=document.createTextNode(" ")),MM.cloneNode()}function TM(e){const{attrs:t,children:n,cls:r,ref:o,role:i,tag:s}=e,a=document.createElement(s);if(r&&(a.className=r),o&&a.setAttribute(AM,o),i&&a.setAttribute("role",i),t)for(const l of Object.keys(t))a.setAttribute(l,t[l]);if(n)if("string"==typeof n)a.textContent=n;else{let e=!0;for(const t of n)t&&("string"==typeof t?(a.appendChild(document.createTextNode(t)),e=!1):"function"==typeof t?a.appendChild(t()):(e&&(a.appendChild(NM()),e=!1),a.append(TM(t)),a.appendChild(NM())))}return a}var FM=["touchstart","touchend","touchmove","touchcancel","scroll"],IM=["wheel"],LM={},BM=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return t=>{if("boolean"==typeof LM[t])return LM[t];const n=document.createElement(e[t]||"div");return LM[t="on"+t]=t in n}})();var HM=e=>{const t=FM.includes(e),n=IM.includes(e);return!!t||!n&&void 0};function _M(e,t,n){if(0===n)return!1;const r=Math.abs(e.clientX-t.clientX),o=Math.abs(e.clientY-t.clientY);return Math.max(r,o)<=n}var GM=(e,t)=>{const n=e.identifier;for(let r=0,o=t.length;r<o;++r){const e=t[r];if(e.identifier===n)return e}return null};function VM(e,t){return e.gos.isElementInThisInstance(t.target)}function WM(e,t,n){const r=e.getBoundingClientRect().height,o=function(e){const t=YD(e);return(null==t?void 0:t.clientWidth)??(window.innerWidth||-1)}(n)-2,i=function(e){const t=YD(e);return(null==t?void 0:t.clientHeight)??(window.innerHeight||-1)}(n)-2;if(!e.offsetParent)return;const s=function(e){const t=e.getBoundingClientRect(),{borderTopWidth:n,borderLeftWidth:r,borderRightWidth:o,borderBottomWidth:i}=pM(e);return{top:t.top+(n||0),left:t.left+(r||0),right:t.right+(o||0),bottom:t.bottom+(i||0)}}(e.offsetParent),{clientY:a,clientX:l}=t;let c=a-s.top-r/2,u=l-s.left-10;const d=qD(n),h=d.defaultView||window,p=h.pageYOffset||d.documentElement.scrollTop,f=h.pageXOffset||d.documentElement.scrollLeft;o>0&&u+e.clientWidth>o+f&&(u=o+f-e.clientWidth),u<0&&(u=0),i>0&&c+e.clientHeight>i+p&&(c=i+p-e.clientHeight),c<0&&(c=0),e.style.left=`${u}px`,e.style.top=`${c}px`}var zM=(e,...t)=>{for(const n of t){const[t,r,o,i]=n;t.addEventListener(r,o,i),e.push(n)}},$M=e=>{if(e){for(const[t,n,r,o]of e)t.removeEventListener(n,r,o);e.length=0}},UM=e=>{e.cancelable&&e.preventDefault()};function KM(e,t){return t}function qM(e){return(null==e?void 0:e.getLocaleTextFunc())??KM}var XM=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.beans=e,this.stubContext=e.context,this.eventSvc=e.eventSvc,this.gos=e.gos}destroy(){const{destroyFunctions:e}=this;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,n){this.localEventService||(this.localEventService=new ID),this.localEventService.addEventListener(e,t,n)}removeEventListener(e,t,n){var r;null==(r=this.localEventService)||r.removeEventListener(e,t,n)}dispatchLocalEvent(e){var t;null==(t=this.localEventService)||t.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventSvc,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const n=[];for(const r of Object.keys(t)){const o=t[r];o&&n.push(this._setupListener(e,r,o))}return n}_setupListener(e,t,n){if(this.destroyed)return()=>null;let r;if(function(e){return void 0!==e.__addEventListener}(e))e.__addEventListener(t,n),r=()=>(e.__removeEventListener(t,n),null);else{const o=function(e){return"global"===e.eventServiceType}(e);e instanceof HTMLElement?function(e,t,n){const r=HM(t);let o;null!=r&&(o={passive:r}),e.addEventListener(t,n,o)}(e,t,n):o?e.addListener(t,n):e.addEventListener(t,n),r=o?()=>(e.removeListener(t,n),null):()=>(e.removeEventListener(t,n),null)}return this.destroyFunctions.push(r),()=>(r(),this.destroyFunctions=this.destroyFunctions.filter(e=>e!==r),null)}setupPropertyListener(e,t){const{gos:n}=this;n.addPropertyEventListener(e,t);const r=()=>(n.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(r),()=>(r(),this.destroyFunctions=this.destroyFunctions.filter(e=>e!==r),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupPropertyListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const n=e.join("-")+this.propertyListenerId++,r=e=>{if(e.changeSet){if(e.changeSet&&e.changeSet.id===this.lastChangeSetIdLookup[n])return;this.lastChangeSetIdLookup[n]=e.changeSet.id}const r={type:"propertyChanged",changeSet:e.changeSet,source:e.source};t(r)};for(const o of e)this.setupPropertyListener(o,r)}getLocaleTextFunc(){return qM(this.beans.localeSvc)}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createOptionalManagedBean(e,t){return e?this.createManagedBean(e,t):void 0}createManagedBean(e,t){const n=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),n}createBean(e,t,n){return(t||this.stubContext).createBean(e,n)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};var YM=class extends XM{},ZM={};function JM(e,t){ZM[t]||(e(),ZM[t]=!0)}var QM={pending:!1,funcs:[]},eA={pending:!1,funcs:[]};function tA(e,t="setTimeout",n){const r="raf"===t?eA:QM;if(r.funcs.push(e),r.pending)return;r.pending=!0;const o=()=>{const e=r.funcs.slice();r.funcs.length=0,r.pending=!1;for(const t of e)t()};"raf"===t?DM(n,o):window.setTimeout(o,0)}function nA(e,t,n){let r;return function(...o){const i=this;window.clearTimeout(r),r=window.setTimeout(function(){e.isAlive()&&t.apply(i,o)},n)}}function rA(e,t){let n=0;return function(...r){const o=Date.now();o-n<t||(n=o,e.apply(this,r))}}var oA=new Set(["__proto__","constructor","prototype"]);function iA(e,t,n=!0,r=!1){BD(t)&&function(e,t){if(null!=e)if(Array.isArray(e))for(let n=0;n<e.length;n++)t(n.toString(),e[n]);else for(const n of Object.keys(e).filter(e=>!oA.has(e)))t(n,e[n])}(t,(t,o)=>{let i=e[t];if(i!==o){if(r){if(null==i&&null!=o){"object"==typeof o&&o.constructor===Object&&(i={},e[t]=i)}}sA(o)&&sA(i)&&!Array.isArray(i)?iA(i,o,n,r):(n||void 0!==o)&&(e[t]=o)}})}function sA(e){return"object"==typeof e&&null!==e}var aA=class e{static applyGlobalGridOptions(t){if(!e.gridOptions)return{...t};let n={};return iA(n,e.gridOptions,!0,!0),"deep"===e.mergeStrategy?iA(n,t,!0,!0):n={...n,...t},e.gridOptions.context&&(n.context=e.gridOptions.context),t.context&&("deep"===e.mergeStrategy&&n.context&&iA(t.context,n.context,!0,!0),n.context=t.context),n}static applyGlobalGridOption(t,n){if("deep"===e.mergeStrategy){const r=cA(t);if(r&&"object"==typeof r&&"object"==typeof n)return e.applyGlobalGridOptions({[t]:n})[t]}return n}};aA.gridOptions=void 0,aA.mergeStrategy="shallow";var lA=aA;function cA(e){var t;return null==(t=lA.gridOptions)?void 0:t[e]}var uA={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"\t",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,cellFlashDuration:500,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,rowDragInsertDelay:500,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1,rowNumbers:!1,enableFilterHandlers:!1},dA="https://www.ag-grid.com";function hA(e,t,...n){e.get("debug")&&console.log("AG Grid: "+t,...n)}function pA(e,...t){JM(()=>console.warn("AG Grid: "+e,...t),e+(null==t?void 0:t.join("")))}function fA(e,...t){JM(()=>console.error("AG Grid: "+e,...t),e+(null==t?void 0:t.join("")))}var gA,mA=new Set,vA={},yA={},bA=!1,wA=!1;function CA(e){var t;gA||(gA=e.version);const n=e=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${e} Please update all modules to the same version.`;e.version?function(e){const[t,n]=e.version.split(".")||[],[r,o]=gA.split(".")||[];return t===r&&n===o}(e)||fA(n(`'${e.moduleName}' is version ${e.version} but the other modules are version ${gA}.`)):fA(n(`'${e.moduleName}' is incompatible.`));const r=null==(t=e.validate)?void 0:t.call(e);r&&!r.isValid&&fA(`${r.message}`)}function xA(e,t,n=!1){n||(bA=!0),CA(e);const r=e.rowModels??["all"];let o;mA.add(e),void 0!==t?(wA=!0,void 0===yA[t]&&(yA[t]={}),o=yA[t]):o=vA;for(const i of r)void 0===o[i]&&(o[i]={}),o[i][e.moduleName]=e;if(e.dependsOn)for(const i of e.dependsOn)xA(i,t,n)}function SA(e,t,n){const r=n=>{var r,o,i;return!!(null==(r=vA[n])?void 0:r[e])||!!(null==(i=null==(o=yA[t])?void 0:o[n])?void 0:i[e])};return r(n)||r("all")}function kA(){return wA}var PA="34.3.1",jA="_version_",OA=`${dA}/javascript-data-grid`;function RA(e,t,n){return[NA(e,t,n)]}function EA(e,t,n,r,o){e(`${r?"warning":"error"} #${t}`,...RA(t,n,o))}function DA(e){let t=e;return e instanceof Error?t=e.toString():"object"==typeof e&&(t=function(e){if(!e)return String(e);const t={};for(const n of Object.keys(e))"object"!=typeof e[n]&&"function"!=typeof e[n]&&(t[n]=e[n]);return JSON.stringify(t)}(e)),t}function MA(e,t){return`${e}?${t.toString()}`}function AA(e,t){const n=new URLSearchParams;if(n.append(jA,PA),t)for(const i of Object.keys(t))n.append(i,DA(t[i]));const r=`${OA}/errors/${e}`,o=MA(r,n);return o.length<=2e3?o:function(e,t,n){const r=Array.from(t.entries()).sort((e,t)=>t[1].length-e[1].length);let o=MA(e,t);for(const[i,s]of r){if(i===jA)continue;const r=o.length-n;if(r<=0)break;const a="...",l=r+a.length,c=s.length-l>100?s.slice(0,s.length-l)+a:s.slice(0,100)+a;t.set(i,c),o=MA(e,t)}return o}(r,n,2e3)}var NA=(e,t,n)=>`${`${n?n+" \n":""}Visit ${AA(e,t)}`}${n?"":" \n  Alternatively register the ValidationModule to see the full message in the console."}`;function TA(...e){EA(pA,e[0],e[1],!0)}function FA(...e){EA(fA,e[0],e[1],!1)}function IA(e,t,n){EA(fA,e,t,!1,n)}function LA(...e){return function(e,t){const n=t[0];return`error #${n} `+RA(n,t[1],e).join(" ")}(void 0,e)}function BA(e,t){return e.get("rowModelType")===t}function HA(e,t){return BA(e,"clientSide")}function _A(e,t){return BA(e,"serverSide")}function GA(e,t){return e.get("domLayout")===t}function VA(e){return void 0!==function(e){const t="beanName"in e&&"gos"===e.beanName?e.get("rowSelection"):e.rowSelection;if("string"==typeof t)switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}switch(null==t?void 0:t.mode){case"multiRow":case"singleRow":return t.mode;default:return}}(e)}function WA(e){return"function"==typeof e.get("getRowHeight")}function zA(e,t,n=!1,r){const{gos:o,environment:i}=e;if(null==r&&(r=i.getDefaultRowHeight()),WA(o)){if(n)return{height:r,estimated:!0};const e={node:t,data:t.data},i=o.getCallback("getRowHeight")(e);if(UA(i))return 0===i&&TA(23),{height:Math.max(1,i),estimated:!1}}if(t.detail&&o.get("masterDetail"))return function(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const t=e.get("detailRowHeight");if(UA(t))return{height:t,estimated:!1};return{height:300,estimated:!1}}(o);const s=o.get("rowHeight");return{height:s&&UA(s)?s:r,estimated:!1}}function $A(e){const{environment:t,gos:n}=e,r=n.get("rowHeight");if(!r||HD(r))return t.getDefaultRowHeight();const o=t.refreshRowHeightVariable();return-1!==o?o:(TA(24),t.getDefaultRowHeight())}function UA(e){return!isNaN(e)&&"number"==typeof e&&isFinite(e)}function KA(e,t,n){const r=t[e.getDomDataKey()];return r?r[n]:void 0}function qA(e,t,n,r){const o=e.getDomDataKey();let i=t[o];HD(i)&&(i={},t[o]=i),i[n]=r}function XA(e){return!e.get("ensureDomOrder")&&e.get("animateRows")}function YA(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||GA(e,"print"))}function ZA(e){const t=e.get("autoGroupColumnDef");return!(null==t?void 0:t.comparator)&&!e.get("treeData")}function JA(e,t){return!t&&"groupRows"===e.get("groupDisplayType")}function QA(e){const t=e.get("cellSelection");return void 0!==t?!!t:e.get("enableRangeSelection")}function eN(e,t=!0){const n=e.get("rowSelection");return"object"!=typeof n?t?"all":void 0:"multiRow"===n.mode?n.selectAll:"all"}function tN(e){return"legacy"===e.get("columnMenu")}function nN(e,t){return e.addCommon(t)}function rN(e,t){var n;return e[t]??(null==(n=e.gridOptions)?void 0:n[t])??cA(t)??uA[t]}function oN({gos:e},t){return 2===t.button||t.ctrlKey&&e.get("allowContextMenuWithControlKey")}var iN={resizable:!0,sortable:!0},sN=0;function aN(){return sN++}function lN(e){return e instanceof cN}var cN=class extends YM{constructor(e,t,n,r){super(),this.colDef=e,this.userProvidedColDef=t,this.colId=n,this.primary=r,this.isColumn=!0,this.instanceId=aN(),this.autoHeaderHeight=null,this.moving=!1,this.resizing=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.colEventSvc=new ID,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.flex=null,this.colIdSanitised=$D(n)}destroy(){var e;super.destroy(),null==(e=this.beans.rowSpanSvc)||e.deregister(this)}getInstanceId(){return this.instanceId}setState(){const{colDef:e,beans:{sortSvc:t,pinnedCols:n,colFlex:r}}=this;null==t||t.initCol(this);const o=e.hide;this.visible=void 0!==o?!o:!e.initialHide,null==n||n.initCol(this),null==r||r.initCol(this)}setColDef(e,t,n){var r;const o=e.spanRows!==this.colDef.spanRows;this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),o&&(null==(r=this.beans.rowSpanSvc)||r.deregister(this),this.initRowSpan()),this.dispatchColEvent("colDefChanged",n)}getUserProvidedColDef(){return this.userProvidedColDef}getParent(){return this.parent}getOriginalParent(){return this.originalParent}postConstruct(){this.setState(),this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.initRowSpan(),this.addPivotListener()}initDotNotation(){const{gos:e,colDef:{field:t,tooltipField:n}}=this,r=e.get("suppressFieldDotNotation");this.fieldContainsDots=BD(t)&&t.includes(".")&&!r,this.tooltipFieldContainsDots=BD(n)&&n.includes(".")&&!r}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=e.minWidth??this.beans.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){var e;null==(e=this.beans.tooltipSvc)||e.initCol(this)}initRowSpan(){var e;this.colDef.spanRows&&(null==(e=this.beans.rowSpanSvc)||e.register(this))}addPivotListener(){const e=this.beans.pivotColDefSvc,t=this.colDef.pivotValueColumn;e&&t&&this.addManagedListeners(t,{colDefChanged:t=>{const n=e.recreateColDef(this.colDef);this.setColDef(n,n,t.source)}})}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t;const n=e.width,r=e.initialWidth;return t=null!=n?n:null!=r?r:200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){var t;return(null==(t=this.beans.showRowGroupCols)?void 0:t.isRowGroupDisplayed(this,e))??!1}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}__addEventListener(e,t){this.colEventSvc.addEventListener(e,t)}__removeEventListener(e,t){this.colEventSvc.removeEventListener(e,t)}addEventListener(e,t){var n,r,o;this.frameworkEventListenerService=null==(r=(n=this.beans.frameworkOverrides).createLocalEventListenerWrapper)?void 0:r.call(n,this.frameworkEventListenerService,this.colEventSvc);const i=(null==(o=this.frameworkEventListenerService)?void 0:o.wrap(e,t))??t;this.colEventSvc.addEventListener(e,i)}removeEventListener(e,t){var n;const r=(null==(n=this.frameworkEventListenerService)?void 0:n.unwrap(e,t))??t;this.colEventSvc.removeEventListener(e,r)}createColumnFunctionCallbackParams(e){return nN(this.gos,{node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){var t;return(null==(t=this.beans.cellNavigation)?void 0:t.isSuppressNavigable(this,e))??!1}isCellEditable(e){var t;return(null==(t=this.beans.editSvc)?void 0:t.isCellEditable({rowNode:e,column:this}))??!1}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){var t;return(null==(t=this.beans.selectionSvc)?void 0:t.isCellCheckboxSelection(this,e))??!1}isSuppressPaste(e){var t;return this.isColumnFunc(e,(null==(t=this.colDef)?void 0:t.suppressPaste)??null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??iN[e]}isColumnFunc(e,t){if("boolean"==typeof t)return t;if("function"==typeof t){return t(this.createColumnFunctionCallbackParams(e))}return!1}createColumnEvent(e,t){return nN(this.gos,{type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return"asc"===this.sort}isSortDescending(){return"desc"===this.sort}isSortNone(){return HD(this.sort)}isSorting(){return BD(this.sort)}getSortIndex(){return this.sortIndex}isMenuVisible(){return this.menuVisible}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchColEvent("leftChanged",t))}isFilterActive(){return this.filterActive}isHovered(){var e;return TA(261),!!(null==(e=this.beans.colHover)?void 0:e.isHovered(this))}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.dispatchColEvent("firstRightPinnedChanged",t))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.dispatchColEvent("lastLeftPinnedChanged",t))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return"left"===this.pinned||"right"===this.pinned}isPinnedLeft(){return"left"===this.pinned}isPinnedRight(){return"right"===this.pinned}getPinned(){return this.pinned}setVisible(e,t){const n=!0===e;this.visible!==n&&(this.visible=n,this.dispatchColEvent("visibleChanged",t)),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getFirstRealParent(){let e=this.getOriginalParent();for(;null==e?void 0:e.isPadding();)e=e.getOriginalParent();return e}getColumnGroupPaddingInfo(){let e=this.getParent();if(!(null==e?void 0:e.isPadding()))return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let n=!0;for(;e;){if(!e.isPadding()){n=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:n}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return nN(this.gos,{node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(HD(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),n=this.colDef.colSpan(t);return Math.max(n,1)}getRowSpan(e){if(HD(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),n=this.colDef.rowSpan(t);return Math.max(n,1)}setActualWidth(e,t,n=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,null!=this.flex&&"flex"!==t&&"gridInitializing"!==t&&(this.flex=null),n||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.dispatchColEvent("widthChanged",e)}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex}isRowGroupActive(){return this.rowGroupActive}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}isValueActive(){return this.aggregationActive}isAllowPivot(){return!0===this.colDef.enablePivot}isAllowValue(){return!0===this.colDef.enableValue}isAllowRowGroup(){return!0===this.colDef.enableRowGroup}dispatchColEvent(e,t,n){const r=this.createColumnEvent(e,t);n&&iA(r,n),this.colEventSvc.dispatchEvent(r)}dispatchStateUpdatedEvent(e){this.colEventSvc.dispatchEvent({type:"columnStateUpdated",key:e})}};function uN(e){return e instanceof dN}var dN=class extends YM{constructor(e,t,n,r){super(),this.colGroupDef=e,this.groupId=t,this.padding=n,this.level=r,this.isColumn=!1,this.expandable=!1,this.instanceId=aN(),this.expandableListenerRemoveCallback=null,this.expanded=!!(null==e?void 0:e.openByDefault)}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return!!this.children&&this.children.some(e=>e.isVisible())}isPadding(){return this.padding}setExpanded(e){this.expanded=void 0!==e&&e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}forEachLeafColumn(e){if(this.children)for(const t of this.children)lN(t)?e(t):uN(t)&&t.forEachLeafColumn(e)}addLeafColumns(e){if(this.children)for(const t of this.children)lN(t)?e.push(t):uN(t)&&t.addLeafColumns(e)}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);for(const t of this.getLeafColumns())t.__addEventListener("visibleChanged",e);this.expandableListenerRemoveCallback=()=>{for(const t of this.getLeafColumns())t.__removeEventListener("visibleChanged",e);this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,n=!1;const r=this.findChildrenRemovingPadding();for(let i=0,s=r.length;i<s;i++){const o=r[i];if(!o.isVisible())continue;const s=o.getColumnGroupShow();"open"===s?(e=!0,n=!0):"closed"===s?(t=!0,n=!0):(e=!0,t=!0)}const o=e&&t&&n;this.expandable!==o&&(this.expandable=o,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=n=>{for(const r of n){uN(r)&&r.isPadding()?t(r.children):e.push(r)}};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},hN={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function pN(e,t,n){const r={},o=e.gos;return Object.assign(r,o.get("defaultColGroupDef")),Object.assign(r,t),o.validateColDef(r,n),r}var fN=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=_D(e);let n=0;for(;;){let r=e??t;if(r?0!==n&&(r+="_"+n):r=n,!this.existingKeys[r]){const t=String(r);return e&&n>0&&TA(273,{providedId:e,usedId:t}),this.existingKeys[t]=!0,t}n++}}};function gN(e){if(null==e?void 0:e.length)return e[e.length-1]}function mN(e,t,n){if(e===t)return!0;if(!e||!t)return null==e&&null==t;const r=e.length;if(r!==t.length)return!1;for(let o=0;o<r;o++)if(e[o]!==t[o])return!1;return!0}function vN(e,t){if(e)for(const n of e)t(n)}function yN(e,t){const n=e.indexOf(t);n>=0&&e.splice(n,1)}function bN(e,t,n){for(let r=0;r<t.length;r++)yN(e,t[r]);for(let r=t.length-1;r>=0;r--)e.splice(n,0,t[r])}var wN="ag-Grid-AutoColumn";function CN(e){return e.reduce((e,t)=>e+t.getActualWidth(),0)}function xN(e,t,n){const r={};if(!t)return;FN(null,t,e=>{r[e.getInstanceId()]=e}),n&&FN(null,n,e=>{r[e.getInstanceId()]=null});const o=Object.values(r).filter(e=>null!=e);e.context.destroyBeans(o)}function SN(e){const t="string"==typeof e?e:"getColId"in e?e.getColId():e.colId;return(null==t?void 0:t.startsWith("ag-Grid-SelectionColumn"))??!1}function kN(e){const t="string"==typeof e?e:"getColId"in e?e.getColId():e.colId;return(null==t?void 0:t.startsWith("ag-Grid-RowNumbersColumn"))??!1}function PN(e){let t=[];return e instanceof Array?t=e:"string"==typeof e&&(t=e.split(",")),t}function jN(e){return"optionsUpdated"===e?"gridOptionsChanged":e}function ON(e,t){const n=e===t,r=e.getColDef()===t,o=e.getColId()==t;return n||r||o}var RN=(e,t)=>{uN(e)&&e.setupExpandable(),e.originalParent=t};function EN(e,t=null,n,r,o){const i=new fN,{existingCols:s,existingGroups:a,existingColKeys:l}=function(e){const t=[],n=[],r=[];e&&FN(null,e,e=>{if(uN(e)){const t=e;n.push(t)}else{const n=e;r.push(n.getId()),t.push(n)}});return{existingCols:t,existingGroups:n,existingColKeys:r}}(r);i.addExistingKeys(l);const c=DN(e,t,0,n,s,i,a,o),{colGroupSvc:u}=e,d=(null==u?void 0:u.findMaxDepth(c,0))??0,h=u?u.balanceColumnTree(c,0,d,i):c;return FN(null,h,RN),{columnTree:h,treeDepth:d}}function DN(e,t,n,r,o,i,s,a){if(!t)return[];const{colGroupSvc:l}=e,c=new Array(t.length);for(let u=0;u<c.length;u++){const d=t[u];l&&TN(d)?c[u]=l.createProvidedColumnGroup(r,d,n,o,i,s,a):c[u]=MN(e,r,d,o,i,a)}return c}function MN(e,t,n,r,o,i){var s;const a=function(e,t){if(!t)return;for(let n=0;n<t.length;n++){const r=t[n].getUserProvidedColDef();if(!r)continue;if(null!=e.colId){if(t[n].getId()===e.colId)return{idx:n,column:t[n]};continue}if(null!=e.field){if(r.field===e.field)return{idx:n,column:t[n]}}else if(r===e)return{idx:n,column:t[n]}}return}(n,r);a&&(null==r||r.splice(a.idx,1));let l=null==a?void 0:a.column;if(l){const t=NN(e,n,l.getColId());l.setColDef(t,n,i),function(e,t,n,r){AN(e,t,n.hide,n.sort,n.sortIndex,n.pinned,n.flex,r);const o=t.getFlex();if(null!=o&&o>0)return;if(null!=n.width)t.setActualWidth(n.width,r);else{const e=t.getActualWidth();t.setActualWidth(e,r)}}(e,l,t,i)}else{const r=o.getUniqueKey(n.colId,n.field),i=NN(e,n,r);l=new cN(i,n,r,t),e.context.createBean(l)}return null==(s=e.dataTypeSvc)||s.addColumnListeners(l),l}function AN(e,t,n,r,o,i,s,a){const{sortSvc:l,pinnedCols:c,colFlex:u}=e;void 0!==n&&t.setVisible(!n,a),l&&(l.updateColSort(t,r,a),void 0!==o&&l.setColSortIndex(t,o)),void 0!==i&&(null==c||c.setColPinned(t,i)),void 0!==s&&(null==u||u.setColFlex(t,s))}function NN(e,t,n,r){const{gos:o,dataTypeSvc:i}=e,s={};iA(s,o.get("defaultColDef"),!1,!0);const a=function(e,t,n,r){var o;const i=null==(o=e.dataTypeSvc)?void 0:o.updateColDefAndGetColumnType(t,n,r),s=n.type??i??t.type;return t.type=s,s?PN(s):void 0}(e,s,t,n);a&&function(e,t,n){if(!t.length)return;const r=Object.assign({},hN),o=e.gos.get("columnTypes")||{};for(const i of Object.keys(o)){const e=o[i];if(i in r)TA(34,{key:i});else{e.type&&TA(35),r[i]=e}}for(const i of t){const e=r[i.trim()];e?iA(n,e,!1,!0):TA(36,{t:i})}}(e,a,s);const l=s.cellDataType;iA(s,t,!1,!0),void 0!==l&&(s.cellDataType=l);const c=o.get("autoGroupColumnDef"),u=ZA(o);return t.rowGroup&&c&&u&&iA(s,{sort:c.sort,initialSort:c.initialSort},!1,!0),i&&(i.postProcess(s),i.validateColDef(s)),o.validateColDef(s,n,r),s}function TN(e){return void 0!==e.children}function FN(e,t,n){if(t)for(let r=0;r<t.length;r++){const o=t[r];uN(o)&&FN(o,o.getChildren(),n),n(o,e)}}function IN(e,t){const n=[],r=[],o=[];e.forEach(e=>{const t=e.getColDef().lockPosition;"right"===t?o.push(e):"left"===t||!0===t?n.push(e):r.push(e)});return t.get("enableRtl")?[...o,...r,...n]:[...n,...r,...o]}function LN(e,t){let n=!0;return FN(null,t,t=>{if(!uN(t))return;const r=t,o=r.getColGroupDef();if(!(null==o?void 0:o.marryChildren))return;const i=[];for(const n of r.getLeafColumns()){const t=e.indexOf(n);i.push(t)}Math.max.apply(Math,i)-Math.min.apply(Math,i)>r.getLeafColumns().length-1&&(n=!1)}),n}function BN(e,t){if(!e||0==e.length)return;const n=t(e[0]);for(let r=1;r<e.length;r++)if(n!==t(e[r]))return;return n}function HN(e,t,n){if(!t.length)return;const r=1===t.length?t[0]:null,o=BN(t,e=>e.getPinned());e.dispatchEvent({type:"columnPinned",pinned:null!=o?o:null,columns:t,column:r,source:n})}function _N(e,t,n,r,o=null){(null==t?void 0:t.length)&&e.dispatchEvent({type:"columnResized",columns:t,column:1===t.length?t[0]:null,flexColumns:o,finished:n,source:r})}function GN(e,t,n){var r;const{colModel:o,rowGroupColsSvc:i,pivotColsSvc:s,autoColSvc:a,selectionColSvc:l,colAnimation:c,visibleCols:u,pivotResultCols:d,environment:h,valueColsSvc:p,eventSvc:f,gos:g}=e,m=o.getColDefCols()??[],v=null==l?void 0:l.getColumns();if(!m.length&&!(null==v?void 0:v.length))return!1;if((null==t?void 0:t.state)&&!t.state.forEach)return TA(32),!1;const y=(r,o,a,l,c)=>{if(!r)return;const u=((e,t)=>(n,r)=>{const o={value1:void 0,value2:void 0};let i=!1;return e&&(void 0!==e[n]&&(o.value1=e[n],i=!0),BD(r)&&void 0!==e[r]&&(o.value2=e[r],i=!0)),!i&&t&&(void 0!==t[n]&&(o.value1=t[n]),BD(r)&&void 0!==t[r]&&(o.value2=t[r])),o})(o,t.defaultState),d=u("flex").value1;if(AN(e,r,u("hide").value1,u("sort").value1,u("sortIndex").value1,u("pinned").value1,d,n),null==d){const e=u("width").value1;if(null!=e){const t=r.getColDef().minWidth??h.getDefaultColumnMinWidth();null!=t&&e>=t&&r.setActualWidth(e,n)}}!c&&r.isPrimary()&&(null==p||p.syncColumnWithState(r,n,u),null==i||i.syncColumnWithState(r,n,u,a),null==s||s.syncColumnWithState(r,n,u,l))},b=(r,c,d)=>{var h,p;const m=VN(e,n),v=c.slice(),b={},w={},C=[],x=[],S=[];let k=0;const P=(null==i?void 0:i.columns.slice())??[],j=(null==s?void 0:s.columns.slice())??[];for(const e of r){const t=e.colId;if(t.startsWith(wN)){C.push(e),S.push(e);continue}if(SN(t)){x.push(e),S.push(e);continue}const n=d(t);n?(y(n,e,b,w,!1),yN(v,n)):(S.push(e),k+=1)}const O=e=>y(e,null,b,w,!1);v.forEach(O),null==i||i.sortColumns(zN.bind(i,b,P)),null==s||s.sortColumns(zN.bind(s,w,j)),o.refreshCols(!1,n);const R=(e,t,n=[])=>{for(const r of t){const t=e(r.colId);yN(n,t),y(t,r,null,null,!0)}n.forEach(O)};return R(e=>(null==a?void 0:a.getColumn(e))??null,C,null==(h=null==a?void 0:a.getColumns())?void 0:h.slice()),R(e=>(null==l?void 0:l.getColumn(e))??null,x,null==(p=null==l?void 0:l.getColumns())?void 0:p.slice()),function(e,t,n){if(!e.applyOrder||!e.state)return;const r=[];for(const o of e.state)null!=o.colId&&r.push(o.colId);!function(e,t,n,r){if(null==e)return;let o=[];const i={};for(const a of t){if(i[a])continue;const t=e.map[a];t&&(o.push(t),i[a]=!0)}let s=0;for(const a of e.list){const e=a.getColId();if(null!=i[e])continue;e.startsWith(wN)?o.splice(s++,0,a):o.push(a)}if(o=IN(o,r),!LN(o,n.getColTree()))return void TA(39);e.list=o}(t.cols,r,t,n)}(t,o,g),u.refresh(n),f.dispatchEvent({type:"columnEverythingChanged",source:n}),m(),{unmatchedAndAutoStates:S,unmatchedCount:k}};null==c||c.start();let{unmatchedAndAutoStates:w,unmatchedCount:C}=b(t.state||[],m,e=>o.getColDefCol(e));if(w.length>0||BD(t.defaultState)){C=b(w,(null==(r=null==d?void 0:d.getPivotResultCols())?void 0:r.list)??[],e=>(null==d?void 0:d.getPivotResultCol(e))??null).unmatchedCount}return null==c||c.finish(),0===C}function VN(e,t){const{rowGroupColsSvc:n,pivotColsSvc:r,valueColsSvc:o,colModel:i,sortSvc:s,eventSvc:a}=e,l={rowGroupColumns:(null==n?void 0:n.columns.slice())??[],pivotColumns:(null==r?void 0:r.columns.slice())??[],valueColumns:(null==o?void 0:o.columns.slice())??[]},c=WN(e),u={};for(const d of c)u[d.colId]=d;return()=>{const o=(e,n,r,o)=>{if(mN(n.map(o),r.map(o)))return;const i=new Set(n);for(const t of r)i.delete(t)||i.add(t);const s=[...i];a.dispatchEvent({type:e,columns:s,column:1===s.length?s[0]:null,source:t})},d=e=>{const t=[];return i.forAllCols(n=>{const r=u[n.getColId()];r&&e(r,n)&&t.push(n)}),t},h=e=>e.getColId();o("columnRowGroupChanged",l.rowGroupColumns,(null==n?void 0:n.columns)??[],h),o("columnPivotChanged",l.pivotColumns,(null==r?void 0:r.columns)??[],h);const p=d((e,t)=>{const n=null!=e.aggFunc,r=n!=t.isValueActive(),o=n&&e.aggFunc!=t.getAggFunc();return r||o});p.length>0&&function(e,t,n,r){e.dispatchEvent({type:t,columns:n,column:n&&1==n.length?n[0]:null,source:r})}(a,"columnValueChanged",p,t);_N(a,d((e,t)=>e.width!=t.getActualWidth()),!0,t);HN(a,d((e,t)=>e.pinned!=t.getPinned()),t);!function(e,t,n){if(!t.length)return;const r=1===t.length?t[0]:null,o=BN(t,e=>e.isVisible());e.dispatchEvent({type:"columnVisible",visible:o,columns:t,column:r,source:n})}(a,d((e,t)=>e.hide==t.isVisible()),t);const f=d((e,t)=>e.sort!=t.getSort()||e.sortIndex!=t.getSortIndex());f.length>0&&(null==s||s.dispatchSortChangedEvents(t,f));const g=WN(e);!function(e,t,n,r,o){const i={};for(const u of t)i[u.colId]=u;const s={};for(const u of e)i[u.colId]&&(s[u.colId]=!0);const a=e.filter(e=>s[e.colId]),l=t.filter(e=>s[e.colId]),c=[];if(l.forEach((e,t)=>{const n=null==a?void 0:a[t];if(n&&n.colId!==e.colId){const e=r.getCol(n.colId);e&&c.push(e)}}),!c.length)return;o.dispatchEvent({type:"columnMoved",columns:c,column:1===c.length?c[0]:null,finished:!0,source:n})}(c,g,t,i,a)}}function WN(e){const{colModel:t,rowGroupColsSvc:n,pivotColsSvc:r}=e;if(HD(t.getColDefCols())||!t.isAlive())return[];const o=null==n?void 0:n.columns,i=null==r?void 0:r.columns,s=[];t.forAllCols(e=>(e=>{const t=e.isRowGroupActive()&&o?o.indexOf(e):null,n=e.isPivotActive()&&i?i.indexOf(e):null,r=e.isValueActive()?e.getAggFunc():null,a=null!=e.getSort()?e.getSort():null,l=null!=e.getSortIndex()?e.getSortIndex():null;s.push({colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:a,sortIndex:l,aggFunc:r,rowGroup:e.isRowGroupActive(),rowGroupIndex:t,pivot:e.isPivotActive(),pivotIndex:n,flex:e.getFlex()??null})})(e));const a=new Map(t.getCols().map((e,t)=>[e.getColId(),t]));return s.sort((e,t)=>(a.has(e.colId)?a.get(e.colId):-1)-(a.has(t.colId)?a.get(t.colId):-1)),s}var zN=(e,t,n,r)=>{const o=e[n.getId()],i=e[r.getId()],s=null!=o,a=null!=i;if(s&&a)return o-i;if(s)return-1;if(a)return 1;const l=t.indexOf(n),c=t.indexOf(r),u=l>=0;return u&&c>=0?l-c:u?-1:1},$N=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let n;return n="number"!=typeof t?0:t+1,this.existingIds[e]=n,n}},UN=class extends YM{};function KN(e,t,n){return n&&e.addDestroyFunc(()=>t.destroyBean(n)),n??e}var qN=null,XN=class{constructor(e){this.cssClassStates={},this.getGui=e}toggleCss(e,t){var n;if(!e)return;if(e.indexOf(" ")>=0){const n=(e||"").split(" ");if(n.length>1){for(const e of n)this.toggleCss(e,t);return}}this.cssClassStates[e]!==t&&e.length&&(null==(n=this.getGui())||n.classList.toggle(e,t),this.cssClassStates[e]=t)}},YN=0,ZN=class extends XM{constructor(e,t){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=YN++,this.cssManager=new XN(()=>this.eGui),this.componentSelectors=new Map((t??[]).map(e=>[e.selector,e])),e&&this.setTemplate(e)}preConstruct(){var e,t;this.wireTemplate(this.getGui());const n="component-"+(null==(t=null==(e=Object.getPrototypeOf(this))?void 0:e.constructor)?void 0:t.name);for(const r of this.css??[])this.beans.environment.addGlobalCSS(r,n)}wireTemplate(e,t){e&&this.gos&&(this.applyElementsToComponent(e),this.createChildComponentsFromTags(e,t))}getCompId(){return this.compId}getDataRefAttribute(e){return e.getAttribute?e.getAttribute(AM):null}applyElementsToComponent(e,t,n,r=null){if(void 0===t&&(t=this.getDataRefAttribute(e)),t){const o=this[t];if(o===qN)this[t]=r??e;else{const e=null==n?void 0:n[t];if(!this.suppressDataRefValidation&&!e)throw new Error(`data-ref: ${t} on ${this.constructor.name} with ${o}`)}}}createChildComponentsFromTags(e,t){const n=[];for(const r of e.childNodes??[])n.push(r);for(const r of n){if(!(r instanceof HTMLElement))continue;const n=this.createComponentFromElement(r,e=>{const t=e.getGui();if(t)for(const n of r.attributes??[])t.setAttribute(n.name,n.value)},t);if(n){if(n.addItems&&r.children.length){this.createChildComponentsFromTags(r,t);const e=Array.prototype.slice.call(r.children);n.addItems(e)}this.swapComponentForNode(n,e,r)}else r.childNodes&&this.createChildComponentsFromTags(r,t)}}createComponentFromElement(e,t,n){const r=e.nodeName,o=this.getDataRefAttribute(e),i=0===r.indexOf("AG-"),s=i?this.componentSelectors.get(r):null;let a=null;if(s){const e=n&&o?n[o]:void 0;a=new s.component(e),a.setParentComponent(this),this.createBean(a,null,t)}else if(i)throw new Error(`selector: ${r}`);return this.applyElementsToComponent(e,o,n,a),a}swapComponentForNode(e,t,n){const r=e.getGui();t.replaceChild(r,n),t.insertBefore(document.createComment(n.nodeName),r),this.addDestroyFunc(this.destroyBean.bind(this,e))}activateTabIndex(e){const t=this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui());for(const n of e)n.setAttribute("tabindex",t.toString())}setTemplate(e,t,n){let r;r="string"==typeof e||null==e?xM(e):TM(e),this.setTemplateFromElement(r,t,n)}setTemplateFromElement(e,t,n,r=!1){if(this.eGui=e,this.suppressDataRefValidation=r,t)for(let o=0;o<t.length;o++){const e=t[o];this.componentSelectors.set(e.selector,e)}this.wireTemplate(e,n)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}getContainerAndElement(e,t){let n=t;return null==e?null:(n||(n=this.eGui),OM(e)?{element:e,parent:n}:{element:e.getGui(),parent:n})}prependChild(e,t){const{element:n,parent:r}=this.getContainerAndElement(e,t)||{};n&&r&&r.insertAdjacentElement("afterbegin",n)}appendChild(e,t){const{element:n,parent:r}=this.getContainerAndElement(e,t)||{};n&&r&&r.appendChild(n)}isDisplayed(){return this.displayed}setVisible(e,t={}){if(e!==this.visible){this.visible=e;const{skipAriaHidden:n}=t;!function(e,t,n={}){const{skipAriaHidden:r}=n;e.classList.toggle("ag-invisible",!t),r||sM(e,!t)}(this.eGui,e,{skipAriaHidden:n})}}setDisplayed(e,t={}){if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:n}=t;uM(this.eGui,e,{skipAriaHidden:n});const r={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(r)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),super.destroy()}addGuiEventListener(e,t,n){this.eGui.addEventListener(e,t,n),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,t))}addCss(e){this.cssManager.toggleCss(e,!0)}removeCss(e){this.cssManager.toggleCss(e,!1)}toggleCss(e,t){this.cssManager.toggleCss(e,t)}registerCSS(e){this.css||(this.css=[]),this.css.push(e)}},JN=class extends ZN{},QN=class e{constructor(e){this.status=0,this.resolution=null,this.waiters=[],e(e=>this.onDone(e),e=>this.onReject(e))}static all(t){return t.length?new e(e=>{let n=t.length;const r=new Array(n);t.forEach((t,o)=>{t.then(t=>{r[o]=t,n--,0===n&&e(r)})})}):e.resolve()}static resolve(t=null){return new e(e=>e(t))}then(t){return new e(e=>{1===this.status?e(t(this.resolution)):this.waiters.push(n=>e(t(n)))})}onDone(e){this.status=1,this.resolution=e;for(const t of this.waiters)t(e)}onReject(e){}};var eT={name:"dragAndDropImageComponent",mandatoryMethods:["setIcon","setLabel"]},tT={name:"headerComponent",optionalMethods:["refresh"]},nT={name:"innerHeaderComponent"},rT={name:"innerHeaderGroupComponent"},oT={name:"headerGroupComponent"},iT={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},sT={name:"loadingCellRenderer",cellRenderer:!0},aT={name:"loadingOverlayComponent",optionalMethods:["refresh"]},lT={name:"noRowsOverlayComponent",optionalMethods:["refresh"]},cT={name:"fullWidthCellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},uT={name:"loadingCellRenderer",cellRenderer:!0},dT={name:"groupRowRenderer",optionalMethods:["afterGuiAttached"],cellRenderer:!0},hT={name:"detailCellRenderer",optionalMethods:["refresh"],cellRenderer:!0};function pT(e,t,n){return e.getCompDetails(t,iT,void 0,n)}function fT(e,t,n){return e.getCompDetails(t,sT,"agSkeletonCellRenderer",n,!0)}function gT(e){const t=e;return null!=(null==t?void 0:t.getFrameworkComponentInstance)?t.getFrameworkComponentInstance():e}function mT(e){return"object"==typeof e&&!!e.getComp}var vT,yT,bT,wT,CT,xT,ST,kT="Backspace",PT="Tab",jT="Enter",OT="Escape",RT=" ",ET="ArrowLeft",DT="ArrowUp",MT="ArrowRight",AT="ArrowDown",NT="Delete",TT="F2",FT="PageUp",IT="PageDown",LT="Home",BT="End",HT="KeyA",_T="KeyC",GT="KeyD",VT="KeyV",WT="KeyX",zT="KeyY",$T="KeyZ";function UT(){return void 0===vT&&(vT=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),vT}function KT(){return void 0===yT&&(yT=/(firefox)/i.test(navigator.userAgent)),yT}function qT(){return void 0===bT&&(bT=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),bT}function XT(){return void 0===wT&&(wT=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),wT}function YT(e){if(!e)return null;const t=e.tabIndex,n=e.getAttribute("tabIndex");return-1!==t||null!==n&&(""!==n||KT())?t.toString():null}function ZT(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let n=t.offsetWidth-t.clientWidth;0===n&&0===t.clientWidth&&(n=null),t.parentNode&&t.remove(),null!=n&&(xT=n,CT=0===n)}function JT(){return null==CT&&ZT(),CT}var QT=new RegExp("[T ]"),eF=new RegExp("^\\d{4}-\\d{2}-\\d{2}(T\\d{2}:\\d{2}:\\d{2}\\D?)?");function tF(e,t){return e.toString().padStart(t,"0")}function nF(e,t=!0,n="T"){if(!e)return null;let r=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(e=>tF(e,2)).join("-");return t&&(r+=n+[e.getHours(),e.getMinutes(),e.getSeconds()].map(e=>tF(e,2)).join(":")),r}function rF(e,t=!1){return!!oF(e,t)}function oF(e,t=!1,n){if(!e)return null;if(!eF.test(e))return null;const[r,o]=e.split(QT);if(!r)return null;const i=r.split("-").map(e=>Number.parseInt(e,10));if(3!==i.filter(e=>!isNaN(e)).length)return null;const[s,a,l]=i,c=new Date(s,a-1,l);if(c.getFullYear()!==s||c.getMonth()!==a-1||c.getDate()!==l)return null;if(!o&&t)return null;if(!o||"00:00:00"===o)return c;const[u,d,h]=o.split(":").map(e=>Number.parseInt(e,10));if(u>=0&&u<24)c.setHours(u);else if(t)return null;if(d>=0&&d<60)c.setMinutes(d);else if(t)return null;if(h>=0&&h<60)c.setSeconds(h);else if(t)return null;return c}var iF=!1,sF=0;function aF(e){const t=iF,n="keydown"===e.type;n&&(e.ctrlKey||e.metaKey||e.altKey)||t!==n&&(iF=n)}function lF(e){const t=qD(e);var n;return n=t,sF>0||(n.addEventListener("keydown",aF),n.addEventListener("mousedown",aF)),sF++,()=>{sF--,function(e){sF>0||(e.removeEventListener("keydown",aF),e.removeEventListener("mousedown",aF))}(t)}}function cF(e,t,n=!1){let r=lM;t&&(r+=", "+t),n&&(r+=', [tabindex="-1"]');const o=Array.prototype.slice.apply(e.querySelectorAll("[tabindex], input, select, button, textarea, [href]")).filter(e=>CM(e)),i=Array.prototype.slice.apply(e.querySelectorAll(r));if(!i.length)return o;return s=i,o.filter(e=>-1===s.indexOf(e));var s}function uF(e,t=!1,n=!1,r=!1){const o=cF(e,r?".ag-tab-guard":null,n),i=t?gN(o):o[0];return!!i&&(i.focus({preventScroll:!0}),!0)}function dF(e,t,n,r){const o=cF(t,null),i=KD(e);let s;s=o.indexOf(i);const a=s+(r?-1:1);return a<0||a>=o.length?null:o[a]}var hF=class extends ZN{constructor(e,t,n){super(t,n),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{},this.registerCSS(".ag-label{white-space:nowrap}:where(.ag-ltr) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-label-align-right) .ag-label{order:1}:where(.ag-ltr) :where(.ag-label-align-right) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-label-align-right) .ag-label{margin-right:var(--ag-spacing)}.ag-label-align-right>*{flex:none}.ag-label-align-top{align-items:flex-start;flex-direction:column;>*{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-label-align-top) .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}")}postConstruct(){this.addCss("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:n,labelAlignment:r,disabled:o}=this.config;null!=o&&this.setDisabled(o),null!=e&&this.setLabelSeparator(e),null!=t&&this.setLabel(t),null!=n&&this.setLabelWidth(n),this.setLabelAlignment(r||this.labelAlignment),this.refreshLabel()}refreshLabel(){const{label:e,eLabel:t}=this;yM(t),"string"==typeof e?t.innerText=e+this.labelSeparator:e&&t.appendChild(e),""===e?(uM(t,!1),tM(t,"presentation")):(uM(t,!0),tM(t,null))}setLabelSeparator(e){return this.labelSeparator===e||(this.labelSeparator=e,null!=this.label&&this.refreshLabel()),this}getLabelId(){const e=this.eLabel;return e.id=e.id||`ag-${this.getCompId()}-label`,e.id}getLabel(){return this.label}setLabel(e){return this.label===e||(this.label=e,this.refreshLabel()),this}setLabelAlignment(e){const t=this.getGui().classList;return t.toggle("ag-label-align-left","left"===e),t.toggle("ag-label-align-right","right"===e),t.toggle("ag-label-align-top","top"===e),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return null==this.label||SM(this.eLabel,e),this}setDisabled(e){e=!!e;const t=this.getGui();return dM(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},pF=class extends hF{constructor(e,t,n,r){super(e,t,n),this.className=r}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:n}=this.config;null!=e&&this.setWidth(e),null!=t&&this.setValue(t),null!=n&&this.onValueChange(n),this.className&&this.addCss(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),n=this.getLabel();null==n||""==n||null!==e.getAttribute("aria-label")?rM(e,""):rM(e,t??"")}setAriaLabel(e){return nM(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return kM(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e||(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"})),this}};var fF,gF,mF,vF=class extends pF{constructor(e,t,n="text",r="input"){super(e,(null==e?void 0:e.template)??function(e){return{tag:"div",role:"presentation",children:[{tag:"div",ref:"eLabel",cls:"ag-input-field-label"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-input-wrapper",role:"presentation",children:[{tag:e,ref:"eInput",cls:"ag-input-field-input"}]}]}}(r),[],t),this.inputType=n,this.displayFieldTag=r,this.eLabel=qN,this.eWrapper=qN,this.eInput=qN}postConstruct(){super.postConstruct(),this.setInputType(this.inputType);const{eLabel:e,eWrapper:t,eInput:n,className:r}=this;e.classList.add(`${r}-label`),t.classList.add(`${r}-input-wrapper`),n.classList.add(`${r}-input`),this.addCss("ag-input-field"),n.id=n.id||`ag-${this.getCompId()}-input`;const{inputName:o,inputWidth:i}=this.config;null!=o&&this.setInputName(o),null!=i&&this.setInputWidth(i),this.addInputListeners(),this.activateTabIndex([n])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(e){"input"===this.displayFieldTag&&(this.inputType=e,RM(this.eInput,"type",e))}getInputElement(){return this.eInput}setInputWidth(e){return SM(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){return this.eInput.maxLength=e,this}setInputPlaceholder(e){return RM(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return nM(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return dM(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(!0===e)RM(this.eInput,"autocomplete",null);else{const t="string"==typeof e?e:"off";RM(this.eInput,"autocomplete",t)}return this}},yF={selector:"AG-CHECKBOX",component:class extends vF{constructor(e,t="ag-checkbox",n="checkbox"){super(e,t,n),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;"boolean"==typeof e&&this.setReadOnly(e),"boolean"==typeof t&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return void 0===this.selected||!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){return this.getInputElement().name=e,this}isSelected(){return this.selected}setSelected(e,t){if(this.isSelected()===e)return;this.previousValue=this.isSelected(),e=this.selected="boolean"==typeof e?e:void 0;const n=this.eInput;n.checked=e,n.indeterminate=void 0===e,t||this.dispatchChange(this.selected,this.previousValue)}dispatchChange(e,t,n){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:n});const r=this.getInputElement();this.eventSvc.dispatchEvent({type:"checkboxChanged",id:r.id,name:r.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),n=this.selected=e.target.checked;this.refreshSelectedClass(n),this.dispatchChange(n,t,e)}refreshSelectedClass(e){const t=this.eWrapper.classList;t.toggle("ag-checked",!0===e),t.toggle("ag-indeterminate",null==e)}}},bF="object"!=typeof window||!(null==(t=null==(e=null==window?void 0:window.document)?void 0:e.fonts)?void 0:t.forEach),wF=(e,t,n,r,o,i)=>{if(bF)return;r&&(e=`@layer ${CSS.escape(r)} { ${e} }`);let s=xF.map.get(t);if(s||(s=[],xF.map.set(t,s)),s.some(t=>t.css===e))return;const a=document.createElement("style");i&&a.setAttribute("nonce",i),a.dataset.agGlobalCss=n,a.textContent=e;const l={css:e,el:a,priority:o};let c;for(const u of s){if(u.priority>o)break;c=u}if(c){c.el.insertAdjacentElement("afterend",a);const e=s.indexOf(c);s.splice(e+1,0,l)}else t.insertBefore(a,t.querySelector(":not(title, meta)")),s.push(l)},CF=(e,t,n,r)=>{wF(':where(.ag-root-wrapper,.ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart),:where(.ag-root-wrapper,.ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]){box-sizing:border-box;&:after,&:before{box-sizing:border-box}&:where(div,span,label):focus-visible{box-shadow:inset var(--ag-focus-shadow);outline:none;&:where(.invalid){box-shadow:inset var(--ag-focus-error-shadow)}}&:where(button){color:inherit}}:where(.ag-root-wrapper,ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]) ::-ms-clear{display:none}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-popup-child{top:0;z-index:5;&:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input:where(:not([type=checkbox],[type=radio])){flex:1 1 auto;min-width:0;width:100%}.ag-chart,.ag-dnd-ghost,.ag-external,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}:where(.ag-icon):before{align-items:center;background-color:currentcolor;color:inherit;content:"";display:flex;font-family:inherit;font-size:var(--ag-icon-size);font-style:normal;font-variant:normal;height:var(--ag-icon-size);justify-content:center;line-height:var(--ag-icon-size);-webkit-mask-size:contain;mask-size:contain;text-transform:none;width:var(--ag-icon-size)}.ag-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;color:var(--ag-icon-color);display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}.ag-disabled,[disabled]{.ag-icon{opacity:.5}&.ag-icon-grip{opacity:.35}}.ag-resizer{pointer-events:none;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:1}:where(.ag-resizer){&.ag-resizer-topLeft{cursor:nwse-resize;height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{cursor:nesw-resize;height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;cursor:nwse-resize;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;cursor:nesw-resize;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}',e,"shared",t,0,n),null==r||r.forEach((r,o)=>r.forEach(r=>wF(r,e,o,t,0,n)))},xF=(fF="object"==typeof window?window:{}).agStyleInjectionState??(fF.agStyleInjectionState={map:new WeakMap,grids:new Set}),SF=e=>new jF(e),kF="$default",PF=0,jF=class{constructor({feature:e,params:t,modeParams:n={},css:r,cssImports:o}){this.feature=e,this.css=r,this.cssImports=o,this.modeParams={[kF]:{...n[kF]??{},...t??{}},...n}}use(e,t,n){let r=this._inject;if(null==r){let{css:e}=this;if(e){const t=`ag-theme-${this.feature??"part"}-${++PF}`;"function"==typeof e&&(e=e()),e=`:where(.${t}) {\n${e}\n}\n`;for(const n of this.cssImports??[])e=`@import url(${JSON.stringify(n)});\n${e}`;r={css:e,class:t}}else r=!1;this._inject=r}return r&&e&&wF(r.css,e,r.class,t,1,n),!!r&&r.class}},OF=e=>{return`--ag-${t=e,t.replace(/[A-Z]/g,e=>`-${e}`).toLowerCase()}`;var t},RF=e=>`var(${OF(e)})`,EF=e=>({ref:"accentColor",mix:e}),DF=e=>({ref:"foregroundColor",mix:e}),MF=e=>({ref:"foregroundColor",mix:e,onto:"backgroundColor"}),AF={ref:"backgroundColor"},NF={ref:"foregroundColor"},TF={ref:"accentColor"},FF={backgroundColor:"#fff",foregroundColor:"#181d1f",borderColor:DF(.15),chromeBackgroundColor:MF(.02),browserColorScheme:"light"},IF={...FF,textColor:NF,accentColor:"#2196f3",invalidColor:"#e02525",fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],subtleTextColor:{ref:"textColor",mix:.5},borderWidth:1,borderRadius:4,spacing:8,fontSize:14,focusShadow:{spread:3,color:EF(.5)},focusErrorShadow:{spread:3,color:{ref:"invalidColor",onto:"backgroundColor",mix:.5}},popupShadow:"0 0 16px #00000026",cardShadow:"0 1px 4px 1px #00000018",dropdownShadow:{ref:"cardShadow"},listItemHeight:{calc:"max(iconSize, dataFontSize) + widgetVerticalSpacing"},dragAndDropImageBackgroundColor:AF,dragAndDropImageBorder:!0,dragAndDropImageNotAllowedBorder:{color:{ref:"invalidColor",onto:"dragAndDropImageBackgroundColor",mix:.5}},dragAndDropImageShadow:{ref:"popupShadow"},iconSize:16,iconColor:"inherit",toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonOnBackgroundColor:TF,toggleButtonOffBackgroundColor:MF(.3),toggleButtonSwitchBackgroundColor:AF,toggleButtonSwitchInset:2,tooltipBackgroundColor:{ref:"chromeBackgroundColor"},tooltipErrorBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.1},tooltipTextColor:{ref:"textColor"},tooltipErrorTextColor:{ref:"invalidColor"},tooltipBorder:!0,tooltipErrorBorder:{color:{ref:"invalidColor",onto:"backgroundColor",mix:.25}}},LF=["colorScheme","color","length","scale","borderStyle","border","shadow","image","fontFamily","fontWeight","duration"],BF=(e=>{const t=new Map;return n=>{const r=n;return t.has(r)||t.set(r,e(n)),t.get(r)}})(e=>(e=e.toLowerCase(),LF.find(t=>e.endsWith(t.toLowerCase()))??"length")),HF=e=>"object"==typeof e&&(null==e?void 0:e.ref)?RF(e.ref):"string"==typeof e?e:"number"==typeof e&&String(e),_F=e=>{if("string"==typeof e)return e;if(e&&"ref"in e){const t=RF(e.ref);if(null==e.mix)return t;return`color-mix(in srgb, ${e.onto?RF(e.onto):"transparent"}, ${t} ${((e,t,n)=>Math.max(t,Math.min(n,e)))(100*e.mix,0,100)}%)`}return!1},GF=e=>{if("string"==typeof e)return e;if("number"==typeof e)return`${e}px`;if(e&&"calc"in e){return`calc(${e.calc.replace(/ ?[*/+] ?/g," $& ").replace(/-?\b[a-z][a-z0-9]*\b(?![-(])/gi,e=>"-"===e[0]?e:" "+RF(e)+" ")})`}return!(!e||!("ref"in e))&&RF(e.ref)},VF=(e,t)=>"string"==typeof e?e:!0===e?VF({},t):!1===e?"columnBorder"===t?VF({color:"transparent"},t):"none":e&&"ref"in e?RF(e.ref):WF(e.style??"solid")+" "+GF(e.width??{ref:"borderWidth"})+" "+_F(e.color??{ref:"borderColor"}),WF=HF,zF=e=>"string"==typeof e?e.includes(",")?e:$F(e):e&&"googleFont"in e?zF(e.googleFont):e&&"ref"in e?RF(e.ref):!!Array.isArray(e)&&e.map(e=>("object"==typeof e&&"googleFont"in e&&(e=e.googleFont),$F(e))).join(", "),$F=e=>/^[\w-]+$|\w\(/.test(e)?e:JSON.stringify(e),UF=e=>"string"==typeof e?e:e&&"url"in e?`url(${JSON.stringify(e.url)})`:e&&"svg"in e?UF({url:`data:image/svg+xml,${encodeURIComponent(e.svg)}`}):!(!e||!("ref"in e))&&RF(e.ref),KF={color:_F,colorScheme:HF,length:GF,scale:HF,border:VF,borderStyle:WF,shadow:e=>"string"==typeof e?e:!1===e?"none":e&&"ref"in e?RF(e.ref):[GF(e.offsetX??0),GF(e.offsetY??0),GF(e.radius??0),GF(e.spread??0),_F(e.color??{ref:"foregroundColor"})].join(" "),image:UF,fontFamily:zF,fontWeight:HF,duration:(e,t,n)=>"string"==typeof e?e:"number"==typeof e?(e>=10&&n.warn(104,{value:e,param:t}),`${e}s`):!(!e||!("ref"in e))&&RF(e.ref)},qF=(e,t,n)=>{const r=BF(e);return KF[r](t,e,n)},XF=class e{constructor(e,t=[]){this.themeLogger=e,this.parts=t}withPart(t){return"function"==typeof t&&(t=t()),t instanceof jF?new e(this.themeLogger,[...this.parts,t]):(this.themeLogger.preInitErr(259,"Invalid part",{part:t}),this)}withoutPart(e){return this.withPart(SF({feature:e}))}withParams(e,t=kF){return this.withPart(SF({modeParams:{[t]:e}}))}_startUse({styleContainer:e,cssLayer:t,nonce:n,loadThemeGoogleFonts:r,moduleCss:o}){if(bF)return;QF(),CF(e,t,n,o);const i=ZF(this);if(i.length>0)for(const s of i)r&&eI(s,n);for(const s of this.parts)s.use(e,t,n)}_getCssClass(){return this._cssClassCache??(this._cssClassCache=YF(this.parts).map(e=>e.use(void 0,void 0,void 0)).filter(Boolean).join(" "))}_getModeParams(){let e=this._paramsCache;if(!e){const t={[kF]:{...IF}};for(const e of YF(this.parts))for(const n of Object.keys(e.modeParams)){const r=e.modeParams[n];if(r){const e=t[n]??(t[n]={}),o=new Set;for(const t of Object.keys(r)){const n=r[t];void 0!==n&&(e[t]=n,o.add(t))}if(n===kF)for(const n of Object.keys(t)){const e=t[n];if(n!==kF)for(const t of o)delete e[t]}}}this._paramsCache=e=t}return e}_getPerInstanceCss(e){const t="##SELECTOR##";let n=this._paramsCssCache;if(!n){let e="",r="";const o=this._getModeParams();for(const t of Object.keys(o)){const n=o[t];if(t!==kF){const n=`:where([data-ag-theme-mode="${"object"==typeof CSS?CSS.escape(t):t}"]) & {\n`;e+=n,r+=n}for(const t of Object.keys(n).sort()){const o=n[t],i=qF(t,o,this.themeLogger);if(!1===i)this.themeLogger.error(107,{key:t,value:o});else{const n=OF(t),o=n.replace("--ag-","--ag-inherited-");e+=`\t${n}: var(${o}, ${i});\n`,r+=`\t${o}: var(${n});\n`}}t!==kF&&(e+="}\n",r+="}\n")}let i=`${t} {\n${e}}\n`;i+=`:has(> ${t}):not(${t}) {\n${r}}\n`,this._paramsCssCache=n=i}return n.replaceAll(t,`:where(.${e})`)}},YF=e=>{const t=new Map;for(const r of e)t.set(r.feature,r);const n=[];for(const r of e)r.feature&&t.get(r.feature)!==r||n.push(r);return n},ZF=e=>{const t=new Set,n=e=>{if(Array.isArray(e))e.forEach(n);else{const n=null==e?void 0:e.googleFont;"string"==typeof n&&t.add(n)}};return Object.values(e._getModeParams()).flatMap(e=>Object.values(e)).forEach(n),Array.from(t).sort()},JF=!1,QF=()=>{if(!JF){JF=!0;for(const e of Array.from(document.head.querySelectorAll('style[data-ag-scope="legacy"]')))e.remove()}},eI=async(e,t)=>{const n=`@import url('https://${tI}/css2?family=${encodeURIComponent(e)}:wght@100;200;300;400;500;600;700;800;900&display=swap');\n`;wF(n,document.head,`googleFont:${e}`,void 0,0,t)},tI="fonts.googleapis.com",nI=1,rI=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,this.instanceId=nI++,(null==e?void 0:e.beanClasses)&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){this.id=e.id,this.beans.context=this,this.destroyCallback=e.destroyCallback;for(const t of Object.keys(e.providedBeanInstances))this.beans[t]=e.providedBeanInstances[t];for(const t of e.beanClasses){const e=new t;e.beanName?this.beans[e.beanName]=e:console.error(`Bean ${t.name} is missing beanName`),this.createdBeans.push(e)}for(const t of e.derivedBeans??[]){const{beanName:e,bean:n}=t(this);this.beans[e]=n,this.createdBeans.push(n)}e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){return this.initBeans([e],t),e}initBeans(e,t){var n,r,o,i;const s=this.beans;for(const a of e)null==(n=a.preWireBeans)||n.call(a,s),null==(r=a.wireBeans)||r.call(a,s);for(const a of e)null==(o=a.preConstruct)||o.call(a);t&&e.forEach(t);for(const a of e)null==(i=a.postConstruct)||i.call(a)}getBeans(){return this.beans}getBean(e){return this.beans[e]}getId(){return this.id}destroy(){var e;if(this.destroyed)return;this.destroyed=!0;const t=this.getBeanInstances();this.beanDestroyComparator&&t.sort(this.beanDestroyComparator),this.destroyBeans(t),this.beans={},this.createdBeans=[],null==(e=this.destroyCallback)||e.call(this)}destroyBean(e){var t;null==(t=null==e?void 0:e.destroy)||t.call(e)}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},oI=0,iI=class extends XM{constructor(){super(...arguments),this.beanName="environment",this.paramsClass="ag-theme-params-"+ ++oI,this.globalCSS=[]}wireBeans(e){this.eRootDiv=e.eRootDiv}postConstruct(){const{gos:e,eRootDiv:t}=this;e.setInstanceDomData(t),this.eStyleContainer=e.get("themeStyleContainer")??(t.getRootNode()===document?document.head:t),this.cssLayer=e.get("themeCssLayer"),this.styleNonce=e.get("styleNonce"),this.addManagedPropertyListener("theme",()=>this.handleThemeChange()),this.handleThemeChange(),this.initVariables(),this.addDestroyFunc(()=>(e=>{if(xF.grids.delete(e),0===xF.grids.size){xF.map=new WeakMap;for(const e of document.head.querySelectorAll("style[data-ag-global-css]"))e.remove()}})(this)),this.mutationObserver=new MutationObserver(()=>{this.fireStylesChangedEvent("themeChanged")}),this.addDestroyFunc(()=>this.mutationObserver.disconnect())}applyThemeClasses(e,t=[]){const{theme:n}=this;let r;r=n?`${this.paramsClass} ${n._getCssClass()}`:this.applyLegacyThemeClasses();for(const o of Array.from(e.classList))o.startsWith("ag-theme-")&&e.classList.remove(o);if(r){const n=e.className;e.className=`${n}${n?" ":""}${r}${(null==t?void 0:t.length)?" "+t.join(" "):""}`}}applyLegacyThemeClasses(){let e="";this.mutationObserver.disconnect();let t=this.eRootDiv;for(;t;){let n=!1;for(const r of Array.from(t.classList))r.startsWith("ag-theme-")&&(n=!0,e=e?`${e} ${r}`:r);n&&this.mutationObserver.observe(t,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement}return e}addGlobalCSS(e,t){this.theme?wF(e,this.eStyleContainer,t,this.cssLayer,0,this.styleNonce):this.globalCSS.push([e,t])}handleThemeChange(){const{gos:e,theme:t}=this,n=e.get("theme");let r;if("legacy"===n)r=void 0;else{const e=n??this.getDefaultTheme();e instanceof XF?r=e:this.themeError(e)}r!==t&&this.handleNewTheme(r),this.postProcessThemeChange(r,n)}handleNewTheme(e){const{gos:t,eRootDiv:n,globalCSS:r}=this,o=this.getAdditionalCss();if(e){i=this,xF.grids.add(i),CF(this.eStyleContainer,this.cssLayer,this.styleNonce,o);for(const[e,t]of r)wF(e,this.eStyleContainer,t,this.cssLayer,0,this.styleNonce);r.length=0}var i;this.theme=e,null==e||e._startUse({loadThemeGoogleFonts:t.get("loadThemeGoogleFonts"),styleContainer:this.eStyleContainer,cssLayer:this.cssLayer,nonce:this.styleNonce,moduleCss:o});let s=this.eParamsStyle;if(!s){s=this.eParamsStyle=TM({tag:"style"});const e=t.get("styleNonce");e&&s.setAttribute("nonce",e),n.appendChild(s)}bF||(s.textContent=(null==e?void 0:e._getPerInstanceCss(this.paramsClass))||""),this.applyThemeClasses(n),this.fireStylesChangedEvent("themeChanged")}},sI=class extends XM{constructor(){super(...arguments),this.beanName="registry"}registerDynamicBeans(e){if(e){this.dynamicBeans??(this.dynamicBeans={});for(const t of Object.keys(e))this.dynamicBeans[t]=e[t]}}createDynamicBean(e,t,...n){if(!this.dynamicBeans)throw new Error(this.getDynamicError(e,!0));const r=this.dynamicBeans[e];if(null!=r)return new r(...n);if(t)throw new Error(this.getDynamicError(e,!1))}},aI=class extends XM{constructor(){super(...arguments),this.beanName="eventSvc",this.eventServiceType="global",this.globalSvc=new ID}addListener(e,t,n){this.globalSvc.addEventListener(e,t,n)}removeListener(e,t,n){this.globalSvc.removeEventListener(e,t,n)}addGlobalListener(e,t=!1){this.globalSvc.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalSvc.removeGlobalListener(e,t)}dispatchEvent(e){this.globalSvc.dispatchEvent(this.gos.addCommon(e))}dispatchEventOnce(e){this.globalSvc.dispatchEventOnce(this.gos.addCommon(e))}},lI=(e,t)=>{if(null!=t&&(null==e?void 0:e.setPointerCapture))try{return e.setPointerCapture(t),e.hasPointerCapture(t)}catch{}return!1},cI=e=>{const{eElement:t,onLost:n}=e;t&&n&&(t.removeEventListener("lostpointercapture",n),e.onLost=null)},uI=(e,t)=>{cI(e);const{eElement:n,pointerId:r}=e;n&&t.pointerId===r&&lI(n,r)},dI=e=>{if(mF){if(mF.has(e))return!1}else mF=new WeakSet;return mF.add(e),!0},hI=class extends XM{constructor(){super(...arguments),this.beanName="dragSvc",this.dragging=!1,this.drag=null,this.dragSources=[]}get startTarget(){var e;return(null==(e=this.drag)?void 0:e.start.target)??null}isPointer(){return!!(null==gF?void 0:gF.has(UD(this.beans)))}hasPointerCapture(){var e,t,n;const r=null==(e=this.drag)?void 0:e.pointerCapture;return!(!r||!(null==(n=(t=this.beans.eRootDiv).hasPointerCapture)?void 0:n.call(t,r.pointerId)))}destroy(){this.drag&&this.cancelDrag();const e=this.dragSources;for(const t of e)pI(t);e.length=0,super.destroy()}removeDragSource(e){const t=this.dragSources;for(let n=0,r=t.length;n<r;++n){const r=t[n];if(r.params===e){t.splice(n,1),pI(r);break}}}addDragSource(e){if(!this.isAlive())return;const{eElement:t,includeTouch:n}=e,r=[];let o;if(n){const e=t.style;e&&(o=e.touchAction,e.touchAction="none")}const i={handlers:r,params:e,oldTouchAction:o};this.dragSources.push(i);zM(r,[t,"pointerdown",t=>this.onPointerDown(e,t),{passive:!1}],[t,"mousedown",t=>this.onMouseDown(e,t)]);const s=this.gos.get("suppressTouch");if(n&&!s){zM(r,[t,"touchstart",t=>this.onTouchStart(e,t),{passive:!1}])}}cancelDrag(e){var t,n;const r=this.drag;e??(e=null==r?void 0:r.eElement),e&&this.eventSvc.dispatchEvent({type:"dragCancelled",target:e}),null==(n=null==r?void 0:(t=r.params).onDragCancel)||n.call(t),this.destroyDrag()}shouldPreventMouseEvent(e){const t=e.type;return("mousemove"===t||"pointermove"===t)&&e.cancelable&&VM(this.beans,e)&&!cM(gI(e))}initDrag(e,...t){this.drag=e;const n=this.beans,r=e=>this.onScroll(e),o=UD(n),i=qD(n);zM(e.handlers,[o,"contextmenu",UM],[o,"keydown",e=>this.onKeyDown(e)],[i,"scroll",r,{capture:!0}],[i.defaultView||window,"scroll",r],...t)}destroyDrag(){this.dragging=!1;const e=this.drag;if(e){const t=e.rootEl;(null==gF?void 0:gF.get(t))===e&&(null==gF||gF.delete(t)),this.drag=null,(e=>{if(!e)return;cI(e);const{eElement:t,pointerId:n}=e;if(t){try{t.releasePointerCapture(n)}catch{}e.eElement=null}})(e.pointerCapture),$M(e.handlers)}}onPointerDown(e,t){if(this.isPointer())return;const n=this.beans;if(null==mF?void 0:mF.has(t))return;const r=t.pointerType;if("touch"===r){if(n.gos.get("suppressTouch")||!e.includeTouch)return;if(e.stopPropagationForTouch&&t.stopPropagation(),cM(gI(t)))return}if(!t.isPrimary)return;if("mouse"===r&&0!==t.button)return;this.destroyDrag();const o=UD(n),i=e.eElement,s=t.pointerId,a=new fI(o,e,t,s);gF??(gF=new WeakMap),gF.set(o,a);this.initDrag(a,[o,"pointerup",e=>{e.pointerId===s&&this.onMouseOrPointerUp(e)}],[o,"pointercancel",e=>{e.pointerId===s&&dI(e)&&this.cancelDrag()}],[o,"pointermove",e=>{e.pointerId===s&&this.onMouseOrPointerMove(e)},{passive:!1}],[o,"touchmove",UM,{passive:!1}],[i,"mousemove",UM,{passive:!1}]),0===e.dragStartPixels?this.onMouseOrPointerMove(t):dI(t)}onTouchStart(e,t){if(this.gos.get("suppressTouch")||!e.includeTouch)return;if(!dI(t))return;if(cM(gI(t)))return;if(e.stopPropagationForTouch&&t.stopPropagation(),this.isPointer())return void UM(t);this.destroyDrag();const n=this.beans,r=UD(n),o=new fI(r,e,t.touches[0]),i=e=>this.onTouchUp(e),s=t.target??e.eElement;this.initDrag(o,[UD(n),"touchmove",UM,{passive:!1}],[s,"touchmove",e=>this.onTouchMove(e),{passive:!0}],[s,"touchend",i,{passive:!0}],[s,"touchcancel",i,{passive:!0}]),0===e.dragStartPixels&&this.onMove(o.start)}onMouseDown(e,t){if(0!==t.button)return;if(null==mF?void 0:mF.has(t))return;if(this.isPointer())return;const n=this.beans;this.destroyDrag();const r=new fI(UD(n),e,t),o=UD(n);this.initDrag(r,[o,"mousemove",e=>this.onMouseOrPointerMove(e)],[o,"mouseup",e=>this.onMouseOrPointerUp(e)]),0===e.dragStartPixels?this.onMouseOrPointerMove(t):dI(t)}onScroll(e){var t;if(!dI(e))return;const n=this.drag,r=null==n?void 0:n.lastDrag;r&&this.dragging&&(null==(t=n.params)||t.onDragging(r))}onMouseOrPointerMove(e){var t;dI(e)&&(UT()&&(null==(t=qD(this.beans).getSelection())||t.removeAllRanges()),this.shouldPreventMouseEvent(e)&&UM(e),this.onMove(e))}onTouchMove(e){const t=this.drag;if(!t||!dI(e))return;const n=GM(t.start,e.touches);n&&(e.preventDefault(),this.onMove(n))}onMove(e){const t=this.drag;if(!t)return;t.lastDrag=e;const n=t.params;if(!this.dragging){const r=t.start;if(_M(e,r,n.dragStartPixels??4))return;if(this.dragging=!0,n.capturePointer&&(t.pointerCapture=((e,t)=>{if("undefined"==typeof PointerEvent||!(t instanceof PointerEvent))return null;const n=t.pointerId;if(!lI(e,n))return null;const r={eElement:e,pointerId:n,onLost(e){uI(r,e)}};return e.addEventListener("lostpointercapture",r.onLost),r})(this.beans.eRootDiv,e)),this.eventSvc.dispatchEvent({type:"dragStarted",target:n.eElement}),n.onDragStart(r),this.drag!==t)return;if(n.onDragging(r),this.drag!==t)return}n.onDragging(e)}onTouchUp(e){const t=this.drag;t&&dI(e)&&this.onUp(GM(t.start,e.changedTouches))}onMouseOrPointerUp(e){dI(e)&&this.onUp(e)}onUp(e){const t=this.drag;t&&(e||(e=t.lastDrag),e&&this.dragging&&(this.dragging=!1,t.params.onDragStop(e),this.eventSvc.dispatchEvent({type:"dragStopped",target:t.params.eElement})),this.destroyDrag())}onKeyDown(e){e.key===OT&&this.cancelDrag()}},pI=e=>{$M(e.handlers);const t=e.oldTouchAction;if(null!=t){const n=e.params.eElement.style;n&&(n.touchAction=t)}},fI=class{constructor(e,t,n,r=null){this.rootEl=e,this.params=t,this.start=n,this.pointerId=r,this.handlers=[],this.lastDrag=null,this.pointerCapture=null,this.eElement=t.eElement}},gI=e=>{const t=e.target;return t instanceof Element?t:null},mI=class extends XM{constructor(){super(...arguments),this.beanName="dragAndDrop",this.dragSourceAndParamsList=[],this.dragItem=null,this.dragInitialSourcePointerOffsetX=0,this.dragInitialSourcePointerOffsetY=0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.dragSource=null,this.dragImageParent=null,this.dragImageCompPromise=null,this.dragImageComp=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.dropTargets=[],this.lastDropTarget=null}addDragSource(e,t=!1){const n={capturePointer:!0,dragSource:e,eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:t=>this.onDragStart(e,t),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push(n),this.beans.dragSvc.addDragSource(n)}setDragImageCompIcon(e,t=!1){const n=this.dragImageComp;n&&(t||this.dragImageLastIcon!==e)&&(this.dragImageLastIcon=e,n.setIcon(e,t))}removeDragSource(e){var t;const{dragSourceAndParamsList:n,beans:r}=this,o=n.find(t=>t.dragSource===e);o&&(null==(t=r.dragSvc)||t.removeDragSource(o),yN(n,o))}destroy(){const{dragSourceAndParamsList:e,dropTargets:t,beans:n}=this,r=n.dragSvc;for(const o of e)null==r||r.removeDragSource(o);e.length=0,t.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){const e=this.lastMouseEvent;e&&this.onDragging(e,!0)}onDragStart(e,t){var n;this.lastMouseEvent=t,this.dragSource=e,this.dragItem=e.getDragItem();const r=e.eElement.getBoundingClientRect();this.dragInitialSourcePointerOffsetX=t.clientX-r.left,this.dragInitialSourcePointerOffsetY=t.clientY-r.top,null==(n=e.onDragStarted)||n.call(e),this.createAndUpdateDragImageComp(e)}onDragStop(e){var t,n;const{dragSource:r,lastDropTarget:o}=this;if(null==(t=null==r?void 0:r.onDragStopped)||t.call(r),o){const t=this.dropTargetEvent(o,e,!1);null==(n=o.onDragStop)||n.call(o,t)}this.clearDragAndDropProperties()}onDragCancel(){var e,t;const{dragSource:n,lastDropTarget:r,lastMouseEvent:o}=this;if(null==(e=null==n?void 0:n.onDragCancelled)||e.call(n),r&&o){const e=this.dropTargetEvent(r,o,!1);null==(t=r.onDragCancel)||t.call(r,e)}this.clearDragAndDropProperties()}onDragging(e,t=!1){var n,r,o;this.positionDragImageComp(e);const i=this.findCurrentDropTarget(e),{lastDropTarget:s,dragSource:a,dragItem:l}=this;let c=!1;if(i!==s){if(c=!0,s){const r=this.dropTargetEvent(s,e,t);null==(n=s.onDragLeave)||n.call(s,r)}if(null===s||i?null===s&&i&&this.handleEnter(a,l):this.handleExit(a,l),i){const n=this.dropTargetEvent(i,e,t);null==(r=i.onDragEnter)||r.call(i,n)}this.lastDropTarget=i}else if(i){const n=this.dropTargetEvent(i,e,t);null==(o=i.onDragging)||o.call(i,n),(null==n?void 0:n.changed)&&(c=!0)}this.lastMouseEvent=e,c&&this.updateDragImageComp()}clearDragAndDropProperties(){this.removeDragImageComp(this.dragImageComp),this.dragImageCompPromise=null,this.dragImageParent=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.lastDropTarget=null,this.dragItem=null,this.dragInitialSourcePointerOffsetX=0,this.dragInitialSourcePointerOffsetY=0,this.dragSource=null}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,n=[[e.getContainer()]];return t?n.concat(t):n}isMouseOnDropTarget(e,t){const n=this.getAllContainersFromDropTarget(t);let r=!1;const o=(e,t)=>{for(const n of t){const{width:t,height:r,left:o,right:i,top:s,bottom:a}=n.getBoundingClientRect();if(0===t||0===r)return!1;const l=e.clientX>=o&&e.clientX<i,c=e.clientY>=s&&e.clientY<a;if(!l||!c)return!1}return!0};for(const a of n)if(o(e,a)){r=!0;break}const{eElement:i,type:s}=this.dragSource;return!(t.targetContainsSource&&!t.getContainer().contains(i))&&(r&&t.isInterestedIn(s,i))}findCurrentDropTarget(e){const t=this.dropTargets.filter(t=>this.isMouseOnDropTarget(e,t)),n=t.length;if(0===n)return null;if(1===n)return t[0];const r=UD(this.beans).elementsFromPoint(e.clientX,e.clientY);for(const o of r)for(const e of t){if(-1!==this.getAllContainersFromDropTarget(e).flatMap(e=>e).indexOf(o))return e}return null}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.find(t=>t.external&&t.getContainer()===e)||null}dropTargetEvent(e,t,n){const{dragSource:r,dragItem:o,lastDraggingEvent:i,lastMouseEvent:s,dragInitialSourcePointerOffsetX:a,dragInitialSourcePointerOffsetY:l}=this,c=e.getContainer(),u=c.getBoundingClientRect(),{clientX:d,clientY:h}=t,p=d-((null==s?void 0:s.clientX)||0),f=h-((null==s?void 0:s.clientY)||0),g=this.createEvent({event:t,x:d-u.left,y:h-u.top,vDirection:f>0?"down":f<0?"up":null,hDirection:p<0?"left":p>0?"right":null,initialSourcePointerOffsetX:a,initialSourcePointerOffsetY:l,dragSource:r,fromNudge:n,dragItem:o,dropZoneTarget:c,dropTarget:(null==i?void 0:i.dropTarget)??null,changed:!!(null==i?void 0:i.changed)});return this.lastDraggingEvent=g,g}positionDragImageComp(e){var t;const n=null==(t=this.dragImageComp)?void 0:t.getGui();n&&WM(n,e,this.beans)}removeDragImageComp(e){var t;this.dragImageComp===e&&(this.dragImageComp=null),e&&(null==(t=e.getGui())||t.remove(),this.destroyBean(e))}createAndUpdateDragImageComp(e){const t=this.createDragImageComp(e)??null;this.dragImageCompPromise=t,null==t||t.then(e=>{if(t!==this.dragImageCompPromise||!this.lastMouseEvent||!this.isAlive())return void this.destroyBean(e);this.dragImageCompPromise=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0;const n=this.dragImageComp;n!==e&&(this.dragImageComp=e,this.removeDragImageComp(n)),e&&(this.appendDragImageComp(e),this.updateDragImageComp())})}appendDragImageComp(e){var t;const n=e.getGui(),r=n.style;r.position="absolute",r.zIndex="9999",(null==(t=this.beans.dragSvc)?void 0:t.hasPointerCapture())&&(r.pointerEvents="none"),this.gos.setInstanceDomData(n),this.beans.environment.applyThemeClasses(n),r.top="20px",r.left="20px";const o=YD(this.beans);this.dragImageParent=o,o?o.appendChild(n):this.warnNoBody()}updateDragImageComp(){var e;const{dragImageComp:t,dragSource:n,lastDropTarget:r,lastDraggingEvent:o,dragImageLastLabel:i}=this;if(!t)return;this.setDragImageCompIcon((null==(e=null==r?void 0:r.getIconName)?void 0:e.call(r,o))??null);let s=null==n?void 0:n.dragItemName;"function"==typeof s&&(s=s(o)),s||(s=""),i!==s&&(this.dragImageLastLabel=s,t.setLabel(s))}};function vI(e,t){return e+"_"+t}function yI(e){return e instanceof bI}var bI=class extends YM{constructor(e,t,n,r){super(),this.providedColumnGroup=e,this.groupId=t,this.partId=n,this.pinned=r,this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.colIdSanitised=$D(this.getUniqueId())}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}getUniqueId(){return vI(this.groupId,this.partId)}isEmptyGroup(){return 0===this.displayedChildren.length}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!(!e||0===e.length)&&e.every(e=>e.isMoving())}checkLeft(){for(const e of this.displayedChildren)yI(e)&&e.checkLeft();if(this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const e=gN(this.displayedChildren).getLeft();this.setLeft(e)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;for(const t of this.displayedChildren??[])e+=t.getActualWidth();return e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;for(const t of this.displayedChildren)t.isResizable()&&(e=!0);return e}getMinWidth(){let e=0;for(const t of this.displayedChildren)e+=t.getMinWidth();return e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){var e;return!!(null==(e=this.getColGroupDef())?void 0:e.autoHeaderHeight)}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){for(const t of this.displayedChildren??[])lN(t)?e.push(t):yI(t)&&t.addDisplayedLeafColumns(e)}addLeafColumns(e){for(const t of this.children??[])lN(t)?e.push(t):yI(t)&&t.addLeafColumns(e)}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return this.isPadding()&&(null==e?void 0:e.isPadding())?1+e.getPaddingLevel():0}calculateDisplayedColumns(){var e;this.displayedChildren=[];let t=this;for(;null==t?void 0:t.isPadding();)t=t.getParent();if(!(!!t&&t.getProvidedColumnGroup().isExpandable()))return this.displayedChildren=this.children,void this.dispatchLocalEvent({type:"displayedChildrenChanged"});for(const n of this.children??[]){if(yI(n)&&!(null==(e=n.displayedChildren)?void 0:e.length))continue;switch(n.getColumnGroupShow()){case"open":t.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(n);break;case"closed":t.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(n);break;default:this.displayedChildren.push(n)}}this.dispatchLocalEvent({type:"displayedChildrenChanged"})}};function wI(e){return TM(e)}new Set(Object.values({agSetColumnFilter:"agSetColumnFilterHandler",agMultiColumnFilter:"agMultiColumnFilterHandler",agGroupColumnFilter:"agGroupColumnFilterHandler",agNumberColumnFilter:"agNumberColumnFilterHandler",agDateColumnFilter:"agDateColumnFilterHandler",agTextColumnFilter:"agTextColumnFilterHandler"}));var CI="__ag_Grid_Stop_Propagation";function xI(e){e[CI]=!0}function SI(e){return!0===e[CI]}var kI=class extends YM{constructor(e,t={}){super(),this.eFocusable=e,this.callbacks=t,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:e=>{if(e.defaultPrevented)return;const t=dF(this.beans,this.eFocusable,0,e.shiftKey);t&&(t.focus(),e.preventDefault())},...t}}postConstruct(){const{eFocusable:e,callbacks:{onFocusIn:t,onFocusOut:n}}=this;e.classList.add("ag-focus-managed"),this.addKeyDownListeners(e),t&&this.addManagedElementListeners(e,{focusin:t}),n&&this.addManagedElementListeners(e,{focusout:n})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:e=>{if(e.defaultPrevented||SI(e))return;const{callbacks:t}=this;t.shouldStopEventPropagation(e)?xI(e):e.key===PT?t.onTabKeyDown(e):t.handleKeyDown&&t.handleKeyDown(e)}})}},PI={AUTO_HEIGHT:"ag-layout-auto-height",NORMAL:"ag-layout-normal",PRINT:"ag-layout-print"},jI=class extends YM{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.gos.get("domLayout"),t={autoHeight:"autoHeight"===e,normal:"normal"===e,print:"print"===e},n=t.autoHeight?PI.AUTO_HEIGHT:t.print?PI.PRINT:PI.NORMAL;this.view.updateLayoutClasses(n,t)}},OI="Viewport",RI="fakeVScrollComp",EI=["fakeHScrollComp","centerHeader","topCenter","bottomCenter","stickyTopCenter","stickyBottomCenter"],DI=class extends YM{constructor(e){super(),this.clearRetryListenerFncs=[],this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.lastIsHorizontalScrollShowing=!1,this.scrollTimer=0,this.isScrollActive=!1,this.isVerticalPositionInvalidated=!0,this.isHorizontalPositionInvalidated=!0,this.eBodyViewport=e,this.resetLastHScrollDebounced=nA(this,()=>this.lastScrollSource[1]=null,150),this.resetLastVScrollDebounced=nA(this,()=>this.lastScrollSource[0]=null,150)}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.animationFrameSvc=e.animationFrameSvc,this.visibleCols=e.visibleCols}destroy(){super.destroy(),this.clearRetryListenerFncs=[],window.clearTimeout(this.scrollTimer)}postConstruct(){this.enableRtl=this.gos.get("enableRtl");const e=this.invalidateVerticalScroll.bind(this),t=this.invalidateHorizontalScroll.bind(this);this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),bodyHeightChanged:e,scrollGapChanged:t}),this.addManagedElementListeners(this.eBodyViewport,{scroll:e}),this.ctrlsSvc.whenReady(this,e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}invalidateHorizontalScroll(){this.isHorizontalPositionInvalidated=!0}invalidateVerticalScroll(){this.isVerticalPositionInvalidated=!0}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.eViewport,{scroll:this.onHScroll.bind(this,OI)});for(const e of EI){const t=this.ctrlsSvc.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsSvc.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),n=t?nA(this,this.onVScroll.bind(this,OI),100):this.onVScroll.bind(this,OI),r=t?nA(this,this.onVScroll.bind(this,RI),100):this.onVScroll.bind(this,RI);this.addManagedElementListeners(this.eBodyViewport,{scroll:n}),this.registerScrollPartner(e,r)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){null==this.centerRowsCtrl||(void 0===e&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const t of[...EI,OI]){if(this.lastScrollSource[1]===t)continue;vM(this.getViewportForSource(t),e,this.enableRtl)}}getViewportForSource(e){return e===OI?this.centerRowsCtrl.eViewport:this.ctrlsSvc.get(e).eViewport}isControllingScroll(e,t){return null==this.lastScrollSource[t]?(0===t?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;const t=this.centerRowsCtrl.eViewport,{scrollLeft:n}=t;if(this.shouldBlockScrollUpdate(1,n,!0))return;const r=mM(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(r),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;if(t=e===OI?this.eBodyViewport.scrollTop:this.ctrlsSvc.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,t,!0))return;const{animationFrameSvc:n}=this;null==n||n.setScrollTop(t),this.nextScrollTop=t,e===OI?this.ctrlsSvc.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,(null==n?void 0:n.active)?n.schedule():this.scrollGridIfNeeded(!0),this.resetLastVScrollDebounced()}doHorizontalScroll(e){const t=this.ctrlsSvc.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}isScrolling(){return this.isScrollActive}fireScrollEvent(e){const t={type:"bodyScroll",direction:1===e?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.isScrollActive=!0,this.eventSvc.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=window.setTimeout(()=>{this.scrollTimer=0,this.isScrollActive=!1,this.eventSvc.dispatchEvent({...t,type:"bodyScrollEnd"})},150)}shouldBlockScrollUpdate(e,t,n=!1){return!(n&&!XT())&&(0===e?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t))}shouldBlockVerticalScroll(e){const t=fM(this.eBodyViewport),{scrollHeight:n}=this.eBodyViewport;return!!(e<0||e+t>n)}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:n}=this.centerRowsCtrl.eViewport;if(this.enableRtl){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>n}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){const e=this.scrollLeft;let t=!1;for(const n of EI){if(this.getViewportForSource(n).scrollLeft!==e){t=!0;break}}t&&this.onHScroll(OI)}scrollGridIfNeeded(e=!1){const t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,e&&this.invalidateVerticalScroll(),this.redrawRowsAfterScroll()),t}setHorizontalScrollPosition(e,t=!1){const n=this.centerRowsCtrl.eViewport.scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(e=this.enableRtl?e>0?0:n:Math.min(Math.max(e,0),n)),vM(this.centerRowsCtrl.eViewport,Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.invalidateVerticalScroll(),this.eBodyViewport.scrollTop=e}getVScrollPosition(){if(!this.isVerticalPositionInvalidated){const{lastOffsetHeight:e,lastScrollTop:t}=this;return{top:t,bottom:t+e}}this.isVerticalPositionInvalidated=!1;const{scrollTop:e,offsetHeight:t}=this.eBodyViewport;return this.lastScrollTop=e,this.lastOffsetHeight=t,{top:e,bottom:e+t}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.isHorizontalPositionInvalidated&&(this.lastIsHorizontalScrollShowing=this.centerRowsCtrl.isHorizontalScrollShowing(),this.isHorizontalPositionInvalidated=!1),this.lastIsHorizontalScrollShowing}scrollHorizontally(e){const t=this.centerRowsCtrl.eViewport.scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.eViewport.scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){const{rowModel:n}=this.beans,r=n.getRowCount();let o=-1;for(let i=0;i<r;i++){const t=n.getRow(i);if("function"==typeof e){if(t&&e(t)){o=i;break}}else if(e===t||e===t.data){o=i;break}}o>=0&&this.ensureIndexVisible(o,t)}ensureIndexVisible(e,t,n=0){if(GA(this.gos,"print"))return;const{rowModel:r}=this.beans,o=r.getRowCount();if("number"!=typeof e||e<0||e>=o)return void TA(88,{index:e});this.clearRetryListeners();const{frameworkOverrides:i,pageBounds:s,rowContainerHeight:a,rowRenderer:l}=this.beans;i.wrapIncoming(()=>{var o,i;const c=this.ctrlsSvc.getGridBodyCtrl(),u=r.getRow(e);let d,h,p=0;this.invalidateVerticalScroll();do{const{stickyTopHeight:e,stickyBottomHeight:n}=c,r=u.rowTop,o=u.rowHeight,i=s.getPixelOffset(),f=u.rowTop-i,g=f+u.rowHeight,m=this.getVScrollPosition(),v=a.divStretchOffset,y=m.top+v,b=m.bottom+v,w=b-y,C=a.getScrollPositionForPixel(f),x=a.getScrollPositionForPixel(g-w),S=Math.min((C+x)/2,f);let k=null;"top"===t?k=C-e:"bottom"===t?k=x+n:"middle"===t?k=S:y+e>f?k=C-e:b-n<g&&(k=x-C>w?C-e:x+n),null!==k&&(this.setVerticalScrollPosition(k),l.redraw({afterScroll:!0})),d=r!==u.rowTop||o!==u.rowHeight,h=e!==c.stickyTopHeight||n!==c.stickyBottomHeight,p++}while((d||h)&&p<10);if(null==(o=this.animationFrameSvc)||o.flushAllFrames(),n<10&&((null==u?void 0:u.stub)||!(null==(i=this.beans.rowAutoHeight)?void 0:i.areRowsMeasured()))){const o=this.getVScrollPosition().top;this.clearRetryListenerFncs=this.addManagedEventListeners({bodyScroll:()=>{const e=this.getVScrollPosition().top;o!==e&&this.clearRetryListeners()},modelUpdated:()=>{this.clearRetryListeners(),e>=r.getRowCount()||this.ensureIndexVisible(e,t,n+1)}})}})}clearRetryListeners(){for(const e of this.clearRetryListenerFncs)e();this.clearRetryListenerFncs=[]}ensureColumnVisible(e,t="auto"){const{colModel:n,frameworkOverrides:r}=this.beans,o=n.getCol(e);if(!o)return;if(o.isPinned())return;if(!this.visibleCols.isColDisplayed(o))return;const i=this.getPositionedHorizontalScroll(o,t);r.wrapIncoming(()=>{var e;null!==i&&this.centerRowsCtrl.setCenterViewportScrollLeft(i),this.centerRowsCtrl.onHorizontalViewportChanged(),null==(e=this.animationFrameSvc)||e.flushAllFrames()})}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:n,columnAfterEnd:r}=this.isColumnOutsideViewport(e),o=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),i=this.centerRowsCtrl.getCenterWidth(),s=this.enableRtl;let a=(s?n:r)||o,l=s?r:n;"auto"!==t&&(a="start"===t,l="end"===t);const c="middle"===t;if(a||l||c){const{colLeft:t,colMiddle:n,colRight:r}=this.getColumnBounds(e);return c?n-i/2:a?s?r:t:s?t-i:r-i}return null}isColumnOutsideViewport(e){const{start:t,end:n}=this.getViewportBounds(),{colLeft:r,colRight:o}=this.getColumnBounds(e),i=this.enableRtl;return{columnBeforeStart:i?t>o:n<o,columnAfterEnd:i?n<r:t>r}}getColumnBounds(e){const t=this.enableRtl,n=this.visibleCols.bodyWidth,r=e.getActualWidth(),o=e.getLeft(),i=t?-1:1,s=t?n-o:o;return{colLeft:s,colMiddle:s+r/2*i,colRight:s+r*i}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft();return{start:t,end:e+t,width:e}}},MI=class extends YM{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=GA(this.gos,"print"),{visibleCols:t,scrollVisibleSvc:n}=this.beans,r=t.bodyWidth,o=t.getColsLeftWidth(),i=t.getDisplayedColumnsRightWidth();let s;if(e)s=r+o+i;else if(s=r,this.addSpacer){0===(this.gos.get("enableRtl")?o:i)&&n.verticalScrollShowing&&(s+=n.getScrollbarWidth())}this.callback(s)}},AI=class extends YM{constructor(e){super(),this.centerContainerCtrl=e}wireBeans(e){this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const{beans:e,centerContainerCtrl:t,gridBodyCtrl:n}=this,r=()=>{DM(e,()=>{this.onCenterViewportResized()})};t.registerViewportResizeListener(r),n.registerBodyViewportResizeListener(r)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleSvc.updateScrollGap(),this.centerContainerCtrl.isViewportInTheDOMTree()){const{pinnedCols:e,colFlex:t}=this.beans;null==e||e.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const n=this.centerContainerCtrl.getCenterWidth();n!==this.centerWidth&&(this.centerWidth=n,null==t||t.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.scrollFeature.checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=fM(this.gridBodyCtrl.eBodyViewport);this.bodyHeight!==e&&(this.bodyHeight=e,this.eventSvc.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){if(!this.isAlive())return;const e={horizontalScrollShowing:this.centerContainerCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleSvc.setScrollsVisible(e)}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.beans.colViewport.setScrollPosition(e,t)}};function NI(e,t,n,r){var o;const i=null==(o=t.getColDef().cellRendererParams)?void 0:o.suppressMouseEventHandling;return TI(e,t,n,r,i)}function TI(e,t,n,r,o){return!!o&&o(nN(e,{column:t,node:n,event:r}))}function FI(e,t,n){let r=t;for(;r;){const t=KA(e,r,n);if(t)return t;r=r.parentElement}return null}var II="cellCtrl";function LI(e,t){return FI(e,t,II)}var BI="renderedRow";function HI(e,t){return FI(e,t,BI)}function _I(e,t,n,r,o){const i=r?r.getColDef().suppressKeyboardEvent:void 0;if(!i)return!1;const s=nN(e,{event:t,editing:o,column:r,node:n,data:n.data,colDef:r.getColDef()});if(i){if(i(s))return!0}return!1}var GI=class extends YM{constructor(e){super(),this.element=e}postConstruct(){var e;this.addKeyboardListeners(),this.addMouseListeners(),null==(e=this.beans.touchSvc)||e.mockRowContextMenu(this),this.editSvc=this.beans.editSvc}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){const e=["dblclick","contextmenu","mouseover","mouseout","click",BM("touchstart")?"touchstart":"mousedown"];for(const t of e){const e=this.processMouseEvent.bind(this,t);this.addManagedElementListeners(this.element,{[t]:e})}}processMouseEvent(e,t){var n;if(!VM(this.beans,t)||SI(t))return;const{cellCtrl:r,rowCtrl:o}=this.getControlsForEventTarget(t.target);"contextmenu"===e?((null==r?void 0:r.column)&&r.dispatchCellContextMenuEvent(t),null==(n=this.beans.contextMenuSvc)||n.handleContextMenuMouseEvent(t,void 0,o,r)):(r&&r.onMouseEvent(e,t),o&&o.onMouseEvent(e,t))}getControlsForEventTarget(e){const{gos:t}=this;return{cellCtrl:LI(t,e),rowCtrl:HI(t,e)}}processKeyboardEvent(e,t){const{cellCtrl:n,rowCtrl:r}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(n?this.processCellKeyboardEvent(n,e,t):(null==r?void 0:r.isFullWidth())&&this.processFullWidthRowKeyboardEvent(r,e,t))}processCellKeyboardEvent(e,t,n){var r,o;const i=(null==(r=this.editSvc)?void 0:r.isEditing(e,{withOpenEditor:!0}))??!1;if(!_I(this.gos,n,e.rowNode,e.column,i)&&"keydown"===t){!i&&(null==(o=this.beans.navigation)?void 0:o.handlePageScrollingKey(n))||e.onKeyDown(n),this.doGridOperations(n,i),function(e){var t;return!(e.altKey||e.ctrlKey||e.metaKey)&&1===(null==(t=e.key)?void 0:t.length)}(n)&&e.processCharacter(n)}"keydown"===t&&this.eventSvc.dispatchEvent(e.createEvent(n,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,n){const{rowNode:r}=e,{focusSvc:o,navigation:i}=this.beans,s=o.getFocusedCell(),a=null==s?void 0:s.column;if(!_I(this.gos,n,r,a,!1)){const r=n.key;if("keydown"===t)switch(r){case LT:case BT:case FT:case IT:null==i||i.handlePageScrollingKey(n,!0);break;case ET:case MT:if(!this.gos.get("embedFullWidthRows"))break;case DT:case AT:e.onKeyboardNavigate(n);break;case PT:e.onTabKeyDown(n)}}"keydown"===t&&this.eventSvc.dispatchEvent(e.createRowEvent("cellKeyDown",n))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey)return;if(t)return;if(!VM(this.beans,e))return;const n=function(e){const{keyCode:t}=e;let n;switch(t){case 65:n=HT;break;case 67:n=_T;break;case 86:n=VT;break;case 68:n=GT;break;case 90:n=$T;break;case 89:n=zT;break;default:n=e.code}return n}(e),{clipboardSvc:r,undoRedo:o}=this.beans;return n===HT?this.onCtrlAndA(e):n===_T?this.onCtrlAndC(r,e):n===GT?this.onCtrlAndD(r,e):n===VT?this.onCtrlAndV(r,e):n===WT?this.onCtrlAndX(r,e):n===zT?this.onCtrlAndY(o):n===$T?this.onCtrlAndZ(o,e):void 0}onCtrlAndA(e){const{beans:{rowModel:t,rangeSvc:n,selectionSvc:r},gos:o}=this;n&&QA(o)&&!function(e){const t=e.get("rowSelection");return"string"!=typeof t&&"multiRow"===(null==t?void 0:t.mode)&&(t.ctrlASelectsRows??!1)}(o)&&t.isRowsToRender()?function(e){const{pinnedRowModel:t,rowModel:n}=e,[r,o]=[(null==t?void 0:t.isEmpty("top"))??!0,(null==t?void 0:t.isEmpty("bottom"))??!0],i=r?null:"top";let s,a;o?(s=null,a=n.getRowCount()-1):(s="bottom",a=(null==t?void 0:t.getPinnedBottomRowCount())??-1);const{visibleCols:l,rangeSvc:c}=e,u=l.allCols;c&&(null==u?void 0:u.length)&&c.setCellRange({rowStartIndex:0,rowStartPinned:i,rowEndIndex:a,rowEndPinned:s})}(this.beans):r&&r.selectAllRowNodes({source:"keyboardSelectAll",selectAll:eN(o)}),e.preventDefault()}onCtrlAndC(e,t){var n;if(!e||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:r}=this.getControlsForEventTarget(t.target);(null==(n=this.editSvc)?void 0:n.isEditing(r,{withOpenEditor:!0}))||(t.preventDefault(),e.copyToClipboard())}onCtrlAndX(e,t){var n;if(!e||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:r}=this.getControlsForEventTarget(t.target);(null==(n=this.editSvc)?void 0:n.isEditing(r,{withOpenEditor:!0}))||(t.preventDefault(),e.cutToClipboard(void 0,"ui"))}onCtrlAndV(e,t){var n;const{cellCtrl:r}=this.getControlsForEventTarget(t.target);(null==(n=this.editSvc)?void 0:n.isEditing(r,{withOpenEditor:!0}))||e&&!this.gos.get("suppressClipboardPaste")&&e.pasteFromClipboard()}onCtrlAndD(e,t){e&&!this.gos.get("suppressClipboardPaste")&&e.copyRangeDown(),t.preventDefault()}onCtrlAndZ(e,t){this.gos.get("undoRedoCellEditing")&&e&&(t.preventDefault(),t.shiftKey?e.redo("ui"):e.undo("ui"))}onCtrlAndY(e){null==e||e.redo("ui")}},VI=class extends YM{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this,this.beans.rowContainerHeight)})}onHeightChanged(e){const t=e.uiContainerHeight,n=null!=t?`${t}px`:"";this.eContainer.style.height=n,this.eViewport&&(this.eViewport.style.height=n)}},WI=e=>e.topRowCtrls,zI=e=>e.getStickyTopRowCtrls(),$I=e=>e.getStickyBottomRowCtrls(),UI=e=>e.bottomRowCtrls,KI=e=>e.allRowCtrls,qI=e=>e.getCtrls("top"),XI=e=>e.getCtrls("center"),YI=e=>e.getCtrls("bottom"),ZI={center:{type:"center",name:"center-cols",getRowCtrls:KI,getSpannedRowCtrls:XI},left:{type:"left",name:"pinned-left-cols",pinnedType:"left",getRowCtrls:KI,getSpannedRowCtrls:XI},right:{type:"right",name:"pinned-right-cols",pinnedType:"right",getRowCtrls:KI,getSpannedRowCtrls:XI},fullWidth:{type:"fullWidth",name:"full-width",fullWidth:!0,getRowCtrls:KI},topCenter:{type:"center",name:"floating-top",getRowCtrls:WI,getSpannedRowCtrls:qI},topLeft:{type:"left",name:"pinned-left-floating",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:WI,getSpannedRowCtrls:qI},topRight:{type:"right",name:"pinned-right-floating",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:WI,getSpannedRowCtrls:qI},topFullWidth:{type:"fullWidth",name:"floating-top-full-width",fullWidth:!0,getRowCtrls:WI},stickyTopCenter:{type:"center",name:"sticky-top",getRowCtrls:zI},stickyTopLeft:{type:"left",name:"pinned-left-sticky-top",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:zI},stickyTopRight:{type:"right",name:"pinned-right-sticky-top",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:zI},stickyTopFullWidth:{type:"fullWidth",name:"sticky-top-full-width",fullWidth:!0,getRowCtrls:zI},stickyBottomCenter:{type:"center",name:"sticky-bottom",getRowCtrls:$I},stickyBottomLeft:{type:"left",name:"pinned-left-sticky-bottom",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:$I},stickyBottomRight:{type:"right",name:"pinned-right-sticky-bottom",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:$I},stickyBottomFullWidth:{type:"fullWidth",name:"sticky-bottom-full-width",fullWidth:!0,getRowCtrls:$I},bottomCenter:{type:"center",name:"floating-bottom",getRowCtrls:UI,getSpannedRowCtrls:YI},bottomLeft:{type:"left",name:"pinned-left-floating-bottom",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:UI,getSpannedRowCtrls:YI},bottomRight:{type:"right",name:"pinned-right-floating-bottom",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:UI,getSpannedRowCtrls:YI},bottomFullWidth:{type:"fullWidth",name:"floating-bottom-full-width",fullWidth:!0,getRowCtrls:UI}};function JI(e){return`ag-${eL(e).name}-viewport`}function QI(e){const t=eL(e);return t.container??`ag-${t.name}-container`}function eL(e){return ZI[e]}var tL=["center","left","right","fullWidth"],nL=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],rL=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],oL=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],iL=["stickyTopCenter","stickyTopLeft","stickyTopRight"],sL=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],aL=[...iL,"stickyTopFullWidth",...sL,"stickyBottomFullWidth"],lL=["topCenter","topLeft","topRight","bottomCenter","bottomLeft","bottomRight","center","left","right",...iL,...sL],cL=class extends YM{constructor(e){super(),this.name=e,this.visible=!0,this.EMPTY_CTRLS=[],this.options=eL(e)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new AI(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.beans.ctrlsSvc.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}setComp(e,t,n,r){this.comp=e,this.eContainer=t,this.eSpannedContainer=n,this.eViewport=r,this.createManagedBean(new GI(this.eViewport??this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const{pinnedCols:o,rangeSvc:i}=this.beans,s=()=>this.onPinnedWidthChanged();this.forContainers(rL,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(null==o?void 0:o.createPinnedWidthFeature(!0,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:s})}),this.forContainers(oL,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(null==o?void 0:o.createPinnedWidthFeature(!1,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:s})}),this.forContainers(tL,()=>this.createManagedBean(new VI(this.eContainer,"center"===this.name?r:void 0))),i&&this.forContainers(lL,()=>this.createManagedBean(i.createDragListenerFeature(this.eContainer))),this.forContainers(nL,()=>this.createManagedBean(new MI(e=>this.comp.setContainerWidth(`${e}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}addListeners(){const{spannedRowRenderer:e,gos:t}=this.beans,n=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({displayedColumnsChanged:n,displayedColumnsWidthChanged:n,displayedRowsChanged:e=>this.onDisplayedRowsChanged(e.afterScroll)}),n(),this.onDisplayedRowsChanged(),e&&this.options.getSpannedRowCtrls&&t.get("enableCellSpan")&&this.addManagedListeners(e,{spannedRowsUpdated:()=>{const t=this.options.getSpannedRowCtrls(e);t&&this.comp.setSpannedRowCtrls(t,!1)}})}listenOnDomOrder(){if(aL.indexOf(this.name)>=0)return void this.comp.setDomOrder(!0);const e=()=>{const e=this.gos.get("ensureDomOrder"),t=GA(this.gos,"print");this.comp.setDomOrder(e||t)};this.addManagedPropertyListener("domLayout",e),e()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const{dragSvc:e}=this.beans;if(!e)return;const t=t=>{e.dragging&&t.cancelable&&t.preventDefault()};this.eContainer.addEventListener("touchmove",t,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",t))}onHorizontalViewportChanged(e=!1){const t=this.getCenterWidth(),n=this.getCenterViewportScrollLeft();this.beans.colViewport.setScrollPosition(t,n,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return gM(this.eViewport)}getCenterViewportScrollLeft(){return mM(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=EM(this.beans,this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return wM(this.eViewport)}getViewportScrollLeft(){return mM(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||(e=this.eViewport).clientWidth<e.scrollWidth;var e}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){vM(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(null!=this.options.pinnedType)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){const t=this.options.getRowCtrls(this.beans.rowRenderer);if(!this.visible||0===t.length)return void this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});const n=GA(this.gos,"print"),r=this.gos.get("embedFullWidthRows")||n,o=t.filter(e=>{const t=e.isFullWidth();return this.options.fullWidth?!r&&t:r||!t});this.comp.setRowCtrls({rowCtrls:o,useFlushSync:e})}},uL=class extends YM{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colModel=e.colModel,this.scrollVisibleSvc=e.scrollVisibleSvc,this.pinnedRowModel=e.pinnedRowModel,this.filterManager=e.filterManager,this.rowGroupColsSvc=e.rowGroupColsSvc}setComp(e,t,n,r,o,i,s){var a,l;this.comp=e,this.eGridBody=t,this.eBodyViewport=n,this.eTop=r,this.eBottom=o,this.eStickyTop=i,this.eStickyBottom=s,this.eCenterColsViewport=n.querySelector(`.${JI("center")}`),this.eFullWidthContainer=n.querySelector(`.${QI("fullWidth")}`),this.eStickyTopFullWidthContainer=i.querySelector(`.${QI("stickyTopFullWidth")}`),this.eStickyBottomFullWidthContainer=s.querySelector(`.${QI("stickyBottomFullWidth")}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",e=>this.setCellTextSelection(e.currentValue)),this.createManagedBean(new jI(this.comp)),this.scrollFeature=this.createManagedBean(new DI(n)),null==(a=this.beans.rowDragSvc)||a.setupRowDrag(n,this),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([r,n,o,i,s]),this.setGridRootRole(),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),null==(l=this.filterManager)||l.setupAdvFilterHeaderComp(r),this.ctrlsSvc.register("gridBodyCtrl",this)}addEventListeners(){const e=this.setFloatingHeights.bind(this),t=this.setGridRootRole.bind(this),n=this.toggleRowResizeStyles.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.updateScrollingClasses.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,pinnedRowsChanged:e,headerHeightChanged:this.setStickyTopOffsetTop.bind(this),columnRowGroupChanged:t,columnPivotChanged:t,rowResizeStarted:n,rowResizeEnded:n}),this.addManagedPropertyListener("treeData",t)}toggleRowResizeStyles(e){const t="rowResizeStarted"===e.type;this.eBodyViewport.classList.toggle("ag-prevent-animation",t)}onGridColumnsChanged(){const e=this.beans.colModel.getCols();this.comp.setColumnCount(e.length)}onScrollVisibilityChanged(){const{scrollVisibleSvc:e}=this,t=e.verticalScrollShowing;this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();const n=`calc(100% + ${(t&&e.getScrollbarWidth()||0)+(JT()?16:0)}px)`;DM(this.beans,()=>this.comp.setBodyViewportWidth(n)),this.updateScrollingClasses()}setGridRootRole(){const{rowGroupColsSvc:e,colModel:t}=this;let n=this.gos.get("treeData");if(!n){const r=t.isPivotMode();n=(e?e.columns.length:0)>=(r?2:1)}this.comp.setGridRootRole(n?"treegrid":"grid")}addFocusListeners(e){for(const t of e)this.addManagedElementListeners(t,{focusin:e=>{const{target:n}=e,r=hM(n,"ag-root",t);t.classList.toggle("ag-has-focus",!r)},focusout:e=>{const{target:n,relatedTarget:r}=e,o=t.contains(r),i=hM(r,"ag-root",t);hM(n,"ag-root",t)||o&&!i||t.classList.remove("ag-has-focus")}})}setColumnMovingCss(e){this.comp.setColumnMovingCss("ag-column-moving",e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss("ag-selectable",e)}updateScrollingClasses(){const{eGridBody:{classList:e},scrollVisibleSvc:t}=this;e.toggle("ag-body-vertical-content-no-gap",!t.verticalScrollGap),e.toggle("ag-body-horizontal-content-no-gap",!t.horizontalScrollGap)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){var e;null==(e=this.beans.editSvc)||e.addStopEditingWhenGridLosesFocus([this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom])}updateRowCount(){var e,t;const n=((null==(e=this.ctrlsSvc.getHeaderRowContainerCtrl())?void 0:e.getRowCount())??0)+((null==(t=this.filterManager)?void 0:t.getHeaderRowCount())??0),{rowModel:r}=this.beans,o=r.isLastRowIndexKnown()?r.getRowCount():-1,i=-1===o?-1:n+o;this.comp.setRowCount(i)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),t=e?"ag-force-vertical-scroll":null,n=GA(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||n&&(r=this.eBodyViewport).clientHeight<r.scrollHeight;var r}setupRowAnimationCssClass(){const{rowContainerHeight:e,environment:t}=this.beans;let n=t.sizesMeasured;const r=()=>{const t=n&&XA(this.gos)&&!e.stretching,r=t?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(r,t)};r(),this.addManagedEventListeners({heightScaleChanged:r}),this.addManagedPropertyListener("animateRows",r),this.addManagedEventListeners({gridStylesChanged:()=>{!n&&t.sizesMeasured&&(n=!0,r())}})}addBodyViewportListener(){const{eBodyViewport:e,eStickyTop:t,eStickyBottom:n,eTop:r,eBottom:o,beans:{popupSvc:i,touchSvc:s}}=this,a=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(e,{contextmenu:a}),null==s||s.mockBodyContextMenu(this,a),this.addManagedElementListeners(e,{wheel:this.onBodyViewportWheel.bind(this,i)});const l=this.onStickyWheel.bind(this);for(const u of[t,n,r,o])this.addManagedElementListeners(u,{wheel:l});const c=this.onHorizontalWheel.bind(this);for(const u of["left","right","topLeft","topRight","bottomLeft","bottomRight"])this.addManagedElementListeners(this.ctrlsSvc.get(u).eContainer,{wheel:c});this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:t,deltaY:n,shiftKey:r}=e;(r||Math.abs(t)>Math.abs(n))&&VM(this.beans,e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaY:t}=e;this.scrollVertically(t)>0&&e.preventDefault()}onHorizontalWheel(e){const{deltaX:t,deltaY:n,shiftKey:r}=e;(r||Math.abs(t)>Math.abs(n))&&this.scrollGridBodyToMatchEvent(e)}scrollGridBodyToMatchEvent(e){const{deltaX:t,deltaY:n}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||n})}onBodyViewportContextMenu(e,t,n){var r;if(!e&&!n)return;if(this.gos.get("preventDefaultOnContextMenu")){(e||n).preventDefault()}const{target:o}=e||t;o!==this.eBodyViewport&&o!==this.ctrlsSvc.get("center").eViewport||null==(r=this.beans.contextMenuSvc)||r.showContextMenu({mouseEvent:e,touchEvent:n,value:null,anchorToElement:this.eGridBody,source:"ui"})}onBodyViewportWheel(e,t){this.gos.get("suppressScrollWhenPopupsAreOpen")&&(null==e?void 0:e.hasAnchoredPopup())&&t.preventDefault()}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.scrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}setFloatingHeights(){const{pinnedRowModel:e,beans:{environment:t}}=this,n=null==e?void 0:e.getPinnedTopTotalHeight(),r=null==e?void 0:e.getPinnedBottomTotalHeight(),o=t.getPinnedRowBorderWidth()-t.getRowBorderWidth(),i=n?o+n:0,s=r?o+r:0;this.comp.setTopHeight(i),this.comp.setBottomHeight(s),this.comp.setTopInvisible(i<=0),this.comp.setBottomInvisible(s<=0),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}setStickyWidth(e){if(e){const e=this.scrollVisibleSvc.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${e}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${e}px)`)}else this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%")}setStickyTopOffsetTop(){var e,t;const n=this.ctrlsSvc.get("gridHeaderCtrl").headerHeight+((null==(e=this.filterManager)?void 0:e.getHeaderHeight())??0),r=(null==(t=this.pinnedRowModel)?void 0:t.getPinnedTopTotalHeight())??0;let o=0;n>0&&(o+=n),r>0&&(o+=r),o>0&&(o+=1),this.comp.setStickyTopTop(`${o}px`)}setStickyBottomOffsetBottom(){const{pinnedRowModel:e,scrollVisibleSvc:t,comp:n}=this,r=((null==e?void 0:e.getPinnedBottomTotalHeight())??0)+(t.horizontalScrollShowing&&t.getScrollbarWidth()||0);n.setStickyBottomBottom(`${r}px`)}};var dL=class extends JN{constructor(e,t){super(),this.direction=t,this.eViewport=qN,this.eContainer=qN,this.hideTimeout=0,this.setTemplate(e)}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.toggleCss("ag-apple-scrollbar",qT()||XT())}destroy(){super.destroy(),window.clearTimeout(this.hideTimeout)}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.invisibleScrollbar=JT(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.toggleCss("ag-scrollbar-active",!0),n=()=>this.toggleCss("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:n,touchend:n})}onScrollVisibilityChanged(){void 0===this.invisibleScrollbar&&this.initialiseInvisibleScrollbar(),DM(this.beans,()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=0),this.toggleCss("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.toggleCss("ag-scrollbar-scrolling",!1),this.hideTimeout=0},400)}})}attemptSettingScrollPosition(e){const t=this.eViewport;!function(e,t,n,r=100){const o=Date.now();let i=null,s=!1;const a=()=>{null!=i&&(window.clearInterval(i),i=null)};e.addDestroyFunc(a);const l=()=>{const e=Date.now()-o>r;(t()||e)&&(n(),s=!0,a())};l(),s||(i=window.setInterval(l,10))}(this,()=>CM(t),()=>this.setScrollPosition(e),100)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}},hL={tag:"div",cls:"ag-body-horizontal-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eLeftSpacer",cls:"ag-horizontal-left-spacer"},{tag:"div",ref:"eViewport",cls:"ag-body-horizontal-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-horizontal-scroll-container"}]},{tag:"div",ref:"eRightSpacer",cls:"ag-horizontal-right-spacer"}]},pL=class extends dL{constructor(){super(hL,"horizontal"),this.eLeftSpacer=qN,this.eRightSpacer=qN,this.setScrollVisibleDebounce=0}wireBeans(e){this.visibleCols=e.visibleCols,this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.refreshCompBottom.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.beans.ctrlsSvc.register("fakeHScrollComp",this),this.createManagedBean(new MI(e=>this.eContainer.style.width=`${e}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}destroy(){window.clearTimeout(this.setScrollVisibleDebounce),super.destroy()}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}refreshCompBottom(){var e;if(!this.invisibleScrollbar)return;const t=(null==(e=this.beans.pinnedRowModel)?void 0:e.getPinnedBottomTotalHeight())??0;this.getGui().style.bottom=`${t}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleSvc.verticalScrollShowing;let t=this.visibleCols.getDisplayedColumnsRightWidth();const n=!this.enableRtl&&e,r=this.scrollVisibleSvc.getScrollbarWidth();n&&(t+=r),kM(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=r);let o=this.visibleCols.getColsLeftWidth();this.enableRtl&&e&&(o+=r),kM(this.eLeftSpacer,o),this.eLeftSpacer.classList.toggle("ag-scroller-corner",o<=r)}setScrollVisible(){const e=this.scrollVisibleSvc.horizontalScrollShowing,t=this.invisibleScrollbar,n=this.gos.get("suppressHorizontalScroll"),r=e&&this.scrollVisibleSvc.getScrollbarWidth()||0,o=n?0:0===r&&t?16:r,i=()=>{this.setScrollVisibleDebounce=0,this.toggleCss("ag-scrollbar-invisible",t),PM(this.getGui(),o),PM(this.eViewport,o),PM(this.eContainer,o),o||this.eContainer.style.setProperty("min-height","1px"),this.setVisible(e,{skipAriaHidden:!0})};window.clearTimeout(this.setScrollVisibleDebounce),e?this.setScrollVisibleDebounce=window.setTimeout(i,100):i()}getScrollPosition(){return mM(this.eViewport,this.enableRtl)}setScrollPosition(e){CM(this.eViewport)||this.attemptSettingScrollPosition(e),vM(this.eViewport,e,this.enableRtl)}},fL={tag:"div",cls:"ag-body-vertical-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eViewport",cls:"ag-body-vertical-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-vertical-scroll-container"}]}]},gL=class extends dL{constructor(){super(fL,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new VI(this.eContainer));const{ctrlsSvc:e}=this.beans;e.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this,e)})}setScrollVisible(){const{scrollVisibleSvc:e}=this.beans,t=e.verticalScrollShowing,n=this.invisibleScrollbar,r=t&&e.getScrollbarWidth()||0,o=0===r&&n?16:r;this.toggleCss("ag-scrollbar-invisible",n),kM(this.getGui(),o),kM(this.eViewport,o),kM(this.eContainer,o),this.setDisplayed(t,{skipAriaHidden:!0})}onRowContainerHeightChanged(e){const t=e.getGridBodyCtrl().eBodyViewport,n=this.getScrollPosition(),r=t.scrollTop;n!=r&&this.setScrollPosition(r,!0)}getScrollPosition(){return this.eViewport.scrollTop}setScrollPosition(e,t){t||CM(this.eViewport)||this.attemptSettingScrollPosition(e),this.eViewport.scrollTop=e}};function mL(e,t,n,r){return HD(e)?[]:function(e,t,n,r,o){if(HD(e))return[];let i;if("function"==typeof e){const s=function(e,t,n,r){return nN(t,{colDef:e,column:n,columnGroup:r})}(t,n,r,o);i=e(s)}else i=e;if("string"==typeof i)return[i];if(Array.isArray(i))return[...i];return[]}(e.headerClass,e,t,n,r)}function vL(e,t,n){e.toggleCss("ag-column-first",n.isColAtEdge(t,"first")),e.toggleCss("ag-column-last",n.isColAtEdge(t,"last"))}function yL(e){var t;return e.gos.get("suppressHeaderFocus")||!!(null==(t=e.overlays)?void 0:t.isExclusive())}function bL(e){var t;return e.gos.get("suppressCellFocus")||!!(null==(t=e.overlays)?void 0:t.isExclusive())}function wL(e,t,n=!1){const r=e.ctrlsSvc.get("gridCtrl");return!(n||!r.focusNextInnerContainer(t))||((n||!t&&!r.isDetailGrid())&&r.forceFocusOutOfContainer(t),!1)}function CL(e){var t;return(null==(t=e.ctrlsSvc.getHeaderRowContainerCtrl())?void 0:t.getRowCount())??0}function xL(e){const t=[],n=e.ctrlsSvc.getHeaderRowContainerCtrls();for(const r of n){if(!r)continue;const n=r.getGroupRowCount()||0;for(let o=0;o<n;o++){const n=r.getGroupRowCtrlAtIndex(o),i=t[o];if(n){const r=SL(e,n);(null==i||r>i)&&(t[o]=r)}}}return t}function SL(e,t){let n=e.colModel.isPivotMode()?function(e){return e.gos.get("pivotGroupHeaderHeight")??OL(e)}(e):OL(e);const r=t.getHeaderCellCtrls();for(const o of r){const{column:e}=o,t=e.getAutoHeaderHeight();null!=t&&t>n&&e.isAutoHeaderHeight()&&(n=t)}return n}function kL(e){let t=e.colModel.isPivotMode()?function(e){return e.gos.get("pivotHeaderHeight")??PL(e)}(e):PL(e);return e.colModel.forAllCols(e=>{const n=e.getAutoHeaderHeight();null!=n&&n>t&&e.isAutoHeaderHeight()&&(t=n)}),t}function PL(e){return e.gos.get("headerHeight")??e.environment.getDefaultHeaderHeight()}function jL(e){return e.gos.get("floatingFiltersHeight")??PL(e)}function OL(e){return e.gos.get("groupHeaderHeight")??PL(e)}var RL=class extends YM{setComp(e,t,n){this.comp=e,this.eGui=t;const{beans:r}=this,{headerNavigation:o,touchSvc:i,ctrlsSvc:s}=r;o&&this.createManagedBean(new kI(n,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this,r),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this,r)}),this.onPivotModeChanged(r),this.setupHeaderHeight();const a=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:a}),null==i||i.mockHeaderContextMenu(this,a),s.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({headerRowsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>DM(this.beans,()=>e()),gridStylesChanged:e,advancedFilterEnabledChanged:e})}setHeaderHeight(){var e;const{beans:t}=this;let n=0;const r=xL(t).reduce((e,t)=>e+t,0),o=kL(t);if((null==(e=t.filterManager)?void 0:e.hasFloatingFilters())&&(n+=jL(t)),n+=r,n+=o,this.headerHeight===n)return;this.headerHeight=n;const i=`${n+1}px`;this.comp.setHeightAndMinHeight(i),this.eventSvc.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(e){const t=e.colModel.isPivotMode();this.comp.toggleCss("ag-pivot-on",t),this.comp.toggleCss("ag-pivot-off",!t)}onDisplayedColumnsChanged(e){const t=e.visibleCols.allCols.some(e=>e.isSpanHeaderHeight());this.comp.toggleCss("ag-header-allow-overflow",t)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),n=e.shiftKey,r=n!==t?"LEFT":"RIGHT",{beans:o}=this,{headerNavigation:i,focusSvc:s}=o;(i.navigateHorizontally(r,!0,e)||!n&&s.focusOverlay(!1)||wL(o,n,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;const{headerNavigation:n}=this.beans;switch(e.key){case ET:t="LEFT";case MT:BD(t)||(t="RIGHT"),n.navigateHorizontally(t,!1,e)&&e.preventDefault();break;case DT:t="UP";case AT:BD(t)||(t="DOWN"),n.navigateVertically(t,e)&&e.preventDefault();break;default:return}}onFocusOut(e){const{relatedTarget:t}=e,{eGui:n,beans:r}=this;!t&&n.contains(KD(r))||n.contains(t)||(r.focusSvc.focusedHeader=null)}onHeaderContextMenu(e,t,n){var r;const{menuSvc:o,ctrlsSvc:i}=this.beans;if(!e&&!n||!(null==o?void 0:o.isHeaderContextMenuEnabled()))return;const{target:s}=e??t;s!==this.eGui&&s!==(null==(r=i.getHeaderRowContainerCtrl())?void 0:r.eViewport)||o.showHeaderContextMenu(void 0,e,n)}},EL=class extends YM{constructor(e,t,n,r){super(),this.columnOrGroup=e,this.eCell=t,this.colsSpanning=r,this.columnOrGroup=e,this.ariaEl=t.querySelector("[role=columnheader]")||t,this.beans=n}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){const{beans:e,colsSpanning:t}=this;return e.gos.get("enableRtl")&&t?gN(t):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const{gos:e,colAnimation:t}=this.beans,n=e.get("suppressColumnMoveAnimation"),r=BD(this.columnOrGroup.getOldLeft());(null==t?void 0:t.isActive())&&r&&!n?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=this.modifyLeftForPrintLayout(e,e.getOldLeft()),n=this.modifyLeftForPrintLayout(e,e.getLeft());this.setLeft(t),this.actualLeft=n,this.beans.colAnimation.executeNextVMTurn(()=>{this.actualLeft===n&&this.setLeft(n)})}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){const{gos:n,visibleCols:r}=this.beans;if(!GA(n,"print"))return t;if("left"===e.getPinned())return t;const o=r.getColsLeftWidth();if("right"===e.getPinned()){return o+r.bodyWidth+t}return o+t}setLeft(e){if(BD(e)&&(this.eCell.style.left=`${e}px`),yI(this.columnOrGroup)){const e=this.columnOrGroup.getLeafColumns();if(!e.length)return;e.length>1&&(t=this.ariaEl,n=e.length,JD(t,"colspan",n))}var t,n}},DL=0,ML="headerCtrl",AL=class extends YM{constructor(e,t){super(),this.column=e,this.rowCtrl=t,this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.reAttemptToFocus=!1,this.instanceId=e.getUniqueId()+"-"+DL++}postConstruct(){const e=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],e),this.addManagedEventListeners({overlayExclusiveChanged:e})}setComp(e,t,n,r,o){t.setAttribute("col-id",this.column.colIdSanitised),this.wireComp(e,t,n,r,o),this.reAttemptToFocus&&(this.reAttemptToFocus=!1,this.focus(this.lastFocusEvent??void 0))}shouldStopEventPropagation(e){const{headerRowIndex:t,column:n}=this.beans.focusSvc.focusedHeader,r=n.getDefinition(),o=null==r?void 0:r.suppressHeaderKeyboardEvent;if(!BD(o))return!1;return!!o(nN(this.gos,{colDef:r,column:n,headerRowIndex:t,event:e}))}getWrapperHasFocus(){return KD(this.beans)===this.eGui}setGui(e,t){this.eGui=e,this.addDomData(t),t.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),t.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}refreshHeaderStyles(){const e=this.column.getDefinition();if(!e)return;const{headerStyle:t}=e;let n;if("function"==typeof t){n=t(this.getHeaderClassParams())}else n=t;n&&this.comp.setUserStyles(n)}onGuiFocus(){this.eventSvc.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(e){const{wrapperElement:t,checkMeasuringCallback:n,compBean:r}=e,{beans:o}=this,i=e=>{if(!this.isAlive()||!r.isAlive())return;const{paddingTop:n,paddingBottom:s,borderBottomWidth:a,borderTopWidth:l}=pM(this.eGui),c=n+s+a+l,u=t.offsetHeight+c;if(e<5){const n=qD(o);if(!(null==n?void 0:n.contains(t))||0==u)return void tA(()=>i(e+1),"raf",o)}this.setColHeaderHeight(this.column,u)};let s,a=!1;const l=()=>{const e=this.column.isAutoHeaderHeight();e&&!a&&c(),!e&&a&&u()},c=()=>{a=!0,this.comp.toggleCss("ag-header-cell-auto-height",!0),i(0),s=EM(this.beans,t,()=>i(0))},u=()=>{a=!1,s&&s(),this.comp.toggleCss("ag-header-cell-auto-height",!1),s=void 0};l(),r.addDestroyFunc(()=>u()),r.addManagedListeners(this.column,{widthChanged:()=>a&&i(0)}),r.addManagedEventListeners({sortChanged:()=>{a&&window.setTimeout(()=>i(0))}}),n&&n(l)}onDisplayedColumnsChanged(){const{comp:e,column:t,beans:n,eGui:r}=this;e&&t&&r&&(vL(e,t,n.visibleCols),aM(r,n.visibleCols.getAriaColIndex(t)))}addResizeAndMoveKeyboardListeners(e){e.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const e=yL(this.beans);this.eGui&&RM(this.eGui,"tabindex",e?null:"-1")}onGuiKeyDown(e){var t;const n=KD(this.beans),r=e.key===ET||e.key===MT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),n!==this.eGui||!e.shiftKey&&!e.altKey)return;if((this.isResizing||r)&&(e.preventDefault(),e.stopImmediatePropagation()),!r)return;const o=e.key===ET!==this.gos.get("enableRtl")?"left":"right";if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const n=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(n,e.shiftKey),null==(t=this.resizeFeature)||t.toggleColumnResizing(!0)}else this.moveHeader(o)}moveHeader(e){var t;null==(t=this.beans.colMoves)||t.moveHeader(e,this.eGui,this.column,this.rowCtrl.pinned,this)}getViewportAdjustedResizeDiff(e){const t=this.getResizeDiff(e),{pinnedCols:n}=this.beans;return n?n.getHeaderResizeDiff(t,this.column):t}getResizeDiff(e){const{gos:t,column:n}=this;let r=e.key===ET!==t.get("enableRtl");const o=n.getPinned(),i=t.get("enableRtl");return o&&i!==("right"===o)&&(r=!r),(r?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{var e;null==(e=this.resizeFeature)||e.toggleColumnResizing(!1)},150))}handleKeyDown(e){const t=this.getWrapperHasFocus();switch(e.key){case IT:case FT:case LT:case BT:t&&e.preventDefault()}}addDomData(e){const t=ML,{eGui:n,gos:r}=this;qA(r,n,t,this),e.addDestroyFunc(()=>qA(r,n,t,null))}focus(e){if(!this.isAlive())return!1;const{eGui:t}=this;return t?(t.focus(),this.lastFocusEvent=e||null):this.reAttemptToFocus=!0,!0}focusThis(){this.beans.focusSvc.focusedHeader={headerRowIndex:this.rowCtrl.rowIndex,column:this.column}}removeDragSource(){var e;this.dragSource&&(null==(e=this.beans.dragAndDrop)||e.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,n){const r=e??t,{menuSvc:o,gos:i}=this.beans;i.get("preventDefaultOnContextMenu")&&r.preventDefault(),(null==o?void 0:o.isHeaderContextMenuEnabled(n))&&o.showHeaderContextMenu(n,e,t),this.dispatchColumnMouseEvent("columnHeaderContextMenu",n)}dispatchColumnMouseEvent(e,t){this.eventSvc.dispatchEvent({type:e,column:t})}setColHeaderHeight(e,t){if(!e.setAutoHeaderHeight(t))return;const{eventSvc:n}=this;e.isColumn?n.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"}):n.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.rowCtrl=null}},NL=class extends AL{constructor(){super(...arguments),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map}wireComp(e,t,n,r,o){this.comp=e;const{rowCtrl:i,column:s,beans:a}=this,{colResize:l,context:c,colHover:u,rangeSvc:d}=a,h=KN(this,c,o);this.setGui(t,h),this.updateState(),this.setupWidth(h),this.setupMovingCss(h),this.setupMenuClass(h),this.setupSortableClass(h),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:r,checkMeasuringCallback:e=>this.setRefreshFunction("measuring",e),compBean:h}),this.addColumnHoverListener(h),this.setupFilterClass(h),this.setupStylesFromColDef(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(h),this.setupSelectAll(h),this.setupUserComp(),this.refreshAria(),l?this.resizeFeature=h.createManagedBean(l.createResizeFeature(i.pinned,s,n,e,this)):uM(n,!1),null==u||u.createHoverFeature(h,[s],t),null==d||d.createRangeHighlightFeature(h,s,e),h.createManagedBean(new EL(s,t,a)),h.createManagedBean(new kI(t,{shouldStopEventPropagation:e=>this.shouldStopEventPropagation(e),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(h),h.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader","enableAdvancedFilter"],()=>this.refresh()),h.addManagedListeners(s,{colDefChanged:()=>this.refresh()}),h.addManagedListeners(s,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const p=()=>this.checkDisplayName();h.addManagedEventListeners({columnValueChanged:p,columnRowGroupChanged:p,columnPivotChanged:p,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),h.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){var n;null==(n=this.beans.colResize)||n.resizeHeader(this.column,e,t)}getHeaderClassParams(){const{column:e,beans:t}=this,n=e.colDef;return nN(t.gos,{colDef:n,column:e,floatingFilter:!1})}setupUserComp(){const e=this.lookupUserCompDetails();e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){const e=this.createParams(),t=this.column.getColDef();return function(e,t,n){return e.getCompDetails(t,tT,"agColumnHeader",n)}(this.beans.userCompFactory,t,e)}createParams(){const{menuSvc:e,sortSvc:t,colFilter:n,gos:r}=this.beans;return nN(r,{column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&!!(null==e?void 0:e.isHeaderFilterButtonEnabled(this.column)),enableFilterIcon:!!n&&(!this.openFilterEnabled||tN(this.gos)),showColumnMenu:(t,n)=>{null==e||e.showColumnMenu({column:this.column,buttonElement:t,positionBy:"button",onClosedCallback:n})},showColumnMenuAfterMouseClick:(t,n)=>{null==e||e.showColumnMenu({column:this.column,mouseEvent:t,positionBy:"mouse",onClosedCallback:n})},showFilter:t=>{null==e||e.showFilterMenu({column:this.column,buttonElement:t,containerType:"columnFilter",positionBy:"button"})},progressSort:e=>{null==t||t.progressSort(this.column,!!e,"uiColumnSorted")},setSort:(e,n)=>{null==t||t.setSortForColumn(this.column,e,!!n,"uiColumnSorted")},eGridHeader:this.eGui,setTooltip:(e,t)=>{r.assertModuleRegistered("Tooltip",3),this.setupTooltip(e,t)}})}setupSelectAll(e){var t;const{selectionSvc:n}=this.beans;n&&(this.selectAllFeature=e.createOptionalManagedBean(n.createSelectAllFeature(this.column)),null==(t=this.selectAllFeature)||t.setComp(this),e.addManagedPropertyListener("rowSelection",()=>{var t;const r=n.createSelectAllFeature(this.column);r&&!this.selectAllFeature?(this.selectAllFeature=e.createManagedBean(r),null==(t=this.selectAllFeature)||t.setComp(this),this.comp.refreshSelectAllGui()):this.selectAllFeature&&!r&&(this.comp.removeSelectAllGui(),this.selectAllFeature=this.destroyBean(this.selectAllFeature))}))}getSelectAllGui(){var e;return null==(e=this.selectAllFeature)?void 0:e.getCheckboxGui()}handleKeyDown(e){var t;super.handleKeyDown(e),e.key===RT&&(null==(t=this.selectAllFeature)||t.onSpaceKeyDown(e)),e.key===jT&&this.onEnterKeyDown(e),e.key===AT&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){var t;e.ctrlKey||e.metaKey?this.showMenuOnKeyPress(e,!0):this.sortable&&(null==(t=this.beans.sortSvc)||t.progressSort(this.column,e.shiftKey,"uiColumnSorted"))}showMenuOnKeyPress(e,t){const n=this.comp.getUserCompInstance();TL(n)&&n.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription()),iF&&this.setActiveHeader(!0)}onFocusOut(e){this.eGui.contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){var n;this.tooltipFeature=null==(n=this.beans.tooltipSvc)?void 0:n.setupHeaderTooltip(this.tooltipFeature,this,e,t)}setupStylesFromColDef(){this.setRefreshFunction("headerStyles",this.refreshHeaderStyles.bind(this)),this.refreshHeaderStyles()}setupClassesFromColDef(){const e=()=>{const e=mL(this.column.getColDef(),this.gos,this.column,null),t=this.userHeaderClasses;this.userHeaderClasses=new Set(e);for(const n of e)t.has(n)?t.delete(n):this.comp.toggleCss(n,!0);for(const n of t)this.comp.toggleCss(n,!1)};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){var t;this.dragSourceElement=e,this.removeDragSource(),e&&this.draggable&&(this.dragSource=(null==(t=this.beans.colMoves)?void 0:t.setDragSourceForHeader(e,this.column,this.displayName))??null)}updateState(){const{menuSvc:e}=this.beans;this.menuEnabled=!!(null==e?void 0:e.isColumnMenuInHeaderEnabled(this.column)),this.openFilterEnabled=!!(null==e?void 0:e.isFilterMenuInHeaderEnabled(this.column)),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria();for(const e of Object.values(this.refreshFunctions))e()}refreshHeaderComp(){const e=this.lookupUserCompDetails();if(!e)return;!!(null!=this.comp.getUserCompInstance()&&this.userCompDetails.componentClass==e.componentClass)&&this.attemptHeaderCompRefresh(e.params)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();if(!t)return!1;if(!t.refresh)return!1;return t.refresh(e)}calculateDisplayName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const t=()=>{const e=this.column.getActualWidth();this.comp.setWidth(`${e}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){const t=()=>{this.comp.toggleCss("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){const t=()=>{var e;null==(e=this.comp)||e.toggleCss("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){const t=()=>{this.comp.toggleCss("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const t=()=>{const e=this.column.isFilterActive();this.comp.toggleCss("ag-header-cell-filtered",e),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){const e=()=>{const e=!!this.column.getColDef().wrapHeaderText;this.comp.toggleCss("ag-header-cell-wrap-text",e)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=0===e,n=1===e;this.comp.toggleCss("ag-header-highlight-before",t),this.comp.toggleCss("ag-header-highlight-after",n)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){var e;const{eGui:t,column:n,comp:r,beans:o}=this,i=xL(this.beans),s=0===i.reduce((e,t)=>e+t,0);if(r.toggleCss("ag-header-parent-hidden",s),!n.isSpanHeaderHeight())return t.style.removeProperty("top"),t.style.removeProperty("height"),r.toggleCss("ag-header-span-height",!1),void r.toggleCss("ag-header-span-total",!1);const{numberOfParents:a,isSpanningTotal:l}=this.column.getColumnGroupPaddingInfo();r.toggleCss("ag-header-span-height",a>0);const c=kL(o);if(0===a)return r.toggleCss("ag-header-span-total",!1),t.style.setProperty("top","0px"),void t.style.setProperty("height",`${c}px`);r.toggleCss("ag-header-span-total",l);const u=((null==(e=this.column.getFirstRealParent())?void 0:e.getLevel())??-1)+1,d=i.length-u;let h=0;for(let p=0;p<d;p++)h+=i[i.length-1-p];t.style.setProperty("top",-h+"px"),t.style.setProperty("height",`${c+h}px`)}refreshAriaSort(){var e;if(this.sortable){const t=this.getLocaleTextFunc(),n=(null==(e=this.beans.sortSvc)?void 0:e.getDisplaySortForColumn(this.column))||null;this.comp.setAriaSort(function(e){let t;return t="asc"===e?"ascending":"desc"===e?"descending":"mixed"===e?"other":"none",t}(n)),this.setAriaDescriptionProperty("sort",t("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!tN(this.gos)){const e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){null!=t?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){var e;if(!this.eGui.contains(KD(this.beans)))return;const t=Array.from(this.ariaDescriptionProperties.keys()).sort((e,t)=>"filter"===e?-1:t.charCodeAt(0)-e.charCodeAt(0)).map(e=>this.ariaDescriptionProperties.get(e)).join(". ");null==(e=this.beans.ariaAnnounce)||e.announceValue(t,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){var t;null==(t=this.beans.colHover)||t.addHeaderColumnHoverListener(e,this.comp,this.column)}addActiveHeaderMouseListeners(e){const t=e=>this.handleMouseOverChange("mouseenter"===e.type);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:()=>{this.setActiveHeader(!0),this.dispatchColumnMouseEvent("columnHeaderClicked",this.column)},contextmenu:e=>this.handleContextMenuMouseEvent(e,void 0,this.column)})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.toggleCss("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return TL(t)?t.getAnchorElementForMenu(e):this.eGui}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function TL(e){return"function"==typeof(null==e?void 0:e.getAnchorElementForMenu)&&"function"==typeof e.onMenuKeyboardShortcut}var FL=0,IL=class extends YM{constructor(e,t,n){super(),this.rowIndex=e,this.pinned=t,this.type=n,this.instanceId=FL++,this.comp=null,this.allCtrls=[];let r="ag-header-row-column";"group"===n?r="ag-header-row-group":"filter"===n&&(r="ag-header-row-filter"),this.headerRowClass=`ag-header-row ${r}`}setRowIndex(e){var t;this.rowIndex=e,null==(t=this.comp)||t.setRowIndex(this.getAriaRowIndex()),this.onRowHeightChanged()}postConstruct(){this.isPrintLayout=GA(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return!!this.comp&&this.allCtrls.every(e=>null!=e.eGui)}setComp(e,t,n=!0){this.comp=e,t=KN(this,this.beans.context,t),n&&(this.setRowIndex(this.rowIndex),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const t=this.onRowHeightChanged.bind(this),n=this.onDisplayedColumnsChanged.bind(this);e.addManagedEventListeners({columnResized:this.setWidth.bind(this),displayedColumnsChanged:n,virtualColumnsChanged:e=>this.onVirtualColumnsChanged(e.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",n),e.addManagedPropertyListener("ensureDomOrder",e=>this.isEnsureDomOrder=e.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}onDisplayedColumnsChanged(){this.isPrintLayout=GA(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}setWidth(){if(!this.comp)return;const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{visibleCols:e}=this.beans;if(this.isPrintLayout){return null!=this.pinned?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null)}return e.getContainerWidth(this.pinned)}onRowHeightChanged(){if(!this.comp)return;const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){let e=0;const t=xL(this.beans);for(let r=0;r<t.length;r++){if(r===this.rowIndex&&"group"===this.type)return{topOffset:e,rowHeight:t[r]};e+=t[r]}const n=kL(this.beans);if("column"===this.type)return{topOffset:e,rowHeight:n};e+=n;return{topOffset:e,rowHeight:jL(this.beans)}}onVirtualColumnsChanged(e=!1){if(!this.comp)return;const t=this.getUpdatedHeaderCtrls(),n=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,n,e)}getUpdatedHeaderCtrls(){const e=this.ctrlsById;this.ctrlsById=new Map;const t=this.getColumnsInViewport();for(const r of t)this.recycleAndCreateHeaderCtrls(r,this.ctrlsById,e);const n=e=>{const{focusSvc:t,visibleCols:n}=this.beans;if(!t.isHeaderWrapperFocused(e))return!1;return n.isVisible(e.column)};if(e)for(const[r,o]of e){n(o)?this.ctrlsById.set(r,o):this.destroyBean(o)}return this.allCtrls=Array.from(this.ctrlsById.values()),this.allCtrls}getHeaderCellCtrls(){return this.allCtrls}recycleAndCreateHeaderCtrls(e,t,n){if(e.isEmptyGroup())return;const r=e.getUniqueId();let o;n&&(o=n.get(r),n.delete(r));if(o&&o.column!=e&&(this.destroyBean(o),o=void 0),null==o)switch(this.type){case"filter":o=this.createBean(this.beans.registry.createDynamicBean("headerFilterCellCtrl",!0,e,this));break;case"group":o=this.createBean(this.beans.registry.createDynamicBean("headerGroupCellCtrl",!0,e,this));break;default:o=this.createBean(new NL(e,this))}t.set(r,o)}getColumnsInViewport(){if(!this.isPrintLayout)return this.getComponentsToRender();if(this.pinned)return[];const e=[];for(const t of["left",null,"right"])e.push(...this.getComponentsToRender(t));return e}getComponentsToRender(e=this.pinned){return"group"===this.type?this.beans.colViewport.getHeadersToRender(e,this.rowIndex):this.beans.colViewport.getColumnHeadersToRender(e)}focusHeader(e,t){const n=this.allCtrls.find(t=>t.column==e);if(!n)return!1;return n.focus(t)}destroy(){this.allCtrls=this.destroyBeans(this.allCtrls),this.ctrlsById=void 0,this.comp=null,super.destroy()}},LL=class extends YM{constructor(e){super(),this.pinned=e,this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[]}setComp(e,t){this.comp=e,this.eViewport=t;const{pinnedCols:n,ctrlsSvc:r,colModel:o,colMoves:i}=this.beans;this.setupCenterWidth(),null==n||n.setupHeaderPinnedWidth(this),this.setupDragAndDrop(i,this.eViewport);const s=this.refresh.bind(this,!0);this.addManagedEventListeners({displayedColumnsChanged:s,advancedFilterEnabledChanged:s});const a=`${"string"==typeof this.pinned?this.pinned:"center"}Header`;r.register(a,this),o.ready&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){const{focusSvc:t,filterManager:n,visibleCols:r}=this.beans;let o=0;const i=t.getFocusHeaderToUseAfterRefresh(),s=this.getAllCtrls();(()=>{const t=r.headerGroupRowCount;o=t,e||(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls));const n=this.groupsRowCtrls.length;if(n!==t)if(n>t){for(let e=t;e<n;e++)this.destroyBean(this.groupsRowCtrls[e]);this.groupsRowCtrls.length=t}else for(let e=n;e<t;e++){const t=this.createBean(new IL(e,this.pinned,"group"));this.groupsRowCtrls.push(t)}})(),(()=>{const t=o++;this.hidden?this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl):null!=this.columnsRowCtrl&&e?this.columnsRowCtrl.rowIndex!==t&&this.columnsRowCtrl.setRowIndex(t):(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.columnsRowCtrl=this.createBean(new IL(t,this.pinned,"column")))})(),(()=>{this.includeFloatingFilter=!!(null==n?void 0:n.hasFloatingFilters())&&!this.hidden;const t=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter)return void t();e||t();const r=o++;if(this.filtersRowCtrl){this.filtersRowCtrl.rowIndex!==r&&this.filtersRowCtrl.setRowIndex(r)}else this.filtersRowCtrl=this.createBean(new IL(r,this.pinned,"filter"))})();const a=this.getAllCtrls();this.comp.setCtrls(a),this.restoreFocusOnHeader(t,i),s.length!==a.length&&this.beans.eventSvc.dispatchEvent({type:"headerRowsChanged"})}getHeaderCtrlForColumn(e){const t=t=>null==t?void 0:t.getHeaderCellCtrls().find(t=>t.column===e);if(lN(e))return t(this.columnsRowCtrl);if(0!==this.groupsRowCtrls.length)for(let n=0;n<this.groupsRowCtrls.length;n++){const e=t(this.groupsRowCtrls[n]);if(e)return e}}getHtmlElementForColumnHeader(e){var t;return(null==(t=this.getHeaderCtrlForColumn(e))?void 0:t.eGui)??null}getRowType(e){var t;return null==(t=this.getAllCtrls()[e])?void 0:t.type}focusHeader(e,t,n){const r=this.getAllCtrls()[e];return!!r&&r.focusHeader(t,n)}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}destroy(){this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl),this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls),super.destroy()}setupDragAndDrop(e,t){const n=null==e?void 0:e.createBodyDropTarget(this.pinned,t);n&&this.createManagedBean(n)}restoreFocusOnHeader(e,t){if(!t)return;const{column:n}=t;n.getPinned()==this.pinned&&e.focusHeaderPosition({headerPosition:t,scroll:!1})}setupCenterWidth(){null==this.pinned&&this.createManagedBean(new MI(e=>this.comp.setCenterWidth(`${e}px`),!0))}},BL=class extends JN{constructor(){super()}},HL={tag:"span",cls:"ag-overlay-loading-center"},_L={tag:"span",cls:"ag-overlay-no-rows-center"};function GL(e,t,n){var r;let o=null;"smallDown"===e?TA(262):"smallLeft"===e?TA(263):"smallRight"===e&&TA(264);const i=null==n?void 0:n.getColDef().icons;if(i&&(o=i[e]),t.gos&&!o){const n=t.gos.get("icons");n&&(o=n[e])}if(o){let t;if("function"==typeof o)t=o();else{if("string"!=typeof o)return void TA(38,{iconName:e});t=o}return"string"==typeof t?xM(t):OM(t)?t:void TA(133,{iconName:e})}{const n=t.registry.getIcon(e);return n||null==(r=t.validation)||r.validateIcon(e),wI({tag:"span",cls:`ag-icon ag-icon-${n??e}`,role:"presentation",attrs:{unselectable:"on"}})}}var VL={tag:"div",children:[{tag:"div",ref:"eGhost",cls:"ag-dnd-ghost ag-unselectable",children:[{tag:"span",ref:"eIcon",cls:"ag-dnd-ghost-icon ag-shake-left-to-right"},{tag:"div",ref:"eLabel",cls:"ag-dnd-ghost-label"}]}]},WL={tag:"div",cls:"ag-cell-wrapper ag-checkbox-cell",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]};var zL,$L="ag-tab-guard",UL="ag-tab-guard-top",KL="ag-tab-guard-bottom",qL=class extends YM{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:t,eTopGuard:n,eBottomGuard:r,focusTrapActive:o,forceFocusOutWhenTabGuardsAreEmpty:i,isFocusableContainer:s,focusInnerElement:a,onFocusIn:l,onFocusOut:c,shouldStopEventPropagation:u,onTabKeyDown:d,handleKeyDown:h,isEmpty:p,eFocusableElement:f}=e;this.comp=t,this.eTopGuard=n,this.eBottomGuard=r,this.providedFocusInnerElement=a,this.eFocusableElement=f,this.focusTrapActive=!!o,this.forceFocusOutWhenTabGuardsAreEmpty=!!i,this.isFocusableContainer=!!s,this.providedFocusIn=l,this.providedFocusOut=c,this.providedShouldStopEventPropagation=u,this.providedOnTabKeyDown=d,this.providedHandleKeyDown=h,this.providedIsEmpty=p}postConstruct(){this.createManagedBean(new kI(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards();for(const e of[this.eTopGuard,this.eBottomGuard])this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)})}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return!!this.providedShouldStopEventPropagation&&this.providedShouldStopEventPropagation()}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus)return void this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);if(this.skipTabGuardFocus)return void(this.skipTabGuardFocus=!1);if(this.forceFocusOutWhenTabGuardsAreEmpty){if(this.providedIsEmpty?this.providedIsEmpty():0===cF(this.eFocusableElement,".ag-tab-guard").length)return void this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;!(this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t))&&this.forceFocusOutWhenTabGuardsAreEmpty&&this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}findNextElementOutsideAndFocus(e){var t;const n=cF(qD(this.beans).body,null,!0),r=n.indexOf(e?this.eTopGuard:this.eBottomGuard);if(-1===r)return;let o,i;e?(o=0,i=r):(o=r+1,i=n.length);const s=n.slice(o,i),a=this.gos.get("tabIndex");s.sort((e,t)=>{const n=Number.parseInt(e.getAttribute("tabindex")||"0"),r=Number.parseInt(t.getAttribute("tabindex")||"0");return r===a?1:n===a?-1:0===n?1:0===r?-1:n-r}),null==(t=s[e?s.length-1:0])||t.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown)return void this.providedOnTabKeyDown(e);if(this.focusTrapActive)return;if(e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const n=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),n&&(n.focus(),e.preventDefault())}focusInnerElement(e=!1){const t=cF(this.eFocusableElement);return this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),!!t.length&&(t[e?t.length-1:0].focus({preventScroll:!0}),!0)}getNextFocusableElement(e){return dF(this.beans,this.eFocusableElement,0,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},XL=class{constructor(e,t=!1){this.eElement=e,this.preventClick=t,this.startListener=null,this.handlers=[],this.eventSvc=void 0,this.touchStart=null,this.lastTapTime=null,this.longPressTimer=0,this.moved=!1}addEventListener(e,t){let n=this.eventSvc;if(!n){if(null===n)return;this.eventSvc=n=new ID;const e=this.onTouchStart.bind(this);this.startListener=e,this.eElement.addEventListener("touchstart",e,{passive:!0})}n.addEventListener(e,t)}removeEventListener(e,t){var n;null==(n=this.eventSvc)||n.removeEventListener(e,t)}onTouchStart(e){if(this.touchStart||!(e=>{if(zL){if(zL.has(e))return!1}else zL=new WeakSet;return zL.add(e),!0})(e))return;const t=e.touches[0];this.touchStart=t;const n=this.handlers;if(!n.length){const e=this.eElement,t=e.ownerDocument,r=this.onTouchMove.bind(this),o=this.onTouchEnd.bind(this),i=this.onTouchCancel.bind(this),s={passive:!0},a={passive:!1};zM(n,[e,"touchmove",r,s],[t,"touchcancel",i,s],[t,"touchend",o,a],[t,"contextmenu",UM,a])}this.clearLongPress(),this.longPressTimer=window.setTimeout(()=>{var n;this.longPressTimer=0,this.touchStart!==t||this.moved||(this.moved=!0,null==(n=this.eventSvc)||n.dispatchEvent({type:"longTap",touchStart:t,touchEvent:e}))},550)}onTouchMove(e){const{moved:t,touchStart:n}=this;if(!t&&n){const t=GM(n,e.touches);t&&!_M(t,n,4)&&(this.clearLongPress(),this.moved=!0)}}onTouchEnd(e){var t;const n=this.touchStart;n&&GM(n,e.changedTouches)&&(this.moved||(null==(t=this.eventSvc)||t.dispatchEvent({type:"tap",touchStart:n}),this.checkDoubleTap(n)),this.preventClick&&UM(e),this.cancel())}onTouchCancel(e){const t=this.touchStart;t&&GM(t,e.changedTouches)&&(this.lastTapTime=null,this.cancel())}checkDoubleTap(e){var t;let n=Date.now();const r=this.lastTapTime;if(r){n-r>500&&(null==(t=this.eventSvc)||t.dispatchEvent({type:"doubleTap",touchStart:e}),n=null)}this.lastTapTime=n}cancel(){this.clearLongPress(),$M(this.handlers),this.touchStart=null}clearLongPress(){window.clearTimeout(this.longPressTimer),this.longPressTimer=0,this.moved=!1}destroy(){const e=this.startListener;e&&(this.startListener=null,this.eElement.removeEventListener("touchstart",e)),this.cancel(),this.eElement=null,this.eventSvc=null}},YL=class{constructor(e="javascript"){var t;this.frameworkName=e,this.renderingEngine="vanilla",this.batchFrameworkComps=!1,this.wrapIncoming=e=>e(),this.wrapOutgoing=e=>e(),this.baseDocLink=`${dA}/${this.frameworkName}-data-grid`,t=this.baseDocLink,OA=t}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return this.baseDocLink+(e?"/"+e:"")}};function ZL(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionSvc").api}}var JL=Object.fromEntries(["licenseManager","environment","eventSvc","gos","paginationAutoPageSizeSvc","apiFunctionSvc","gridApi","registry","agCompUtils","userCompFactory","rowContainerHeight","horizontalResizeSvc","localeSvc","pinnedRowModel","dragSvc","colGroupSvc","visibleCols","popupSvc","selectionSvc","colFilter","quickFilter","filterManager","colModel","headerNavigation","pageBounds","pagination","pageBoundsListener","rowSpanSvc","stickyRowSvc","rowRenderer","expressionSvc","alignedGridsSvc","navigation","valueCache","valueSvc","autoWidthCalc","filterMenuFactory","dragAndDrop","focusSvc","cellNavigation","cellStyles","scrollVisibleSvc","sortSvc","colHover","colAnimation","autoColSvc","selectionColSvc","changeDetectionSvc","animationFrameSvc","undoRedo","colDefFactory","rowStyleSvc","rowNodeBlockLoader","rowNodeSorter","ctrlsSvc","pinnedCols","dataTypeSvc","syncSvc","overlays","stateSvc","expansionSvc","apiEventSvc","ariaAnnounce","menuSvc","colMoves","colAutosize","colFlex","colResize","pivotColsSvc","valueColsSvc","rowGroupColsSvc","colNames","colViewport","pivotResultCols","showRowGroupCols","validation"].map((e,t)=>[e,t]));function QL(e,t){return((e.beanName?JL[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER)-((t.beanName?JL[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER)}function eB(e,t){return"gridDestroySvc"===(null==e?void 0:e.beanName)?-1:"gridDestroySvc"===(null==t?void 0:t.beanName)?1:0}var tB=class extends YM{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}setComp(e,t,n){this.view=e,this.eGridHostDiv=t,this.eGui=n,this.eGui.setAttribute("grid-id",this.beans.context.getId());const{dragAndDrop:r,ctrlsSvc:o}=this.beans;null==r||r.registerGridDropTarget(()=>this.eGui,this),this.createManagedBean(new jI(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr");const i=EM(this.beans,this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>i()),o.register("gridCtrl",this)}isDetailGrid(){var e;const t=function(e,t=5){let n=0;for(;e&&null===YT(e)&&++n<=t;)e=e.parentElement;return null===YT(e)?null:e}(this.getGui());return(null==(e=null==t?void 0:t.getAttribute("row-id"))?void 0:e.startsWith("detail"))||!1}getOptionalSelectors(){var e,t,n,r,o;const i=this.beans;return{paginationSelector:null==(e=i.pagination)?void 0:e.getPaginationSelector(),gridHeaderDropZonesSelector:null==(t=i.registry)?void 0:t.getSelector("AG-GRID-HEADER-DROP-ZONES"),sideBarSelector:null==(n=i.sideBar)?void 0:n.getSelector(),statusBarSelector:null==(r=i.registry)?void 0:r.getSelector("AG-STATUS-BAR"),watermarkSelector:null==(o=i.licenseManager)?void 0:o.getWatermarkSelector()}}onGridSizeChanged(){this.eventSvc.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){const{view:t}=this;if(!1===e)t.setCursor(null);else{const n=1===e?"ew-resize":"ns-resize";t.setCursor(n)}}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),{indexWithFocus:n,nextIndex:r}=this.getNextFocusableIndex(t,e);if(r<0||r>=t.length)return!1;if(0===r){if(n>0){const{visibleCols:e,focusSvc:t}=this.beans,n=gN(e.allCols);if(t.focusGridView({column:n,backwards:!0}))return!0}return!1}return this.focusContainer(t[r],e)}focusInnerElement(e){const t=this.gos.getCallback("focusGridInnerElement");if(null==t?void 0:t({fromBottom:!!e}))return!0;const n=this.getFocusableContainers(),{focusSvc:r,visibleCols:o}=this.beans,i=o.allCols;if(e){if(n.length>1)return this.focusContainer(gN(n),e);const t=gN(i);if(r.focusGridView({column:t,backwards:e}))return!0}if(0===this.gos.get("headerHeight")||yL(this.beans)){if(r.focusGridView({column:i[0],backwards:e}))return!0;for(let t=1;t<n.length;t++)if(uF(n[t].getGui(),e))return!0;return!1}return r.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){var t;const n=this.view.getFocusableContainers(),{nextIndex:r,indexWithFocus:o}=this.getNextFocusableIndex(n,e);if(-1===o||r<0||r>=n.length)return;const i=n[r];null==(t=i.setAllowFocus)||t.call(i,!0),setTimeout(()=>{var e;null==(e=i.setAllowFocus)||e.call(i,!1)})}isFocusable(){var e,t;const n=this.beans;return!bL(n)||!yL(n)||!!(null==(t=null==(e=n.sideBar)?void 0:e.comp)?void 0:t.isDisplayed())}getNextFocusableIndex(e,t){const n=KD(this.beans),r=e.findIndex(e=>e.getGui().contains(n));return{indexWithFocus:r,nextIndex:r+(t?-1:1)}}focusContainer(e,t){var n,r;null==(n=e.setAllowFocus)||n.call(e,!0);const o=uF(e.getGui(),t,!1,!0);return null==(r=e.setAllowFocus)||r.call(e,!1),o}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},nB=(e,t)=>{for(const n of Object.keys(t))t[n]=e;return t},rB={dispatchEvent:"CommunityCore",...nB("CommunityCore",{destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,isModuleRegistered:0}),...nB("GridState",{getState:0,setState:0}),...nB("SharedRowSelection",{setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0}),...nB("RowApi",{redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRowIndex:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0}),...nB("ScrollApi",{getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0}),...nB("KeyboardNavigation",{getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0}),...nB("EventApi",{addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0}),...nB("ValueCache",{expireValueCache:0}),...nB("CellApi",{getCellValue:0}),...nB("SharedMenu",{showColumnMenu:0,hidePopupMenu:0}),...nB("Sort",{onSortChanged:0}),...nB("PinnedRow",{getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,forEachPinnedRow:0}),...nB("Overlay",{showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0}),...nB("RenderApi",{setGridAriaProperty:0,refreshCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0}),...nB("HighlightChanges",{flashCells:0}),...nB("RowDrag",{addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getRowDropPositionIndicator:0,setRowDropPositionIndicator:0}),...nB("ColumnApi",{getColumnDefs:0,getColumnDef:0,getDisplayNameForColumn:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnsVisible:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0}),...nB("ColumnAutoSize",{sizeColumnsToFit:0,autoSizeColumns:0,autoSizeAllColumns:0}),...nB("ColumnGroup",{setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumnGroup:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0}),...nB("ColumnMove",{moveColumnByIndex:0,moveColumns:0}),...nB("ColumnResize",{setColumnWidths:0}),...nB("ColumnHover",{isColumnHovered:0}),...nB("EditCore",{getCellEditorInstances:0,getEditingCells:0,getEditRowValues:0,stopEditing:0,startEditingCell:0,isEditing:0,validateEdit:0}),...nB("BatchEdit",{startBatchEdit:0,cancelBatchEdit:0,commitBatchEdit:0,isBatchEditing:0}),...nB("UndoRedoEdit",{undoCellEditing:0,redoCellEditing:0,getCurrentUndoSize:0,getCurrentRedoSize:0}),...nB("FilterCore",{isAnyFilterPresent:0,onFilterChanged:0}),...nB("ColumnFilter",{isColumnFilterPresent:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,hideColumnFilter:0,getColumnFilterHandler:0,doFilterAction:0}),...nB("QuickFilter",{isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0}),...nB("Find",{findGetActiveMatch:0,findGetTotalMatches:0,findGoTo:0,findNext:0,findPrevious:0,findGetNumMatches:0,findGetParts:0,findClearActive:0,findRefresh:0}),...nB("Pagination",{paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0}),...nB("CsrmSsrmSharedApi",{expandAll:0,collapseAll:0}),...nB("SsrmInfiniteSharedApi",{setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...nB("ClientSideRowModelApi",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0,onRowHeightChanged:0,resetRowHeights:0}),...nB("CsvExport",{getDataAsCsv:0,exportDataAsCsv:0}),...nB("InfiniteRowModel",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...nB("AdvancedFilter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...nB("IntegratedCharts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...nB("Clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...nB("ExcelExport",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...nB("SharedMasterDetail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...nB("ContextMenu",{showContextMenu:0}),...nB("ColumnMenu",{showColumnChooser:0,hideColumnChooser:0}),...nB("CellSelection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...nB("SharedRowGrouping",{setRowGroupColumns:0,removeRowGroupColumns:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0}),...nB("SharedAggregation",{addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0}),...nB("SharedPivot",{isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumns:0,addValueColumns:0,setPivotColumns:0,removePivotColumns:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...nB("ServerSideRowModelApi",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0,onRowHeightChanged:0,resetRowHeights:0}),...nB("SideBar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...nB("StatusBar",{getStatusPanel:0}),...nB("AiToolkit",{getStructuredSchema:0})},oB={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},iB=(e,t)=>e.eventSvc.dispatchEvent(t),sB=class{};Reflect.defineProperty(sB,"name",{value:"GridApi"});function aB(e,t){e.gos.updateGridOptions({options:t})}function lB(e,t){var n,r;switch(t.rowPinned){case"top":return null==(n=e.pinnedRowModel)?void 0:n.getPinnedTopRow(t.rowIndex);case"bottom":return null==(r=e.pinnedRowModel)?void 0:r.getPinnedBottomRow(t.rowIndex);default:return e.rowModel.getRow(t.rowIndex)}}function cB(e,t){var n;const r=null==(n=e.spannedRowRenderer)?void 0:n.getCellByPosition(t);if(r)return r;const o=e.rowRenderer.getRowByPosition(t);return o?o.getCellCtrl(t.column):null}function uB(e,t,n=!1){const{rowIndex:r,rowPinned:o}=t,{pageBounds:i,pinnedRowModel:s,rowModel:a}=e;if(0===r)return"top"===o?null:"bottom"===o&&a.isRowsToRender()?{rowIndex:i.getLastRow(),rowPinned:null}:(null==s?void 0:s.isRowsToRender("top"))?{rowIndex:s.getPinnedTopRowCount()-1,rowPinned:"top"}:null;if(n){return hB(e,o?void 0:a.getRow(r),!0)??{rowIndex:r-1,rowPinned:o}}return{rowIndex:r-1,rowPinned:o}}function dB(e,t,n=!1){const{rowIndex:r,rowPinned:o}=t,{pageBounds:i,pinnedRowModel:s,rowModel:a}=e;if(function(e,t){const{rowPinned:n,rowIndex:r}=t,{pinnedRowModel:o,pageBounds:i}=e;if("top"===n){return((null==o?void 0:o.getPinnedTopRowCount())??0)-1<=r}if("bottom"===n){return((null==o?void 0:o.getPinnedBottomRowCount())??0)-1<=r}const s=i.getLastRow();return s<=r}(e,t))return"bottom"===o?null:"top"===o&&a.isRowsToRender()?{rowIndex:i.getFirstRow(),rowPinned:null}:(null==s?void 0:s.isRowsToRender("bottom"))?{rowIndex:0,rowPinned:"bottom"}:null;if(n){return hB(e,o?void 0:a.getRow(r))??{rowIndex:r+1,rowPinned:o}}return{rowIndex:r+1,rowPinned:o}}function hB(e,t,n=!1){const{gos:r,rowRenderer:o}=e;if(!(null==t?void 0:t.sticky)||!YA(r))return;const i=o.getStickyTopRowCtrls(),s=o.getStickyBottomRowCtrls(),a=!s.some(e=>e.rowNode.rowIndex===t.rowIndex),l=a?i:s,c=(n?-1:1)*(a?-1:1);let u;for(let d=0;d<l.length;d++)if(l[d].rowNode.rowIndex===t.rowIndex){u=l[d+c];break}return u?{rowIndex:u.rowNode.rowIndex,rowPinned:null}:void 0}var pB=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}depthFirstSearchChangedPath(e,t){const{rowNode:n,children:r}=e;if(r)for(let o=0;o<r.length;++o)this.depthFirstSearchChangedPath(r[o],t);t(n)}depthFirstSearchEverything(e,t,n){const r=e.childrenAfterGroup;if(r)for(let o=0,i=r.length;o<i;++o){const e=r[o];e.childrenAfterGroup?this.depthFirstSearchEverything(e,t,n):n&&t(e)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,n=!1){this.active&&!n?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,n=0;for(;!this.mapToItems[t.id];){const e={rowNode:t,children:null};this.mapToItems[t.id]=e,n++,t=t.parent}return n}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let n=e;for(;n;){this.nodeIdsToColumns[n.id]||(this.nodeIdsToColumns[n.id]={});for(const e of t)this.nodeIdsToColumns[n.id][e.getId()]=!0;n=n.parent}}linkPathItems(e,t){let n=e;for(let r=0;r<t;r++){const e=this.mapToItems[n.id],t=this.mapToItems[n.parent.id];t.children||(t.children=[]),t.children.push(e),n=n.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const n=this.createPathItems(e);this.linkPathItems(e,n),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const n=this.nodeIdsToColumns[e.id];return t.filter(e=>n[e.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const n=this.nodeIdsToColumns[e.id];return t.filter(e=>!n[e.getId()])}},fB={moduleName:"Drag",version:PA,beans:[class extends hI{shouldPreventMouseEvent(e){return this.gos.get("enableCellTextSelection")&&super.shouldPreventMouseEvent(e)}}]},gB={moduleName:"SharedDragAndDrop",version:PA,beans:[class extends mI{createEvent(e){return nN(this.gos,e)}createDragImageComp(e){const{gos:t,beans:n}=this,r=(o=n.userCompFactory,i=nN(t,{dragSource:e}),o.getCompDetailsFromGridOptions(eT,"agDragAndDropImage",i,!0));var o,i;return null==r?void 0:r.newAgStackInstance()}handleEnter(e,t){var n;null==(n=null==e?void 0:e.onGridEnter)||n.call(e,t)}handleExit(e,t){var n;null==(n=null==e?void 0:e.onGridExit)||n.call(e,t)}warnNoBody(){TA(54)}isDropZoneWithinThisGrid(e){return this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody.contains(e.dropZoneTarget)}registerGridDropTarget(e,t){const n={getContainer:e,isInterestedIn:e=>1===e||0===e,getIconName:()=>"notAllowed"};this.addDropTarget(n),t.addDestroyFunc(()=>this.removeDropTarget(n))}}],dependsOn:[fB],userComponents:{agDragAndDropImage:class extends JN{constructor(){super(),this.dragSource=null,this.eIcon=qN,this.eLabel=qN,this.eGhost=qN,this.registerCSS(".ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;display:flex;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2));white-space:nowrap}.ag-dnd-ghost-not-allowed{border:var(--ag-drag-and-drop-image-not-allowed-border)}")}postConstruct(){const e=e=>function(e,t,n){const r=GL(e,t,n);if(r){const{className:e}=r;if("string"==typeof e&&e.includes("ag-icon")||"object"==typeof e&&e["ag-icon"])return r}const o=wI({tag:"span"});return o.appendChild(r),o}(e,this.beans,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(VL),this.beans.environment.applyThemeClasses(this.eGhost)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t){const{eGhost:n,eIcon:r,dragSource:o,dropIconMap:i,gos:s}=this;yM(r);let a=null;e||(e=(null==o?void 0:o.getDefaultIconName)?o.getDefaultIconName():"notAllowed"),a=i[e],n.classList.toggle("ag-dnd-ghost-not-allowed","notAllowed"===e),r.classList.toggle("ag-shake-left-to-right",t),a===i.hide&&s.get("suppressDragLeaveHidesColumns")||a&&r.appendChild(a)}setLabel(e){this.eLabel.textContent=e}}},icons:{columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",rowDrag:"grip"}},mB={moduleName:"HorizontalResize",version:PA,beans:[class extends YM{constructor(){super(...arguments),this.beanName="horizontalResizeSvc"}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0},{dragSvc:n}=this.beans;n.addDragSource(t);return()=>n.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const n=t instanceof MouseEvent&&!0===t.shiftKey;e.onResizeStart(n)}setResizeIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(1),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}}],dependsOn:[fB]};var vB=class extends YM{constructor(e){super(),this.pinned=e,this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[]}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;if(t)for(const n of t)n.isPrimary()&&(n.isAnyFunctionActive()||(n.isAllowValue()?this.columnsToAggregate.push(n):n.isAllowRowGroup()?this.columnsToGroup.push(n):n.isAllowPivot()&&this.columnsToPivot.push(n)))}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){const{valueColsSvc:t,rowGroupColsSvc:n,pivotColsSvc:r}=this.beans;this.columnsToAggregate.length>0&&(null==t||t.addColumns(this.columnsToAggregate,"toolPanelDragAndDrop")),this.columnsToGroup.length>0&&(null==n||n.addColumns(this.columnsToGroup,"toolPanelDragAndDrop")),this.columnsToPivot.length>0&&(null==r||r.addColumns(this.columnsToPivot,"toolPanelDragAndDrop"))}onDragCancel(){this.clearColumnsList()}};function yB(e){const{isFromHeader:t,fromLeft:n,xPosition:r,fromEnter:o,fakeEvent:i,pinned:s,gos:a,colModel:l,colMoves:c,visibleCols:u}=e;let{allMovingColumns:d}=e;t&&(d=function(e){var t;const n=[...e];for(const r of e){let e=null,o=r.getParent();for(;null!=o&&1===o.getDisplayedLeafColumns().length;)e=o,o=o.getParent();if(null!=e){const r=(null==(t=e.getColGroupDef())?void 0:t.marryChildren)?e.getProvidedColumnGroup().getLeafColumns():e.getLeafColumns();for(const e of r)n.includes(e)||n.push(e)}}return n}(d));const h=d.slice();!function(e,t){if(!t||t.length<=1)return;t.filter(t=>e.indexOf(t)<0).length>0||t.sort((t,n)=>e.indexOf(t)-e.indexOf(n))}(l.getCols(),h);const p=function(e){const{movingCols:t,draggingRight:n,xPosition:r,pinned:o,gos:i,colModel:s,visibleCols:a}=e,l=i.get("suppressMovableColumns")||t.some(e=>e.getColDef().suppressMovable);if(l)return[];const c=function(e,t){switch(t){case"left":return e.leftCols;case"right":return e.rightCols;default:return e.centerCols}}(a,o),u=s.getCols(),d=c.filter(e=>t.includes(e)),h=c.filter(e=>!t.includes(e)),p=u.filter(e=>!t.includes(e));let f,g=0,m=r;if(n){let e=0;for(const t of d)e+=t.getActualWidth();m-=e}if(m>0){for(let e=0;e<h.length;e++){if(m-=h[e].getActualWidth(),m<0)break;g++}n&&g++}if(g>0){const e=h[g-1];f=p.indexOf(e)+1}else f=p.indexOf(h[0]),-1===f&&(f=0);const v=[f],y=(e,t)=>e-t;if(n){let e=f+1;const t=u.length-1;for(;e<=t;)v.push(e),e++;v.sort(y)}else{let e=f;const t=u.length-1;let n=u[e];for(;e<=t&&c.indexOf(n)<0;)e++,v.push(e),n=u[e];e=f-1;const r=0;for(;e>=r;)v.push(e),e--;v.sort(y).reverse()}return v}({movingCols:h,draggingRight:n,xPosition:r,pinned:s,gos:a,colModel:l,visibleCols:u}),f=function(e,t){const n=t.getCols(),r=e.map(e=>n.indexOf(e)).sort((e,t)=>e-t),o=r[0],i=gN(r);return i-o!==r.length-1?null:o}(h,l);if(0===p.length)return;const g=p[0];if(null!==f&&(t||!o)&&!i){if(!n&&g>=f)return;if(n&&g<=f)return}const m=function(e,t,n,r){const o=r.allCols;let i=null,s=null;for(let a=0;a<e.length;a++){const r=e[a],l=n.getProposedColumnOrder(t,r);if(!n.doesOrderPassRules(l))continue;const c=l.filter(e=>o.includes(e));if(null===s)s=c;else if(!mN(c,s))break;const u=wB(l);(null===i||u<i.fragCount)&&(i={move:r,fragCount:u})}return i}(p,h,c,u);if(!m)return;const v=m.move;return v>l.getCols().length-h.length?void 0:{columns:h,toIndex:v}}function bB(e){const{columns:t,toIndex:n}=yB(e)||{},{finished:r,colMoves:o}=e;return t&&null!=n?(o.moveColumns(t,n,"uiColumnMoved",r),r?null:{columns:t,toIndex:n}):null}function wB(e){function t(e){const t=[];let n=e.getOriginalParent();for(;null!=n;)t.push(n),n=n.getOriginalParent();return t}let n=0;for(let r=0;r<e.length-1;r++){let o=t(e[r]),i=t(e[r+1]);[o,i]=o.length>i.length?[o,i]:[i,o];for(const e of o)-1===i.indexOf(e)&&n++}return n}function CB(e){var t;const{pinned:n,fromKeyboard:r,gos:o,ctrlsSvc:i,useHeaderRow:s,skipScrollPadding:a}=e;let l=null==(t=i.getHeaderRowContainerCtrl(n))?void 0:t.eViewport,{x:c}=e;return l?(r&&(c-=l.getBoundingClientRect().left),o.get("enableRtl")&&(s&&(l=l.querySelector(".ag-header-row")),c=l.clientWidth-c),null!=n||a||(c+=i.get("center").getCenterViewportScrollLeft()),c):0}function xB(e,t){for(const n of e)n.moving=t,n.dispatchColEvent("movingChanged","uiColumnMoved")}var SB=class extends YM{constructor(e){super(),this.pinned=e,this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.isCenterContainer=!BD(e)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){const{pinned:e,lastDraggingEvent:t}=this,{dragItem:n}=t||{},r=(null==n?void 0:n.columns)??[];for(const o of r){const t=o.getPinned();if(o.getColDef().lockPinned){if(t==e)return"move";continue}const r=null==n?void 0:n.containerType;if(r===e||!e)return"move";if(e&&(!t||r!==e))return"pinned"}return"notAllowed"}onDragEnter(e){const t=e.dragItem,n=t.columns;if(0===e.dragSource.type)this.setColumnsVisible(n,!0,"uiColumnDragged");else{const e=t.visibleState,r=(n||[]).filter(t=>e[t.getId()]&&!t.isVisible());this.setColumnsVisible(r,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(n,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,n=!1,r=!1){const{gos:o,ctrlsSvc:i}=this.beans,s=o.get("suppressMoveWhenColumnDragging");if(r&&!s)return void this.finishColumnMoving();if(this.lastDraggingEvent=e,!e||!r&&HD(e.hDirection))return;const a=CB({x:e.x,pinned:this.pinned,gos:o,ctrlsSvc:i});t||this.checkCenterForScrolling(a),s?this.handleColumnDragWhileSuppressingMovement(e,t,n,a,r):this.handleColumnDragWhileAllowingMovement(e,t,n,a,r)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.updateDragItemContainerType(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,n){if(!(null==e?void 0:e.length))return;const r=e.filter(e=>!e.getColDef().lockVisible);r.length&&this.beans.colModel.setColsVisible(r,t,n)}finishColumnMoving(){this.clearHighlighted();const e=this.lastMovedInfo;if(!e)return;const{columns:t,toIndex:n}=e;this.beans.colMoves.moveColumns(t,n,"uiColumnMoved",!0)}updateDragItemContainerType(){const{lastDraggingEvent:e}=this;if(this.gos.get("suppressMoveWhenColumnDragging")||!e)return;const t=e.dragItem;t&&(t.containerType=this.pinned)}handleColumnDragWhileSuppressingMovement(e,t,n,r,o){const i=this.getAllMovingColumns(e,!0);if(o){const e=this.isAttemptingToPin(i);e&&this.attemptToPinColumns(i,void 0,!0);const{fromLeft:r,xPosition:o}=this.getNormalisedXPositionInfo(i,e)||{};if(null==r||null==o)return void this.finishColumnMoving();this.moveColumnsAfterHighlight({allMovingColumns:i,xPosition:o,fromEnter:t,fakeEvent:n,fromLeft:r})}else{if(!this.beans.dragAndDrop.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(i,r)}}handleColumnDragWhileAllowingMovement(e,t,n,r,o){const i=this.getAllMovingColumns(e),s="right"===this.normaliseDirection(e.hDirection),a=1===e.dragSource.type,l=bB({...this.getMoveColumnParams({allMovingColumns:i,isFromHeader:a,xPosition:r,fromLeft:s,fromEnter:t,fakeEvent:n}),finished:o});l&&(this.lastMovedInfo=l)}getAllMovingColumns(e,t=!1){const n=e.dragSource.getDragItem();let r=null;t?(r=n.columnsInSplit,r||(r=n.columns)):r=n.columns;return r?r.filter(e=>!e.getColDef().lockPinned||e.getPinned()==this.pinned):[]}getMoveColumnParams(e){const{allMovingColumns:t,isFromHeader:n,xPosition:r,fromLeft:o,fromEnter:i,fakeEvent:s}=e,{gos:a,colModel:l,colMoves:c,visibleCols:u}=this.beans;return{allMovingColumns:t,isFromHeader:n,fromLeft:o,xPosition:r,pinned:this.pinned,fromEnter:i,fakeEvent:s,gos:a,colModel:l,colMoves:c,visibleCols:u}}highlightHoveredColumn(e,t){var n;const{gos:r,colModel:o}=this.beans,i=r.get("enableRtl"),s=o.getCols().filter(e=>e.isVisible()&&e.getPinned()===this.pinned);let a,l=null,c=null,u=null;for(const d of s){if(c=d.getActualWidth(),l=this.getNormalisedColumnLeft(d,0,i),null!=l){if(l<=t&&l+c>=t){u=d;break}}l=null,c=null}if(u)-1!==e.indexOf(u)&&(u=null);else{for(let e=s.length-1;e>=0;e--){const t=s[e],n=s[e].getParent();if(!n){u=t;break}const r=null==n?void 0:n.getDisplayedLeafColumns();if(r.length){u=gN(r);break}}if(!u)return;l=this.getNormalisedColumnLeft(u,0,i),c=u.getActualWidth()}(null==(n=this.lastHighlightedColumn)?void 0:n.column)!==u&&this.clearHighlighted(),null!=u&&null!=l&&null!=c&&(a=t-l<c/2!==i?0:1,kB(u,a),this.lastHighlightedColumn={column:u,position:a})}getNormalisedXPositionInfo(e,t){const{gos:n,visibleCols:r}=this.beans,o=n.get("enableRtl"),{firstMovingCol:i,column:s,position:a}=this.getColumnMoveAndTargetInfo(e,t,o);if(!i||!s||null==a)return;const l=r.allCols,c=l.indexOf(i),u=l.indexOf(s),d=0===a!==o,h=c<u||c===u&&!d;let p=0;if(d?h&&(p-=1):h||(p+=1),u+p===c)return;const f=l[u+p];if(!f)return;return{fromLeft:h,xPosition:this.getNormalisedColumnLeft(f,20,o)}}getColumnMoveAndTargetInfo(e,t,n){const r=this.lastHighlightedColumn||{},{firstMovingCol:o,lastMovingCol:i}=function(e){const t=e.length;let n,r;for(let o=0;o<t;o++){if(!n){const t=e[o];null!=t.getLeft()&&(n=t)}if(!r){const n=e[t-1-o];null!=n.getLeft()&&(r=n)}if(n&&r)break}return{firstMovingCol:n,lastMovingCol:r}}(e);if(!o||!i||r.column||!t)return{firstMovingCol:o,...r};const s="left"===this.getPinDirection();return{firstMovingCol:o,position:s?1:0,column:s!==n?o:i}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case"left":return"right";case"right":return"left"}return e}getNormalisedColumnLeft(e,t,n){const{gos:r,ctrlsSvc:o}=this.beans,i=e.getLeft();if(null==i)return null;const s=e.getActualWidth();return CB({x:n?i+s-t:i+t,pinned:e.getPinned(),useHeaderRow:n,skipScrollPadding:!0,gos:r,ctrlsSvc:o})}isAttemptingToPin(e){const t=this.needToMoveLeft||this.needToMoveRight,n=this.failedMoveAttempts>7;return t&&n||e.some(e=>e.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){const{allMovingColumns:t,xPosition:n,fromEnter:r,fakeEvent:o,fromLeft:i}=e,s=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:n,fromLeft:i,fromEnter:r,fakeEvent:o}),{columns:a,toIndex:l}=yB(s)||{};a&&null!=l&&(this.lastMovedInfo={columns:a,toIndex:l}),this.finishColumnMoving()}clearHighlighted(){const{lastHighlightedColumn:e}=this;e&&(kB(e.column,null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const t=this.beans.ctrlsSvc.get("center"),n=t.getCenterViewportScrollLeft(),r=n+t.getCenterWidth();let o,i;this.gos.get("enableRtl")?(o=e<n+50,i=e>r-50):(i=e<n+50,o=e>r-50),this.needToMoveRight=o,this.needToMoveLeft=i,i||o?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.beans.dragAndDrop.setDragImageCompIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.beans.dragAndDrop.setDragImageCompIcon(this.getIconName()))}moveInterval(){var e;let t;this.intervalCount++,t=10+5*this.intervalCount,t>100&&(t=100);let n=null;const r=this.gridBodyCon.scrollFeature;if(this.needToMoveLeft?n=r.scrollHorizontally(-t):this.needToMoveRight&&(n=r.scrollHorizontally(t)),0!==n)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const{pinnedCols:t,dragAndDrop:n,gos:r}=this.beans;if(this.failedMoveAttempts<=8||!t)return;if(n.setDragImageCompIcon("pinned"),!r.get("suppressMoveWhenColumnDragging")){const t=null==(e=this.lastDraggingEvent)?void 0:e.dragItem.columns;this.attemptToPinColumns(t,void 0,!0)}}}getPinDirection(){return this.needToMoveLeft||"left"===this.pinned?"left":this.needToMoveRight||"right"===this.pinned?"right":void 0}attemptToPinColumns(e,t,n=!1){const r=(e||[]).filter(e=>!e.getColDef().lockPinned);if(!r.length)return 0;n&&(t=this.getPinDirection());const{pinnedCols:o,dragAndDrop:i}=this.beans;return null==o||o.setColsPinned(r,t,"uiColumnDragged"),n&&i.nudge(),r.length}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}};function kB(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchColEvent("headerHighlightChanged","uiColumnMoved"))}var PB=class extends YM{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){const{ctrlsSvc:e,dragAndDrop:t}=this.beans,n=this.pinned;e.whenReady(this,e=>{let t;const r=e.gridBodyCtrl.eBodyViewport;switch(n){case"left":t=[[r,e.left.eContainer],[e.bottomLeft.eContainer],[e.topLeft.eContainer]];break;case"right":t=[[r,e.right.eContainer],[e.bottomRight.eContainer],[e.topRight.eContainer]];break;default:t=[[r,e.center.eViewport],[e.bottomCenter.eViewport],[e.topCenter.eViewport]]}this.eSecondaryContainers=t}),this.moveColumnFeature=this.createManagedBean(new SB(n)),this.bodyDropPivotTarget=this.createManagedBean(new vB(n)),t.addDropTarget(this),this.addDestroyFunc(()=>t.removeDropTarget(this))}isInterestedIn(e){return 1===e||0===e&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.beans.colModel.isPivotMode()&&0===e.dragSource.type}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}};var jB={moduleName:"ColumnMove",version:PA,beans:[class extends YM{constructor(){super(...arguments),this.beanName="colMoves"}moveColumnByIndex(e,t,n){const r=this.beans.colModel.getCols();if(!r)return;const o=r[e];this.moveColumns([o],t,n)}moveColumns(e,t,n,r=!0){const{colModel:o,colAnimation:i,visibleCols:s,eventSvc:a}=this.beans,l=o.getCols();if(!l)return;if(t>l.length-e.length)return void TA(30,{toIndex:t});null==i||i.start();const c=o.getColsForKeys(e);this.doesMovePassRules(c,t)&&(bN(o.getCols(),c,t),s.refresh(n),a.dispatchEvent({type:"columnMoved",columns:c,column:1===c.length?c[0]:null,toIndex:t,finished:r,source:n})),null==i||i.finish()}doesMovePassRules(e,t){const n=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(n)}doesOrderPassRules(e){const{colModel:t,gos:n}=this.beans;if(!LN(e,t.getColTree()))return!1;return!!(e=>{const t=e=>e?"left"===e||!0===e?-1:1:0,r=n.get("enableRtl");let o=r?1:-1,i=!0;for(const n of e){const e=t(n.getColDef().lockPosition);r?e>o&&(i=!1):e<o&&(i=!1),o=e}return i})(e)}getProposedColumnOrder(e,t){const n=this.beans.colModel.getCols().slice();return bN(n,e,t),n}createBodyDropTarget(e,t){return new PB(e,t)}moveHeader(e,t,n,r,o){const{ctrlsSvc:i,gos:s,colModel:a,visibleCols:l,focusSvc:c}=this.beans,u=t.getBoundingClientRect(),d=u.left,h=yI(n),p=h?u.width:n.getActualWidth(),f="left"===e!==s.get("enableRtl"),g=CB({x:f?d-20:d+p+20,pinned:r,fromKeyboard:!0,gos:s,ctrlsSvc:i}),m=c.focusedHeader;let v;if(bB({allMovingColumns:h?n.getLeafColumns():[n],isFromHeader:!0,fromLeft:"right"===e,xPosition:g,pinned:r,fromEnter:!1,fakeEvent:!1,gos:s,colModel:a,colMoves:this,visibleCols:l,finished:!0}),h){const e=n.getDisplayedLeafColumns();v=f?e[0]:gN(e)}else v=n;if(i.getScrollFeature().ensureColumnVisible(v,"auto"),(!o.isAlive()||s.get("ensureDomOrder"))&&m){let e;if(h){const t=n.getGroupId(),r=n.getLeafColumns();if(!r.length)return;const o=r[0].getParent();if(!o)return;e=function(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return}(o,t)}else e=n;e&&c.focusHeaderPosition({headerPosition:{...m,column:e}})}}setDragSourceForHeader(e,t,n){const{gos:r,colModel:o,dragAndDrop:i,visibleCols:s}=this.beans;let a=!r.get("suppressDragLeaveHidesColumns");const l=yI(t),c=l?t.getProvidedColumnGroup().getLeafColumns():[t],u=l?()=>function(e,t){var n;const r=e.getProvidedColumnGroup().getLeafColumns(),o={};for(const l of r)o[l.getId()]=l.isVisible();const i=[];for(const l of t)r.indexOf(l)>=0&&(i.push(l),yN(r,l));for(const l of r)i.push(l);const s=[],a=e.getLeafColumns();for(const l of i)-1!==a.indexOf(l)&&s.push(l);return{columns:i,columnsInSplit:s,visibleState:o,containerType:null==(n=s[0])?void 0:n.pinned}}(t,s.allCols):()=>function(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t,containerType:e.pinned}}(t),d={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:u,dragItemName:n,onDragStarted:()=>{a=!r.get("suppressDragLeaveHidesColumns"),xB(c,!0)},onDragStopped:()=>xB(c,!1),onDragCancelled:()=>xB(c,!1),onGridEnter:e=>{if(a){const{columns:t=[],visibleState:n}=e??{},r=l?e=>!n||n[e.getColId()]:()=>!0,i=t.filter(e=>!e.getColDef().lockVisible&&r(e));o.setColsVisible(i,!0,"uiColumnMoved")}},onGridExit:e=>{var t;if(a){const n=(null==(t=null==e?void 0:e.columns)?void 0:t.filter(e=>!e.getColDef().lockVisible))||[];o.setColsVisible(n,!1,"uiColumnMoved")}}};return i.addDragSource(d,!0),d}},class extends YM{constructor(){super(...arguments),this.beanName="colAnimation",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){if(this.active)return;const{gos:e}=this;e.get("suppressColumnMoveAnimation")||e.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount,{gridBodyCtrl:t}=this;t.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&t.setColumnMovingCss(!1)})}flush(e,t){const{executeNextFuncs:n,executeLaterFuncs:r}=this;if(0===n.length&&0===r.length)return e(),void t();const o=e=>{for(;e.length;){const t=e.pop();t&&t()}};this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e(),o(n)},0),window.setTimeout(()=>{t(),o(r)},200)})}}],apiFunctions:{moveColumnByIndex:function(e,t,n){var r;null==(r=e.colMoves)||r.moveColumnByIndex(t,n,"api")},moveColumns:function(e,t,n){var r;null==(r=e.colMoves)||r.moveColumns(t,n,"api")}},dependsOn:[gB],css:[":where(.ag-ltr) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}:where(.ag-rtl) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}"]},OB={moduleName:"AutoWidth",version:PA,beans:[class extends YM{constructor(){super(...arguments),this.beanName="autoWidthCalc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){const n=this.getHeaderCellForColumn(e);if(!n)return-1;const r=this.beans.rowRenderer.getAllCellsNotSpanningForColumn(e);return t||r.push(n),this.getPreferredWidthForElements(r)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.getPreferredWidthForElements([t]):-1}getPreferredWidthForElements(e,t){const n=document.createElement("form");n.style.position="fixed";const r=this.centerRowContainerCtrl.eContainer;for(const i of e)this.cloneItemIntoDummy(i,n);r.appendChild(n);const o=n.offsetWidth;return n.remove(),o+(t=t??this.gos.get("autoSizePadding"))}getHeaderCellForColumn(e){let t=null;for(const n of this.beans.ctrlsSvc.getHeaderRowContainerCtrls()){const r=n.getHtmlElementForColumnHeader(e);null!=r&&(t=r)}return t}cloneItemIntoDummy(e,t){const n=e.cloneNode(!0);n.style.width="",n.style.position="static",n.style.left="";const r=document.createElement("div"),o=r.classList;["ag-header-cell","ag-header-group-cell"].some(e=>n.classList.contains(e))?(o.add("ag-header","ag-header-row"),r.style.position="static"):o.add("ag-row");let i=e.parentElement;for(;i;){if(["ag-header-row","ag-row"].some(e=>i.classList.contains(e))){for(let e=0;e<i.classList.length;e++){const t=i.classList[e];"ag-row-position-absolute"!=t&&o.add(t)}break}i=i.parentElement}r.appendChild(n),t.appendChild(r)}}]};var RB=class extends YM{constructor(e,t,n,r){super(),this.comp=e,this.eResize=t,this.pinned=n,this.columnGroup=r}postConstruct(){if(!this.columnGroup.isResizable())return void this.comp.setResizableDisplayed(!1);const{horizontalResizeSvc:e,gos:t,colAutosize:n}=this.beans,r=e.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(r),!t.get("suppressAutoSize")&&n&&this.addDestroyFunc(n.addColumnGroupResize(this.eResize,this.columnGroup,()=>this.resizeLeafColumnsToFit("uiColumnResized")))}onResizeStart(e){const{columnsToResize:t,resizeStartWidth:n,resizeRatios:r,groupAfterColumns:o,groupAfterStartWidth:i,groupAfterRatios:s}=this.getInitialValues(e);this.resizeCols=t,this.resizeStartWidth=n,this.resizeRatios=r,this.resizeTakeFromCols=o,this.resizeTakeFromStartWidth=i,this.resizeTakeFromRatios=s,this.toggleColumnResizing(!0)}onResizing(e,t,n="uiColumnResized"){const r=this.normaliseDragChange(t),o=this.resizeStartWidth+r;this.resizeColumnsFromLocalValues(o,n,e)}getInitialValues(e){var t;const n=e=>e.reduce((e,t)=>e+t.getActualWidth(),0),r=(e,t)=>e.map(e=>e.getActualWidth()/t),o=this.getColumnsToResize(),i=n(o),s={columnsToResize:o,resizeStartWidth:i,resizeRatios:r(o,i)};let a=null;if(e&&(a=(null==(t=this.beans.colGroupSvc)?void 0:t.getGroupAtDirection(this.columnGroup,"After"))??null),a){const e=a.getDisplayedLeafColumns(),t=s.groupAfterColumns=e.filter(e=>e.isResizable()),o=s.groupAfterStartWidth=n(t);s.groupAfterRatios=r(t,o)}else s.groupAfterColumns=void 0,s.groupAfterStartWidth=void 0,s.groupAfterRatios=void 0;return s}resizeLeafColumnsToFit(e){const t=this.beans.autoWidthCalc.getPreferredWidthForColumnGroup(this.columnGroup),n=this.getInitialValues();t>n.resizeStartWidth&&this.resizeColumns(n,t,e,!0)}resizeColumnsFromLocalValues(e,t,n=!0){if(!this.resizeCols||!this.resizeRatios)return;const r={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols,groupAfterStartWidth:this.resizeTakeFromStartWidth,groupAfterRatios:this.resizeTakeFromRatios};this.resizeColumns(r,e,t,n)}resizeColumns(e,t,n,r=!0){var o;const{columnsToResize:i,resizeStartWidth:s,resizeRatios:a,groupAfterColumns:l,groupAfterStartWidth:c,groupAfterRatios:u}=e,d=[];if(d.push({columns:i,ratios:a,width:t}),l){const e=t-s;d.push({columns:l,ratios:u,width:c-e})}null==(o=this.beans.colResize)||o.resizeColumnSets({resizeSets:d,finished:r,source:n}),r&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.toggleCss("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(e=>e.isResizable())}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?"left"!==this.pinned&&(t*=-1):"right"===this.pinned&&(t*=-1),t}destroy(){super.destroy(),this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}},EB=class extends YM{constructor(e,t,n,r,o){super(),this.pinned=e,this.column=t,this.eResize=n,this.comp=r,this.ctrl=o}postConstruct(){const e=[];let t,n;const r=()=>{if(uM(this.eResize,t),!t)return;const{horizontalResizeSvc:r,colAutosize:o}=this.beans,i=r.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});e.push(i),n&&o&&e.push(o.addColumnAutosizeListeners(this.eResize,this.column))},o=()=>{for(const t of e)t();e.length=0},i=()=>{const e=this.column.isResizable(),i=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(e!==t||i!==n)&&(t=e,n=i,o(),r())};i(),this.addDestroyFunc(o),this.ctrl.setRefreshFunction("resize",i)}onResizing(e,t){const{column:n,lastResizeAmount:r,resizeStartWidth:o,beans:i}=this,s=this.normaliseResizeAmount(t),a=[{key:n,newWidth:o+s}],{pinnedCols:l,ctrlsSvc:c,colResize:u}=i;if(this.column.getPinned()){if(((null==l?void 0:l.leftWidth)??0)+((null==l?void 0:l.rightWidth)??0)+(s-r)>gM(c.getGridBodyCtrl().eBodyViewport)-50)return}this.lastResizeAmount=s,null==u||u.setColumnWidths(a,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.column.resizing=e,this.comp.toggleCss("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const n="left"!==this.pinned,r="right"===this.pinned;return this.gos.get("enableRtl")?n&&(t*=-1):r&&(t*=-1),t}};var DB={moduleName:"ColumnResize",version:PA,beans:[class extends YM{constructor(){super(...arguments),this.beanName="colResize"}setColumnWidths(e,t,n,r){const o=[],{colModel:i,gos:s,visibleCols:a}=this.beans;for(const l of e){const e=i.getColDefCol(l.key)||i.getCol(l.key);if(!e)continue;o.push({width:l.newWidth,ratios:[1],columns:[e]});if("shift"===s.get("colResizeDefault")&&(t=!t),t){const t=a.getColAfter(e);if(!t)continue;const n=e.getActualWidth()-l.newWidth,r=t.getActualWidth()+n;o.push({width:r,ratios:[1],columns:[t]})}}0!==o.length&&this.resizeColumnSets({resizeSets:o,finished:n,source:r})}resizeColumnSets(e){const{resizeSets:t,finished:n,source:r}=e;if(!(!t||t.every(e=>function(e){const{columns:t,width:n}=e;let r=0,o=0,i=!0;for(const a of t){r+=a.getMinWidth()||0;const e=a.getMaxWidth();e>0?o+=e:i=!1}const s=!i||n<=o;return n>=r&&s}(e)))){if(n){const e=t&&t.length>0?t[0].columns:null;_N(this.eventSvc,e,n,r)}return}const o=[],i=[];for(const c of t){const{width:e,columns:t,ratios:n}=c,s={},a={};for(const r of t)i.push(r);let l=!0,u=0;for(;l;){if(u++,u>1e3){FA(31);break}l=!1;const r=[];let o=0,i=e;t.forEach((e,t)=>{if(a[e.getId()])i-=s[e.getId()];else{r.push(e);const i=n[t];o+=i}});const c=1/o;r.forEach((t,o)=>{let u;o===r.length-1?u=i:(u=Math.round(n[o]*e*c),i-=u);const d=t.getMinWidth(),h=t.getMaxWidth();u<d?(u=d,a[t.getId()]=!0,l=!0):h>0&&u>h&&(u=h,a[t.getId()]=!0,l=!0),s[t.getId()]=u})}for(const i of t){const e=s[i.getId()];i.getActualWidth()!==e&&(i.setActualWidth(e,r),o.push(i))}}const s=o.length>0;let a=[];if(s){const{colFlex:e,visibleCols:t,colViewport:n}=this.beans;a=(null==e?void 0:e.refreshFlexedColumns({resizingCols:i,skipSetLeft:!0}))??[],t.setLeftValues(r),t.updateBodyWidths(),n.checkViewportColumns()}const l=i.concat(a);(s||n)&&_N(this.eventSvc,l,n,r,a)}resizeHeader(e,t,n){if(!e.isResizable())return;const r=e.getActualWidth(),o=e.getMinWidth(),i=e.getMaxWidth(),s=Math.min(Math.max(r+t,o),i);this.setColumnWidths([{key:e,newWidth:s}],n,!0,"uiColumnResized")}createResizeFeature(e,t,n,r,o){return new EB(e,t,n,r,o)}createGroupResizeFeature(e,t,n,r){return new RB(e,t,n,r)}}],apiFunctions:{setColumnWidths:function(e,t,n=!0,r="api"){var o;null==(o=e.colResize)||o.setColumnWidths(t,!1,n,r)}},dependsOn:[mB,OB]},MB=class extends YM{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);for(const t of this.columnGroup.getLeafColumns())t.__addEventListener("widthChanged",e),t.__addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.__removeEventListener("widthChanged",e),t.__removeEventListener("visibleChanged",e)})}removeListenersOnChildrenColumns(){for(const e of this.removeChildListenersFuncs)e();this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.toggleCss("ag-hidden",0===e)}};function AB(e,t){for(let n=0;n<t.length;n++){const r=e.indexOf(t[n]);r>=0&&(e[r]=e[e.length-1],e.pop())}}function NB(e,t,n){if(e)for(let r=0;r<e.length;r++){const o=e[r];if(yI(o)){NB(t?o.getDisplayedChildren():o.getChildren(),t,n)}n(o)}}function TB(e){const t=[];return NB(e,!0,e=>{lN(e)&&t.push(e)}),t}var FB={moduleName:"ColumnGroup",version:PA,dynamicBeans:{headerGroupCellCtrl:class extends AL{constructor(){super(...arguments),this.onSuppressColMoveChange=()=>{!this.isAlive()||this.isSuppressMoving()?this.removeDragSource():this.dragSource||this.setDragSource(this.eGui)}}wireComp(e,t,n,r,o){const{column:i,beans:s}=this,{context:a,colNames:l,colHover:c,rangeSvc:u,colResize:d}=s;this.comp=e,o=KN(this,a,o),this.setGui(t,o),this.displayName=l.getDisplayNameForColumnGroup(i,"header"),this.refreshHeaderStyles(),this.addClasses(),this.setupMovingCss(o),this.setupExpandable(o),this.setupTooltip(),this.setupAutoHeight({wrapperElement:r,compBean:o}),this.setupUserComp(),this.addHeaderMouseListeners(o),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const h=this.rowCtrl.pinned,p=i.getProvidedColumnGroup().getLeafColumns();null==c||c.createHoverFeature(o,p,t),null==u||u.createRangeHighlightFeature(o,i,e),o.createManagedBean(new EL(i,t,s)),o.createManagedBean(new MB(e,i)),d?this.resizeFeature=o.createManagedBean(d.createGroupResizeFeature(e,n,h,i)):e.setResizableDisplayed(!1),o.createManagedBean(new kI(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(o,p),o.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(o),o.addDestroyFunc(()=>this.clearComponent())}getHeaderClassParams(){const{column:e,beans:t}=this,n=e.getDefinition();return nN(t.gos,{colDef:n,columnGroup:e,floatingFilter:!1})}refreshMaxHeaderHeight(){const{gos:e,comp:t}=this,n=e.get("groupHeaderHeight");null!=n?0===n?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(n):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const n of t)e.addManagedListeners(n,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,n)})}onLeafColumnHighlightChanged(e){const t=this.column.getDisplayedLeafColumns(),n=t[0]===e,r=gN(t)===e;if(!n&&!r)return;const o=e.getHighlighted();let i=!1,s=!1;if(!!this.rowCtrl.getHeaderCellCtrls().find(e=>e.column.isMoving())){const e=this.beans.gos.get("enableRtl"),t=1===o,a=0===o;n&&(e?s=t:i=a),r&&(e?i=a:s=t)}this.comp.toggleCss("ag-header-highlight-before",i),this.comp.toggleCss("ag-header-highlight-after",s)}resizeHeader(e,t){const{resizeFeature:n}=this;if(!n)return;const r=n.getInitialValues(t);n.resizeColumns(r,r.resizeStartWidth+e,"uiColumnResized",!0)}resizeLeafColumnsToFit(e){var t;null==(t=this.resizeFeature)||t.resizeLeafColumnsToFit(e)}setupUserComp(){const{colGroupSvc:e,userCompFactory:t,gos:n,enterpriseMenuFactory:r}=this.beans,o=this.column,i=o.getProvidedColumnGroup(),s=function(e,t){const n=t.columnGroup.getColGroupDef();return e.getCompDetails(n,oT,"agColumnGroupHeader",t)}(t,nN(n,{displayName:this.displayName,columnGroup:o,setExpanded:t=>{e.setColumnGroupOpened(i,t,"gridInitializing")},setTooltip:(e,t)=>{n.assertModuleRegistered("Tooltip",3),this.setupTooltip(e,t)},showColumnMenu:(e,t)=>null==r?void 0:r.showMenuAfterButtonClick(i,e,"columnMenu",t),showColumnMenuAfterMouseClick:(e,t)=>null==r?void 0:r.showMenuAfterMouseEvent(i,e,"columnMenu",t),eGridHeader:this.eGui}));s&&this.comp.setUserCompDetails(s)}addHeaderMouseListeners(e){const t=e=>this.handleMouseOverChange("mouseenter"===e.type);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),contextmenu:e=>this.handleContextMenuMouseEvent(e,void 0,this.column.getProvidedColumnGroup())})}handleMouseOverChange(e){this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t){var n;this.tooltipFeature=null==(n=this.beans.tooltipSvc)?void 0:n.setupHeaderGroupTooltip(this.tooltipFeature,this,e,t)}setupExpandable(e){const t=this.column.getProvidedColumnGroup();this.refreshExpanded();const n=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:n,expandableChanged:n})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0),this.refreshHeaderStyles()}addClasses(){const{column:e}=this,t=e.getColGroupDef(),n=mL(t,this.gos,null,e);if(e.isPadding()){n.push("ag-header-group-cell-no-group");e.getLeafColumns().every(e=>e.isSpanHeaderHeight())&&n.push("ag-header-span-height")}else n.push("ag-header-group-cell-with-group"),(null==t?void 0:t.wrapHeaderText)&&n.push("ag-header-cell-wrap-text");for(const r of n)this.comp.toggleCss(r,!0)}setupMovingCss(e){const{column:t}=this,n=t.getProvidedColumnGroup().getLeafColumns(),r=()=>this.comp.toggleCss("ag-header-cell-moving",t.isMoving());for(const o of n)e.addManagedListeners(o,{movingChanged:r});r()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||this.focusThis()}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(this.expandable&&t&&e.key===jT){const e=this.column,t=!e.isExpanded();this.beans.colGroupSvc.setColumnGroupOpened(e.getProvidedColumnGroup(),t,"uiColumnExpanded")}}setDragSource(e){var t;this.isAlive()&&!this.isSuppressMoving()&&(this.removeDragSource(),e&&(this.dragSource=(null==(t=this.beans.colMoves)?void 0:t.setDragSourceForHeader(e,this.column,this.displayName))??null))}isSuppressMoving(){return this.gos.get("suppressMovableColumns")||this.column.getLeafColumns().some(e=>e.getColDef().suppressMovable||e.getColDef().lockPosition)}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}}},beans:[class extends YM{constructor(){super(...arguments),this.beanName="colGroupSvc"}getColumnGroupState(){const e=[];return FN(null,this.beans.colModel.getColTree(),t=>{uN(t)&&e.push({groupId:t.getGroupId(),open:t.isExpanded()})}),e}resetColumnGroupState(e){const t=this.beans.colModel.getColDefColTree();if(!t)return;const n=[];FN(null,t,e=>{if(uN(e)){const t=e.getColGroupDef(),r={groupId:e.getGroupId(),open:t?t.openByDefault:void 0};n.push(r)}}),this.setColumnGroupState(n,e)}setColumnGroupState(e,t){const{colModel:n,colAnimation:r,visibleCols:o,eventSvc:i}=this.beans;if(!n.getColTree().length)return;null==r||r.start();const s=[];for(const a of e){const e=a.groupId,t=a.open,n=this.getProvidedColGroup(e);n&&(n.isExpanded()!==t&&(n.setExpanded(t),s.push(n)))}o.refresh(t,!0),s.length&&i.dispatchEvent({type:"columnGroupOpened",columnGroup:1===s.length?s[0]:void 0,columnGroups:s}),null==r||r.finish()}setColumnGroupOpened(e,t,n){let r;r=uN(e)?e.getId():e||"",this.setColumnGroupState([{groupId:r,open:t}],n)}getProvidedColGroup(e){let t=null;return FN(null,this.beans.colModel.getColTree(),n=>{uN(n)&&n.getId()===e&&(t=n)}),t}getGroupAtDirection(e,t){const n=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),r=e.getDisplayedLeafColumns(),o="After"===t?gN(r):r[0],i=`getCol${t}`;for(;;){const t=this.beans.visibleCols[i](o);if(!t)return null;const r=this.getColGroupAtLevel(t,n);if(r!==e)return r}}getColGroupAtLevel(e,t){let n,r,o=e.getParent();for(;;){if(n=o.getProvidedColumnGroup().getLevel(),r=o.getPaddingLevel(),n+r<=t)break;o=o.getParent()}return o}updateOpenClosedVisibility(){NB(this.beans.visibleCols.getAllTrees(),!1,e=>{yI(e)&&e.calculateDisplayedColumns()})}getColumnGroup(e,t){if(!e)return null;if(yI(e))return e;const n=this.beans.visibleCols.getAllTrees(),r="number"==typeof t;let o=null;return NB(n,!1,n=>{if(yI(n)){const i=n;let s;s=r?e===i.getGroupId()&&t===i.getPartId():e===i.getGroupId(),s&&(o=i)}}),o}createColumnGroups(e){const{columns:t,idCreator:n,pinned:r,oldDisplayedGroups:o,isStandaloneStructure:i}=e,s=this.mapOldGroupsById(o),a=[];let l=t;for(;l.length;){const e=l;l=[];let t=0;const o=o=>{const c=t;t=o;const u=e[c],d=(yI(u)?u.getProvidedColumnGroup():u).getOriginalParent();if(null==d){for(let t=c;t<o;t++)a.push(e[t]);return}const h=this.createColumnGroup(d,n,s,r,i);for(let t=c;t<o;t++)h.addChild(e[t]);l.push(h)};for(let n=1;n<e.length;n++){const r=e[n],i=(yI(r)?r.getProvidedColumnGroup():r).getOriginalParent(),s=e[t];i!==(yI(s)?s.getProvidedColumnGroup():s).getOriginalParent()&&o(n)}t<e.length&&o(e.length)}return i||this.setupParentsIntoCols(a,null),a}createProvidedColumnGroup(e,t,n,r,o,i,s){const a=o.getUniqueKey(t.groupId||null,null),l=pN(this.beans,t,a),c=new dN(l,a,!1,n);this.createBean(c);const u=this.findExistingGroup(t,i);u&&i.splice(u.idx,1);const d=null==u?void 0:u.group;d&&c.setExpanded(d.isExpanded());const h=DN(this.beans,l.children,n+1,e,r,o,i,s);return c.setChildren(h),c}balanceColumnTree(e,t,n,r){const o=[];for(let i=0;i<e.length;i++){const s=e[i];if(uN(s)){const e=s,i=this.balanceColumnTree(e.getChildren(),t+1,n,r);e.setChildren(i),o.push(e)}else{let i,a;for(let e=t;e<n;e++){const t=r.getUniqueKey(null,null),n=pN(this.beans,null,t),o=new dN(n,t,!0,e);this.createBean(o),a&&a.setChildren([o]),a=o,i||(i=a)}if(i&&a){o.push(i);if(e.some(e=>uN(e))){a.setChildren([s]);continue}a.setChildren(e);break}o.push(s)}}return o}findDepth(e){let t=0,n=e;for(;(null==n?void 0:n[0])&&uN(n[0]);)t++,n=n[0].getChildren();return t}findMaxDepth(e,t){let n=t;for(let r=0;r<e.length;r++){const o=e[r];if(uN(o)){const e=o,r=this.findMaxDepth(e.getChildren(),t+1);n<r&&(n=r)}}return n}balanceTreeForAutoCols(e,t){const n=[];for(const r of e){let e=r;for(let n=t-1;n>=0;n--){const t=new dN(null,`FAKE_PATH_${r.getId()}}_${n}`,!0,n);this.createBean(t),t.setChildren([e]),e.originalParent=t,e=t}0===t&&(r.originalParent=null),n.push(e)}return n}findExistingGroup(e,t){if(null!=e.groupId)for(let n=0;n<t.length;n++){const r=t[n];if(r.getColGroupDef()&&r.getId()===e.groupId)return{idx:n,group:r}}}createColumnGroup(e,t,n,r,o){const i=e.getGroupId(),s=t.getInstanceIdForKey(i);let a=n[vI(i,s)];return a&&a.getProvidedColumnGroup()!==e&&(a=null),BD(a)?a.reset():(a=new bI(e,i,s,r),o||this.createBean(a)),a}mapOldGroupsById(e){const t={},n=e=>{for(const r of e)if(yI(r)){const e=r;t[r.getUniqueId()]=e,n(e.getChildren())}};return e&&n(e),t}setupParentsIntoCols(e,t){for(const n of e??[])if(n.parent!==t&&(this.beans.colViewport.colsWithinViewportHash=""),n.parent=t,yI(n)){const e=n;this.setupParentsIntoCols(e.getChildren(),e)}}}],apiFunctions:{getAllDisplayedColumnGroups:function(e){return e.visibleCols.getAllTrees()},getCenterDisplayedColumnGroups:function(e){return e.visibleCols.treeCenter},getColumnGroup:function(e,t,n){var r;return(null==(r=e.colGroupSvc)?void 0:r.getColumnGroup(t,n))??null},getColumnGroupState:function(e){var t;return(null==(t=e.colGroupSvc)?void 0:t.getColumnGroupState())??[]},getDisplayNameForColumnGroup:function(e,t,n){return e.colNames.getDisplayNameForColumnGroup(t,n)||""},getLeftDisplayedColumnGroups:function(e){return e.visibleCols.treeLeft},getProvidedColumnGroup:function(e,t){var n;return(null==(n=e.colGroupSvc)?void 0:n.getProvidedColGroup(t))??null},getRightDisplayedColumnGroups:function(e){return e.visibleCols.treeRight},resetColumnGroupState:function(e){var t;null==(t=e.colGroupSvc)||t.resetColumnGroupState("api")},setColumnGroupOpened:function(e,t,n){var r;null==(r=e.colGroupSvc)||r.setColumnGroupOpened(t,n,"api")},setColumnGroupState:function(e,t){var n;null==(n=e.colGroupSvc)||n.setColumnGroupState(t,"api")}}},IB={tag:"div",cls:"ag-skeleton-container"},LB={moduleName:"CheckboxCellRenderer",version:PA,userComponents:{agCheckboxCellRenderer:class extends JN{constructor(){super(WL,[yF]),this.eCheckbox=qN,this.registerCSS(".ag-checkbox-cell{height:100%}")}init(e){this.refresh(e);const{eCheckbox:t,beans:n}=this,r=t.getInputElement();r.setAttribute("tabindex","-1"),oM(r,"polite"),this.addManagedListeners(r,{click:e=>{if(xI(e),t.isDisabled())return;const n=t.getValue();this.onCheckboxChanged(n)},dblclick:e=>{xI(e)}}),this.addManagedElementListeners(e.eGridCell,{keydown:r=>{if(r.key===RT&&!t.isDisabled()){e.eGridCell===KD(n)&&t.toggle();const o=t.getValue();this.onCheckboxChanged(o),r.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,n=!0;const{value:r,column:o,node:i}=e;if(i.group&&o)if("boolean"==typeof r)t=r;else{const e=o.getColId();e.startsWith(wN)?t=null==r||""===r?void 0:"true"===r:i.aggData&&void 0!==i.aggData[e]||i.sourceRowIndex>=0?t=r??void 0:n=!1}else t=r??void 0;const{eCheckbox:s}=this;if(!n)return void s.setDisplayed(!1);s.setValue(t);const a=e.disabled??!(null==o?void 0:o.isCellEditable(i));s.setDisabled(a);const l=this.getLocaleTextFunc(),c=function(e,t){return void 0===t?e("ariaIndeterminate","indeterminate"):!0===t?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}(l,t),u=a?c:`${l("ariaToggleCellValue","Press SPACE to toggle cell value")} (${c})`;s.setInputAriaLabel(u)}onCheckboxChanged(e){var t,n,r,o;const{params:i}=this,{column:s,node:a,value:l}=i;null==(n=null==(t=this.beans)?void 0:t.editSvc)||n.setEditingCells([{column:s,colId:s.getColId(),rowIndex:a.rowIndex,rowPinned:a.rowPinned,state:"changed",oldValue:l,newValue:l}],{update:!0,forceRefreshOfEditCellsOnly:!0});const c=a.setDataValue(s,e,"renderer");null==(o=this.beans.editSvc)||o.stopEditing({rowNode:a,column:s},{source:(null==(r=this.beans.editSvc)?void 0:r.isBatchEditing())?"ui":"api"}),c||this.updateCheckbox(i)}}}},BB={moduleName:"SkeletonCellRenderer",version:PA,userComponents:{agSkeletonCellRenderer:class extends JN{constructor(){super(IB)}init(e){const t=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",t),this.addDestroyFunc(()=>rM(e.eParentOfValue)),rM(e.eParentOfValue,t),e.deferRender?this.setupLoading(e):e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){const e=this.getLocaleTextFunc();this.getGui().textContent=e("loadingError","ERR");const t=e("ariaSkeletonCellLoadingFailed","Row failed to load");nM(this.getGui(),t)}setupLoading(e){const t=wI({tag:"div",cls:"ag-skeleton-effect"}),n=e.node.rowIndex;if(null!=n){const e=75+25*(n%2==0?Math.sin(n):Math.cos(n));t.style.width=`${e}%`}this.getGui().appendChild(t);const r=this.getLocaleTextFunc(),o=e.deferRender?r("ariaDeferSkeletonCellLoading","Cell is loading"):r("ariaSkeletonCellLoading","Row data is loading");nM(this.getGui(),o)}refresh(e){return!1}}}};function HB(e,t,n){if(!t||!e)return;if(!n)return e[t];const r=t.split(".");let o=e;for(let i=0;i<r.length;i++){if(null==o)return;o=o[r[i]]}return o}var _B=["dateTimeString","dateString","text","number","boolean","date"];function GB(e,t){const n={...e,...t};return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(n.columnTypes=[...PN(e.columnTypes),...PN(t.columnTypes)]),n}function VB(e,t,n){return t?t.baseDataType===e.baseDataType||(TA(46),!1):(TA(45,{parentCellDataType:n}),!1)}function WB(e,t){if(e.valueFormatter)return n=>{var r,o;if(null==(r=n.node)?void 0:r.group){const t=(n.colDef.pivotValueColumn??n.column).getAggFunc();if(t){if("first"===t||"last"===t)return e.valueFormatter(n);if("number"===e.baseDataType&&"count"!==t){if("number"==typeof n.value)return e.valueFormatter(n);if("object"==typeof n.value){if(!n.value)return;if("toNumber"in n.value)return e.valueFormatter({...n,value:n.value.toNumber()});if("value"in n.value)return e.valueFormatter({...n,value:n.value.value})}}return}}else if(t.get("groupHideOpenParents")&&n.column.isRowGroupActive()&&"string"==typeof n.value&&!(null==(o=e.dataTypeMatcher)?void 0:o.call(e,n.value)))return;return e.valueFormatter(n)}}function zB(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([n,r])=>function(e,t,n,r){if(!t[n])return!1;const o=e[n];return null===o?(t[n]=!1,!1):void 0===r?!!o:o===r}(e,t,n,r))}function $B(e,t){const n=function(e){const t=(e,t)=>null!=e?e:null!=t?t:null,n=e.getColDef(),r=t(n.sort,n.initialSort),o=t(n.sortIndex,n.initialSortIndex),i=t(n.hide,n.initialHide),s=t(n.pinned,n.initialPinned),a=t(n.width,n.initialWidth),l=t(n.flex,n.initialFlex);let c=t(n.rowGroupIndex,n.initialRowGroupIndex),u=t(n.rowGroup,n.initialRowGroup);null!=c||u||(c=null,u=null);let d=t(n.pivotIndex,n.initialPivotIndex),h=t(n.pivot,n.initialPivot);null!=d||h||(d=null,h=null);const p=t(n.aggFunc,n.initialAggFunc);return{colId:e.getColId(),sort:r,sortIndex:o,hide:i,pinned:s,width:a,flex:l,rowGroup:u,rowGroupIndex:c,pivot:h,pivotIndex:d,aggFunc:p}}(e);for(const r of t)delete n[r],"rowGroup"===r?delete n.rowGroupIndex:"pivot"===r&&delete n.pivotIndex;return n}var UB={moduleName:"DataType",version:PA,beans:[class extends YM{constructor(){super(...arguments),this.beanName="dataTypeSvc",this.dataTypeDefinitions={},this.isPendingInference=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[],this.columnDefinitionPropsPerDataType={number:()=>({cellEditor:"agNumberCellEditor"}),boolean:()=>({cellEditor:"agCheckboxCellEditor",cellRenderer:"agCheckboxCellRenderer",getFindText:()=>null,suppressKeyboardEvent:e=>!!e.colDef.editable&&e.event.key===RT}),date:({formatValue:e})=>({cellEditor:"agDateCellEditor",keyCreator:e}),dateString:({formatValue:e})=>({cellEditor:"agDateStringCellEditor",keyCreator:e}),dateTime(e){return this.date(e)},dateTimeString(e){return this.dateString(e)},object:({formatValue:e,colModel:t,colId:n})=>({cellEditorParams:{useFormatter:!0},comparator:(r,o)=>{const i=t.getColDefCol(n),s=null==i?void 0:i.getColDef();if(!i||!s)return 0;const a=null==r?"":e({column:i,node:null,value:r}),l=null==o?"":e({column:i,node:null,value:o});return a===l?0:a>l?1:-1},keyCreator:e}),text:()=>({})}}wireBeans(e){this.colModel=e.colModel}postConstruct(){this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.colModel.recreateColumnDefs(e)})}processDataTypeDefinitions(){const e=this.getDefaultDataTypes(),t={},n={},r=e=>t=>{const{column:n,node:r,value:o}=t;let i=n.getColDef().valueFormatter;return i===e.groupSafeValueFormatter&&(i=e.valueFormatter),this.beans.valueSvc.formatValue(n,r,o,i)};for(const u of Object.keys(e)){const o=e[u],i={...o,groupSafeValueFormatter:WB(o,this.gos)};t[u]=i,n[u]=r(i)}const o=this.gos.get("dataTypeDefinitions")??{},i={};for(const u of Object.keys(o)){const s=o[u],a=this.processDataTypeDefinition(s,o,[u],e);a&&(t[u]=a,s.dataTypeMatcher&&(i[u]=s.dataTypeMatcher),n[u]=r(a))}const{valueParser:s,valueFormatter:a}=e.object,{valueParser:l,valueFormatter:c}=t.object;this.hasObjectValueParser=l!==s,this.hasObjectValueFormatter=c!==a,this.formatValueFuncs=n,this.dataTypeDefinitions=t,this.dataTypeMatchers=this.sortKeysInMatchers(i,e)}sortKeysInMatchers(e,t){const n={...e};for(const r of _B)delete n[r],n[r]=e[r]??t[r].dataTypeMatcher;return n}processDataTypeDefinition(e,t,n,r){let o;const i=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let n=r[i];const s=t[i];if(n&&s&&(n=s),!VB(e,n,i))return;o=GB(n,e)}else{if(n.includes(i))return void TA(44);const s=t[i];if(!VB(e,s,i))return;const a=this.processDataTypeDefinition(s,t,[...n,i],r);if(!a)return;o=GB(a,e)}return{...o,groupSafeValueFormatter:WB(o,this.gos)}}updateColDefAndGetColumnType(e,t,n){let{cellDataType:r}=t;const{field:o}=t;if(void 0===r&&(r=e.cellDataType),null!=r&&!0!==r||(r=!!this.canInferCellDataType(e,t)&&this.inferCellDataType(o,n)),!r)return void(e.cellDataType=!1);const i=this.dataTypeDefinitions[r];if(i)return e.cellDataType=r,i.groupSafeValueFormatter&&(e.valueFormatter=i.groupSafeValueFormatter),i.valueParser&&(e.valueParser=i.valueParser),i.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,r,i,n),i.columnTypes;TA(47,{cellDataType:r})}addColumnListeners(e){if(!this.isPendingInference)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const n=e=>{t.add(e.key)};e.__addEventListener("columnStateUpdated",n),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.__removeEventListener("columnStateUpdated",n))}canInferCellDataType(e,t){const{gos:n}=this;if(!HA(n))return!1;const r={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(zB(t,r))return!1;const o=null===t.type?e.type:t.type;if(o){const e=n.get("columnTypes")??{};if(PN(o).some(t=>{const n=e[t.trim()];return n&&zB(n,r)}))return!1}return!zB(e,r)}inferCellDataType(e,t){if(!e)return;let n;const r=this.getInitialData();if(r){const t=e.includes(".")&&!this.gos.get("suppressFieldDotNotation");n=HB(r,e,t)}else this.initWaitForRowData(t);if(null==n)return;return Object.keys(this.dataTypeMatchers).find(e=>this.dataTypeMatchers[e](n))??"object"}getInitialData(){var e;const t=this.gos.get("rowData");if(null==t?void 0:t.length)return t[0];if(this.initialData)return this.initialData;{const t=null==(e=this.beans.rowModel.rootNode)?void 0:e._leafs;if(null==t?void 0:t.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isPendingInference)return;this.isPendingInference=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions,{colAutosize:n,eventSvc:r}=this.beans;t&&n&&(n.shouldQueueResizeOperations=!0);const[o]=this.addManagedEventListeners({rowDataUpdateStarted:e=>{const{firstRowData:i}=e;i&&(null==o||o(),this.isPendingInference=!1,this.processColumnsPendingInference(i,t),this.columnStateUpdatesPendingInference={},t&&(null==n||n.processResizeOperations()),r.dispatchEvent({type:"dataTypesInferred"}))}})}processColumnsPendingInference(e,t){this.initialData=e;const n=[];this.destroyColumnStateUpdateListeners();const r={},o={};for(const i of Object.keys(this.columnStateUpdatesPendingInference)){const e=this.columnStateUpdatesPendingInference[i],s=this.colModel.getCol(i);if(!s)return;const a=s.getColDef();if(!this.resetColDefIntoCol(s,"cellDataTypeInferred"))return;const l=s.getColDef();if(t&&l.type&&l.type!==a.type){const t=$B(s,e);t.rowGroup&&null==t.rowGroupIndex&&(r[i]=t),t.pivot&&null==t.pivotIndex&&(o[i]=t),n.push(t)}}t&&n.push(...this.generateColumnStateForRowGroupAndPivotIndexes(r,o)),n.length&&GN(this.beans,{state:n},"cellDataTypeInferred"),this.initialData=null}generateColumnStateForRowGroupAndPivotIndexes(e,t){const n={},{rowGroupColsSvc:r,pivotColsSvc:o}=this.beans;return null==r||r.restoreColumnOrder(n,e),null==o||o.restoreColumnOrder(n,t),Object.values(n)}resetColDefIntoCol(e,t){const n=e.getUserProvidedColDef();if(!n)return!1;const r=NN(this.beans,n,e.getColId());return e.setColDef(r,n,t),!0}getDateStringTypeDefinition(e){const{dateString:t}=this.dataTypeDefinitions;return e?this.getDataTypeDefinition(e)??t:t}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDateIncludesTimeFlag(e){return"dateTime"===e||"dateTimeString"===e}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){var t;return null==(t=this.getDataTypeDefinition(e))?void 0:t.baseDataType}checkType(e,t){var n;if(null==t)return!0;const r=null==(n=this.getDataTypeDefinition(e))?void 0:n.dataTypeMatcher;return!r||r(t)}validateColDef(e){const t=e=>TA(48,{property:e});if("object"===e.cellDataType){const{object:n}=this.dataTypeDefinitions;e.valueFormatter!==n.groupSafeValueFormatter||this.hasObjectValueFormatter||t("Formatter"),e.editable&&e.valueParser===n.valueParser&&!this.hasObjectValueParser&&t("Parser")}}postProcess(e){var t;const n=e.cellDataType;if(!n||"string"!=typeof n)return;const{dataTypeDefinitions:r,beans:o,formatValueFuncs:i}=this,s=r[n];s&&(null==(t=o.colFilter)||t.setColDefPropsForDataType(e,s,i[n]))}getFormatValue(e){return this.formatValueFuncs[e]}isColPendingInference(e){return this.isPendingInference&&!!this.columnStateUpdatesPendingInference[e]}setColDefPropertiesForBaseDataType(e,t,n,r){const o=this.formatValueFuncs[t],i=this.columnDefinitionPropsPerDataType[n.baseDataType]({colDef:e,cellDataType:t,colModel:this.colModel,dataTypeDefinition:n,colId:r,formatValue:o});Object.assign(e,i)}getDateObjectTypeDef(e){const t=this.getLocaleTextFunc(),n=this.getDateIncludesTimeFlag(e);return{baseDataType:e,valueParser:e=>oF(e.newValue&&String(e.newValue)),valueFormatter:e=>null==e.value?"":e.value instanceof Date&&!isNaN(e.value.getTime())?nF(e.value,n)??"":t("invalidDate","Invalid Date"),dataTypeMatcher:e=>e instanceof Date}}getDateStringTypeDef(e){const t=this.getDateIncludesTimeFlag(e);return{baseDataType:e,dateParser:e=>oF(e)??void 0,dateFormatter:e=>nF(e??null,t)??void 0,valueParser:e=>rF(String(e.newValue))?e.newValue:null,valueFormatter:e=>rF(String(e.value))?String(e.value):"",dataTypeMatcher:e=>"string"==typeof e&&rF(e)}}getDefaultDataTypes(){const e=this.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:e=>{var t,n;return""===(null==(n=null==(t=e.newValue)?void 0:t.trim)?void 0:n.call(t))?null:Number(e.newValue)},valueFormatter:t=>null==t.value?"":"number"!=typeof t.value||isNaN(t.value)?e("invalidNumber","Invalid Number"):String(t.value),dataTypeMatcher:e=>"number"==typeof e},text:{baseDataType:"text",valueParser:e=>""===e.newValue?null:_D(e.newValue),dataTypeMatcher:e=>"string"==typeof e},boolean:{baseDataType:"boolean",valueParser:e=>{var t,n;return null==e.newValue?e.newValue:""===(null==(n=null==(t=e.newValue)?void 0:t.trim)?void 0:n.call(t))?null:"true"===String(e.newValue).toLowerCase()},valueFormatter:e=>null==e.value?"":String(e.value),dataTypeMatcher:e=>"boolean"==typeof e},date:this.getDateObjectTypeDef("date"),dateString:this.getDateStringTypeDef("dateString"),dateTime:this.getDateObjectTypeDef("dateTime"),dateTimeString:{...this.getDateStringTypeDef("dateTimeString"),dataTypeMatcher:e=>"string"==typeof e&&function(e){return rF(e,!0)}(e)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:e=>_D(e.value)??""}}}destroyColumnStateUpdateListeners(){for(const e of this.columnStateUpdateListenerDestroyFuncs)e();this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}}],dependsOn:[LB]},KB={moduleName:"ColumnFlex",version:PA,beans:[class extends YM{constructor(){super(...arguments),this.beanName="colFlex",this.columnsHidden=!1}refreshFlexedColumns(e={}){const t=e.source??"flex";null!=e.viewportWidth&&(this.flexViewportWidth=e.viewportWidth);const n=this.flexViewportWidth,{visibleCols:r,colDelayRenderSvc:o}=this.beans,i=r.centerCols;let s=-1;if(e.resizingCols){const t=new Set(e.resizingCols);for(let e=i.length-1;e>=0;e--)if(t.has(i[e])){s=e;break}}let a=!1;const l=i.map((e,t)=>{const n=e.getFlex(),r=null!=n&&n>0&&t>s;return a||(a=r),{col:e,isFlex:r,flex:Math.max(0,n??0),initialSize:e.getActualWidth(),min:e.getMinWidth(),max:e.getMaxWidth(),targetSize:0}});if(a?(null==o||o.hideColumns("colFlex"),this.columnsHidden=!0):this.columnsHidden&&this.revealColumns(o),!n||!a)return[];let c=l.length,u=l.reduce((e,t)=>e+t.flex,0),d=n;const h=(e,n)=>{e.frozenSize=n,e.col.setActualWidth(n,t),d-=n,u-=e.flex,c-=1},p=e=>null!=e.frozenSize;for(const g of l)g.isFlex||h(g,g.initialSize);for(;c>0;){const e=Math.round(u<1?d*u:d);let t,n=0,r=0;for(const s of l){if(p(s))continue;t=s,r+=e*(s.flex/u);const o=r-n,i=Math.round(o);s.targetSize=i,n+=i}t&&(t.targetSize+=e-n);let o=0;for(const s of l){if(p(s))continue;const e=s.targetSize,t=Math.min(Math.max(e,s.min),s.max);o+=t-e,s.violationType=t===e?void 0:t<e?"max":"min",s.targetSize=t}const i=0===o?"all":o>0?"min":"max";for(const s of l)p(s)||"all"!==i&&s.violationType!==i||h(s,s.targetSize)}e.skipSetLeft||r.setLeftValues(t),e.updateBodyWidths&&r.updateBodyWidths();const f=l.filter(e=>e.isFlex&&!e.violationType).map(e=>e.col);if(e.fireResizedEvent){const e=l.filter(e=>e.initialSize!==e.frozenSize).map(e=>e.col),n=l.filter(e=>e.flex).map(e=>e.col);_N(this.eventSvc,e,!0,t,n)}return this.revealColumns(o),f}revealColumns(e){this.columnsHidden&&(null==e||e.revealColumns("colFlex"),this.columnsHidden=!1)}initCol(e){const{flex:t,initialFlex:n}=e.colDef;void 0!==t?e.flex=t:void 0!==n&&(e.flex=n)}setColFlex(e,t){e.flex=t??null,e.dispatchStateUpdatedEvent("flex")}}]};var qB,XB={moduleName:"CellRendererFunction",version:PA,beans:[class extends YM{constructor(){super(...arguments),this.beanName="agCompUtils"}adaptFunction(e,t){if(!e.cellRenderer)return null;return class{refresh(){return!1}getGui(){return this.eGui}init(e){const n=t(e),r=typeof n;this.eGui="string"!==r&&"number"!==r&&"boolean"!==r?null!=n?n:wI({tag:"span"}):xM("<span>"+n+"</span>")}}}}]},YB={wrapperBorder:!0,rowBorder:!0,headerRowBorder:!0,footerRowBorder:{ref:"rowBorder"},columnBorder:{style:"solid",width:1,color:"transparent"},headerColumnBorder:!1,headerColumnBorderHeight:"100%",pinnedColumnBorder:!0,pinnedRowBorder:!0,sidePanelBorder:!0,sideBarPanelWidth:250,sideBarBackgroundColor:{ref:"chromeBackgroundColor"},sideButtonBarBackgroundColor:{ref:"sideBarBackgroundColor"},sideButtonBarTopPadding:0,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineColor:"transparent",sideButtonSelectedUnderlineTransitionDuration:0,sideButtonBackgroundColor:"transparent",sideButtonTextColor:{ref:"textColor"},sideButtonHoverBackgroundColor:{ref:"sideButtonBackgroundColor"},sideButtonHoverTextColor:{ref:"sideButtonTextColor"},sideButtonSelectedBackgroundColor:AF,sideButtonSelectedTextColor:{ref:"sideButtonTextColor"},sideButtonBorder:"solid 1px transparent",sideButtonSelectedBorder:!0,sideButtonLeftPadding:{ref:"spacing"},sideButtonRightPadding:{ref:"spacing"},sideButtonVerticalPadding:{calc:"spacing * 3"},headerBackgroundColor:{ref:"chromeBackgroundColor"},headerFontFamily:{ref:"fontFamily"},cellFontFamily:{ref:"fontFamily"},headerFontWeight:500,headerFontSize:{ref:"fontSize"},dataFontSize:{ref:"fontSize"},headerTextColor:{ref:"textColor"},headerCellHoverBackgroundColor:"transparent",headerCellMovingBackgroundColor:{ref:"headerCellHoverBackgroundColor"},headerCellBackgroundTransitionDuration:"0.2s",cellTextColor:{ref:"textColor"},rangeSelectionBorderStyle:"solid",rangeSelectionBorderColor:TF,rangeSelectionBackgroundColor:EF(.2),rangeSelectionChartBackgroundColor:"#0058FF1A",rangeSelectionChartCategoryBackgroundColor:"#00FF841A",rangeSelectionHighlightColor:EF(.5),rangeHeaderHighlightColor:(qB=.08,{ref:"foregroundColor",mix:qB,onto:"headerBackgroundColor"}),rowNumbersSelectedColor:EF(.5),rowHoverColor:EF(.08),columnHoverColor:EF(.05),selectedRowBackgroundColor:EF(.12),modalOverlayBackgroundColor:{ref:"backgroundColor",mix:.66},dataBackgroundColor:AF,oddRowBackgroundColor:{ref:"dataBackgroundColor"},wrapperBorderRadius:8,cellHorizontalPadding:{calc:"spacing * 2 * cellHorizontalPaddingScale"},cellWidgetSpacing:{calc:"spacing * 1.5"},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:"cellWidgetSpacing + iconSize"},valueChangeDeltaUpColor:"#43a047",valueChangeDeltaDownColor:"#e53935",valueChangeValueHighlightBackgroundColor:"#16a08580",rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale"},rowVerticalPaddingScale:1,headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale"},headerVerticalPaddingScale:1,paginationPanelHeight:{ref:"rowHeight",calc:"max(rowHeight, 22px)"},dragHandleColor:DF(.7),headerColumnResizeHandleHeight:"30%",headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:"borderColor"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 1.5"},widgetHorizontalSpacing:{calc:"spacing * 1.5"},widgetVerticalSpacing:{ref:"spacing"},iconButtonColor:{ref:"iconColor"},iconButtonBackgroundColor:"transparent",iconButtonBackgroundSpread:4,iconButtonBorderRadius:1,iconButtonHoverColor:{ref:"iconButtonColor"},iconButtonHoverBackgroundColor:DF(.1),iconButtonActiveColor:TF,iconButtonActiveBackgroundColor:EF(.28),iconButtonActiveIndicatorColor:TF,menuBorder:{color:DF(.2)},menuBackgroundColor:MF(.03),menuTextColor:MF(.95),menuShadow:{ref:"popupShadow"},menuSeparatorColor:{ref:"borderColor"},setFilterIndentSize:{ref:"iconSize"},chartMenuPanelWidth:260,chartMenuLabelColor:DF(.8),dialogShadow:{ref:"popupShadow"},cellEditingBorder:{color:TF},cellEditingShadow:{ref:"cardShadow"},fullRowEditInvalidBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.25},dialogBorder:{color:DF(.2)},panelBackgroundColor:AF,panelTitleBarHeight:{ref:"headerHeight"},panelTitleBarBackgroundColor:{ref:"headerBackgroundColor"},panelTitleBarIconColor:{ref:"headerTextColor"},panelTitleBarTextColor:{ref:"headerTextColor"},panelTitleBarFontWeight:{ref:"headerFontWeight"},panelTitleBarBorder:!0,columnSelectIndentSize:{ref:"iconSize"},toolPanelSeparatorBorder:!0,columnDropCellBackgroundColor:DF(.07),columnDropCellTextColor:{ref:"textColor"},columnDropCellDragHandleColor:{ref:"textColor"},columnDropCellBorder:{color:DF(.13)},selectCellBackgroundColor:DF(.07),selectCellBorder:{color:DF(.13)},advancedFilterBuilderButtonBarBorder:!0,advancedFilterBuilderIndentSize:{calc:"spacing * 2 + iconSize"},advancedFilterBuilderJoinPillColor:"#f08e8d",advancedFilterBuilderColumnPillColor:"#a6e194",advancedFilterBuilderOptionPillColor:"#f3c08b",advancedFilterBuilderValuePillColor:"#85c0e4",filterPanelApplyButtonColor:AF,filterPanelApplyButtonBackgroundColor:TF,filterPanelCardSubtleColor:{ref:"textColor",mix:.7},filterPanelCardSubtleHoverColor:{ref:"textColor"},findMatchColor:NF,findMatchBackgroundColor:"#ffff00",findActiveMatchColor:NF,findActiveMatchBackgroundColor:"#ffa500",filterToolPanelGroupIndent:{ref:"spacing"},rowLoadingSkeletonEffectColor:DF(.15),statusBarLabelColor:NF,statusBarLabelFontWeight:500,statusBarValueColor:NF,statusBarValueFontWeight:500,pinnedSourceRowTextColor:{ref:"textColor"},pinnedSourceRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedSourceRowFontWeight:600,pinnedRowFontWeight:600,pinnedRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedRowTextColor:{ref:"textColor"}},ZB={cellBatchEditBackgroundColor:"rgba(220 181 139 / 16%)",cellBatchEditTextColor:"#422f00",rowBatchEditBackgroundColor:{ref:"cellBatchEditBackgroundColor"},rowBatchEditTextColor:{ref:"cellBatchEditTextColor"}},JB={...ZB,cellBatchEditTextColor:"#f3d0b3"},QB=(()=>SF({feature:"batchEditStyle",params:ZB,css:".ag-cell-batch-edit{background-color:var(--ag-cell-batch-edit-background-color);color:var(--ag-cell-batch-edit-text-color);display:inherit}.ag-row-batch-edit{background-color:var(--ag-row-batch-edit-background-color);color:var(--ag-row-batch-edit-text-color)}"}))(),eH={buttonTextColor:"inherit",buttonFontWeight:"normal",buttonBackgroundColor:"transparent",buttonBorder:!1,buttonBorderRadius:{ref:"borderRadius"},buttonHorizontalPadding:{calc:"spacing * 2"},buttonVerticalPadding:{ref:"spacing"},buttonHoverTextColor:{ref:"buttonTextColor"},buttonHoverBackgroundColor:{ref:"buttonBackgroundColor"},buttonHoverBorder:{ref:"buttonBorder"},buttonActiveTextColor:{ref:"buttonHoverTextColor"},buttonActiveBackgroundColor:{ref:"buttonHoverBackgroundColor"},buttonActiveBorder:{ref:"buttonHoverBorder"},buttonDisabledTextColor:{ref:"inputDisabledTextColor"},buttonDisabledBackgroundColor:{ref:"inputDisabledBackgroundColor"},buttonDisabledBorder:{ref:"inputDisabledBorder"}},tH=(()=>SF({feature:"buttonStyle",params:{...eH,buttonBackgroundColor:AF,buttonBorder:!0,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBorder:{color:TF}},css:":where(.ag-button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0;text-indent:inherit;text-shadow:inherit;text-transform:inherit;word-spacing:inherit;&:disabled{cursor:default}&:focus-visible{box-shadow:var(--ag-focus-shadow);outline:none}}.ag-standard-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--ag-button-background-color);border:var(--ag-button-border);border-radius:var(--ag-button-border-radius);color:var(--ag-button-text-color);cursor:pointer;font-weight:var(--ag-button-font-weight);padding:var(--ag-button-vertical-padding) var(--ag-button-horizontal-padding);&:hover{background-color:var(--ag-button-hover-background-color);border:var(--ag-button-hover-border);color:var(--ag-button-hover-text-color)}&:active{background-color:var(--ag-button-active-background-color);border:var(--ag-button-active-border);color:var(--ag-button-active-text-color)}&:disabled{background-color:var(--ag-button-disabled-background-color);border:var(--ag-button-disabled-border);color:var(--ag-button-disabled-text-color)}}"}))(),nH=(()=>SF({feature:"columnDropStyle",css:".ag-column-drop-vertical-empty-message{align-items:center;border:dashed var(--ag-border-width);border-color:var(--ag-border-color);display:flex;inset:0;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);overflow:hidden;padding:calc(var(--ag-spacing)*2);position:absolute}"}))(),rH={warn:(...e)=>{TA(e[0],e[1])},error:(...e)=>{FA(e[0],e[1])},preInitErr:(...e)=>{IA(e[0],e[2],e[1])}},oH=()=>{return(e=rH,new XF(e)).withParams(YB).withPart(tH).withPart(nH).withPart(QB);var e},iH=(()=>SF({feature:"checkboxStyle",params:{checkboxBorderWidth:1,checkboxBorderRadius:{ref:"borderRadius"},checkboxUncheckedBackgroundColor:AF,checkboxUncheckedBorderColor:MF(.3),checkboxCheckedBackgroundColor:TF,checkboxCheckedBorderColor:{ref:"checkboxCheckedBackgroundColor"},checkboxCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>'},checkboxCheckedShapeColor:AF,checkboxIndeterminateBackgroundColor:MF(.3),checkboxIndeterminateBorderColor:{ref:"checkboxIndeterminateBackgroundColor"},checkboxIndeterminateShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>'},checkboxIndeterminateShapeColor:AF,radioCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>'}},css:'.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);:where(input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-icon-size);margin:0;opacity:0;width:var(--ag-icon-size)}&:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}&:where(.ag-checked){background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color);&:after{background-color:var(--ag-checkbox-checked-shape-color)}}&:where(:focus-within,:active){box-shadow:var(--ag-focus-shadow)}&:where(.ag-disabled){filter:grayscale();opacity:.5}}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&:where(.ag-checked):after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&:where(.ag-indeterminate){background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color);&:after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}}.ag-cell-editing-error .ag-checkbox-input-wrapper:focus-within{box-shadow:var(--ag-focus-error-shadow)}.ag-radio-button-input-wrapper{border-radius:100%;&:where(.ag-checked):after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}'}))(),sH=()=>({...FF,...JB,backgroundColor:"hsl(217, 0%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:MF(.05),rowHoverColor:EF(.15),selectedRowBackgroundColor:EF(.2),menuBackgroundColor:MF(.1),browserColorScheme:"dark",popupShadow:"0 0px 20px #000A",cardShadow:"0 1px 4px 1px #000A",advancedFilterBuilderJoinPillColor:"#7a3a37",advancedFilterBuilderColumnPillColor:"#355f2d",advancedFilterBuilderOptionPillColor:"#5a3168",advancedFilterBuilderValuePillColor:"#374c86",filterPanelApplyButtonColor:NF,findMatchColor:AF,findActiveMatchColor:AF,checkboxUncheckedBorderColor:MF(.4),toggleButtonOffBackgroundColor:MF(.4),rowBatchEditBackgroundColor:MF(.1)}),aH=(()=>SF({feature:"colorScheme",params:FF,modeParams:{light:FF,dark:sH(),"dark-blue":{...sH(),backgroundColor:"#1f2836"}}}))(),lH={aggregation:'<path d="M18 7V4H6l6 8-6 8h12v-3"/>',arrows:'<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>',asc:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',cancel:'<path d="m18 6-12 12"/><path d="m6 6 12 12"/>',chart:'<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>',"color-picker":'<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>',columns:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>',contracted:'<path d="m9 18 6-6-6-6"/>',copy:'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>',cross:'<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',csv:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',cut:'<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>',desc:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',down:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',excel:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',expanded:'<path d="m15 18-6-6 6-6"/>',"eye-slash":'<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>',eye:'<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>',filter:'<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>',first:'<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>',group:'<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>',last:'<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>',left:'<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>',linked:'<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>',loading:'<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>',maximize:'<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>',menu:'<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',"menu-alt":'<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>',minimize:'<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>',minus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>',next:'<path d="m9 18 6-6-6-6"/>',none:'<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>',"not-allowed":'<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>',paste:'<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>',pin:'<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>',pivot:'<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>',plus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>',previous:'<path d="m15 18-6-6 6-6"/>',right:'<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',save:'<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>',"small-left":'<path d="m15 18-6-6 6-6"/>',"small-right":'<path d="m9 18 6-6-6-6"/>',tick:'<path d="M20 6 9 17l-5-5"/>',"tree-closed":'<path d="m9 18 6-6-6-6"/>',"tree-indeterminate":'<path d="M5 12h14"/>',"tree-open":'<path d="m6 9 6 6 6-6"/>',unlinked:'<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>',up:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',grip:'<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>',settings:'<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>'},cH={"column-arrow":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 26C0 28.2092 1.79086 30 4 30H14C16.2091 30 18 28.2092 18 26V15H25.8786L24.4394 16.4393C23.8536 17.0251 23.8536 17.9749 24.4394 18.5607C25.0252 19.1464 25.9748 19.1464 26.5606 18.5607L30.5606 14.5607C31.1464 13.9749 31.1464 13.0251 30.5606 12.4393L26.5606 8.43934C25.9748 7.85356 25.0252 7.85356 24.4394 8.43934C23.8536 9.02512 23.8536 9.97488 24.4394 10.5607L25.8786 12H18V6C18 3.79086 16.2091 2 14 2H4C1.79086 2 0 3.79086 0 6V26ZM14 5H10.5V12H15V6C15 5.44772 14.5523 5 14 5ZM4 5H7.5V12H3V6C3 5.44772 3.44772 5 4 5ZM10.5 15H15V26C15 26.5522 14.5523 27 14 27H10.5V15ZM4 27H7.5V15H3V26C3 26.5522 3.44772 27 4 27Z" fill="currentColor"/></svg>',"small-down":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 10.667 16 21.334l8.667-10.667H7.334Z"/></svg>',"small-up":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 21.333 16 10.666l8.667 10.667H7.334Z"/></svg>',"pinned-top":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M12.53 3.72A.75.75 0 0 1 12 5H4a.75.75 0 0 1 0-1.5h8a.75.75 0 0 1 .53.22ZM3.269 10.744a.75.75 0 0 1 .2-.524l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 1 1-1.06 1.06L8.75 8.56V14a.75.75 0 0 1-1.5 0V8.56l-2.72 2.72a.75.75 0 0 1-1.26-.536Z"/></svg>',"pinned-bottom":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M3.47 12.28A.75.75 0 0 1 4 11h8a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.53-.22ZM12.731 5.256a.75.75 0 0 1-.2.524l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06l2.72 2.72V2a.75.75 0 0 1 1.5 0v5.44l2.72-2.72a.75.75 0 0 1 1.26.536Z"/></svg>',"un-pin":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M8 11a.75.75 0 0 0-.75.75v3.333a.75.75 0 1 0 1.5 0V11.75A.75.75 0 0 0 8 11Z"/><path fill="currentColor" d="M13.11 1.436a.75.75 0 0 0-1.22-.872l-10 14a.75.75 0 1 0 1.22.872L5.207 12.5h7.376a.75.75 0 0 0 .75-.75v-1.174a2.08 2.08 0 0 0-1.153-1.863l-1.185-.599-.005-.002a.58.58 0 0 1-.323-.522V5.165a2.083 2.083 0 0 0 1.854-2.904l.589-.825Zm-3.943 5.52v.634a2.08 2.08 0 0 0 1.153 1.863l1.185.6.005.002a.58.58 0 0 1 .323.522V11H6.28l2.887-4.044ZM9.277 1H5.25a2.084 2.084 0 0 0-.083 4.165v1.676l1.5-2.132v-.292a.75.75 0 0 0-.75-.75H5.25a.584.584 0 0 1 0-1.167h2.972L9.277 1Z"/></svg>',"chevron-down":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6L8 10L4 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-up":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 10L8 6L12 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-left":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-right":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"filter-add":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.12126 7.75L10.8517 7.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M6.65934 11.748L9.32778 11.748" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M12.2943 1.04872V6.19184M14.9886 3.74341H9.68478" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M8.25488 3C8.04799 3.18323 7.91706 3.45099 7.91699 3.74902C7.91713 4.04868 8.04988 4.31681 8.25879 4.5H2C1.58579 4.5 1.25 4.16421 1.25 3.75C1.25 3.33579 1.58579 3 2 3H8.25488Z" fill="currentColor"/></svg>',edit:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 10.6262V12.5012H5.375L10.905 6.97122L9.03 5.09622L3.5 10.6262ZM12.355 5.52122C12.4014 5.47497 12.4381 5.42002 12.4632 5.35953C12.4883 5.29905 12.5012 5.23421 12.5012 5.16872C12.5012 5.10324 12.4883 5.0384 12.4632 4.97791C12.4381 4.91742 12.4014 4.86248 12.355 4.81622L11.185 3.64622C11.1387 3.59987 11.0838 3.5631 11.0233 3.53801C10.9628 3.51291 10.898 3.5 10.8325 3.5C10.767 3.5 10.7022 3.51291 10.6417 3.53801C10.5812 3.5631 10.5263 3.59987 10.48 3.64622L9.565 4.56122L11.44 6.43622L12.355 5.52122Z" fill="currentColor"/></svg>'},uH=(e,t=1.5)=>{const n=cH[e];if(n)return n;const r=lH[e];if(!r)throw new Error(`Missing icon data for ${e}`);return`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="${t}" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>`+r+"</svg>"},dH=((e={})=>SF({feature:"iconSet",css:()=>((e={})=>{let t="";for(const n of[...Object.keys(lH),...Object.keys(cH)]){const r=uH(n,e.strokeWidth);t+=`.ag-icon-${n}::before { mask-image: url('data:image/svg+xml,${encodeURIComponent(r)}'); }\n`}return t})(e)}))(),hH={inputBackgroundColor:"transparent",inputBorder:!1,inputBorderRadius:0,inputTextColor:{ref:"textColor"},inputPlaceholderTextColor:{ref:"inputTextColor",mix:.5},inputPaddingStart:0,inputHeight:{calc:"max(iconSize, fontSize) + spacing * 2"},inputFocusBackgroundColor:{ref:"inputBackgroundColor"},inputFocusBorder:{ref:"inputBorder"},inputFocusShadow:"none",inputFocusTextColor:{ref:"inputTextColor"},inputDisabledBackgroundColor:{ref:"inputBackgroundColor"},inputDisabledBorder:{ref:"inputBorder"},inputDisabledTextColor:{ref:"inputTextColor"},inputInvalidBackgroundColor:{ref:"inputBackgroundColor"},inputInvalidBorder:{ref:"inputBorder"},inputInvalidTextColor:{ref:"inputTextColor"},inputIconColor:{ref:"inputTextColor"},pickerButtonBorder:!1,pickerButtonFocusBorder:{ref:"inputFocusBorder"},pickerButtonBackgroundColor:{ref:"backgroundColor"},pickerButtonFocusBackgroundColor:{ref:"backgroundColor"},pickerListBorder:!1,pickerListBackgroundColor:{ref:"backgroundColor"},colorPickerThumbSize:18,colorPickerTrackSize:12,colorPickerThumbBorderWidth:3,colorPickerTrackBorderRadius:12,colorPickerColorBorderRadius:4},pH=(()=>SF({feature:"inputStyle",params:{...hH,inputBackgroundColor:AF,inputBorder:!0,inputBorderRadius:{ref:"borderRadius"},inputPaddingStart:{ref:"spacing"},inputFocusBorder:{color:TF},inputFocusShadow:{ref:"focusShadow"},inputDisabledBackgroundColor:MF(.06),inputDisabledTextColor:{ref:"textColor",mix:.5},inputInvalidBorder:{color:{ref:"invalidColor"}},pickerButtonBorder:!0,pickerListBorder:!0},css:()=>':where(.ag-input-field-input[type=number]:not(.ag-number-field-input-stepper)){-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}}.ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color);outline:none}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&::-moz-placeholder{color:var(--ag-input-placeholder-text-color)}&::placeholder{color:var(--ag-input-placeholder-text-color)}}:where(.ag-ltr) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-left:var(--ag-input-padding-start)}:where(.ag-rtl) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-right:var(--ag-input-padding-start)}:where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{background-color:currentcolor;color:var(--ag-input-icon-color);content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:.5;position:absolute;width:12px}}:where(.ag-ltr) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{margin-left:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}:where(.ag-rtl) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{margin-right:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}.ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){&:focus{box-shadow:var(--ag-focus-shadow);&:where(.invalid),&:where(:invalid){box-shadow:var(--ag-focus-error-shadow)}}}'}))(),fH={tabBarBackgroundColor:"transparent",tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:"transparent",tabTextColor:{ref:"textColor"},tabHorizontalPadding:{ref:"spacing"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:"0",tabHoverBackgroundColor:{ref:"tabBackgroundColor"},tabHoverTextColor:{ref:"tabTextColor"},tabSelectedBackgroundColor:{ref:"tabBackgroundColor"},tabSelectedTextColor:{ref:"tabTextColor"},tabSelectedBorderWidth:{ref:"borderWidth"},tabSelectedBorderColor:"transparent",tabSelectedUnderlineColor:"transparent",tabSelectedUnderlineWidth:0,tabSelectedUnderlineTransitionDuration:0,tabBarBorder:!1},gH=(()=>SF({feature:"tabStyle",params:{...fH,tabBarBorder:!0,tabBarBackgroundColor:DF(.05),tabTextColor:{ref:"textColor",mix:.7},tabSelectedTextColor:{ref:"textColor"},tabHoverTextColor:{ref:"textColor"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:AF},css:'.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;flex:1;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex}.ag-tabs-close-button-wrapper{align-items:center;border:0;display:flex;padding:var(--ag-spacing)}:where(.ag-ltr) .ag-tabs-close-button-wrapper{border-right:solid var(--ag-border-width) var(--ag-border-color)}:where(.ag-rtl) .ag-tabs-close-button-wrapper{border-left:solid var(--ag-border-width) var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative;&:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}&.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}&:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}&.ag-tab-selected:after{opacity:1}}:where(.ag-ltr) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-left-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-right-color:var(--ag-tab-selected-border-color)}}}:where(.ag-rtl) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-right-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-left-color:var(--ag-tab-selected-border-color)}}}'}))(),mH=(()=>oH().withPart(iH).withPart(aH).withPart(dH).withPart(gH).withPart(pH).withPart(nH).withParams({fontFamily:[{googleFont:"IBM Plex Sans"},"-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu"]}))(),vH={cssName:"--ag-cell-horizontal-padding",changeKey:"cellHorizontalPaddingChanged",defaultValue:16},yH={cssName:"--ag-indentation-level",changeKey:"indentationLevelChanged",defaultValue:0,noWarn:!0,cacheDefault:!0},bH={cssName:"--ag-row-group-indent-size",changeKey:"rowGroupIndentSizeChanged",defaultValue:0},wH={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},CH={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},xH={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},SH={cssName:"--ag-row-border",changeKey:"rowBorderWidthChanged",defaultValue:1,border:!0},kH={cssName:"--ag-pinned-row-border",changeKey:"pinnedRowBorderWidthChanged",defaultValue:1,border:!0};var PH=15538;function jH(e,t,n){const r=e.visibleCols.headerGroupRowCount;if(n>=r)return{column:t,headerRowIndex:n};let o=t.getParent();for(;o&&o.getProvidedColumnGroup().getLevel()>n;)o=o.getParent();const i=t.isSpanHeaderHeight();return!o||i&&o.isPadding()?{column:t,headerRowIndex:r}:{column:o,headerRowIndex:o.getProvidedColumnGroup().getLevel()}}var OH=new Set(["gridPreDestroyed","fillStart","pasteStart"]),RH=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","pinnedRowsChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterUiChanged","filterOpened","floatingFilterUiChanged","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel","findChanged","rowResizeStarted","rowResizeEnded","columnsReset","bulkEditingStarted","bulkEditingStopped","batchEditingStarted","batchEditingStopped"].reduce((e,t)=>{var n;return e[t]=!(n=t)||n.length<2?n:"on"+n[0].toUpperCase()+n.substring(1),e},{}),EH=(e,t)=>({tag:"span",ref:`eSort${e}`,cls:`ag-sort-indicator-icon ag-sort-${t} ag-hidden`,attrs:{"aria-hidden":"true"}}),DH={tag:"span",cls:"ag-sort-indicator-container",children:[EH("Order","order"),EH("Asc","ascending-icon"),EH("Desc","descending-icon"),EH("Mixed","mixed-icon"),EH("None","none-icon")]},MH=class extends JN{constructor(e){super(),this.eSortOrder=qN,this.eSortAsc=qN,this.eSortDesc=qN,this.eSortMixed=qN,this.eSortNone=qN,e||this.setTemplate(DH)}attachCustomElements(e,t,n,r,o){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=n,this.eSortMixed=r,this.eSortNone=o}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!e.isSortable()&&!e.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);const n=this.updateIcons.bind(this),r=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",n),this.addManagedEventListeners({newColumnsLoaded:n,sortChanged:r,columnRowGroupChanged:r}),this.onSortChanged()}addInIcon(e,t,n){if(null==t)return;const r=GL(e,this.beans,n);r&&t.appendChild(r)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const{eSortAsc:e,eSortDesc:t,eSortNone:n,column:r,gos:o,beans:i}=this,s=i.sortSvc.getDisplaySortForColumn(r);if(e){uM(e,"asc"===s,{skipAriaHidden:!0})}if(t){uM(t,"desc"===s,{skipAriaHidden:!0})}if(n){uM(n,!(!r.getColDef().unSortIcon&&!o.get("unSortIcon"))&&null==s,{skipAriaHidden:!0})}}setupMultiSortIndicator(){const{eSortMixed:e,column:t,gos:n}=this;this.addInIcon("sortUnSort",e,t);const r=t.getColDef().showRowGroup;ZA(n)&&r&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){const{eSortMixed:e,beans:t,column:n}=this;if(e){uM(e,"mixed"===t.sortSvc.getDisplaySortForColumn(n),{skipAriaHidden:!0})}}updateSortOrder(){const{eSortOrder:e,column:t,beans:{sortSvc:n}}=this;if(!e)return;const r=n.getColumnsWithSortingOrdered(),o=n.getDisplaySortIndexForColumn(t)??-1,i=r.some(e=>n.getDisplaySortIndexForColumn(e)??!1);uM(e,o>=0&&i,{skipAriaHidden:!0}),o>=0?e.textContent=(o+1).toString():yM(e)}},AH={selector:"AG-SORT-INDICATOR",component:MH},NH=["asc","desc",null],TH={agSetColumnFilter:"SetFilter",agSetColumnFloatingFilter:"SetFilter",agMultiColumnFilter:"MultiFilter",agMultiColumnFloatingFilter:"MultiFilter",agGroupColumnFilter:"GroupFilter",agGroupColumnFloatingFilter:"GroupFilter",agGroupCellRenderer:"GroupCellRenderer",agGroupRowRenderer:"GroupCellRenderer",agRichSelect:"RichSelect",agRichSelectCellEditor:"RichSelect",agDetailCellRenderer:"SharedMasterDetail",agSparklineCellRenderer:"Sparklines",agDragAndDropImage:"SharedDragAndDrop",agColumnHeader:"ColumnHeaderComp",agColumnGroupHeader:"ColumnGroupHeaderComp",agSortIndicator:"Sort",agAnimateShowChangeCellRenderer:"HighlightChanges",agAnimateSlideCellRenderer:"HighlightChanges",agLoadingCellRenderer:"LoadingCellRenderer",agSkeletonCellRenderer:"SkeletonCellRenderer",agCheckboxCellRenderer:"CheckboxCellRenderer",agLoadingOverlay:"Overlay",agNoRowsOverlay:"Overlay",agTooltipComponent:"Tooltip",agReadOnlyFloatingFilter:"CustomFilter",agTextColumnFilter:"TextFilter",agNumberColumnFilter:"NumberFilter",agDateColumnFilter:"DateFilter",agDateInput:"DateFilter",agTextColumnFloatingFilter:"TextFilter",agNumberColumnFloatingFilter:"NumberFilter",agDateColumnFloatingFilter:"DateFilter",agCellEditor:"TextEditor",agSelectCellEditor:"SelectEditor",agTextCellEditor:"TextEditor",agNumberCellEditor:"NumberEditor",agDateCellEditor:"DateEditor",agDateStringCellEditor:"DateEditor",agCheckboxCellEditor:"CheckboxEditor",agLargeTextCellEditor:"LargeTextEditor",agMenuItem:"MenuItem",agColumnsToolPanel:"ColumnsToolPanel",agFiltersToolPanel:"FiltersToolPanel",agNewFiltersToolPanel:"NewFiltersToolPanel",agAggregationComponent:"StatusBar",agSelectedRowCountComponent:"StatusBar",agTotalRowCountComponent:"StatusBar",agFilteredRowCountComponent:"StatusBar",agTotalAndFilteredRowCountComponent:"StatusBar",agFindCellRenderer:"Find"},FH={aggFunc:"SharedAggregation",autoHeight:"RowAutoHeight",cellClass:"CellStyle",cellClassRules:"CellStyle",cellEditor:({cellEditor:e,editable:t})=>t?"string"==typeof e?TH[e]??"CustomEditor":"CustomEditor":null,cellRenderer:({cellRenderer:e})=>"string"!=typeof e?null:TH[e],cellStyle:"CellStyle",columnChooserParams:"ColumnMenu",contextMenuItems:"ContextMenu",dndSource:"DragAndDrop",dndSourceOnRowDrag:"DragAndDrop",editable:({editable:e,cellEditor:t})=>e&&!t?"TextEditor":null,enableCellChangeFlash:"HighlightChanges",enablePivot:"SharedPivot",enableRowGroup:"SharedRowGrouping",enableValue:"SharedAggregation",filter:({filter:e})=>e&&"string"!=typeof e&&"boolean"!=typeof e?"CustomFilter":"string"==typeof e?TH[e]??"ColumnFilter":"ColumnFilter",floatingFilter:"ColumnFilter",getQuickFilterText:"QuickFilter",headerTooltip:"Tooltip",headerTooltipValueGetter:"Tooltip",mainMenuItems:"ColumnMenu",menuTabs:e=>{var t;const n=["columnsMenuTab","generalMenuTab"];return(null==(t=e.menuTabs)?void 0:t.some(e=>n.includes(e)))?"ColumnMenu":null},pivot:"SharedPivot",pivotIndex:"SharedPivot",rowDrag:"RowDrag",rowGroup:"SharedRowGrouping",rowGroupIndex:"SharedRowGrouping",tooltipField:"Tooltip",tooltipValueGetter:"Tooltip",tooltipComponentSelector:"Tooltip",spanRows:"CellSpan",groupHierarchy:"SharedRowGrouping"},IH={alignedGrids:"AlignedGrids",allowContextMenuWithControlKey:"ContextMenu",autoSizeStrategy:"ColumnAutoSize",cellSelection:"CellSelection",columnHoverHighlight:"ColumnHover",datasource:"InfiniteRowModel",doesExternalFilterPass:"ExternalFilter",editType:"EditCore",invalidEditValueMode:"EditCore",enableAdvancedFilter:"AdvancedFilter",enableCellSpan:"CellSpan",enableCharts:"IntegratedCharts",enableRangeSelection:"CellSelection",enableRowPinning:"PinnedRow",findSearchValue:"Find",getFullRowEditValidationErrors:"EditCore",getContextMenuItems:"ContextMenu",getLocaleText:"Locale",getMainMenuItems:"ColumnMenu",getRowClass:"RowStyle",getRowStyle:"RowStyle",groupTotalRow:"SharedRowGrouping",grandTotalRow:"ClientSideRowModelHierarchy",initialState:"GridState",isExternalFilterPresent:"ExternalFilter",isRowPinnable:"PinnedRow",isRowPinned:"PinnedRow",localeText:"Locale",masterDetail:"SharedMasterDetail",pagination:"Pagination",pinnedBottomRowData:"PinnedRow",pinnedTopRowData:"PinnedRow",pivotMode:"SharedPivot",pivotPanelShow:"RowGroupingPanel",quickFilterText:"QuickFilter",rowClass:"RowStyle",rowClassRules:"RowStyle",rowData:"ClientSideRowModel",rowDragManaged:"RowDrag",rowGroupPanelShow:"RowGroupingPanel",rowNumbers:"RowNumbers",rowSelection:"SharedRowSelection",rowStyle:"RowStyle",serverSideDatasource:"ServerSideRowModel",sideBar:"SideBar",statusBar:"StatusBar",treeData:"SharedTreeData",undoRedoCellEditing:"UndoRedoEdit",valueCache:"ValueCache",viewportDatasource:"ViewportRowModel"},LH=0,BH=0,HH="__ag_grid_instance";function _H(e){const t={"aria-hidden":"true"};return{tag:"div",cls:"ag-cell-label-container",role:"presentation",children:[{tag:"span",ref:"eMenu",cls:"ag-header-icon ag-header-cell-menu-button",attrs:t},{tag:"span",ref:"eFilterButton",cls:"ag-header-icon ag-header-cell-filter-button",attrs:t},{tag:"div",ref:"eLabel",cls:"ag-header-cell-label",role:"presentation",children:[{tag:"span",ref:"eText",cls:"ag-header-cell-text"},{tag:"span",ref:"eFilter",cls:"ag-header-icon ag-header-label-icon ag-filter-icon",attrs:t},e?{tag:"ag-sort-indicator",ref:"eSortIndicator"}:null]}]}}var GH=_H(!0),VH=_H(!1),WH={tag:"div",cls:"ag-header-group-cell-label",role:"presentation",children:[{tag:"span",ref:"agLabel",cls:"ag-header-group-text",role:"presentation"},{tag:"span",ref:"agOpened",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"},{tag:"span",ref:"agClosed",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"}]},zH={moduleName:"ColumnHeaderComp",version:PA,userComponents:{agColumnHeader:class extends JN{constructor(){super(...arguments),this.eFilter=qN,this.eFilterButton=qN,this.eSortIndicator=qN,this.eMenu=qN,this.eLabel=qN,this.eText=qN,this.eSortOrder=qN,this.eSortAsc=qN,this.eSortDesc=qN,this.eSortMixed=qN,this.eSortNone=qN,this.isLoadingInnerComponent=!1}refresh(e){var t,n,r;const o=this.params;if(this.params=e,this.workOutTemplate(e,!!(null==(t=this.beans)?void 0:t.sortSvc))!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||e.enableSorting!=this.currentSort||null!=this.currentSuppressMenuHide&&this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||o.enableFilterButton!=e.enableFilterButton||o.enableFilterIcon!=e.enableFilterIcon)return!1;if(this.innerHeaderComponent){const t={...e};iA(t,e.innerHeaderComponentParams),null==(r=(n=this.innerHeaderComponent).refresh)||r.call(n,t)}else this.setDisplayName(e);return!0}workOutTemplate(e,t){const n=e.template;return n?(null==n?void 0:n.trim)?n.trim():n:t?GH:VH}init(e){this.params=e;const{sortSvc:t,touchSvc:n,rowNumbersSvc:r,userCompFactory:o}=this.beans,i=null==t?void 0:t.getSortIndicatorSelector();this.currentTemplate=this.workOutTemplate(e,!!i),this.setTemplate(this.currentTemplate,i?[i]:void 0),null==n||n.setupForHeader(this),this.setMenu(),this.setupSort(),null==r||r.setupForHeader(this),this.setupFilterIcon(),this.setupFilterButton(),this.workOutInnerHeaderComponent(o,e),this.setDisplayName(e)}workOutInnerHeaderComponent(e,t){const n=function(e,t,n){return e.getCompDetails(t,nT,void 0,n)}(e,t,t);n&&(this.isLoadingInnerComponent=!0,n.newAgStackInstance().then(e=>{this.isLoadingInnerComponent=!1,e&&(this.isAlive()?(this.innerHeaderComponent=e,this.eText&&this.eText.appendChild(e.getGui())):this.destroyBean(e))}))}setDisplayName(e){const{displayName:t}=e,n=this.currentDisplayName;this.currentDisplayName=t,!this.eText||n===t||this.innerHeaderComponent||this.isLoadingInnerComponent||(this.eText.textContent=zD(t))}addInIcon(e,t,n){const r=GL(e,this.beans,n);r&&t.appendChild(r)}workOutShowMenu(){var e;return this.params.enableMenu&&!!(null==(e=this.beans.menuSvc)?void 0:e.isHeaderMenuButtonEnabled())}shouldSuppressMenuHide(){var e;return!!(null==(e=this.beans.menuSvc)?void 0:e.isHeaderMenuButtonAlwaysShowEnabled())}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu)return bM(this.eMenu),void(this.eMenu=void 0);const{gos:e,eMenu:t,params:n}=this,r=tN(e);this.addInIcon(r?"menu":"menuAlt",t,n.column),t.classList.toggle("ag-header-menu-icon",!r);const o=this.shouldSuppressMenuHide();this.currentSuppressMenuHide=o,this.addManagedElementListeners(t,{click:()=>this.showColumnMenu(this.eMenu)}),this.toggleMenuAlwaysShow(o)}toggleMenuAlwaysShow(e){var t;null==(t=this.eMenu)||t.classList.toggle("ag-header-menu-always-show",e)}showColumnMenu(e){const{currentSuppressMenuHide:t,params:n}=this;t||this.toggleMenuAlwaysShow(!0),n.showColumnMenu(e,()=>{t||this.toggleMenuAlwaysShow(!1)})}onMenuKeyboardShortcut(e){var t;const{params:n,gos:r,beans:o,eMenu:i,eFilterButton:s}=this,a=n.column,l=tN(r);if(e&&!l){if(null==(t=o.menuSvc)?void 0:t.isFilterMenuInHeaderEnabled(a))return n.showFilter(s??i??this.getGui()),!0}else if(n.enableMenu)return this.showColumnMenu(i??s??this.getGui()),!0;return!1}setupSort(){const{sortSvc:e}=this.beans;if(!e)return;const{enableSorting:t,column:n}=this.params;if(this.currentSort=t,!this.eSortIndicator){this.eSortIndicator=this.createBean(e.createSortIndicator(!0));const{eSortIndicator:t,eSortOrder:n,eSortAsc:r,eSortDesc:o,eSortMixed:i,eSortNone:s}=this;t.attachCustomElements(n,r,o,i,s)}this.eSortIndicator.setupSort(n),this.currentSort&&e.setupHeader(this,n,this.eLabel)}setupFilterIcon(){const{eFilter:e,params:t}=this;if(!e)return;this.configureFilter(t.enableFilterIcon,e,()=>{const n=t.column.isFilterActive();uM(e,n,{skipAriaHidden:!0})},"filterActive")}setupFilterButton(){const{eFilterButton:e,params:t}=this;if(!e)return;this.configureFilter(t.enableFilterButton,e,this.onFilterChangedButton.bind(this),"filter")?this.addManagedElementListeners(e,{click:()=>t.showFilter(e)}):this.eFilterButton=void 0}configureFilter(e,t,n,r){if(!e)return bM(t),!1;const o=this.params.column;return this.addInIcon(r,t,o),this.addManagedListeners(o,{filterChanged:n}),n(),!0}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){const{eFilterButton:t,eMenu:n}=this;return e?t??n??this.getGui():n??t??this.getGui()}destroy(){super.destroy(),this.innerHeaderComponent&&(this.destroyBean(this.innerHeaderComponent),this.innerHeaderComponent=void 0)}}},icons:{menu:"menu",menuAlt:"menu-alt"}},$H={moduleName:"ColumnGroupHeaderComp",version:PA,userComponents:{agColumnGroupHeader:class extends JN{constructor(){super(WH),this.agOpened=qN,this.agClosed=qN,this.agLabel=qN,this.isLoadingInnerComponent=!1}init(e){const{userCompFactory:t,touchSvc:n}=this.beans;this.params=e,this.checkWarnings(),this.workOutInnerHeaderGroupComponent(t,e),this.setupLabel(e),this.addGroupExpandIcon(e),this.setupExpandIcons(),null==n||n.setupForHeaderGroup(this)}checkWarnings(){this.params.template&&TA(89)}workOutInnerHeaderGroupComponent(e,t){const n=function(e,t,n){return e.getCompDetails(t,rT,void 0,n)}(e,t,t);n&&(this.isLoadingInnerComponent=!0,n.newAgStackInstance().then(e=>{this.isLoadingInnerComponent=!1,e&&(this.isAlive()?(this.innerHeaderGroupComponent=e,this.agLabel.appendChild(e.getGui())):this.destroyBean(e))}))}setupExpandIcons(){const{agOpened:e,agClosed:t,params:{columnGroup:n},beans:r}=this;this.addInIcon("columnGroupOpened",e),this.addInIcon("columnGroupClosed",t);const o=e=>{if(SI(e))return;const t=!n.isExpanded();r.colGroupSvc.setColumnGroupOpened(n.getProvidedColumnGroup(),t,"uiColumnExpanded")};this.addTouchAndClickListeners(r,t,o),this.addTouchAndClickListeners(r,e,o);const i=e=>{xI(e)};this.addManagedElementListeners(t,{dblclick:i}),this.addManagedElementListeners(e,{dblclick:i}),this.addManagedElementListeners(this.getGui(),{dblclick:o}),this.updateIconVisibility();const s=n.getProvidedColumnGroup(),a=this.updateIconVisibility.bind(this);this.addManagedListeners(s,{expandedChanged:a,expandableChanged:a})}addTouchAndClickListeners(e,t,n){var r;null==(r=e.touchSvc)||r.setupForHeaderGroupElement(this,t,n),this.addManagedElementListeners(t,{click:n})}updateIconVisibility(){const{agOpened:e,agClosed:t,params:{columnGroup:n}}=this;if(n.isExpandable()){const r=n.isExpanded();uM(e,r),uM(t,!r)}else uM(e,!1),uM(t,!1)}addInIcon(e,t){const n=GL(e,this.beans,null);n&&t.appendChild(n)}addGroupExpandIcon(e){if(!e.columnGroup.isExpandable()){const{agOpened:e,agClosed:t}=this;uM(e,!1),uM(t,!1)}}setupLabel(e){var t;const{displayName:n,columnGroup:r}=e,o=this.innerHeaderGroupComponent||this.isLoadingInnerComponent;BD(n)&&!o&&(this.agLabel.textContent=zD(n)),this.toggleCss("ag-sticky-label",!(null==(t=r.getColGroupDef())?void 0:t.suppressStickyLabel))}destroy(){super.destroy(),this.innerHeaderGroupComponent&&(this.destroyBean(this.innerHeaderGroupComponent),this.innerHeaderGroupComponent=void 0)}}},icons:{columnGroupOpened:"expanded",columnGroupClosed:"contracted"}},UH={moduleName:"AnimationFrame",version:PA,beans:[class extends YM{constructor(){super(...arguments),this.beanName="animationFrameSvc",this.p1={list:[],sorted:!1},this.p2={list:[],sorted:!1},this.f1={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastScrollTop=0,this.taskCount=0}setScrollTop(e){this.scrollGoingDown=e>=this.lastScrollTop,0===e&&(this.scrollGoingDown=!0),this.lastScrollTop=e}postConstruct(){this.active=!this.gos.get("suppressAnimationFrame"),this.batchFrameworkComps=this.beans.frameworkOverrides.batchFrameworkComps}verify(){!1===this.active&&TA(92)}createTask(e,t,n,r,o=!1){this.verify();let i=n;r&&this.batchFrameworkComps&&(i="f1");const s={task:e,index:t,createOrder:++this.taskCount,deferred:o};this.addTaskToList(this[i],s),this.schedule()}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort((e,n)=>e.deferred!==n.deferred?e.deferred?-1:1:e.index!==n.index?t*(n.index-e.index):n.createOrder-e.createOrder),e.sorted=!0}addDestroyTask(e){this.verify(),this.destroyTasks.push(e),this.schedule()}executeFrame(e){const{p1:t,p2:n,f1:r,destroyTasks:o,beans:i}=this,{ctrlsSvc:s,frameworkOverrides:a}=i,l=t.list,c=n.list,u=r.list,d=Date.now();let h=0;const p=e<=0,f=s.getScrollFeature();for(;p||h<e;){if(!f.scrollGridIfNeeded()){let i;if(l.length)this.sortTaskList(t),i=l.pop().task;else if(c.length)this.sortTaskList(n),i=c.pop().task;else if(u.length)a.wrapOutgoing(()=>{for(;p||h<e;){if(f.scrollGridIfNeeded())break;if(!u.length)break;this.sortTaskList(r),i=u.pop().task,i(),h=Date.now()-d}}),i=()=>{};else{if(!o.length)break;i=o.pop()}i()}h=Date.now()-d}l.length||c.length||u.length||o.length?this.requestFrame():this.ticking=!1}flushAllFrames(){this.active&&this.executeFrame(-1)}schedule(){this.active&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);DM(this.beans,e)}isQueueEmpty(){return!this.ticking}}]},KH={moduleName:"Touch",version:PA,beans:[class extends YM{constructor(){super(...arguments),this.beanName="touchSvc"}mockBodyContextMenu(e,t){this.mockContextMenu(e,e.eBodyViewport,t)}mockHeaderContextMenu(e,t){this.mockContextMenu(e,e.eGui,t)}mockRowContextMenu(e){if(!XT())return;this.mockContextMenu(e,e.element,(t,n,r)=>{var o;const{rowCtrl:i,cellCtrl:s}=e.getControlsForEventTarget((null==r?void 0:r.target)??null);(null==s?void 0:s.column)&&s.dispatchCellContextMenuEvent(r??null),null==(o=this.beans.contextMenuSvc)||o.handleContextMenuMouseEvent(void 0,r,i,s)})}handleCellDoubleClick(e,t){return!!(()=>{if(!XT()||BM("dblclick"))return!1;const t=Date.now(),n=t-e.lastIPadMouseClickEvent<200;return e.lastIPadMouseClickEvent=t,n})()&&(e.onCellDoubleClicked(t),t.preventDefault(),!0)}setupForHeader(e){const{gos:t,sortSvc:n,menuSvc:r}=this.beans;if(t.get("suppressTouch"))return;const{params:o,eMenu:i,eFilterButton:s}=e,a=new XL(e.getGui(),!0);e.addDestroyFunc(()=>a.destroy());const l=e.shouldSuppressMenuHide(),c=l&&BD(i)&&o.enableMenu;let u=a;if(c&&(u=new XL(i,!0),e.addDestroyFunc(()=>u.destroy())),o.enableMenu||(null==r?void 0:r.isHeaderContextMenuEnabled(o.column))){const t=c?"tap":"longTap",n=e=>o.showColumnMenuAfterMouseClick(e.touchStart);e.addManagedListeners(u,{[t]:n}),e.addManagedListeners(a,{longTap:n})}if(o.enableSorting){const t=e=>{const t=e.touchStart.target;l&&((null==i?void 0:i.contains(t))||(null==s?void 0:s.contains(t)))||null==n||n.progressSort(o.column,!1,"uiColumnSorted")};e.addManagedListeners(a,{tap:t})}if(o.enableFilterButton&&s){const t=new XL(s,!0);e.addManagedListeners(t,{tap:()=>o.showFilter(s)}),e.addDestroyFunc(()=>t.destroy())}}setupForHeaderGroup(e){var t;const n=e.params;if(null==(t=this.beans.menuSvc)?void 0:t.isHeaderContextMenuEnabled(n.columnGroup.getProvidedColumnGroup())){const t=new XL(n.eGridHeader,!0),r=e=>n.showColumnMenuAfterMouseClick(e.touchStart);e.addManagedListeners(t,{longTap:r}),e.addDestroyFunc(()=>t.destroy())}}setupForHeaderGroupElement(e,t,n){const r=new XL(t,!0);e.addManagedListeners(r,{tap:n}),e.addDestroyFunc(()=>r.destroy())}mockContextMenu(e,t,n){if(!XT())return;const r=new XL(t);e.addManagedListeners(r,{longTap:e=>{VM(this.beans,e.touchEvent)&&n(void 0,e.touchStart,e.touchEvent)}}),e.addDestroyFunc(()=>r.destroy())}}]};var qH=class{constructor(){this.cellValidations=new Map}getCellValidation(e){var t,n;const{rowNode:r,column:o}=e||{};return null==(n=null==(t=this.cellValidations)?void 0:t.get(r))?void 0:n.get(o)}hasCellValidation(e){return(null==e?void 0:e.rowNode)&&e.column?!!this.getCellValidation(e):this.cellValidations.size>0}setCellValidation(e,t){const{rowNode:n,column:r}=e;this.cellValidations.has(n)||this.cellValidations.set(n,new Map),this.cellValidations.get(n).set(r,t)}clearCellValidation(e){var t;const{rowNode:n,column:r}=e;null==(t=this.cellValidations.get(n))||t.delete(r)}setCellValidationMap(e){this.cellValidations=e}getCellValidationMap(){return this.cellValidations}clearCellValidationMap(){this.cellValidations.clear()}},XH=class{constructor(){this.rowValidations=new Map}getRowValidation(e){const{rowNode:t}=e||{};return this.rowValidations.get(t)}hasRowValidation(e){return(null==e?void 0:e.rowNode)?!!this.getRowValidation(e):this.rowValidations.size>0}setRowValidation({rowNode:e},t){this.rowValidations.set(e,t)}clearRowValidation({rowNode:e}){this.rowValidations.delete(e)}setRowValidationMap(e){this.rowValidations=e}getRowValidationMap(){return this.rowValidations}clearRowValidationMap(){this.rowValidations.clear()}};function YH(e,t={}){var n;const{cellCtrl:r,colId:o,columnId:i,column:s}=t;if(r)return r;const a=e.colModel.getCol(o??i??function(e){if(!e)return;if("string"==typeof e)return e;return e.getColId()}(s)),l=t.rowCtrl??function(e,t={}){var n;const{rowIndex:r,rowId:o,rowCtrl:i,rowPinned:s}=t;if(i)return i;const{rowModel:a,rowRenderer:l}=e;let{rowNode:c}=t;return c||(o?c=function(e,t,n){const{rowModel:r,pinnedRowModel:o}=e;let i;return i??(i=null==r?void 0:r.getRowNode(t)),n?i??(i=null==o?void 0:o.getPinnedRowById(t,n)):(i??(i=null==o?void 0:o.getPinnedRowById(t,"top")),i??(i=null==o?void 0:o.getPinnedRowById(t,"bottom"))),i}(e,o,s):null!=r&&(c=a.getRow(r))),null==(n=l.getRowCtrls(c?[c]:[]))?void 0:n[0]}(e,t),c=(null==l?void 0:l.getCellCtrl(a))??void 0;if(c)return c;const u=t.rowNode??(null==l?void 0:l.rowNode);return u?null==(n=e.rowRenderer.getCellCtrls([u],[a]))?void 0:n[0]:void 0}var ZH=Symbol("unedited");function JH(e,t,n){var r,o;const i={editorValueExists:!1};if(e_(e)){const e=null==(r=t.getValidationErrors)?void 0:r.call(t);if(((null==e?void 0:e.length)??0)>0)return i}if(null==n?void 0:n.isCancelling)return i;if(null==n?void 0:n.isStopping){const e=null==(o=null==t?void 0:t.isCancelAfterEnd)?void 0:o.call(t);if(e)return{...i,isCancelAfterEnd:e}}return{editorValue:t.getValue(),editorValueExists:!0}}function QH(e,t,n,r,o,i){const{editModelSvc:s,valueSvc:a}=e;if(!s)return;const{rowNode:l,column:c}=t;if(!l||!c)return;let u=s.getEdit(t,!0);(null==u?void 0:u.sourceValue)||(u=s.setEdit(t,{sourceValue:a.getValue(c,l,void 0,"api"),pendingValue:u?u.editorValue:ZH})),s.setEdit(t,{editorValue:o?u.sourceValue:n})}function e_(e){var t;const{gos:n,colModel:r}=e,o=!!n.get("getFullRowEditValidationErrors"),i=null==(t=r.getColumnDefs())?void 0:t.filter(e=>e.editable).some(({cellEditorParams:e})=>{const{minLength:t,maxLength:n,getValidationErrors:r,min:o,max:i}=e||{};return void 0!==t||void 0!==n||void 0!==r||void 0!==o||void 0!==i}),s=e.gridApi.getCellEditorInstances().some(e=>e.getValidationElement||e.getValidationErrors);return i||o||s}function t_(e,t){var n,r,o,i,s,a,l,c;if(!e_(e))return;const u=function(e,t={}){var n;const r=[],o=e.rowRenderer.getCellCtrls(t.rowNodes,t.columns);for(const i of o){const e=null==(n=i.comp)?void 0:n.getCellEditor();e&&r.push({ctrl:i,editor:gT(e)})}return r}(e),d=new qH,{ariaAnnounce:h,localeSvc:p,editModelSvc:f,gos:g}=e,m="fullRow"===g.get("editType"),v=qM(p)("ariaValidationErrorPrefix","Cell Editor Validation");for(const b of u){const{ctrl:e,editor:t}=b,{rowNode:i,column:s}=e,a=(null==(n=t.getValidationErrors)?void 0:n.call(t))??[],l=(null==(r=t.getValidationElement)?void 0:r.call(t,!1))||!(null==(o=t.isPopup)?void 0:o.call(t))&&e.eGui;if(l){const e=null!=a&&a.length>0,t=e?a.join(". "):"";iM(l,e),e&&h.announceValue(`${v} ${a}`,"editorValidation"),l instanceof HTMLInputElement?l.setCustomValidity(t):l.classList.toggle("invalid",e)}(null==a?void 0:a.length)>0&&d.setCellValidation({rowNode:i,column:s},{errorMessages:a})}!function(e,t){var n,r,o;for(const i of(null==(n=e.editModelSvc)?void 0:n.getEditPositions())??[]){const n=YH(e,i);if(!n)continue;const s=null==(r=n.comp)?void 0:r.getCellEditor();if(!s)continue;const{editorValue:a,editorValueExists:l,isCancelAfterEnd:c}=JH(e,s,t);c&&(null==(o=e.editModelSvc)||o.setEdit(i,{editorState:{isCancelAfterEnd:c}})),QH(e,i,a,0,!l)}}(e,{}),null==f||f.setCellValidationModel(d);const y=new Set;for(const{ctrl:b}of u)y.add(b.rowCtrl);if(m){const t=n_(e);null==f||f.setRowValidationModel(t)}for(const b of y.values()){null==(i=b.rowEditStyleFeature)||i.applyRowStyles();for(const e of b.getAllCellCtrls())null==(s=e.tooltipFeature)||s.refreshTooltip(!0),null==(a=e.editorTooltipFeature)||a.refreshTooltip(!0),null==(c=null==(l=e.editStyleFeature)?void 0:l.applyCellStyles)||c.call(l)}}var n_=e=>{var t;const n=new XH,r=e.gos.get("getFullRowEditValidationErrors"),o=null==(t=e.editModelSvc)?void 0:t.getEditMap();if(!o)return n;for(const i of o.keys()){const e=o.get(i);if(!e)continue;const t=[],{rowIndex:s,rowPinned:a}=i;for(const n of e.keys()){const r=e.get(n);if(!r)continue;const{editorValue:o,pendingValue:i,sourceValue:l}=r,c=o??(i===ZH?void 0:i)??l;t.push({column:n,colId:n.getColId(),rowIndex:s,rowPinned:a,oldValue:l,newValue:c})}const l=(null==r?void 0:r({editorsState:t}))??[];l.length>0&&n.setRowValidation({rowNode:i},{errorMessages:l})}return n};var r_=class extends YM{constructor(e,t,n,r){super(),this.cellCtrl=e,this.rowNode=n,this.rowCtrl=r,this.beans=t}init(){this.eGui=this.cellCtrl.eGui}onKeyDown(e){const t=e.key;switch(t){case jT:this.onEnterKeyDown(e);break;case TT:this.onF2KeyDown(e);break;case OT:this.onEscapeKeyDown(e);break;case PT:this.onTabKeyDown(e);break;case kT:case NT:this.onBackspaceOrDeleteKeyDown(t,e);break;case AT:case DT:case MT:case ET:this.onNavigationKeyDown(e,t)}}onNavigationKeyDown(e,t){var n,r;const{cellCtrl:o,beans:i}=this;if(!(null==(n=i.editSvc)?void 0:n.isEditing(o,{withOpenEditor:!0}))){if(e.shiftKey&&o.isRangeSelectionEnabled())this.onShiftRangeSelect(e);else{const n=o.getFocusedCellPosition();null==(r=i.navigation)||r.navigateToNextCell(e,t,n,!0)}e.preventDefault()}}onShiftRangeSelect(e){const{rangeSvc:t,navigation:n}=this.beans;if(!t)return;const r=t.extendLatestRangeInDirection(e);r&&(e.key===ET||e.key===MT?null==n||n.ensureColumnVisible(r.column):null==n||n.ensureRowVisible(r.rowIndex))}onTabKeyDown(e){var t;null==(t=this.beans.navigation)||t.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){var n;const{cellCtrl:r,beans:o,rowNode:i}=this,{gos:s,rangeSvc:a,eventSvc:l,editSvc:c}=o;if(l.dispatchEvent({type:"keyShortcutChangedCellStart"}),function(e,t=!1){return e===NT||!t&&e===kT&&qT()}(e,s.get("enableCellEditingOnBackspace"))&&!(null==c?void 0:c.isEditing(r,{withOpenEditor:!0}))){if(a&&QA(s))a.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(r.isCellEditable()){const{column:e}=r,t=this.beans.valueSvc.getDeleteValue(e,i);i.setDataValue(e,t,"cellClear")}}else(null==c?void 0:c.isEditing(r,{withOpenEditor:!0}))||null==(n=o.editSvc)||n.startEditing(r,{startedEdit:!0,event:t});l.dispatchEvent({type:"keyShortcutChangedCellEnd"})}onEnterKeyDown(e){var t;const{cellCtrl:n,beans:r}=this,{editSvc:o,navigation:i}=r,s=null==o?void 0:o.isEditing(n,{withOpenEditor:!0}),a=n.rowNode,l=null==o?void 0:o.isRowEditing(a,{withOpenEditor:!0}),c=t=>{(null==o?void 0:o.startEditing(t,{startedEdit:!0,event:e,source:"edit"}))&&e.preventDefault()};if(s||l){if(this.isCtrlEnter(e))return void(null==o||o.applyBulkEdit(n,(null==(t=null==r?void 0:r.rangeSvc)?void 0:t.getCellRanges())||[]));if(t_(r),"block-stop"===(null==o?void 0:o.checkNavWithValidation(void 0,e)))return;(null==o?void 0:o.isEditing(n,{withOpenEditor:!0}))?null==o||o.stopEditing(n,{event:e,source:"edit"}):l&&!n.isCellEditable()?null==o||o.stopEditing({rowNode:a},{event:e,source:"edit"}):c(n)}else if(r.gos.get("enterNavigatesVertically")){const t=e.shiftKey?DT:AT;null==i||i.navigateToNextCell(null,t,n.cellPosition,!1)}else{if(null==o?void 0:o.hasValidationErrors())return;(null==o?void 0:o.hasValidationErrors(n))&&o.revertSingleCellEdit(n,!0),c(n)}}isCtrlEnter(e){return(e.ctrlKey||e.metaKey)&&e.key===jT}onF2KeyDown(e){const{cellCtrl:t,beans:{editSvc:n}}=this;(null==n?void 0:n.isEditing())&&(t_(this.beans),"block-stop"===(null==n?void 0:n.checkNavWithValidation(void 0,e)))||null==n||n.startEditing(t,{startedEdit:!0,event:e})}onEscapeKeyDown(e){const{cellCtrl:t,beans:{editSvc:n}}=this;"block-stop"===(null==n?void 0:n.checkNavWithValidation(t,e))&&n.revertSingleCellEdit(t),null==n||n.stopEditing(t,{event:e,cancel:!0})}processCharacter(e){var t;const n=e.target!==this.eGui,{beans:{editSvc:r},cellCtrl:o}=this;if(n)return;if(null==r?void 0:r.isEditing(o,{withOpenEditor:!0}))return;if(e.key===RT)this.onSpaceKeyDown(e);else if(null==r?void 0:r.isCellEditable(o,"ui")){if((null==r?void 0:r.hasValidationErrors())&&!(null==r?void 0:r.hasValidationErrors(o)))return;null==r||r.startEditing(o,{startedEdit:!0,event:e,source:"api"});const n=o.editCompDetails;!(null==(t=null==n?void 0:n.params)?void 0:t.suppressPreventDefault)&&e.preventDefault()}}onSpaceKeyDown(e){var t;const{gos:n,editSvc:r}=this.beans,{rowNode:o}=this.cellCtrl;!(null==r?void 0:r.isEditing(this.cellCtrl,{withOpenEditor:!0}))&&VA(n)&&(null==(t=this.beans.selectionSvc)||t.handleSelectionEvent(e,o,"spaceKey")),e.preventDefault()}},o_=class extends YM{constructor(e,t,n){super(),this.cellCtrl=e,this.column=n,this.beans=t}onMouseEvent(e,t){if(!SI(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t)}}onCellClicked(e){var t;if(null==(t=this.beans.touchSvc)?void 0:t.handleCellDoubleClick(this,e))return;const{eventSvc:n,rangeSvc:r,editSvc:o,editModelSvc:i,frameworkOverrides:s,gos:a}=this.beans,l=e.ctrlKey||e.metaKey,{cellCtrl:c}=this,{column:u,cellPosition:d,rowNode:h}=c,p=NI(a,u,h,e);r&&l&&!p&&r.getCellRangeCount(d)>1&&r.intersectLastRange(!0);const f=c.createEvent(e,"cellClicked");f.isEventHandlingSuppressed=p,n.dispatchEvent(f);const g=u.getColDef();if(g.onCellClicked&&window.setTimeout(()=>{s.wrapOutgoing(()=>{g.onCellClicked(f)})},0),!p&&"editing"!==(null==i?void 0:i.getState(c))){const t=null==o?void 0:o.isEditing(),n=(null==i?void 0:i.getCellValidationModel().getCellValidationMap().size)??0,r=(null==i?void 0:i.getRowValidationModel().getRowValidationMap().size)??0;if(t&&(n>0||r>0))return;(null==o?void 0:o.shouldStartEditing(c,e))?null==o||o.startEditing(c,{event:e}):(null==o?void 0:o.shouldStopEditing(c,e))&&("fullRow"===this.beans.gos.get("editType")?null==o||o.stopEditing(c,{event:e,source:"edit"}):null==o||o.stopEditing(void 0,{event:e,source:"edit"}))}}onCellDoubleClicked(e){const{column:t,beans:n,cellCtrl:r}=this,{eventSvc:o,frameworkOverrides:i,editSvc:s,editModelSvc:a,gos:l}=n,c=NI(l,r.column,r.rowNode,e),u=t.getColDef(),d=r.createEvent(e,"cellDoubleClicked");if(d.isEventHandlingSuppressed=c,o.dispatchEvent(d),"function"==typeof u.onCellDoubleClicked&&window.setTimeout(()=>{i.wrapOutgoing(()=>{u.onCellDoubleClicked(d)})},0),!c&&(null==s?void 0:s.shouldStartEditing(r,e))&&"editing"!==(null==a?void 0:a.getState(r))){const t=null==s?void 0:s.isEditing(),n=(null==a?void 0:a.getCellValidationModel().getCellValidationMap().size)??0,o=(null==a?void 0:a.getRowValidationModel().getRowValidationMap().size)??0;if(t&&(n>0||o>0))return;null==s||s.startEditing(r,{event:e})}}onMouseDown(e){const{ctrlKey:t,metaKey:n,shiftKey:r}=e,o=e.target,{cellCtrl:i,beans:s}=this,{eventSvc:a,rangeSvc:l,rowNumbersSvc:c,focusSvc:u,gos:d,editSvc:h}=s,{column:p,rowNode:f,cellPosition:g}=i,m=NI(d,p,f,e),v=()=>{const t=i.createEvent(e,"cellMouseDown");t.isEventHandlingSuppressed=m,a.dispatchEvent(t)};if(m)return void v();if(this.isRightClickInExistingRange(e))return;const y=l&&!l.isEmpty(),b=this.containsWidget(o),w=kN(p);if(c&&w&&!c.handleMouseDownOnCell(g,e))return l&&e.preventDefault(),void e.stopImmediatePropagation();if(!r||!y){const t=null==h?void 0:h.isEditing(i),n=d.get("enableCellTextSelection")&&e.defaultPrevented,r=(UT()||n)&&!t&&!cM(o)&&!b;i.focusCell(r,e)}if(r&&y&&!u.isCellFocused(g)){e.preventDefault();const t=u.getFocusedCell();if(t){const{column:n,rowIndex:r,rowPinned:o}=t;(null==h?void 0:h.isEditing(t))&&(null==h||h.stopEditing(t)),u.setFocusedCell({column:n,rowIndex:r,rowPinned:o,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,sourceEvent:e})}}if(!b){if(l){w&&e.preventDefault();const o=oN(s,e)&&w;if(r)l.extendLatestRangeToCell(g);else if(!o){const e=t||n;l.setRangeToCell(g,e)}}v()}}isRightClickInExistingRange(e){const{rangeSvc:t}=this.beans;if(t){const n=t.isCellInAnyRange(this.cellCtrl.cellPosition),r=oN(this.beans,e);if(n&&r)return!0}return!1}containsWidget(e){return hM(e,"ag-selection-checkbox",3)||hM(e,"ag-drag-handle",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:n}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),null==n||n.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:n}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),null==n||n.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.eGui,n=t.contains(e.target),r=t.contains(e.relatedTarget);return n&&r}},i_=class extends YM{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.column,this.rowNode=e.rowNode}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}init(){this.eSetLeft=this.cellCtrl.getRootElement(),this.eContent=this.cellCtrl.eGui;const e=this.cellCtrl.getCellSpan();if(e||(this.setupColSpan(),this.setupRowSpan()),this.onLeftChanged(),this.onWidthChanged(),e||this._legacyApplyRowSpan(),e){const t=this.refreshSpanHeight.bind(this,e);t(),this.addManagedListeners(this.beans.eventSvc,{paginationChanged:t,recalculateRowBounds:t,pinnedHeightChanged:t})}}refreshSpanHeight(e){const t=e.getCellHeight();null!=t&&(this.eContent.style.height=`${t}px`)}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this._legacyApplyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();mN(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){null!=this.column.getColDef().colSpan&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eContent)return;const e=this.getCellWidth();this.eContent.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const{column:e,rowNode:t}=this,n=e.getColSpan(t),r=[];if(1===n)r.push(e);else{let t=e;const o=e.getPinned();for(let e=0;t&&e<n&&(r.push(t),t=this.beans.visibleCols.getColAfter(t),t&&!HD(t))&&o===t.getPinned();e++);}return r}onLeftChanged(){if(!this.eSetLeft)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eSetLeft.style.left=e+"px"}getCellLeft(){let e;return e=this.beans.gos.get("enableRtl")&&this.colsSpanning?gN(this.colsSpanning):this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.printLayout||"left"===this.column.getPinned())return e;const{visibleCols:t}=this.beans,n=t.getColsLeftWidth();if("right"===this.column.getPinned()){return n+t.bodyWidth+(e||0)}return n+(e||0)}_legacyApplyRowSpan(e){if(1===this.rowSpan&&!e)return;const t=$A(this.beans)*this.rowSpan;this.eContent.style.height=`${t}px`,this.eContent.style.zIndex="1"}destroy(){super.destroy()}},s_=0,a_=class extends YM{constructor(e,t,n,r){super(),this.column=e,this.rowNode=t,this.rowCtrl=r,this.rangeFeature=void 0,this.rowResizeFeature=void 0,this.positionFeature=void 0,this.customStyleFeature=void 0,this.editStyleFeature=void 0,this.mouseListener=void 0,this.keyboardListener=void 0,this.suppressRefreshCell=!1,this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.focusEventWhileNotReady=null,this.hasBeenFocused=!1,this.hasEdit=!1,this.tooltipFeature=void 0,this.editorTooltipFeature=void 0,this.beans=n,this.gos=n.gos,this.editSvc=n.editSvc,this.hasEdit=!!n.editSvc;const{colId:o}=e;this.instanceId=o+"-"+s_++,this.createCellPosition(),this.updateAndFormatValue(!1)}addFeatures(){var e,t;const{beans:n}=this;this.positionFeature=new i_(this,n),this.customStyleFeature=null==(e=n.cellStyles)?void 0:e.createCellCustomStyleFeature(this,n),this.editStyleFeature=null==(t=n.editSvc)?void 0:t.createCellStyleFeature(this,n),this.mouseListener=new o_(this,n,this.column),this.keyboardListener=new r_(this,n,this.rowNode,this.rowCtrl),this.enableTooltipFeature();const{rangeSvc:r}=n;r&&QA(n.gos)&&(this.rangeFeature=r.createCellRangeFeature(n,this)),kN(this.column)&&(this.rowResizeFeature=this.beans.rowNumbersSvc.createRowNumbersRowResizerFeature(n,this))}isCellSpanning(){return!1}getCellSpan(){}removeFeatures(){const e=this.beans.context;this.positionFeature=e.destroyBean(this.positionFeature),this.editorTooltipFeature=e.destroyBean(this.editorTooltipFeature),this.customStyleFeature=e.destroyBean(this.customStyleFeature),this.editStyleFeature=e.destroyBean(this.editStyleFeature),this.mouseListener=e.destroyBean(this.mouseListener),this.keyboardListener=e.destroyBean(this.keyboardListener),this.rangeFeature=e.destroyBean(this.rangeFeature),this.rowResizeFeature=e.destroyBean(this.rowResizeFeature),this.disableTooltipFeature()}enableTooltipFeature(e,t){var n;this.tooltipFeature=null==(n=this.beans.tooltipSvc)?void 0:n.enableCellTooltipFeature(this,e,t)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}enableEditorTooltipFeature(e){var t;this.editorTooltipFeature&&this.disableEditorTooltipFeature(),this.editorTooltipFeature=null==(t=this.beans.tooltipSvc)?void 0:t.setupCellEditorTooltip(this,e),t_(this.beans)}disableEditorTooltipFeature(){this.editorTooltipFeature=this.beans.context.destroyBean(this.editorTooltipFeature)}setComp(e,t,n,r,o,i,s){var a,l,c,u,d,h,p,f,g;if(this.comp=e,this.eGui=t,this.printLayout=o,s??(s=this),this.addDomData(s),this.addFeatures(),s.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.setupFocus(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(r,s),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),null==(a=this.positionFeature)||a.init(),null==(l=this.customStyleFeature)||l.setComp(e),null==(c=this.editStyleFeature)||c.setComp(e),null==(u=this.tooltipFeature)||u.refreshTooltip(),null==(d=this.keyboardListener)||d.init(),null==(h=this.rangeFeature)||h.setComp(e),null==(p=this.rowResizeFeature)||p.refreshRowResizer(),i&&this.isCellEditable()||this.hasEdit&&(null==(f=this.editSvc)?void 0:f.isEditing(this,{withOpenEditor:!0}))?null==(g=this.editSvc)||g.startEditing(this,{startedEdit:!1,source:"api",silent:!0,continueEditing:!0}):this.showValue(!1,!0),this.onCompAttachedFuncs.length){for(const e of this.onCompAttachedFuncs)e();this.onCompAttachedFuncs=[]}}setupAutoHeight(e,t){var n;this.isAutoHeight=(null==(n=this.beans.rowAutoHeight)?void 0:n.setupCellAutoHeight(this,e,t))??!1}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const e=this.column.getColDef();return null!=e.cellRenderer||null!=e.cellRendererSelector}getValueToDisplay(){return this.valueFormatted??this.value}getDeferLoadingCellRenderer(){var e,t;const{beans:n,column:r}=this,{userCompFactory:o,ctrlsSvc:i,eventSvc:s}=n,a=r.getColDef(),l=this.createCellRendererParams();l.deferRender=!0;const c=fT(o,a,l);if(null==(t=null==(e=i.getGridBodyCtrl())?void 0:e.scrollFeature)?void 0:t.isScrolling()){let e;const t=new QN(t=>{e=t}),[n]=this.addManagedListeners(s,{bodyScrollEnd:()=>{e(),n()}});return{loadingComp:c,onReady:t}}return{loadingComp:c,onReady:QN.resolve()}}showValue(e,t){var n,r,o,i;const{beans:s,column:a,rowNode:l,rangeFeature:c}=this,{userCompFactory:u}=s;let d,h=this.getValueToDisplay();const p=l.stub&&null==(null==(n=l.groupData)?void 0:n[a.getId()]),f=a.getColDef();if(p||this.isCellRenderer()){const e=this.createCellRendererParams();d=!p||kN(a)?pT(u,f,e):fT(u,f,e)}if(!d&&!p&&(null==(r=s.findSvc)?void 0:r.isMatch(l,a))){const e=this.createCellRendererParams();d=pT(u,{...a.getColDef(),cellRenderer:"agFindCellRenderer"},e)}if(this.hasEdit&&this.editSvc.isBatchEditing()&&this.editSvc.isRowEditing(l,{checkSiblings:!0})){const e=this.editSvc.prepDetailsDuringBatch(this,{compDetails:d,valueToDisplay:h});e&&(e.compDetails?d=e.compDetails:e.valueToDisplay&&(h=e.valueToDisplay))}this.comp.setRenderDetails(d,h,e),null==(o=this.customRowDragComp)||o.refreshVisibility(),!t&&c&&DM(s,()=>null==c?void 0:c.refreshHandle()),null==(i=this.rowResizeFeature)||i.refreshRowResizer()}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(e),!0),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.comp.setIncludeSelection(this.includeSelection),this.comp.setIncludeDndSource(this.includeDndSource),this.comp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}getCellValueClass(){let e="";return"agCheckboxCellRenderer"===this.column.getColDef().cellRenderer&&(e=" ag-allow-overflow"),`ag-cell-value${e}`}isIncludeControl(e,t=!1){return(null==this.rowNode.rowPinned||t&&!(!(n=this.rowNode).rowPinned||!n.pinnedSibling))&&!!e;var n}isCheckboxSelection(e){const{rowSelection:t,groupDisplayType:n}=this.beans.gridOptions,r=function(e){if("object"==typeof e)return e.checkboxLocation??"selectionColumn"}(t),o=SN(this.column);return("custom"!==n||"selectionColumn"===r||!o)&&(e.checkboxSelection||o&&"object"==typeof t&&((null==(i=t)?void 0:i.checkboxes)??!0));var i}refreshShouldDestroy(){const e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(e),!0),n=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),r=this.includeDndSource!=this.isIncludeControl(e.dndSource),o=this.isAutoHeight!=this.column.isAutoHeight();return t||n||r||o}onPopupEditorClosed(){const{editSvc:e}=this.beans;(null==e?void 0:e.isEditing(this,{withOpenEditor:!0}))&&(null==e||e.stopEditing(this,{source:(null==e?void 0:e.isBatchEditing())?"ui":"api"}))}stopEditing(e=!1){const{editSvc:t}=this.beans;return(null==t?void 0:t.stopEditing(this,{cancel:e,source:(null==t?void 0:t.isBatchEditing())?"ui":"api"}))??!1}createCellRendererParams(){const{value:e,valueFormatted:t,column:n,rowNode:r,comp:o,eGui:i,beans:{valueSvc:s,gos:a,editSvc:l}}=this;return nN(a,{value:e,valueFormatted:t,getValue:()=>s.getValueForDisplay(n,r).value,setValue:e=>(null==l?void 0:l.setDataValue({rowNode:r,column:n},e))||r.setDataValue(n,e),formatValue:this.formatValue.bind(this),data:r.data,node:r,pinned:n.getPinned(),colDef:n.getColDef(),column:n,refreshCell:this.refreshCell.bind(this),eGridCell:i,eParentOfValue:o.getParentOfValue(),registerRowDragger:(e,t,n,r)=>this.registerRowDragger(e,t,r),setTooltip:(e,t)=>{var n;a.assertModuleRegistered("Tooltip",3),this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(e,t),null==(n=this.tooltipFeature)||n.refreshTooltip()}})}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){var t;if(this.refreshShouldDestroy()?null==(t=this.rowCtrl)||t.recreateCell(this):this.refreshCell(e),this.hasEdit&&this.editCompDetails){const{editSvc:e,comp:t}=this;!(null==t?void 0:t.getCellEditor())&&e.isEditing(this,{withOpenEditor:!0})&&e.startEditing(this,{startedEdit:!1,source:"api",silent:!0})}}refreshCell({force:e,suppressFlash:t,newData:n}={}){var r;const{editStyleFeature:o,customStyleFeature:i,rowCtrl:{rowEditStyleFeature:s},beans:{cellFlashSvc:a,filterManager:l},column:c,comp:u,suppressRefreshCell:d,tooltipFeature:h}=this;if(d)return;const{field:p,valueGetter:f,showRowGroup:g,enableCellChangeFlash:m}=c.getColDef(),v=e||null==p&&null==f&&null==g||n,y=!!u,b=this.updateAndFormatValue(y);if(y){if(v||b){this.showValue(!!n,!1);const e=null==l?void 0:l.isSuppressFlashingCellsBecauseFiltering();!t&&!e&&m&&(null==a||a.flashCell(this)),null==(r=null==o?void 0:o.applyCellStyles)||r.call(o),null==i||i.applyUserStyles(),null==i||i.applyClassesFromColDef(),null==s||s.applyRowStyles()}null==h||h.refreshTooltip(),null==i||i.applyCellClassRules()}}isCellEditable(){return this.column.isCellEditable(this.rowNode)}formatValue(e){return this.callValueFormatter(e)??e}callValueFormatter(e){return this.beans.valueSvc.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){const t=this.value,n=this.valueFormatted,{value:r,valueFormatted:o}=this.beans.valueSvc.getValueForDisplay(this.column,this.rowNode,!0);return this.value=r,this.valueFormatted=o,!e||(!this.valuesAreEqual(t,this.value)||this.valueFormatted!=n)}valuesAreEqual(e,t){const n=this.column.getColDef();return n.equals?n.equals(e,t):e===t}addDomData(e){const t=this.eGui;qA(this.beans.gos,t,II,this),e.addDestroyFunc(()=>qA(this.beans.gos,t,II,null))}createEvent(e,t){const{rowNode:n,column:r,value:o,beans:i}=this;return function(e,t,n,{rowNode:r,column:o},i){return nN(e.gos,{type:n,node:r,data:r.data,value:i,column:o,colDef:o.getColDef(),rowPinned:r.rowPinned,event:t,rowIndex:r.rowIndex})}(i,e,t,{rowNode:n,column:r},o)}processCharacter(e){var t;null==(t=this.keyboardListener)||t.processCharacter(e)}onKeyDown(e){var t;null==(t=this.keyboardListener)||t.onKeyDown(e)}onMouseEvent(e,t){var n;null==(n=this.mouseListener)||n.onMouseEvent(e,t)}getColSpanningList(){var e;return(null==(e=this.positionFeature)?void 0:e.getColSpanningList())??[]}onLeftChanged(){var e;this.comp&&(null==(e=this.positionFeature)||e.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{comp:e,column:t,beans:n}=this;vL(e,t,n.visibleCols)}refreshAriaColIndex(){const e=this.beans.visibleCols.getAriaColIndex(this.column);aM(this.eGui,e)}onWidthChanged(){var e;return null==(e=this.positionFeature)?void 0:e.onWidthChanged()}getRowPosition(){const{rowIndex:e,rowPinned:t}=this.cellPosition;return{rowIndex:e,rowPinned:t}}updateRangeBordersIfRangeCount(){var e;this.comp&&(null==(e=this.rangeFeature)||e.updateRangeBordersIfRangeCount())}onCellSelectionChanged(){var e;this.comp&&(null==(e=this.rangeFeature)||e.onCellSelectionChanged())}isRangeSelectionEnabled(){return null!=this.rangeFeature}focusCell(e=!1,t){var n;const r=null==(n=this.editSvc)?void 0:n.allowedFocusTargetOnValidation(this);r&&r!==this||this.beans.focusSvc.setFocusedCell({...this.getFocusedCellPosition(),forceBrowserFocus:e,sourceEvent:t})}restoreFocus(e=!1){const{beans:{editSvc:t,focusSvc:n},comp:r}=this;if(!r||(null==t?void 0:t.isEditing(this))||!this.isCellFocused()||!n.shouldTakeFocus())return;const o=()=>{if(!this.isAlive())return;const e=r.getFocusableElement();this.isCellFocused()&&e.focus({preventScroll:!0})};e?setTimeout(o,0):o()}onRowIndexChanged(){var e,t;this.createCellPosition(),this.onCellFocused(),this.restoreFocus(),null==(e=this.rangeFeature)||e.onCellSelectionChanged(),null==(t=this.rowResizeFeature)||t.refreshRowResizer()}onSuppressCellFocusChanged(e){const t=this.eGui;t&&(kN(this.column)&&(e=!0),RM(t,"tabindex",e?void 0:-1))}onFirstRightPinnedChanged(){if(!this.comp)return;const e=this.column.isFirstRightPinned();this.comp.toggleCss("ag-cell-first-right-pinned",e)}onLastLeftPinnedChanged(){if(!this.comp)return;const e=this.column.isLastLeftPinned();this.comp.toggleCss("ag-cell-last-left-pinned",e)}checkCellFocused(){return this.beans.focusSvc.isCellFocused(this.cellPosition)}isCellFocused(){const e=this.checkCellFocused();return this.hasBeenFocused||(this.hasBeenFocused=e),e}setupFocus(){this.restoreFocus(!0),this.onCellFocused(this.focusEventWhileNotReady??void 0)}onCellFocused(e){var t;const{beans:n}=this;if(bL(n))return;if(!this.comp)return void(e&&(this.focusEventWhileNotReady=e));const r=this.isCellFocused(),o=(null==(t=n.editSvc)?void 0:t.isEditing(this))??!1;if(this.comp.toggleCss("ag-cell-focus",r),r&&(null==e?void 0:e.forceBrowserFocus)){let t=this.comp.getFocusableElement();if(o){const e=cF(t,null,!0);e.length&&(t=e[0])}t.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}r&&e&&this.rowCtrl.announceDescription()}createCellPosition(){const{rowIndex:e,rowPinned:t}=this.rowNode;this.cellPosition={rowIndex:e,rowPinned:LD(t),column:this.column}}applyStaticCssClasses(){const{comp:e}=this;e.toggleCss("ag-cell",!0),e.toggleCss("ag-cell-not-inline-editing",!0);const t=1==this.column.isAutoHeight();e.toggleCss("ag-cell-auto-height",t),e.toggleCss("ag-cell-normal-height",!t)}onColumnHover(){var e;null==(e=this.beans.colHover)||e.onCellColumnHover(this.column,this.comp)}onColDefChanged(){var e,t;this.comp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),(null==(e=this.editSvc)?void 0:e.isEditing(this))?null==(t=this.editSvc)||t.handleColDefChanged(this):this.refreshOrDestroyCell({force:!0,suppressFlash:!0}))}setWrapText(){const e=1==this.column.getColDef().wrapText;this.comp.toggleCss("ag-cell-wrap-text",e)}dispatchCellContextMenuEvent(e){const t=this.column.getColDef(),n=this.createEvent(e,"cellContextMenu"),{beans:r}=this;r.eventSvc.dispatchEvent(n),t.onCellContextMenu&&window.setTimeout(()=>{r.frameworkOverrides.wrapOutgoing(()=>{t.onCellContextMenu(n)})},0)}getCellRenderer(){var e;return(null==(e=this.comp)?void 0:e.getCellRenderer())??null}destroy(){this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.isCellFocused()&&this.hasBrowserFocus()&&this.beans.focusSvc.attemptToRecoverFocus(),super.destroy()}hasBrowserFocus(){var e;return(null==(e=this.eGui)?void 0:e.contains(KD(this.beans)))??!1}createSelectionCheckbox(){var e;const t=null==(e=this.beans.selectionSvc)?void 0:e.createCheckboxSelectionComponent();if(t)return this.beans.context.createBean(t),t.init({rowNode:this.rowNode,column:this.column}),t}createDndSource(){const e=this.beans.registry.createDynamicBean("dndSourceComp",!1,this.rowNode,this.column,this.eGui);return e&&this.beans.context.createBean(e),e}registerRowDragger(e,t,n){if(this.customRowDragComp)return void this.customRowDragComp.setDragElement(e,t);const r=this.createRowDragComp(e,t,n);r&&(this.customRowDragComp=r,this.addDestroyFunc(()=>{this.beans.context.destroyBean(r),this.customRowDragComp=null}),r.refreshVisibility())}createRowDragComp(e,t,n){var r;const o=null==(r=this.beans.rowDragSvc)?void 0:r.createRowDragCompForCell(this.rowNode,this.column,()=>this.value,e,t,n);if(o)return this.beans.context.createBean(o),o}cellEditorAttached(){for(const e of this.onEditorAttachedFuncs)e();this.onEditorAttachedFuncs=[]}setFocusedCellPosition(e){}getFocusedCellPosition(){return this.cellPosition}refreshAriaRowIndex(){}getRootElement(){return this.eGui}};function l_(e){if(e.group)return e.level;const t=e.parent;return t?t.level+1:0}var c_=0,u_=class extends YM{constructor(e,t,n,r,o){var i,s;super(),this.rowNode=e,this.useAnimationFrameForCreate=r,this.printLayout=o,this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKey=null,this.beans=t,this.gos=t.gos,this.paginationPage=(null==(i=t.pagination)?void 0:i.getCurrentPage())??0,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+c_++,this.rowId=$D(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=l_(this.rowNode),this.setRowType(),this.setAnimateFlags(n),this.rowStyles=this.processStylesFromGridOptions(),this.rowEditStyleFeature=null==(s=t.editSvc)?void 0:s.createRowStyleFeature(this,t),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if("function"!=typeof this.businessKeyForNodeFunc)return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKey=$D(e)}updateGui(e,t){"left"===e?this.leftGui=t:"right"===e?this.rightGui=t:"fullWidth"===e?this.fullWidthGui=t:this.centerGui=t}setComp(e,t,n,r){var o,i;const{context:s,focusSvc:a}=this.beans,l={rowComp:e,element:t,containerType:n,compBean:r=KN(this,s,r)};this.allRowGuis.push(l),this.updateGui(n,l),this.initialiseRowComp(l);const c=this.rowNode,u="FullWidthLoading"===this.rowType||c.stub,d=!c.data&&"infinite"===this.beans.rowModel.getType();u||d||c.rowPinned||this.beans.rowRenderer.dispatchFirstDataRenderedEvent();const h=null==(o=this.fullWidthGui)?void 0:o.element;if(h){!(null==(i=this.beans.editSvc)?void 0:i.isEditing(this))&&a.isRowFocused(c.rowIndex,c.rowPinned)&&a.shouldTakeFocus()&&setTimeout(()=>h.focus({preventScroll:!0}),0)}}unsetComp(e){this.allRowGuis=this.allRowGuis.filter(t=>t.containerType!==e),this.updateGui(e,void 0)}isCacheable(){return"FullWidthDetail"===this.rowType&&this.gos.get("keepDetailRows")}setCached(e){const t=e?"none":"";for(const n of this.allRowGuis)n.element.style.display=t}initialiseRowComp(e){const t=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(e),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),VA(t)&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);const n=e.rowComp,r=this.getInitialRowClasses(e.containerType);for(const s of r)n.toggleCss(s,!0);var o,i;this.executeSlideAndFadeAnimations(e),this.rowNode.group&&(o=e.element,i=1==this.rowNode.expanded,JD(o,"expanded",i)),this.setRowCompRowId(n),this.setRowCompRowBusinessKey(n),qA(t,e.element,BI,this),e.compBean.addDestroyFunc(()=>qA(t,e.element,BI,null)),this.useAnimationFrameForCreate?this.beans.animationFrameSvc.createTask(this.addHoverFunctionality.bind(this,e),this.rowNode.rowIndex,"p2",!1):this.addHoverFunctionality(e),this.isFullWidth()&&this.setupFullWidth(e),t.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameSvc.addDestroyTask(()=>{this.isAlive()&&e.rowComp.toggleCss("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){null!=this.businessKey&&e.setRowBusinessKey(this.businessKey)}setRowCompRowId(e){const t=$D(this.rowNode.id);this.rowId=t,null!=t&&e.setRowId(t)}executeSlideAndFadeAnimations(e){const{containerType:t}=e;this.slideInAnimation[t]&&(tA(()=>{this.onTopChanged()}),this.slideInAnimation[t]=!1);this.fadeInAnimation[t]&&(tA(()=>{e.rowComp.toggleCss("ag-opacity-zero",!1)}),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){var t;const n=null==(t=this.beans.rowDragSvc)?void 0:t.createRowDragCompForRow(this.rowNode,e.element);if(!n)return;const r=this.createBean(n,this.beans.context);this.rowDragComps.push(r),e.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(e=>e!==r),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,this.beans.context),this.destroyBean(r,this.beans.context)})}setupFullWidth(e){const t=this.getPinnedForContainer(e.containerType),n=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(n)}getFullWidthCellRenderers(){var e,t;return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(e=>{var t;return null==(t=null==e?void 0:e.rowComp)?void 0:t.getFullWidthCellRenderer()}):[null==(t=null==(e=this.fullWidthGui)?void 0:e.rowComp)?void 0:t.getFullWidthCellRenderer()]}executeProcessRowPostCreateFunc(){const e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;e({eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)})}areAllContainersReady(){const{leftGui:e,centerGui:t,rightGui:n,beans:{visibleCols:r}}=this,o=!!e||!r.isPinningLeft(),i=!!t,s=!!n||!r.isPinningRight();return o&&i&&s}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return!!e&&e({rowNode:this.rowNode})}setRowType(){const e=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),t=this.isNodeFullWidthCell(),n=this.gos.get("masterDetail")&&this.rowNode.detail,r=this.beans.colModel.isPivotMode(),o=function(e,t,n){return!!t.group&&!t.footer&&JA(e,n)}(this.gos,this.rowNode,r);this.rowType=e?"FullWidthLoading":n?"FullWidthDetail":t?"FullWidth":o?"FullWidthGroup":"Normal"}updateColumnLists(e=!1,t=!1){if(this.isFullWidth())return;const{animationFrameSvc:n}=this.beans;!(null==n?void 0:n.active)||e||this.printLayout?this.updateColumnListsImpl(t):this.updateColumnListsPending||(n.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"p1",!1),this.updateColumnListsPending=!0)}getNewCellCtrl(e){var t;if(!(null==(t=this.beans.rowSpanSvc)?void 0:t.isCellSpanning(e,this.rowNode)))return new a_(e,this.rowNode,this.beans,this)}isCorrectCtrlForSpan(e){var t;return!(null==(t=this.beans.rowSpanSvc)?void 0:t.isCellSpanning(e.column,this.rowNode))}createCellCtrls(e,t,n=null){const r={list:[],map:{}},o=(e,t,n)=>{null!=n?r.list.splice(n,0,t):r.list.push(t),r.map[e]=t},i=[];for(const c of t){const t=c.getInstanceId();let n=e.map[t];n&&!this.isCorrectCtrlForSpan(n)&&(n.destroy(),n=void 0),n||(n=this.getNewCellCtrl(c)),n&&o(t,n)}for(const c of e.list){const e=c.column.getInstanceId();if(null!=r.map[e])continue;!this.isCellEligibleToBeRemoved(c,n)?i.push([e,c]):c.destroy()}if(i.length)for(const[c,u]of i){const e=r.list.findIndex(e=>e.column.getLeft()>u.column.getLeft()),t=-1===e?void 0:Math.max(e-1,0);o(c,u,t)}const{focusSvc:s,visibleCols:a}=this.beans,l=s.getFocusedCell();if(l&&l.column.getPinned()==n){const e=l.column.getInstanceId();if(!r.map[e]&&a.allCols.includes(l.column)){const t=this.createFocusedCellCtrl();if(t){const n=r.list.findIndex(e=>e.column.getLeft()>t.column.getLeft()),i=-1===n?void 0:Math.max(n-1,0);o(e,t,i)}}}return r}createFocusedCellCtrl(){const{focusSvc:e,rowSpanSvc:t}=this.beans,n=e.getFocusedCell();if(!n)return;const r=null==t?void 0:t.getCellSpan(n.column,this.rowNode);if(r){if(r.firstNode!==this.rowNode||!r.doesSpanContain(n))return}else if(!e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned))return;return this.getNewCellCtrl(n.column)}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){for(const t of this.allRowGuis){const n=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(n,e)}}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const e=this.beans.colViewport,t=this.beans.visibleCols;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.allCols),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const n=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,n);const r=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,r,"left");const o=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,o,"right")}}isCellEligibleToBeRemoved(e,t){const n=!0,{column:r}=e;if(r.getPinned()!=t)return n;if(!this.isCorrectCtrlForSpan(e))return n;const{visibleCols:o,editSvc:i}=this.beans,s=null==i?void 0:i.isEditing(e),a=e.isCellFocused();if(s||a){return!(o.allCols.indexOf(r)>=0)&&n}return n}getDomOrder(){return this.gos.get("ensureDomOrder")||GA(this.gos,"print")}listenOnDomOrder(e){e.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],()=>{e.rowComp.setDomOrder(this.getDomOrder())})}setAnimateFlags(e){if(this.rowNode.sticky||!e)return;const t=BD(this.rowNode.oldRowTop),{visibleCols:n}=this.beans,r=n.isPinningLeft(),o=n.isPinningRight();if(t){const{slideInAnimation:e}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows"))return void(e.fullWidth=!0);e.center=!0,e.left=r,e.right=o}else{const{fadeInAnimation:e}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows"))return void(e.fullWidth=!0);e.center=!0,e.left=r,e.right=o}}isFullWidth(){return"Normal"!==this.rowType}refreshFullWidth(){const e=(e,t)=>!e||e.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(e.element,t).params),t=e(this.fullWidthGui,null),n=e(this.centerGui,null),r=e(this.leftGui,"left"),o=e(this.rightGui,"right");return t&&n&&r&&o}addListeners(){const{beans:e,gos:t,rowNode:n}=this,{expansionSvc:r,eventSvc:o,context:i,rowSpanSvc:s}=e;this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),...(null==r?void 0:r.getRowExpandedListeners(this))??{}}),n.detail&&this.addManagedListeners(n.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(n,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this),rowPinned:this.onRowPinned.bind(this)}),this.addManagedListeners(o,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),s&&this.addManagedListeners(s,{spannedCellsUpdated:({pinned:e})=>{e&&!n.rowPinned||this.updateColumnLists()}}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,i),this.tooltipFeature=this.destroyBean(this.tooltipFeature,i),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,i)}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(t.get("rowDragEntireRow"))for(const e of this.allRowGuis)this.addRowDraggerToRow(e);else this.rowDragComps=this.destroyBeans(this.rowDragComps,i)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{for(const e of this.getAllCellCtrls())e.onRowIndexChanged()},cellChanged:e=>{for(const t of this.getAllCellCtrls())t.onCellChanged(e)}})}onRowPinned(){for(const e of this.allRowGuis)e.rowComp.toggleCss("ag-row-pinned-source",!!this.rowNode.pinnedSibling)}onRowNodeDataChanged(e){this.refreshRow({suppressFlash:!e.update,newData:!e.update})}refreshRow(e){if(this.isFullWidth()!==!!this.isNodeFullWidthCell())this.beans.rowRenderer.redrawRow(this.rowNode);else{if(this.isFullWidth()){return void(this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode))}for(const t of this.getAllCellCtrls())t.refreshCell(e);for(const e of this.allRowGuis)this.setRowCompRowId(e.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(e.rowComp);this.onRowSelected(),this.postProcessCss()}}postProcessCss(){var e;this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),null==(e=this.rowEditStyleFeature)||e.applyRowStyles(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.beans.rowDropHighlightSvc,t=(null==e?void 0:e.row)===this.rowNode?e.position:"none",n="above"===t,r="inside"===t,o="below"===t,i=this.gos.get("treeData")&&(o||n),s=this.rowNode.uiLevel.toString();for(const a of this.allRowGuis){const e=a.rowComp;e.toggleCss("ag-row-highlight-above",n),e.toggleCss("ag-row-highlight-inside",r),e.toggleCss("ag-row-highlight-below",o),e.toggleCss("ag-row-highlight-indent",i),i?a.element.style.setProperty("--ag-row-highlight-level",s):a.element.style.removeProperty("--ag-row-highlight-level")}}postProcessRowDragging(){const e=this.rowNode.dragging;for(const t of this.allRowGuis)t.rowComp.toggleCss("ag-row-dragging",e)}onDisplayedColumnsChanged(){var e;this.updateColumnLists(!0),null==(e=this.beans.rowAutoHeight)||e.requestCheckAutoHeight()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:LD(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){const t=this.findFullWidthInfoForEvent(e);if(!t)return;const{rowGui:n,column:r}=t;if(!(n.element===e.target))return;const o=this.rowNode,{focusSvc:i,navigation:s}=this.beans,a=i.getFocusedCell(),l={rowIndex:o.rowIndex,rowPinned:o.rowPinned,column:(null==a?void 0:a.column)??r};null==s||s.navigateToNextCell(e,e.key,l,!0),e.preventDefault()}onTabKeyDown(e){var t;if(e.defaultPrevented||SI(e))return;const n=this.allRowGuis.find(t=>t.element.contains(e.target)),r=n?n.element:null,o=r===e.target,i=KD(this.beans);let s=!1;r&&i&&(s=r.contains(i)&&i.classList.contains("ag-cell"));let a=null;o||s||(a=dF(this.beans,r,0,e.shiftKey)),(this.isFullWidth()&&o||!a)&&(null==(t=this.beans.navigation)||t.onTabKeyDown(this,e))}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){var e;const t=null==(e=this.allRowGuis.find(e=>CM(e.element)))?void 0:e.element;return t?t.getBoundingClientRect().top:0}onSuppressCellFocusChanged(e){const t=this.isFullWidth()&&e?void 0:this.gos.get("tabIndex");for(const n of this.allRowGuis)RM(n.element,"tabindex",t)}onFullWidthRowFocused(e){var t,n,r;const o=this.rowNode,i=!!e&&(this.isFullWidth()&&e.rowIndex===o.rowIndex&&e.rowPinned==o.rowPinned);let s;if(this.fullWidthGui)s=this.fullWidthGui.element;else{const o=this.beans.colModel.getCol(null==e?void 0:e.column),i=null==o?void 0:o.pinned;s=i?"right"===i?null==(t=this.rightGui)?void 0:t.element:null==(n=this.leftGui)?void 0:n.element:null==(r=this.centerGui)?void 0:r.element}s&&(s.classList.toggle("ag-full-width-focus",i),i&&(null==e?void 0:e.forceBrowserFocus)&&s.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){const n={list:[],map:{}};for(const r of e.list)r!==t&&(n.list.push(r),n.map[r.column.getInstanceId()]=r);return n}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t)}}createRowEvent(e,t){const{rowNode:n}=this;return nN(this.gos,{type:e,node:n,data:n.data,rowIndex:n.rowIndex,rowPinned:n.rowPinned,event:t})}createRowEventWithSource(e,t){const n=this.createRowEvent(e,t);return n.source=this,n}onRowDblClick(e){if(SI(e))return;const t=this.createRowEventWithSource("rowDoubleClicked",e);t.isEventHandlingSuppressed=this.isSuppressMouseEvent(e),this.beans.eventSvc.dispatchEvent(t)}findFullWidthInfoForEvent(e){if(!e)return;const t=this.findFullWidthRowGui(e.target),n=this.getColumnForFullWidth(t);return t&&n?{rowGui:t,column:n}:void 0}findFullWidthRowGui(e){return this.allRowGuis.find(t=>t.element.contains(e))}getColumnForFullWidth(e){const{visibleCols:t}=this.beans;switch(null==e?void 0:e.containerType){case"center":return t.centerCols[0];case"left":return t.leftCols[0];case"right":return t.rightCols[0];default:return t.allCols[0]}}onRowMouseDown(e){if(this.lastMouseDownOnDragger=hM(e.target,"ag-row-drag",3),!this.isFullWidth()||this.isSuppressMouseEvent(e))return;const{rangeSvc:t,focusSvc:n}=this.beans;null==t||t.removeAllCellRanges();const r=this.findFullWidthInfoForEvent(e);if(!r)return;const{rowGui:o,column:i}=r,s=o.element,a=e.target,l=this.rowNode;let c=e.defaultPrevented||UT();s&&s.contains(a)&&cM(a)&&(c=!1),n.setFocusedCell({rowIndex:l.rowIndex,column:i,rowPinned:l.rowPinned,forceBrowserFocus:c})}isSuppressMouseEvent(e){const{gos:t,rowNode:n}=this;if(this.isFullWidth()){const r=this.findFullWidthRowGui(e.target);return function(e,t,n,r){return TI(e,void 0,n,r,null==t?void 0:t.suppressMouseEventHandling)}(t,null==r?void 0:r.rowComp.getFullWidthCellRendererParams(),n,e)}const r=LI(t,e.target);return null!=r&&NI(t,r.column,n,e)}onRowClick(e){if(SI(e)||this.lastMouseDownOnDragger)return;const t=this.isSuppressMouseEvent(e),{eventSvc:n,selectionSvc:r}=this.beans,o=this.createRowEventWithSource("rowClicked",e);o.isEventHandlingSuppressed=t,n.dispatchEvent(o),t||null==r||r.handleSelectionEvent(e,this.rowNode,"rowClicked")}setupDetailRowAutoHeight(e){var t;"FullWidthDetail"===this.rowType&&(null==(t=this.beans.masterDetailSvc)||t.setupDetailRowAutoHeight(this,e))}createFullWidthCompDetails(e,t){const{gos:n,rowNode:r}=this,o=nN(n,{fullWidth:!0,data:r.data,node:r,value:r.key,valueFormatted:r.key,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(e,t,n,r)=>this.addFullWidthRowDragging(e,t,n,r),setTooltip:(e,t)=>{n.assertModuleRegistered("Tooltip",3),this.setupFullWidthRowTooltip(e,t)}}),i=this.beans.userCompFactory;switch(this.rowType){case"FullWidthDetail":return function(e,t){return e.getCompDetailsFromGridOptions(hT,"agDetailCellRenderer",t,!0)}(i,o);case"FullWidthGroup":{const{value:e,valueFormatted:t}=this.beans.valueSvc.getValueForDisplay(void 0,this.rowNode,!0);return o.value=e,o.valueFormatted=t,function(e,t){return e.getCompDetailsFromGridOptions(dT,"agGroupRowRenderer",t,!0)}(i,o)}case"FullWidthLoading":return function(e,t){return e.getCompDetailsFromGridOptions(uT,"agLoadingCellRenderer",t,!0)}(i,o);default:return function(e,t){return e.getCompDetailsFromGridOptions(cT,void 0,t,!0)}(i,o)}}setupFullWidthRowTooltip(e,t){var n;this.fullWidthGui&&(this.tooltipFeature=null==(n=this.beans.tooltipSvc)?void 0:n.setupFullWidthRowTooltip(this.tooltipFeature,this,e,t))}addFullWidthRowDragging(e,t,n="",r){const{rowDragSvc:o,context:i}=this.beans;if(!o||!this.isFullWidth())return;const s=o.createRowDragComp(()=>n,this.rowNode,void 0,e,t,r);this.createBean(s,i),this.addDestroyFunc(()=>{this.destroyBean(s,i)})}onUiLevelChanged(){const e=l_(this.rowNode);if(this.rowLevel!=e){const t="ag-row-level-"+e,n="ag-row-level-"+this.rowLevel;for(const e of this.allRowGuis)e.rowComp.toggleCss(t,!0),e.rowComp.toggleCss(n,!1)}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getLastRow()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();if(this.firstRowOnPage!==e){this.firstRowOnPage=e;for(const t of this.allRowGuis)t.rowComp.toggleCss("ag-row-first",e)}if(this.lastRowOnPage!==t){this.lastRowOnPage=t;for(const e of this.allRowGuis)e.rowComp.toggleCss("ag-row-last",t)}}getAllCellCtrls(){if(0===this.leftCellCtrls.list.length&&0===this.rightCellCtrls.list.length)return this.centerCellCtrls.list;return[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){var e;const t=[];if(null==(e=this.beans.rowStyleSvc)||e.processClassesFromGridOptions(t,this.rowNode),t.length)for(const n of t)for(const e of this.allRowGuis)e.rowComp.toggleCss(n,!0)}postProcessRowClassRules(){var e;null==(e=this.beans.rowStyleSvc)||e.processRowClassRules(this.rowNode,e=>{for(const t of this.allRowGuis)t.rowComp.toggleCss(e,!0)},e=>{for(const t of this.allRowGuis)t.rowComp.toggleCss(e,!1)})}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,e=>e.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return"left"===e||"right"===e?e:null}getInitialRowClasses(e){var t,n;const r=this.getPinnedForContainer(e),o=this.isFullWidth(),{rowNode:i,beans:s}=this,a=[];a.push("ag-row"),a.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus"),this.fadeInAnimation[e]&&a.push("ag-opacity-zero"),a.push(i.rowIndex%2==0?"ag-row-even":"ag-row-odd"),i.isRowPinned()&&(a.push("ag-row-pinned"),(null==(t=s.pinnedRowModel)?void 0:t.isManual())&&a.push("ag-row-pinned-manual")),!i.isRowPinned()&&i.pinnedSibling&&a.push("ag-row-pinned-source"),i.isSelected()&&a.push("ag-row-selected"),i.footer&&a.push("ag-row-footer"),a.push("ag-row-level-"+this.rowLevel),i.stub&&a.push("ag-row-loading"),o&&a.push("ag-full-width-row"),null==(n=s.expansionSvc)||n.addExpandedCss(a,i),i.dragging&&a.push("ag-row-dragging");const{rowStyleSvc:l}=s;return l&&(l.processClassesFromGridOptions(a,i),l.preProcessRowClassRules(a,i)),a.push(this.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),this.isFirstRowOnPage()&&a.push("ag-row-first"),this.isLastRowOnPage()&&a.push("ag-row-last"),o&&("left"===r&&a.push("ag-cell-last-left-pinned"),"right"===r&&a.push("ag-cell-first-right-pinned")),a}processStylesFromGridOptions(){var e;return(null==(e=this.beans.rowStyleSvc)?void 0:e.processStylesFromGridOptions(this.rowNode))??this.emptyStyle}onRowSelected(e){var t;null==(t=this.beans.selectionSvc)||t.onRowCtrlSelected(this,e=>{e!==this.centerGui&&e!==this.fullWidthGui||this.announceDescription()},e)}announceDescription(){var e;null==(e=this.beans.selectionSvc)||e.announceAriaRowSelection(this.rowNode)}addHoverFunctionality(e){if(!this.active)return;const{element:t,compBean:n}=e,{rowNode:r,beans:o,gos:i}=this;n.addManagedListeners(t,{pointerenter:e=>{"mouse"===e.pointerType&&r.dispatchRowEvent("mouseEnter")},pointerleave:e=>{"mouse"===e.pointerType&&r.dispatchRowEvent("mouseLeave")}}),n.addManagedListeners(r,{mouseEnter:()=>{var e;(null==(e=o.dragSvc)?void 0:e.dragging)||i.get("suppressRowHoverHighlight")||(t.classList.add("ag-row-hover"),r.setHovered(!0))},mouseLeave:()=>{this.resetHoveredStatus(t)}})}resetHoveredStatus(e){const t=e?[e]:this.allRowGuis.map(e=>e.element);for(const n of t)n.classList.remove("ag-row-hover");this.rowNode.setHovered(!1)}roundRowTopToBounds(e){const t=this.beans.ctrlsSvc.getScrollFeature().getApproximateVScollPosition(),n=this.applyPaginationOffset(t.top,!0)-100,r=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(n,e),r)}forEachGui(e,t){if(e)t(e);else for(const n of this.allRowGuis)t(n)}isRowRendered(){return this.allRowGuis.length>0}onRowHeightChanged(e){if(null==this.rowNode.rowHeight)return;const t=this.rowNode.rowHeight,n=this.beans.environment.getDefaultRowHeight(),r=WA(this.gos)?zA(this.beans,this.rowNode).height:void 0,o=r?Math.min(n,r)-2+"px":void 0;this.forEachGui(e,e=>{e.element.style.height=`${t}px`,o&&e.element.style.setProperty("--ag-line-height",o)})}destroyFirstPass(e=!1){var t;this.active=!1;const{rowNode:n}=this;if(!e&&XA(this.gos)&&!n.sticky){if(null!=n.rowTop){const e=this.roundRowTopToBounds(n.rowTop);this.setRowTop(e)}else for(const e of this.allRowGuis)e.rowComp.toggleCss("ag-opacity-zero",!0)}(null==(t=this.fullWidthGui)?void 0:t.element.contains(KD(this.beans)))&&this.beans.focusSvc.attemptToRecoverFocus(),n.setHovered(!1);const r=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(r),this.beans.eventSvc.dispatchEvent(r),super.destroy()}destroySecondPass(){this.allRowGuis.length=0;const e=e=>{for(const t of e.list)t.destroy();return{list:[],map:{}}};this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,e=>{e.rowComp.toggleCss("ag-row-focus",this.rowFocused),e.rowComp.toggleCss("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const{focusSvc:e}=this.beans,t=e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses())}onPaginationChanged(){var e;const t=(null==(e=this.beans.pagination)?void 0:e.getCurrentPage())??0;this.paginationPage!==t&&(this.paginationPage=t,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,t=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;return e+this.beans.pageBounds.getPixelOffset()*(t?1:-1)}setRowTop(e){if(!this.printLayout&&BD(e)){const t=this.applyPaginationOffset(e),n=`${this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeight.getRealPixelPosition(t)}px`;this.setRowTopStyle(n)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";const t=this.rowNode;let n;if(t.sticky)n=t.stickyRowTop;else{const r=this.slideInAnimation[e]?this.roundRowTopToBounds(t.oldRowTop):t.rowTop,o=this.applyPaginationOffset(r);n=t.isRowPinned()?o:this.beans.rowContainerHeight.getRealPixelPosition(o)}return n+"px"}setRowTopStyle(e){for(const t of this.allRowGuis)this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform(`translateY(${e})`)}getCellCtrl(e,t=!1){let n=null;for(const r of this.getAllCellCtrls())r.column==e&&(n=r);if(null!=n||t)return n;for(const r of this.getAllCellCtrls())(null==r?void 0:r.getColSpanningList().indexOf(e))>=0&&(n=r);return n}onRowIndexChanged(){null!=this.rowNode.rowIndex&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}updateRowIndexes(e){var t,n;const r=this.rowNode.getRowIndexString();if(null===r)return;const o=((null==(t=this.beans.ctrlsSvc.getHeaderRowContainerCtrl())?void 0:t.getRowCount())??0)+((null==(n=this.beans.filterManager)?void 0:n.getHeaderRowCount())??0),i=this.rowNode.rowIndex%2==0,s=o+this.rowNode.rowIndex+1;this.forEachGui(e,e=>{e.rowComp.setRowIndex(r),e.rowComp.toggleCss("ag-row-even",i),e.rowComp.toggleCss("ag-row-odd",!i),JD(e.element,"rowindex",s)})}};function d_(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}var h_={moduleName:"KeyboardNavigation",version:PA,beans:[class extends YM{constructor(){super(),this.beanName="navigation",this.onPageDown=rA(this.onPageDown,100),this.onPageUp=rA(this.onPageUp,100)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){const n=e.key,r=e.altKey,o=e.ctrlKey||e.metaKey,i=!!this.beans.rangeSvc&&e.shiftKey,s=function(e,t){var n;return(null==(n=LI(e,t.target))?void 0:n.getFocusedCellPosition())??null}(this.gos,e);let a=!1;switch(n){case LT:case BT:o||r||(this.onHomeOrEndKey(n),a=!0);break;case ET:case MT:case DT:case AT:if(!s)return!1;!o||r||i||(this.onCtrlUpDownLeftRight(n,s),a=!0);break;case IT:case FT:o||r||(a=this.handlePageUpDown(n,s,t))}return a&&e.preventDefault(),a}handlePageUpDown(e,t,n){return n&&(t=this.beans.focusSvc.getFocusedCell()),!!t&&(e===FT?this.onPageUp(t):this.onPageDown(t),!0)}navigateTo({scrollIndex:e,scrollType:t,scrollColumn:n,focusIndex:r,focusColumn:o,isAsync:i,rowPinned:s}){const{scrollFeature:a}=this.gridBodyCon;BD(n)&&!n.isPinned()&&a.ensureColumnVisible(n),BD(e)&&a.ensureIndexVisible(e,t),i||a.ensureIndexVisible(r);const{focusSvc:l,rangeSvc:c}=this.beans;l.setFocusedCell({rowIndex:r,column:o,rowPinned:s,forceBrowserFocus:!0}),null==c||c.setRangeToCell({rowIndex:r,rowPinned:s,column:o})}onPageDown(e){const t=this.beans,n=d_(t),r=this.getViewportHeight(),{pageBounds:o,rowModel:i,rowAutoHeight:s}=t,a=o.getPixelOffset(),l=n.top+r,c=i.getRowIndexAtPixel(l+a);(null==s?void 0:s.active)?this.navigateToNextPageWithAutoHeight(e,c):this.navigateToNextPage(e,c)}onPageUp(e){const t=this.beans,n=d_(t),{pageBounds:r,rowModel:o,rowAutoHeight:i}=t,s=r.getPixelOffset(),a=n.top,l=o.getRowIndexAtPixel(a+s);(null==i?void 0:i.active)?this.navigateToNextPageWithAutoHeight(e,l,!0):this.navigateToNextPage(e,l,!0)}navigateToNextPage(e,t,n=!1){const{pageBounds:r,rowModel:o}=this.beans,i=this.getViewportHeight(),s=r.getFirstRow(),a=r.getLastRow(),l=r.getPixelOffset(),c=o.getRow(e.rowIndex),u=n?(null==c?void 0:c.rowHeight)-i-l:i-l,d=(null==c?void 0:c.rowTop)+u;let h,p=o.getRowIndexAtPixel(d+l);if(p===e.rowIndex){const r=n?-1:1;t=p=e.rowIndex+r}n?(h="bottom",p<s&&(p=s),t<s&&(t=s)):(h="top",p>a&&(p=a),t>a&&(t=a)),this.isRowTallerThanView(o.getRow(p))&&(t=p,h="top"),this.navigateTo({scrollIndex:t,scrollType:h,scrollColumn:null,focusIndex:p,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,n=!1){this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{const r=this.getNextFocusIndexForAutoHeight(e,n);this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:r,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){const n=t?-1:1,r=this.getViewportHeight(),{pageBounds:o,rowModel:i}=this.beans,s=o.getLastRow();let a=0,l=e.rowIndex;for(;l>=0&&l<=s;){const e=i.getRow(l);if(e){const t=e.rowHeight??0;if(a+t>r)break;a+=t}l+=n}return Math.max(0,Math.min(l,s))}getViewportHeight(){const e=this.beans,t=d_(e),n=this.beans.scrollVisibleSvc.getScrollbarWidth();let r=t.bottom-t.top;return e.ctrlsSvc.get("center").isHorizontalScrollShowing()&&(r-=n),r}isRowTallerThanView(e){if(!e)return!1;const t=e.rowHeight;return"number"==typeof t&&t>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const n=this.beans.cellNavigation.getNextCellToFocus(e,t,!0),r=this.getNormalisedPosition(n),{rowIndex:o,rowPinned:i,column:s}=r??n,a=s;this.navigateTo({scrollIndex:o,scrollType:null,scrollColumn:a,focusIndex:o,focusColumn:a,rowPinned:i})}onHomeOrEndKey(e){const t=e===LT,{visibleCols:n,pageBounds:r,rowModel:o}=this.beans,i=n.allCols,s=t?r.getFirstRow():r.getLastRow(),a=o.getRow(s);if(!a)return;const l=(t?i:[...i].reverse()).find(e=>!e.isSuppressNavigable(a));l&&this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:l,focusIndex:s,focusColumn:l})}onTabKeyDown(e,t){const n=t.shiftKey,r=this.tabToNextCellCommon(e,n,t),o=this.beans,{ctrlsSvc:i,pageBounds:s,focusSvc:a,gos:l}=o;if(!1===r)if(n){const{rowIndex:n,rowPinned:r}=e.getRowPosition();(r?0===n:n===s.getFirstRow())&&(0===l.get("headerHeight")||yL(o)?wL(o,!0,!0):(t.preventDefault(),a.focusPreviousFromFirstCell(t)))}else e instanceof a_&&e.focusCell(!0),(a.focusOverlay(!1)||wL(o,n))&&t.preventDefault();else r?t.preventDefault():null===r&&i.get("gridCtrl").allowFocusForNextCoreContainer(n)}tabToNextCell(e,t){const n=this.beans,{focusSvc:r,rowRenderer:o}=n,i=r.getFocusedCell();if(!i)return!1;let s=cB(n,i);return!(!s&&(s=o.getRowByPosition(i),!(null==s?void 0:s.isFullWidth())))&&!!this.tabToNextCellCommon(s,e,t,"api")}tabToNextCellCommon(e,t,n,r="ui"){var o;const{editSvc:i,focusSvc:s}=this.beans;let a;const l=e instanceof a_?e:null==(o=e.getAllCellCtrls())?void 0:o[0];return a=(null==i?void 0:i.isEditing())?null==i?void 0:i.moveToNextCell(l,t,n,r):this.moveToNextCellNotEditing(e,t,n),null===a?a:a||!!s.focusedHeader}moveToNextCellNotEditing(e,t,n){const r=this.beans.visibleCols.allCols;let o;if(e instanceof u_){if(o={...e.getRowPosition(),column:t?r[0]:gN(r)},this.gos.get("embedFullWidthRows")&&n){const t=e.findFullWidthInfoForEvent(n);t&&(o.column=t.column)}}else o=e.getFocusedCellPosition();const i=this.findNextCellToFocusOn(o,{backwards:t,startEditing:!1});if(!1===i)return null;if(i instanceof a_)i.focusCell(!0);else if(i)return this.tryToFocusFullWidthRow(i,t);return BD(i)}findNextCellToFocusOn(e,{backwards:t,startEditing:n,skipToNextEditableCell:r}){let o=e;const i=this.beans,{cellNavigation:s,gos:a,focusSvc:l,rowRenderer:c,rangeSvc:u}=i;for(;;){e!==o&&(e=o),t||(o=this.getLastCellOfColSpan(o)),o=s.getNextTabbedCell(o,t);const d=a.getCallback("tabToNextCell");if(BD(d)){const r=d({backwards:t,editing:n,previousCellPosition:e,nextCellPosition:o||null});if(!0===r)o=e;else{if(!1===r)return!1;o={rowIndex:r.rowIndex,column:r.column,rowPinned:r.rowPinned}}}if(!o)return null;if(o.rowIndex<0){const e=CL(i);return l.focusHeaderPosition({headerPosition:{headerRowIndex:e+o.rowIndex,column:o.column},fromCell:!0}),null}const h="fullRow"===a.get("editType");if(n&&(!h||r)){if(!this.isCellEditable(o))continue}this.ensureCellVisible(o);const p=cB(i,o);if(!p){const e=c.getRowByPosition(o);if(!e||!e.isFullWidth()||n)continue;return{...e.getRowPosition(),column:null==o?void 0:o.column}}if(!s.isSuppressNavigable(p.column,p.rowNode))return p.setFocusedCellPosition(o),null==u||u.setRangeToCell(o),p}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return!!t&&e.column.isCellEditable(t)}lookupRowNodeForCell({rowIndex:e,rowPinned:t}){const{pinnedRowModel:n,rowModel:r}=this.beans;return"top"===t?null==n?void 0:n.getPinnedTopRow(e):"bottom"===t?null==n?void 0:n.getPinnedBottomRow(e):r.getRow(e)}navigateToNextCell(e,t,n,r){let o=n,i=!1;const s=this.beans,{cellNavigation:a,focusSvc:l,gos:c}=s;for(;o&&(o===n||!this.isValidNavigateCell(o));)c.get("enableRtl")?t===ET&&(o=this.getLastCellOfColSpan(o)):t===MT&&(o=this.getLastCellOfColSpan(o)),o=a.getNextCellToFocus(t,o),i=HD(o);if(i&&e&&e.key===DT&&(o={rowIndex:-1,rowPinned:null,column:n.column}),r){const r=c.getCallback("navigateToNextCell");if(BD(r)){const i=r({key:t,previousCellPosition:n,nextCellPosition:o||null,event:e});o=BD(i)?{rowPinned:i.rowPinned,rowIndex:i.rowIndex,column:i.column}:null}}if(!o)return;if(o.rowIndex<0){const t=CL(s);return void l.focusHeaderPosition({headerPosition:{headerRowIndex:t+o.rowIndex,column:n.column},event:e||void 0,fromCell:!0})}const u=this.getNormalisedPosition(o);u?this.focusPosition(u):this.tryToFocusFullWidthRow(o)}getNormalisedPosition(e){var t;if(!!(null==(t=this.beans.spannedRowRenderer)?void 0:t.getCellByPosition(e)))return e;this.ensureCellVisible(e);const n=cB(this.beans,e);return n?(e=n.getFocusedCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){const{visibleCols:n,rowRenderer:r,focusSvc:o,eventSvc:i}=this.beans,s=n.allCols,a=r.getRowByPosition(e);if(!(null==a?void 0:a.isFullWidth()))return!1;const l=o.getFocusedCell(),c={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?gN(s):s[0])};this.focusPosition(c);const u=null==t?null!=l&&function(e,t){switch(e.rowPinned){case"top":if("top"!==t.rowPinned)return!0;break;case"bottom":if("bottom"!==t.rowPinned)return!1;break;default:if(BD(t.rowPinned))return"top"!==t.rowPinned}return e.rowIndex<t.rowIndex}(c,l):t;return i.dispatchEvent({type:"fullWidthRowFocused",rowIndex:c.rowIndex,rowPinned:c.rowPinned,column:c.column,isFullWidthCell:!0,fromBelow:u}),!0}focusPosition(e){const{focusSvc:t,rangeSvc:n}=this.beans;t.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),null==n||n.setRangeToCell(e)}isValidNavigateCell(e){return!!lB(this.beans,e)}getLastCellOfColSpan(e){const t=cB(this.beans,e);if(!t)return e;const n=t.getColSpanningList();return 1===n.length?e:{rowIndex:e.rowIndex,column:gN(n),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=YA(this.gos),n=this.beans.rowModel.getRow(e.rowIndex),r=t&&(null==n?void 0:n.sticky),{scrollFeature:o}=this.gridBodyCon;!r&&HD(e.rowPinned)&&o.ensureIndexVisible(e.rowIndex),e.column.isPinned()||o.ensureColumnVisible(e.column)}ensureColumnVisible(e){const t=this.gridBodyCon.scrollFeature;e.isPinned()||t.ensureColumnVisible(e)}ensureRowVisible(e){this.gridBodyCon.scrollFeature.ensureIndexVisible(e)}},class extends YM{constructor(){super(...arguments),this.beanName="cellNavigation"}wireBeans(e){this.rowSpanSvc=e.rowSpanSvc}getNextCellToFocus(e,t,n=!1){return n?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const n=e===DT,r=e===AT,o=e===ET;let i,s;const{pageBounds:a,gos:l,visibleCols:c,pinnedRowModel:u}=this.beans,{rowPinned:d}=t;if(n||r)s=d&&u?n?0:"top"===d?u.getPinnedTopRowCount()-1:u.getPinnedBottomRowCount()-1:n?a.getFirstRow():a.getLastRow(),i=t.column;else{const e=l.get("enableRtl");s=t.rowIndex;i=(o!==e?c.allCols:[...c.allCols].reverse()).find(e=>this.isCellGoodToFocusOn({rowIndex:s,rowPinned:null,column:e}))}return i?{rowIndex:s,rowPinned:d,column:i}:null}getNextCellToFocusWithoutCtrlPressed(e,t){let n=t,r=!1;for(;!r;){switch(e){case DT:n=this.getCellAbove(n);break;case AT:n=this.getCellBelow(n);break;case MT:n=this.gos.get("enableRtl")?this.getCellToLeft(n):this.getCellToRight(n);break;case ET:n=this.gos.get("enableRtl")?this.getCellToRight(n):this.getCellToLeft(n);break;default:n=null,TA(8,{key:e})}r=!n||this.isCellGoodToFocusOn(n)}return n}isCellGoodToFocusOn(e){const t=e.column;let n;const{pinnedRowModel:r,rowModel:o}=this.beans;switch(e.rowPinned){case"top":n=null==r?void 0:r.getPinnedTopRow(e.rowIndex);break;case"bottom":n=null==r?void 0:r.getPinnedBottomRow(e.rowIndex);break;default:n=o.getRow(e.rowIndex)}if(!n)return!1;return!this.isSuppressNavigable(t,n)}getCellToLeft(e){if(!e)return null;const t=this.beans.visibleCols.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.beans.visibleCols.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellBelow(e){var t;if(!e)return null;const n=(null==(t=this.rowSpanSvc)?void 0:t.getCellEnd(e))??e,r=dB(this.beans,n,!0);return r?{rowIndex:r.rowIndex,column:e.column,rowPinned:r.rowPinned}:null}getCellAbove(e){var t;if(!e)return null;const n=(null==(t=this.rowSpanSvc)?void 0:t.getCellStart(e))??e,r=uB(this.beans,{rowIndex:n.rowIndex,rowPinned:n.rowPinned},!0);return r?{rowIndex:r.rowIndex,column:e.column,rowPinned:r.rowPinned}:null}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const{visibleCols:t,pagination:n}=this.beans,r=t.allCols;let o=e.rowIndex,i=e.rowPinned,s=t.getColAfter(e.column);if(!s){s=r[0];const t=dB(this.beans,e,!0);if(HD(t))return null;if(!t.rowPinned&&!((null==n?void 0:n.isRowInPage(t.rowIndex))??1))return null;o=t?t.rowIndex:null,i=t?t.rowPinned:null}return{rowIndex:o,column:s,rowPinned:i}}getNextTabbedCellBackwards(e){const{beans:t}=this,{visibleCols:n,pagination:r}=t,o=n.allCols;let i=e.rowIndex,s=e.rowPinned,a=n.getColBefore(e.column);if(!a){a=gN(o);const n=uB(t,{rowIndex:e.rowIndex,rowPinned:e.rowPinned},!0);if(HD(n))return null;if(!n.rowPinned&&!((null==r?void 0:r.isRowInPage(n.rowIndex))??1))return null;i=n?n.rowIndex:null,s=n?n.rowPinned:null}return{rowIndex:i,column:a,rowPinned:s}}isSuppressNavigable(e,t){const{suppressNavigable:n}=e.colDef;if("boolean"==typeof n)return n;if("function"==typeof n){return n(e.createColumnFunctionCallbackParams(t))}return!1}},class extends YM{constructor(){super(...arguments),this.beanName="headerNavigation",this.currentHeaderRowWithoutSpan=-1}postConstruct(){const e=this.beans;e.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl});const t=qD(e);this.addManagedElementListeners(t,{mousedown:()=>{this.currentHeaderRowWithoutSpan=-1}})}getHeaderPositionForColumn(e,t){let n;const{colModel:r,colGroupSvc:o,ctrlsSvc:i}=this.beans;if("string"==typeof e?(n=r.getCol(e),n||(n=(null==o?void 0:o.getColumnGroup(e))??null)):n=e,!n)return null;const s=i.getHeaderRowContainerCtrl(),a="filter"===gN((null==s?void 0:s.getAllCtrls())||[]).type,l=CL(this.beans)-1;let c=-1,u=n;for(;u;)c++,u=u.getParent();let d=c;return t&&a&&d===l-1&&d++,-1===d?null:{headerRowIndex:d,column:n}}navigateVertically(e,t){const{focusSvc:n,visibleCols:r}=this.beans,{focusedHeader:o}=n;if(!o)return!1;const{headerRowIndex:i}=o,s=o.column,a=CL(this.beans),l=this.getHeaderRowType(i),c=r.headerGroupRowCount;let{headerRowIndex:u,column:d,headerRowIndexWithoutSpan:h}="UP"===e?function(e,t,n){const r=n-1;if("filter"!==e){const e=t instanceof cN&&t.isSpanHeaderHeight();let n=t.getParent();for(;n&&(n.getProvidedColumnGroup().getLevel()>r||e&&n.isPadding());)n=n.getParent();if(n)return e?{column:n,headerRowIndex:n.getProvidedColumnGroup().getLevel(),headerRowIndexWithoutSpan:r}:{column:n,headerRowIndex:r,headerRowIndexWithoutSpan:r}}return{column:t,headerRowIndex:r,headerRowIndexWithoutSpan:r}}(l,s,i):function(e,t,n){const r=t+1,o={column:e,headerRowIndex:r,headerRowIndexWithoutSpan:r};if(e instanceof bI){if(r>=n)return{column:e.getDisplayedLeafColumns()[0],headerRowIndex:n,headerRowIndexWithoutSpan:r};let t=e.getDisplayedChildren()[0];if(t instanceof bI&&t.isPadding()){const e=t.getDisplayedLeafColumns()[0];e.isSpanHeaderHeight()&&(t=e)}o.column=t;t instanceof cN&&t.isSpanHeaderHeight()&&(o.headerRowIndex=n,o.headerRowIndexWithoutSpan=r)}return o}(s,i,c),p=!1;return u<0&&(u=0,d=s,p=!0),u>=a?(u=-1,this.currentHeaderRowWithoutSpan=-1):void 0!==h&&(this.currentHeaderRowWithoutSpan=h),!(!p&&!d)&&n.focusHeaderPosition({headerPosition:{headerRowIndex:u,column:d},allowUserOverride:!0,event:t})}navigateHorizontally(e,t=!1,n){const{focusSvc:r,gos:o}=this.beans,i={...r.focusedHeader};let s,a;-1!==this.currentHeaderRowWithoutSpan?i.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=i.headerRowIndex,"LEFT"===e!==o.get("enableRtl")?(a="Before",s=this.findHeader(i,a)):(a="After",s=this.findHeader(i,a));const l=o.getCallback("tabToNextHeader");if(t&&l){const e=r.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:s,direction:a});if(e){const{headerRowIndex:e}=r.focusedHeader||{};null!=e&&e!=i.headerRowIndex&&(this.currentHeaderRowWithoutSpan=e)}return e}return s||!t?r.focusHeaderPosition({headerPosition:s,direction:a,fromTab:t,allowUserOverride:!0,event:n}):this.focusNextHeaderRow(i,a,n)}focusNextHeaderRow(e,t,n){const r=this.beans,o=e.headerRowIndex;let i,s=null;const a=CL(r),l=this.beans.visibleCols.allCols;if("Before"===t){if(o<=0)return!1;s=gN(l),i=o-1,this.currentHeaderRowWithoutSpan-=1}else s=l[0],i=o+1,this.currentHeaderRowWithoutSpan<a?this.currentHeaderRowWithoutSpan+=1:this.currentHeaderRowWithoutSpan=-1;let{column:c,headerRowIndex:u}=jH(this.beans,s,i);return u>=a&&(u=-1),r.focusSvc.focusHeaderPosition({headerPosition:{column:c,headerRowIndex:u},direction:t,fromTab:!0,allowUserOverride:!0,event:n})}scrollToColumn(e,t="After"){if(e.getPinned())return;let n;if(yI(e)){const r=e.getDisplayedLeafColumns();n="Before"===t?gN(r):r[0]}else n=e;this.gridBodyCon.scrollFeature.ensureColumnVisible(n)}findHeader(e,t){const{colGroupSvc:n,visibleCols:r}=this.beans;let o=e.column;if(o instanceof bI){const e=o.getDisplayedLeafColumns();o="Before"===t?e[0]:e[e.length-1]}const i="Before"===t?r.getColBefore(o):r.getColAfter(o);if(!i)return;const s=r.headerGroupRowCount;if(e.headerRowIndex>=s)return{headerRowIndex:e.headerRowIndex,column:i};const a=null==n?void 0:n.getColGroupAtLevel(i,e.headerRowIndex);if(!a){return{headerRowIndex:i instanceof cN&&i.isSpanHeaderHeight()?r.headerGroupRowCount:e.headerRowIndex,column:i}}return a.isPadding()&&i.isSpanHeaderHeight()?{headerRowIndex:r.headerGroupRowCount,column:i}:{headerRowIndex:e.headerRowIndex,column:a??i}}getHeaderRowType(e){const t=this.beans.ctrlsSvc.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}}],apiFunctions:{getFocusedCell:function(e){return e.focusSvc.getFocusedCell()},clearFocusedCell:function(e){return e.focusSvc.clearFocusedCell()},setFocusedCell:function(e,t,n,r){e.focusSvc.setFocusedCell({rowIndex:t,column:n,rowPinned:r,forceBrowserFocus:!0})},setFocusedHeader:function(e,t,n=!1){var r;const o=null==(r=e.headerNavigation)?void 0:r.getHeaderPositionForColumn(t,n);o&&e.focusSvc.focusHeaderPosition({headerPosition:o})},tabToNextCell:function(e,t){var n;return(null==(n=e.navigation)?void 0:n.tabToNextCell(!1,t))??!1},tabToPreviousCell:function(e,t){var n;return(null==(n=e.navigation)?void 0:n.tabToNextCell(!0,t))??!1}}},p_=class extends YM{constructor(e,t){super(),this.isLeft=e,this.elements=t,this.getWidth=e?()=>this.beans.pinnedCols.leftWidth:()=>this.beans.pinnedCols.rightWidth}postConstruct(){this.addManagedEventListeners({[(this.isLeft?"left":"right")+"PinnedWidthChanged"]:this.onPinnedWidthChanged.bind(this)})}onPinnedWidthChanged(){const e=this.getWidth(),t=e>0;for(const n of this.elements)n&&(uM(n,t),kM(n,e))}},f_={moduleName:"PinnedColumn",version:PA,beans:[class extends YM{constructor(){super(...arguments),this.beanName="pinnedCols"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl});const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const{gos:e,visibleCols:t,eventSvc:n}=this.beans,r=GA(e,"print"),o=r?0:t.getColsLeftWidth(),i=r?0:t.getDisplayedColumnsRightWidth();o!=this.leftWidth&&(this.leftWidth=o,n.dispatchEvent({type:"leftPinnedWidthChanged"})),i!=this.rightWidth&&(this.rightWidth=i,n.dispatchEvent({type:"rightPinnedWidthChanged"}))}keepPinnedColumnsNarrowerThanViewport(){const e=gM(this.gridBodyCtrl.eBodyViewport);if(e<=50)return;const t=this.getPinnedColumnsOverflowingViewport(e-50),n=this.gos.getCallback("processUnpinnedColumns"),{columns:r,hasLockedPinned:o}=t;let i=r;if(i.length||o){if(n){i=n({columns:i,viewportWidth:e})}(null==i?void 0:i.length)&&(i=i.filter(e=>!kN(e)),this.setColsPinned(i,null,"viewportSizeFeature"))}}createPinnedWidthFeature(e,...t){return new p_(e,t)}setColsPinned(e,t,n){const{colModel:r,colAnimation:o,visibleCols:i,gos:s}=this.beans;if(!r.cols)return;if(!(null==e?void 0:e.length))return;if(GA(s,"print"))return void TA(37);let a;null==o||o.start(),a=!0===t||"left"===t?"left":"right"===t?"right":null;const l=[];for(const c of e){if(!c)continue;const e=r.getCol(c);e&&(e.getPinned()!==a&&(this.setColPinned(e,a),l.push(e)))}l.length&&(i.refresh(n),HN(this.eventSvc,l,n)),null==o||o.finish()}initCol(e){const{pinned:t,initialPinned:n}=e.colDef;void 0!==t?this.setColPinned(e,t):this.setColPinned(e,n)}setColPinned(e,t){e.pinned=!0===t||"left"===t?"left":"right"===t?"right":null,e.dispatchStateUpdatedEvent("pinned")}setupHeaderPinnedWidth(e){const{scrollVisibleSvc:t}=this.beans;if(null==e.pinned)return;const n="left"===e.pinned,r="right"===e.pinned;e.hidden=!0;const o=()=>{const o=n?this.leftWidth:this.rightWidth;if(null==o)return;const i=0==o,s=e.hidden!==i,a=this.gos.get("enableRtl"),l=t.getScrollbarWidth(),c=t.verticalScrollShowing&&(a&&n||!a&&r)?o+l:o;e.comp.setPinnedContainerWidth(`${c}px`),e.comp.setDisplayed(!i),s&&(e.hidden=i,e.refresh())};e.addManagedEventListeners({leftPinnedWidthChanged:o,rightPinnedWidthChanged:o,scrollVisibilityChanged:o,scrollbarWidthChanged:o})}getHeaderResizeDiff(e,t){if(t.getPinned()){const{leftWidth:t,rightWidth:n}=this,r=gM(this.beans.ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(t+n+e>r){if(!(r>t+n))return 0;e=r-t-n}}return e}getPinnedColumnsOverflowingViewport(e){const t=(this.rightWidth??0)+(this.leftWidth??0);let n=!1;if(t<e)return{columns:[],hasLockedPinned:n};const{visibleCols:r}=this.beans,o=[...r.leftCols],i=[...r.rightCols];let s=0,a=0;const l=[];let c=t-0-e;for(;(a<o.length||s<i.length)&&c>0;){if(s<i.length){const e=i[s++];if(e.colDef.lockPinned){n=!0;continue}c-=e.getActualWidth(),l.push(e)}if(a<o.length&&c>0){const e=o[a++];if(e.colDef.lockPinned){n=!0;continue}c-=e.getActualWidth(),l.push(e)}}return{columns:l,hasLockedPinned:n}}}],css:[".ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top{min-width:0;overflow:hidden;position:relative}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;height:100%;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}"]},g_={moduleName:"Aria",version:PA,beans:[class extends YM{constructor(){super(),this.beanName="ariaAnnounce",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.lastAnnouncement="",this.updateAnnouncement=nA(this,this.updateAnnouncement.bind(this),200)}postConstruct(){const e=this.beans,t=qD(e),n=this.descriptionContainer=t.createElement("div");n.classList.add("ag-aria-description-container"),oM(n,"polite"),ZD(n,"relevant","additions text"),function(e,t){ZD(e,"atomic",t)}(n,!0),e.eGridDiv.appendChild(n)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.handleAnnouncementUpdate(e)},50)}handleAnnouncementUpdate(e){if(!this.isAlive()||!this.descriptionContainer)return;let t=e;null!=t&&""!=t.replace(/[ .]/g,"")?(this.lastAnnouncement===t&&(t=`${t}​`),this.lastAnnouncement=t,this.descriptionContainer.textContent=t):this.lastAnnouncement=""}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(yM(e),e.remove()),this.descriptionContainer=null,this.pendingAnnouncements.clear()}}]},m_="ag-delay-render",v_={moduleName:"ColumnDelayRender",version:PA,beans:[class extends YM{constructor(){super(...arguments),this.beanName="colDelayRenderSvc",this.hideRequested=!1,this.alreadyRevealed=!1,this.timesRetried=0,this.requesters=new Set}hideColumns(e){this.alreadyRevealed||this.requesters.has(e)||(this.requesters.add(e),this.hideRequested||(this.beans.ctrlsSvc.whenReady(this,e=>{e.gridBodyCtrl.eGridBody.classList.add(m_)}),this.hideRequested=!0))}revealColumns(e){if(this.alreadyRevealed||!this.isAlive())return;if(this.requesters.delete(e),this.requesters.size>0)return;const{renderStatus:t,ctrlsSvc:n}=this.beans;if(t){if(!t.areHeaderCellsRendered()&&this.timesRetried<5)return this.timesRetried++,void setTimeout(()=>this.revealColumns(e));this.timesRetried=0}n.getGridBodyCtrl().eGridBody.classList.remove(m_),this.alreadyRevealed=!0}}],css:[":where(.ag-delay-render){.ag-cell,.ag-header-cell,.ag-header-group-cell,.ag-row,.ag-spanned-cell-wrapper{visibility:hidden}}"]};var y_={tag:"div",cls:"ag-overlay",role:"presentation",children:[{tag:"div",cls:"ag-overlay-panel",role:"presentation",children:[{tag:"div",ref:"eOverlayWrapper",cls:"ag-overlay-wrapper",role:"presentation"}]}]},b_=class extends JN{constructor(){super(y_),this.eOverlayWrapper=qN,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeCssClass=null,this.elToFocusAfter=null,this.registerCSS(".ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-loading-wrapper{pointer-events:all}.ag-overlay-loading-center{background:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);padding:var(--ag-spacing)}")}handleKeyDown(e){if(e.key!==PT||e.defaultPrevented||SI(e))return;const t=this.beans;if(dF(t,this.eOverlayWrapper,0,e.shiftKey))return;let n=!1;n=e.shiftKey?t.focusSvc.focusGridView({column:gN(t.visibleCols.allCols),backwards:!0,canFocusOverlay:!1}):wL(t,!1),n&&e.preventDefault()}updateLayoutClasses(e,t){const n=this.eOverlayWrapper.classList,{AUTO_HEIGHT:r,NORMAL:o,PRINT:i}=PI;n.toggle(r,t.autoHeight),n.toggle(o,t.normal),n.toggle(i,t.print)}postConstruct(){this.createManagedBean(new jI(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.beans.overlays.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeCssClass&&t.toggle(this.activeCssClass,!1),this.activeCssClass=e,t.toggle(e,!0)}showOverlay(e,t,n,r){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),n&&this.isGridFocused()){const e=KD(this.beans);e&&!function(e){const t=KD(e);return null===t||t===qD(e).body}(this.beans)&&(this.elToFocusAfter=e)}e.then(t=>{if(this.activePromise===e){if(this.activePromise=null,t){if(this.activeOverlay!==t&&(this.eOverlayWrapper.appendChild(t.getGui()),this.activeOverlay=t,r)){const e=t;this.updateListenerDestroyFunc=this.addManagedPropertyListener(r,({currentValue:t})=>{var n;null==(n=e.refresh)||n.call(e,nN(this.gos,{...t??{}}))})}n&&this.isGridFocused()&&uF(this.eOverlayWrapper)}}else this.activeOverlay!==t&&(this.destroyBean(t),t=null)})}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`)}destroyActiveOverlay(){var e;this.activePromise=null;const t=this.activeOverlay;if(!t)return;let n=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,n&&!this.isGridFocused()&&(n=null);const r=this.updateListenerDestroyFunc;r&&(r(),this.updateListenerDestroyFunc=null),this.destroyBean(t),yM(this.eOverlayWrapper),null==(e=null==n?void 0:n.focus)||e.call(n,{preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}isGridFocused(){const e=KD(this.beans);return!!e&&this.beans.eGridDiv.contains(e)}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.beans.overlays.setOverlayWrapperComp(void 0),super.destroy()}},w_={selector:"AG-OVERLAY-WRAPPER",component:b_},C_={moduleName:"Overlay",version:PA,userComponents:{agLoadingOverlay:class extends BL{init(){var e;const t=LD(null==(e=this.gos.get("overlayLoadingTemplate"))?void 0:e.trim());if(this.setTemplate(t??HL),!t){const e=this.getLocaleTextFunc()("loadingOoo","Loading...");this.getGui().textContent=e,this.beans.ariaAnnounce.announceValue(e,"overlay")}}},agNoRowsOverlay:class extends BL{init(){var e;const t=LD(null==(e=this.gos.get("overlayNoRowsTemplate"))?void 0:e.trim());if(this.setTemplate(t??_L),!t){const e=this.getLocaleTextFunc()("noRowsToShow","No Rows To Show");this.getGui().textContent=e,this.beans.ariaAnnounce.announceValue(e,"overlay")}}}},apiFunctions:{showLoadingOverlay:function(e){var t;null==(t=e.overlays)||t.showLoadingOverlay()},showNoRowsOverlay:function(e){var t;null==(t=e.overlays)||t.showNoRowsOverlay()},hideOverlay:function(e){var t;null==(t=e.overlays)||t.hideOverlay()}},beans:[class extends YM{constructor(){super(...arguments),this.beanName="overlays",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}postConstruct(){this.isClientSide=HA(this.gos),this.isServerSide=!this.isClientSide&&_A(this.gos);const e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.refreshWrapperPadding.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.eWrapper=e,this.updateOverlayVisibility()}isVisible(){return 0!==this.state&&!!this.eWrapper}isExclusive(){return 1===this.state&&!!this.eWrapper}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos,t=e.get("loading");(t||void 0===t&&!e.get("suppressLoadingOverlay"))&&this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1;const e=this.gos;e.get("loading")||e.get("suppressNoRowsOverlay")||this.doShowNoRowsOverlay()}hideOverlay(){this.showInitialOverlay=!1,this.gos.get("loading")?TA(99):this.doHideOverlay()}getOverlayWrapperSelector(){return w_}getOverlayWrapperCompClass(){return b_}updateOverlayVisibility(){if(!this.eWrapper)return void(this.state=0);const{state:e,isClientSide:t,isServerSide:n,beans:{gos:r,colModel:o,rowModel:i}}=this;let s=this.gos.get("loading");void 0!==s&&(this.showInitialOverlay=!1),this.showInitialOverlay&&void 0===s&&!r.get("suppressLoadingOverlay")&&(s=!r.get("columnDefs")||!o.ready||!r.get("rowData")&&t),s?1!==e&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,t&&i.isEmpty()&&!r.get("suppressNoRowsOverlay")?2!==e&&this.doShowNoRowsOverlay():(1===e||!n&&0!==e)&&this.doHideOverlay())}doShowLoadingOverlay(){var e,t;this.eWrapper&&(this.state=1,this.showOverlay((e=this.beans.userCompFactory,t=nN(this.gos,{}),e.getCompDetailsFromGridOptions(aT,"agLoadingOverlay",t,!0)),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){var e,t;this.eWrapper&&(this.state=2,this.showOverlay((e=this.beans.userCompFactory,t=nN(this.gos,{}),e.getCompDetailsFromGridOptions(lT,"agNoRowsOverlay",t,!0)),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.eWrapper&&(this.state=0,this.eWrapper.hideOverlay(),this.updateExclusive())}showOverlay(e,t,n){var r;const o=(null==e?void 0:e.newAgStackInstance())??null;null==(r=this.eWrapper)||r.showOverlay(o,t,this.isExclusive(),n),this.refreshWrapperPadding()}updateExclusive(){const e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventSvc.dispatchEvent({type:"overlayExclusiveChanged"})}refreshWrapperPadding(){const e=this.eWrapper;if(!e)return;let t=0;if(2===this.state){const e=this.beans.ctrlsSvc.get("gridHeaderCtrl");t=(null==e?void 0:e.headerHeight)||0}this.wrapperPadding!==t&&(this.wrapperPadding=t,e.updateOverlayWrapperPaddingTop(t))}}]},x_=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.rowNode.id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}}getRow(e){if(null==(null==e?void 0:e.id))return null;const t=this.entriesMap[e.id];if(!t)return null;this.removeFromCache(t),t.setCached(!1);return t.rowNode!=e?null:t}has(e){return null!=this.entriesMap[e.id]}removeRow(e){const t=e.id,n=this.entriesMap[t];delete this.entriesMap[t],yN(this.entriesList,n)}removeFromCache(e){const t=e.rowNode.id;delete this.entriesMap[t],yN(this.entriesList,e)}getEntries(){return this.entriesList}};function S_(e){if(!e)return;const t={top:{},bottom:{},normal:{}};for(const n of e){const e=n.id;switch(n.rowPinned){case"top":t.top[e]=n;break;case"bottom":t.bottom[e]=n;break;default:t.normal[e]=n}}return t}function k_(e,t){const n=e.id;switch(e.rowPinned){case"top":return null!=t.top[n];case"bottom":return null!=t.bottom[n];default:return null!=t.normal[n]}}var P_={moduleName:"Sort",version:PA,beans:[class extends YM{constructor(){super(...arguments),this.beanName="sortSvc"}progressSort(e,t,n){const r=this.getNextSortDirection(e);this.setSortForColumn(e,r,t,n)}progressSortFromEvent(e,t){const n="ctrl"===this.gos.get("multiSortKey")?t.ctrlKey||t.metaKey:t.shiftKey;this.progressSort(e,n,"uiColumnSorted")}setSortForColumn(e,t,n,r){var o;"asc"!==t&&"desc"!==t&&(t=null);const{gos:i,showRowGroupCols:s}=this.beans;let a=[e];if(ZA(i)&&e.getColDef().showRowGroup){const t=null==(o=null==s?void 0:s.getSourceColumnsForGroupColumn)?void 0:o.call(s,e),n=null==t?void 0:t.filter(e=>e.isSortable());n&&(a=[e,...n])}for(const c of a)this.setColSort(c,t,r);const l=[];if(!((n||i.get("alwaysMultiSort"))&&!i.get("suppressMultiSort"))){const e=this.clearSortBarTheseColumns(a,r);l.push(...e)}this.updateSortIndex(e),l.push(...a),this.dispatchSortChangedEvents(r,l)}updateSortIndex(e){const{gos:t,colModel:n,showRowGroupCols:r}=this.beans,o=ZA(t),i=null==r?void 0:r.getShowRowGroupCol(e.getId()),s=o&&i||e,a=this.getColumnsWithSortingOrdered();n.forAllCols(e=>this.setColSortIndex(e,null));const l=a.filter(e=>(!o||!e.getColDef().showRowGroup)&&e!==s);(s.getSort()?[...l,s]:l).forEach((e,t)=>this.setColSortIndex(e,t))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){let e=!1;return this.beans.colModel.forAllCols(t=>{t.getSort()&&(e=!0)}),e}dispatchSortChangedEvents(e,t){const n={type:"sortChanged",source:e};t&&(n.columns=t),this.eventSvc.dispatchEvent(n)}clearSortBarTheseColumns(e,t){const n=[];return this.beans.colModel.forAllCols(r=>{e.includes(r)||(r.getSort()&&n.push(r),this.setColSort(r,void 0,t))}),n}getNextSortDirection(e){const t=e.getColDef().sortingOrder??this.gos.get("sortingOrder")??NH,n=t.indexOf(e.getSort()),r=n<0,o=n==t.length-1;return r||o?t[0]:t[n+1]}getIndexedSortMap(){const{gos:e,colModel:t,showRowGroupCols:n,rowGroupColsSvc:r}=this.beans;let o=[];if(t.forAllCols(e=>{e.getSort()&&o.push(e)}),t.isPivotMode()){const t=ZA(e);o=o.filter(e=>{const r=!!e.getAggFunc(),o=!e.isPrimary(),i=t?null==n?void 0:n.getShowRowGroupCol(e.getId()):e.getColDef().showRowGroup;return r||o||i})}const i=(null==r?void 0:r.columns.filter(e=>!!e.getSort()))??[],s={};o.forEach((e,t)=>s[e.getId()]=t),o.sort((e,t)=>{const n=e.getSortIndex(),r=t.getSortIndex();if(null!=n&&null!=r)return n-r;if(null==n&&null==r){return s[e.getId()]>s[t.getId()]?1:-1}return null==r?-1:1});const a=ZA(e)&&!!i.length;a&&(o=[...new Set(o.map(e=>(null==n?void 0:n.getShowRowGroupCol(e.getId()))??e))]);const l=new Map;if(o.forEach((e,t)=>l.set(e,t)),a)for(const c of i){const e=n.getShowRowGroupCol(c.getId());l.set(c,l.get(e))}return l}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([,e],[,t])=>e-t).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){const t=ZA(this.gos),n=!!e.getColDef().showRowGroup;return t&&n}getDisplaySortForColumn(e){var t;const n=null==(t=this.beans.showRowGroupCols)?void 0:t.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!(null==n?void 0:n.length))return e.getSort();const r=null!=e.getColDef().field||!!e.getColDef().valueGetter?[e,...n]:n,o=r[0].getSort();return r.every(e=>e.getSort()==o)?o:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}setupHeader(e,t,n){let r=0;e.addManagedListeners(t,{movingChanged:()=>{r=Date.now()}}),n&&e.addManagedElementListeners(n,{click:e=>{const n=t.isMoving(),o=Date.now();n||o-r<50||this.progressSortFromEvent(t,e)}});const o=()=>{var n;const r=t.getSort();if(e.toggleCss("ag-header-cell-sorted-asc","asc"===r),e.toggleCss("ag-header-cell-sorted-desc","desc"===r),e.toggleCss("ag-header-cell-sorted-none",!r),t.getColDef().showRowGroup){const r=null==(n=this.beans.showRowGroupCols)?void 0:n.getSourceColumnsForGroupColumn(t),o=!(null==r?void 0:r.every(e=>t.getSort()==e.getSort()));e.toggleCss("ag-header-cell-sorted-mixed",o)}};e.addManagedEventListeners({sortChanged:o,columnRowGroupChanged:o})}initCol(e){const{sort:t,initialSort:n,sortIndex:r,initialSortIndex:o}=e.colDef;void 0!==t?"asc"!==t&&"desc"!==t||(e.sort=t):"asc"!==n&&"desc"!==n||(e.sort=n),void 0!==r?null!==r&&(e.sortIndex=r):null!==o&&(e.sortIndex=o)}updateColSort(e,t,n){void 0!==t&&("desc"===t||"asc"===t?this.setColSort(e,t,n):this.setColSort(e,void 0,n))}setColSort(e,t,n){e.sort!==t&&(e.sort=t,e.dispatchColEvent("sortChanged",n)),e.dispatchStateUpdatedEvent("sort")}setColSortIndex(e,t){e.sortIndex=t,e.dispatchStateUpdatedEvent("sortIndex")}createSortIndicator(e){return new MH(e)}getSortIndicatorSelector(){return AH}},class extends YM{constructor(){super(...arguments),this.beanName="rowNodeSorter"}postConstruct(){const{gos:e}=this;this.isAccentedSort=e.get("accentedSort"),this.primaryColumnsSortGroups=ZA(e),this.addManagedPropertyListener("accentedSort",e=>this.isAccentedSort=e.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=ZA(e))}doFullSort(e,t){const n=e.map((e,t)=>({currentPos:t,rowNode:e}));return n.sort(this.compareRowNodes.bind(this,t)),n.map(e=>e.rowNode)}compareRowNodes(e,t,n){const r=t.rowNode,o=n.rowNode;for(let i=0,s=e.length;i<s;i++){const t=e[i],n="desc"===t.sort,s=this.getValue(r,t.column),a=this.getValue(o,t.column);let l;const c=this.getComparator(t,r);l=c?c(s,a,r,o,n):GD(s,a,this.isAccentedSort);if(!isNaN(l)&&0!==l)return"asc"===t.sort?l:-1*l}return t.currentPos-n.currentPos}getComparator(e,t){const n=e.column,r=n.getColDef().comparator;if(null!=r)return r;if(!n.getColDef().showRowGroup)return;const o=!t.group&&n.getColDef().field;if(!o)return;const i=this.beans.colModel.getColDefCol(o);return i?i.getColDef().comparator:void 0}getValue(e,t){var n;const{valueSvc:r,colModel:o,showRowGroupCols:i,gos:s}=this.beans;if(!this.primaryColumnsSortGroups)return r.getValue(t,e,!1);if(e.rowGroupColumn===t){if(JA(s,o.isPivotActive())){const n=e.data?e:(e=>{for(;null==e?void 0:e.length;){const t=e[0];if(t.data)return t;e=t.childrenAfterGroup}})(e.childrenAfterGroup);return n&&r.getValue(t,n,!1)}const a=null==i?void 0:i.getShowRowGroupCol(t.getId());if(!a)return;return null==(n=e.groupData)?void 0:n[a.getId()]}return e.group&&t.getColDef().showRowGroup?void 0:r.getValue(t,e,!1)}}],apiFunctions:{onSortChanged:function(e){var t;null==(t=e.sortSvc)||t.onSortChanged("api")}},userComponents:{agSortIndicator:MH},icons:{sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"}},j_={moduleName:"Expression",version:PA,beans:[class extends YM{constructor(){super(...arguments),this.beanName="expressionSvc",this.cache={}}evaluate(e,t){if("string"==typeof e)return this.evaluateExpression(e,t);FA(15,{expression:e})}evaluateExpression(e,t){try{const n=this.createExpressionFunction(e);return n(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(n){return FA(16,{expression:e,params:t,e:n}),null}}createExpressionFunction(e){const t=this.cache;if(t[e])return t[e];const n=this.createFunctionBody(e),r=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",n);return t[e]=r,r}createFunctionBody(e){return e.includes("return")?e:"return "+e+";"}}]},O_={moduleName:"ChangeDetection",version:PA,beans:[class extends YM{constructor(){super(...arguments),this.beanName="changeDetectionSvc",this.clientSideRowModel=null}postConstruct(){const{gos:e,rowModel:t}=this.beans;HA(e)&&(this.clientSideRowModel=t),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){const{gos:t,rowRenderer:n}=this.beans;if("paste"===e.source||t.get("suppressChangeDetection"))return;const r=e.node,o=[r],i=this.clientSideRowModel,s=null==i?void 0:i.rootNode;if(s&&!r.isRowPinned()){const n=t.get("aggregateOnlyChangedColumns"),a=new pB(n,s);a.addParentNode(r.parent,[e.column]),i.doAggregate(a),a.forEachChangedNodeDepthFirst(e=>{o.push(e),e.sibling&&o.push(e.sibling)})}n.refreshCells({rowNodes:o})}}]},R_={moduleName:"CommunityCore",version:PA,beans:[class extends YM{constructor(){super(...arguments),this.beanName="gridDestroySvc",this.destroyCalled=!1}destroy(){var e;if(this.destroyCalled)return;const{stateSvc:t,ctrlsSvc:n,context:r}=this.beans;this.eventSvc.dispatchEvent({type:"gridPreDestroyed",state:(null==t?void 0:t.getState())??{}}),this.destroyCalled=!0,null==(e=n.get("gridCtrl"))||e.destroyGridUi(),r.destroy(),super.destroy()}},class extends YM{constructor(){super(),this.beanName="apiFunctionSvc",this.api=new sB,this.fns={...oB,dispatchEvent:iB},this.preDestroyLink="";const{api:e}=this;for(const t of Object.keys(rB))e[t]=this.makeApi(t)[t]}postConstruct(){this.preDestroyLink=this.beans.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){var n;const{fns:r,beans:o}=this;r!==oB&&(r[e]=(null==(n=null==o?void 0:o.validation)?void 0:n.validateApiFunction(e,t))??t)}makeApi(e){return{[e]:(...t)=>{const{beans:n,fns:{[e]:r}}=this;return r?r(n,...t):this.apiNotFound(e)}}}apiNotFound(e){const{beans:t,gos:n,preDestroyLink:r}=this;if(t){const t=rB[e];n.assertModuleRegistered(t,`api.${e}`)&&TA(27,{fnName:e,module:t})}else TA(26,{fnName:e,preDestroyLink:r})}destroy(){super.destroy(),this.fns=oB,this.beans=null}},class extends sI{constructor(){super(...arguments),this.agGridDefaults={},this.agGridDefaultOverrides={},this.jsComps={},this.selectors={},this.icons={}}postConstruct(){const e=this.gos.get("components");if(null!=e)for(const t of Object.keys(e))this.jsComps[t]=e[t]}registerModule(e){const{icons:t,userComponents:n,dynamicBeans:r,selectors:o}=e;if(n){const e=(e,t,n,r)=>{this.agGridDefaults[e]=t,(n||r)&&(this.agGridDefaultOverrides[e]={params:n,processParams:r})};for(const t of Object.keys(n)){let r=n[t];if(mT(r)&&(r=r.getComp(this.beans)),"object"==typeof r){const{classImp:n,params:o,processParams:i}=r;e(t,n,o,i)}else e(t,r)}}this.registerDynamicBeans(r);for(const i of o??[])this.selectors[i.selector]=i;if(t)for(const i of Object.keys(t))this.icons[i]=t[i]}getUserComponent(e,t){var n;const r=(e,t,n,r)=>({componentFromFramework:t,component:e,params:n,processParams:r}),{frameworkOverrides:o}=this.beans,i=o.frameworkComponent(t,this.gos.get("components"));if(null!=i)return r(i,!0);const s=this.jsComps[t];if(s){return r(s,o.isFrameworkComponent(s))}const a=this.agGridDefaults[t];if(a){const e=this.agGridDefaultOverrides[t];return r(a,!1,null==e?void 0:e.params,null==e?void 0:e.processParams)}return null==(n=this.beans.validation)||n.missingUserComponent(e,t,this.agGridDefaults,this.jsComps),null}getSelector(e){return this.selectors[e]}getIcon(e){return this.icons[e]}getDynamicError(e,t){var n;return t?LA(279,{name:e}):(null==(n=this.beans.validation)?void 0:n.missingDynamicBean(e))??LA(256)}},class extends YM{constructor(){super(...arguments),this.beanName="userCompFactory"}wireBeans(e){this.agCompUtils=e.agCompUtils,this.registry=e.registry,this.frameworkCompWrapper=e.frameworkCompWrapper,this.gridOptions=e.gridOptions}getCompDetailsFromGridOptions(e,t,n,r=!1){return this.getCompDetails(this.gridOptions,e,t,n,r)}getCompDetails(e,t,n,r,o=!1){var i;const{name:s,cellRenderer:a}=t;let l,c,{compName:u,jsComp:d,fwComp:h,paramsFromSelector:p,popupFromSelector:f,popupPositionFromSelector:g}=function(e,t,n,r){const{name:o}=n;let i,s,a,l,c,u;if(t){const n=t,d=n[o+"Selector"],h=d?d(r):null,p=t=>{"string"==typeof t?i=t:null!=t&&!0!==t&&(e.isFrameworkComponent(t)?a=t:s=t)};h?(p(h.component),l=h.params,c=h.popup,u=h.popupPosition):p(n[o])}return{compName:i,jsComp:s,fwComp:a,paramsFromSelector:l,popupFromSelector:c,popupPositionFromSelector:u}}(this.beans.frameworkOverrides,e,t,r);const m=e=>{const t=this.registry.getUserComponent(s,e);t&&(d=t.componentFromFramework?void 0:t.component,h=t.componentFromFramework?t.component:void 0,l=t.params,c=t.processParams)};var v;if(null!=u&&m(u),null==d&&null==h&&null!=n&&m(n),!d||!a||(v=d)&&v.prototype&&"getGui"in v.prototype||(d=null==(i=this.agCompUtils)?void 0:i.adaptFunction(t,d)),!d&&!h){const{validation:e}=this.beans;return void(!o||u===n&&n?n&&!e&&FA(146,{comp:n}):u?(null==e?void 0:e.isProvidedUserComp(u))||FA(50,{compName:u}):n?e||FA(260,{...this.gos.getModuleErrorParams(),propName:s,compName:n}):FA(216,{name:s}))}const y=this.mergeParams(e,t,r,p,l,c),b=null==d,w=d??h;return{componentFromFramework:b,componentClass:w,params:y,type:t,popupFromSelector:f,popupPositionFromSelector:g,newAgStackInstance:()=>this.newAgStackInstance(w,b,y,t)}}newAgStackInstance(e,t,n,r){var o;let i;i=!t?new e:this.frameworkCompWrapper.wrap(e,r.mandatoryMethods,r.optionalMethods,r),this.createBean(i);const s=null==(o=i.init)?void 0:o.call(i,n);return null==s?QN.resolve(i):s.then(()=>i)}mergeParams(e,t,n,r=null,o,i){const s={...n,...o},a=null==e?void 0:e[t.name+"Params"];if("function"==typeof a){iA(s,a(n))}else"object"==typeof a&&iA(s,a);return iA(s,r),i?i(s):s}},class extends YM{constructor(){super(...arguments),this.beanName="rowContainerHeight",this.scrollY=0,this.uiBodyHeight=0}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=function(){if(void 0!==ST)return ST;if(!document.body)return-1;let e=1e6;const t=KT()?6e6:1e9,n=document.createElement("div");for(document.body.appendChild(n);;){const r=2*e;if(n.style.height=r+"px",r>t||n.clientHeight!==r)break;e=r}return n.remove(),ST=e,e}(),hA(this.gos,"RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}updateOffset(){if(!this.stretching)return;const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;hA(this.gos,`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventSvc.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t="number"==typeof e?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventSvc.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=null!=e&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=e/(this.modelHeight-this.getUiBodyHeight());return this.maxScrollY*t}},class extends YM{constructor(){super(...arguments),this.beanName="visibleCols",this.colsAndGroupsMap={},this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.headerGroupRowCount=0,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.isBodyWidthDirty=!0}refresh(e,t=!1){const{colFlex:n,colModel:r,colGroupSvc:o,colViewport:i,selectionColSvc:s}=this.beans;t||this.buildTrees(r,o),null==o||o.updateOpenClosedVisibility(),this.leftCols=TB(this.treeLeft),this.centerCols=TB(this.treeCenter),this.rightCols=TB(this.treeRight),null==s||s.refreshVisibility(this.leftCols,this.centerCols,this.rightCols),this.joinColsAriaOrder(r),this.joinCols(),this.headerGroupRowCount=this.getHeaderRowCount(),this.setLeftValues(e),this.autoHeightCols=this.allCols.filter(e=>e.isAutoHeight()),null==n||n.refreshFlexedColumns(),this.updateBodyWidths(),this.setFirstRightAndLastLeftPinned(r,this.leftCols,this.rightCols,e),i.checkViewportColumns(!1),this.eventSvc.dispatchEvent({type:"displayedColumnsChanged",source:e})}getHeaderRowCount(){if(!this.gos.get("hidePaddedHeaderRows"))return this.beans.colModel.cols.treeDepth;let e=0;for(const t of this.allCols){let n=t.getParent();for(;n;){if(!n.isPadding()){const t=n.getProvidedColumnGroup().getLevel()+1;t>e&&(e=t);break}n=n.getParent()}}return e}updateBodyWidths(){const e=CN(this.centerCols),t=CN(this.leftCols),n=CN(this.rightCols);this.isBodyWidthDirty=this.bodyWidth!==e;(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==n)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=n,this.eventSvc.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventSvc.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e,t,n,r){let o,i;this.gos.get("enableRtl")?(o=t?t[0]:null,i=n?gN(n):null):(o=t?gN(t):null,i=n?n[0]:null);for(const s of e.getCols())s.setLastLeftPinned(s===o,r),s.setFirstRightPinned(s===i,r)}buildTrees(e,t){const n=e.getColsToShow(),r=n.filter(e=>"left"==e.getPinned()),o=n.filter(e=>"right"==e.getPinned()),i=n.filter(e=>"left"!=e.getPinned()&&"right"!=e.getPinned()),s=new $N,a=e=>t?t.createColumnGroups(e):e.columns;this.treeLeft=a({columns:r,idCreator:s,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=a({columns:o,idCreator:s,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=a({columns:i,idCreator:s,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.ariaOrderColumns=[]}joinColsAriaOrder(e){const t=e.getCols(),n=[],r=[],o=[];for(const i of t){const e=i.getPinned();e?!0===e||"left"===e?n.push(i):o.push(i):r.push(i)}this.ariaOrderColumns=n.concat(r).concat(o)}getAriaColIndex(e){let t;return t=yI(e)?e.getLeafColumns()[0]:e,this.ariaOrderColumns.indexOf(t)+1}setLeftValuesOfGroups(){for(const e of[this.treeLeft,this.treeRight,this.treeCenter])for(const t of e)if(yI(t)){t.checkLeft()}}setLeftValuesOfCols(e){const{colModel:t}=this.beans;if(!t.getColDefCols())return;const n=t.getCols().slice(0),r=this.gos.get("enableRtl");for(const o of[this.leftCols,this.rightCols,this.centerCols]){if(r){let t=CN(o);for(const n of o)t-=n.getActualWidth(),n.setLeft(t,e)}else{let t=0;for(const n of o)n.setLeft(t,e),t+=n.getActualWidth()}AB(n,o)}for(const o of n)o.setLeft(null,e)}joinCols(){this.gos.get("enableRtl")?this.allCols=this.rightCols.concat(this.centerCols).concat(this.leftCols):this.allCols=this.leftCols.concat(this.centerCols).concat(this.rightCols)}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}isColDisplayed(e){return this.allCols.indexOf(e)>=0}getLeftColsForRow(e){const{leftCols:t,beans:{colModel:n}}=this;return n.colSpanActive?this.getColsForRow(e,t):t}getRightColsForRow(e){const{rightCols:t,beans:{colModel:n}}=this;return n.colSpanActive?this.getColsForRow(e,t):t}getColsForRow(e,t,n,r){const o=[];let i=null;for(let s=0;s<t.length;s++){const a=t[s],l=t.length-s,c=Math.min(a.getColSpan(e),l),u=[a];if(c>1){const e=c-1;for(let n=1;n<=e;n++)u.push(t[s+n]);s+=e}let d;if(n){d=!1;for(const e of u)n(e)&&(d=!0)}else d=!0;if(d){if(0===o.length&&i){!!r&&r(a)&&o.push(i)}o.push(a)}i=a}return o}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getColBefore(e){const t=this.allCols,n=t.indexOf(e);return n>0?t[n-1]:null}isPinningLeft(){return this.leftCols.length>0}isPinningRight(){return this.rightCols.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=e=>{this.colsAndGroupsMap[e.getUniqueId()]=e};NB(this.treeCenter,!1,e),NB(this.treeLeft,!1,e),NB(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["leftCols","centerCols","rightCols"];e&&t.reverse();for(let n=0;n<t.length;n++){const r=this[t[n]];if(r.length)return e?gN(r):r[0]}return null}getColAfter(e){const t=this.allCols,n=t.indexOf(e);return n<t.length-1?t[n+1]:null}getColsLeftWidth(){return CN(this.leftCols)}getDisplayedColumnsRightWidth(){return CN(this.rightCols)}isColAtEdge(e,t){const n=this.allCols;if(!n.length)return!1;const r="first"===t;let o;if(yI(e)){const t=e.getDisplayedLeafColumns();if(!t.length)return!1;o=r?t[0]:gN(t)}else o=e;return(r?n[0]:gN(n))===o}},class extends aI{postConstruct(){const{globalListener:e,globalSyncListener:t}=this.beans;e&&this.addGlobalListener(e,!0),t&&this.addGlobalListener(t,!1)}},class extends YM{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.instanceId=BH++,this.gridReadyFired=!1,this.queueEvents=[],this.propEventSvc=new ID,this.globalEventHandlerFactory=e=>(t,n)=>{if(!this.isAlive())return;const r=OH.has(t);if(r&&!e||!r&&e)return;if(!function(e){return!!RH[e]}(t))return;const o=(e,t)=>{const n=RH[e],r=this.gridOptions[n];"function"==typeof r&&this.beans.frameworkOverrides.wrapOutgoing(()=>r(t))};if(this.gridReadyFired)o(t,n);else if("gridReady"===t){o(t,n),this.gridReadyFired=!0;for(const e of this.queueEvents)o(e.eventName,e.event);this.queueEvents=[]}else this.queueEvents.push({eventName:t,event:n})}}wireBeans(e){this.gridOptions=e.gridOptions,this.validation=e.validation,this.api=e.gridApi,this.gridId=e.context.getId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){this.validateGridOptions(this.gridOptions),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory().bind(this),!0),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propEventSvc.setFrameworkOverrides(this.beans.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:e})=>{this.updateGridOptions({options:e,force:!0,source:"optionsUpdated"})}})}destroy(){super.destroy(),this.queueEvents=[]}get(e){return this.gridOptions[e]??uA[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return BD(this.gridOptions[e])}mergeGridCommonParams(e){if(e){return t=>e(this.addCommon(t))}return e}updateGridOptions({options:e,force:t,source:n="api"}){const r={id:LH++,properties:[]},o=[],{gridOptions:i,validation:s}=this;for(const a of Object.keys(e)){const l=lA.applyGlobalGridOption(a,e[a]);null==s||s.warnOnInitialPropertyUpdate(n,a);const c=t||"object"==typeof l&&"api"===n,u=i[a];if(c||u!==l){i[a]=l;const e={type:a,currentValue:l,previousValue:u,changeSet:r,source:n};o.push(e)}}this.validateGridOptions(this.gridOptions),r.properties=o.map(e=>e.type);for(const a of o)hA(this,`Updated property ${a.type} from`,a.previousValue," to ",a.currentValue),this.propEventSvc.dispatchEvent(a)}addPropertyEventListener(e,t){this.propEventSvc.addEventListener(e,t)}removePropertyEventListener(e,t){this.propEventSvc.removeEventListener(e,t)}getDomDataKey(){return this.domDataKey}addCommon(e){return e.api=this.api,e.context=this.gridOptionsContext,e}validateOptions(e,t){for(const n of Object.keys(e)){const r=e[n];if(null==r||!1===r)continue;let o=t[n];"function"==typeof o&&(o=o(e,this.gridOptions,this.beans)),o&&this.assertModuleRegistered(o,n)}}validateGridOptions(e){var t;this.validateOptions(e,IH),null==(t=this.validation)||t.processGridOptions(e)}validateColDef(e,t,n){var r,o;!n&&(null==(r=this.beans.dataTypeSvc)?void 0:r.isColPendingInference(t))||(this.validateOptions(e,FH),null==(o=this.validation)||o.validateColDef(e))}assertModuleRegistered(e,t){const n=Array.isArray(e)?e.some(e=>this.isModuleRegistered(e)):this.isModuleRegistered(e);return n||FA(200,{...this.getModuleErrorParams(),moduleName:e,reasonOrId:t}),n}getModuleErrorParams(){return{gridId:this.gridId,gridScoped:kA(),rowModelType:this.get("rowModelType"),isUmd:!1}}isModuleRegistered(e){return SA(e,this.gridId,this.get("rowModelType"))}setInstanceDomData(e){e[HH]=this.instanceId}isElementInThisInstance(e){let t=e;for(;t;){const e=t[HH];if(BD(e)){return e===this.instanceId}t=t.parentElement}return!1}},class extends YM{constructor(){super(...arguments),this.beanName="colModel",this.pivotMode=!1,this.ready=!1,this.changeEventsDispatching=!1}postConstruct(){this.pivotMode=this.gos.get("pivotMode"),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents","rowNumbers","hidePaddedHeaderRows"],e=>this.refreshAll(jN(e.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],this.recreateColumnDefs.bind(this)),this.addManagedPropertyListener("pivotMode",e=>this.setPivotMode(this.gos.get("pivotMode"),jN(e.source)))}createColsFromColDefs(e){var t,n,r;const{beans:o}=this,{valueCache:i,colAutosize:s,rowGroupColsSvc:a,pivotColsSvc:l,valueColsSvc:c,visibleCols:u,eventSvc:d,groupHierarchyColSvc:h}=o,p=this.colDefs?VN(o,e):void 0;null==i||i.expire();const f=null==(t=this.colDefCols)?void 0:t.list,g=null==(n=this.colDefCols)?void 0:n.tree,m=EN(o,this.colDefs,!0,g,e);xN(o,null==(r=this.colDefCols)?void 0:r.tree,m.columnTree);const v=m.columnTree,y=m.treeDepth,b=function(e){const t=[],n=e=>{for(let r=0;r<e.length;r++){const o=e[r];lN(o)?t.push(o):uN(o)&&n(o.getChildren())}};return n(e),t}(v),w={};for(const C of b)w[C.getId()]=C;this.colDefCols={tree:v,treeDepth:y,list:b,map:w},this.createColumnsForService([h],this.colDefCols,e),null==a||a.extractCols(e,f),null==l||l.extractCols(e,f),null==c||c.extractCols(e,f),this.ready=!0,this.refreshCols(!0,e),u.refresh(e),d.dispatchEvent({type:"columnEverythingChanged",source:e}),p&&(this.changeEventsDispatching=!0,p(),this.changeEventsDispatching=!1),d.dispatchEvent({type:"newColumnsLoaded",source:e}),"gridInitializing"===e&&(null==s||s.applyAutosizeStrategy())}refreshCols(e,t){var n;if(!this.colDefCols)return;const r=null==(n=this.cols)?void 0:n.tree;this.saveColOrder();const{autoColSvc:o,selectionColSvc:i,rowNumbersSvc:s,quickFilter:a,pivotResultCols:l,showRowGroupCols:c,rowAutoHeight:u,visibleCols:d,colViewport:h,eventSvc:p}=this.beans,f=this.selectCols(l,this.colDefCols);this.createColumnsForService([o,i,s],f,t);const g=(m=this.gos,this.showingPivotResult?!m.get("enableStrictPivotColumnOrder"):m.get("maintainColumnOrder"));var m;e&&!g||this.restoreColOrder(f),this.positionLockedCols(f),null==c||c.refresh(),null==a||a.refreshCols(),this.setColSpanActive(),null==u||u.setAutoHeightActive(f),d.clear(),h.clear();!mN(r,this.cols.tree)&&p.dispatchEvent({type:"gridColumnsChanged"})}createColumnsForService(e,t,n){for(const r of e)r&&(r.createColumns(t,e=>{this.lastOrder=e(this.lastOrder),this.lastPivotOrder=e(this.lastPivotOrder)},n),r.addColumns(t))}selectCols(e,t){const n=(null==e?void 0:e.getPivotResultCols())??null;this.showingPivotResult=null!=n;const{map:r,list:o,tree:i,treeDepth:s}=n??t;if(this.cols={list:o.slice(),map:{...r},tree:i.slice(),treeDepth:s},n){n.list.some(e=>{var t;return void 0!==(null==(t=this.cols)?void 0:t.map[e.getColId()])})||(this.lastPivotOrder=null)}return this.cols}getColsToShow(){if(!this.cols)return[];const{valueColsSvc:e,selectionColSvc:t,gos:n}=this.beans,r=this.isPivotMode()&&!this.showingPivotResult,o=null==t?void 0:t.isSelectionColumnEnabled(),i=n.get("rowNumbers"),s=null==e?void 0:e.columns;return this.cols.list.filter(e=>{const t=function(e){return e.getId().startsWith(wN)}(e);if(r){const n=null==s?void 0:s.includes(e);return t||n||o&&SN(e)||i&&kN(e)}return t||e.isVisible()})}refreshAll(e){this.ready&&(this.refreshCols(!1,e),this.beans.visibleCols.refresh(e))}setColsVisible(e,t=!1,n){GN(this.beans,{state:e.map(e=>({colId:"string"==typeof e?e:e.getColId(),hide:!t}))},n)}restoreColOrder(e){const t=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!t)return;const n=t.filter(t=>null!=e.map[t.getId()]);if(0===n.length)return;if(n.length===e.list.length)return void(e.list=n);const r=e=>{const t=e.getOriginalParent();if(!t)return!1;return t.getChildren().length>1||r(t)};if(!n.some(e=>r(e))){const t=new Set(n);for(const r of e.list)t.has(r)||n.push(r);return void(e.list=n)}const o=new Map;for(let d=0;d<n.length;d++){const e=n[d];o.set(e,d)}const i=e.list.filter(e=>!o.has(e));if(0===i.length)return void(e.list=n);const s=(e,t)=>{const n=t?t.getOriginalParent():e.getOriginalParent();if(!n)return null;let r=null,i=null;for(const s of n.getChildren())if(s!==t&&s!==e){if(s instanceof cN){const e=o.get(s);if(null==e)continue;(null==r||r<e)&&(r=e,i=s);continue}s.forEachLeafColumn(e=>{const t=o.get(e);null!=t&&(null==r||r<t)&&(r=t,i=e)})}return null==i?s(e,n):i},a=[],l=new Map;for(const d of i){const e=s(d,null);if(null==e){a.push(d);continue}const t=l.get(e);void 0===t?l.set(e,d):Array.isArray(t)?t.push(d):l.set(e,[t,d])}const c=new Array(e.list.length);let u=c.length-1;for(let d=a.length-1;d>=0;d--)c[u--]=a[d];for(let d=n.length-1;d>=0;d--){const e=n[d],t=l.get(e);if(t)if(Array.isArray(t))for(let n=t.length-1;n>=0;n--){const e=t[n];c[u--]=e}else c[u--]=t;c[u--]=e}e.list=c}positionLockedCols(e){e.list=IN(e.list,this.gos)}saveColOrder(){var e,t;this.showingPivotResult?this.lastPivotOrder=(null==(e=this.cols)?void 0:e.list)??null:this.lastOrder=(null==(t=this.cols)?void 0:t.list)??null}getColumnDefs(e){var t,n;return this.colDefCols&&(null==(n=this.beans.colDefFactory)?void 0:n.getColumnDefs(this.colDefCols.list,this.showingPivotResult,this.lastOrder,(null==(t=this.cols)?void 0:t.list)??[],e))}setColSpanActive(){var e;this.colSpanActive=!!(null==(e=this.cols)?void 0:e.list.some(e=>null!=e.getColDef().colSpan))}isPivotMode(){return this.pivotMode}setPivotMode(e,t){if(e===this.pivotMode)return;if(this.pivotMode=e,!this.ready)return;this.refreshCols(!1,t);const{visibleCols:n,eventSvc:r}=this.beans;n.refresh(t),r.dispatchEvent({type:"columnPivotModeChanged"})}isPivotActive(){var e;const t=null==(e=this.beans.pivotColsSvc)?void 0:e.columns;return this.pivotMode&&!!(null==t?void 0:t.length)}recreateColumnDefs(e){var t;if(!this.cols)return;null==(t=this.beans.autoColSvc)||t.updateColumns(e);const n=jN(e.source);this.createColsFromColDefs(n)}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){var e;xN(this.beans,null==(e=this.colDefCols)?void 0:e.tree),super.destroy()}getColTree(){var e;return(null==(e=this.cols)?void 0:e.tree)??[]}getColDefColTree(){var e;return(null==(e=this.colDefCols)?void 0:e.tree)??[]}getColDefCols(){var e;return(null==(e=this.colDefCols)?void 0:e.list)??null}getCols(){var e;return(null==(e=this.cols)?void 0:e.list)??[]}forAllCols(e){var t,n,r,o,i;const{pivotResultCols:s,autoColSvc:a,selectionColSvc:l,groupHierarchyColSvc:c}=this.beans;vN(null==(t=this.colDefCols)?void 0:t.list,e),vN(null==(n=null==a?void 0:a.columns)?void 0:n.list,e),vN(null==(r=null==l?void 0:l.columns)?void 0:r.list,e),vN(null==(o=null==c?void 0:c.columns)?void 0:o.list,e),vN(null==(i=null==s?void 0:s.getPivotResultCols())?void 0:i.list,e)}getColsForKeys(e){return e?e.map(e=>this.getCol(e)).filter(e=>null!=e):[]}getColDefCol(e){var t;return(null==(t=this.colDefCols)?void 0:t.list)?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return null==e?null:this.getColFromCollection(e,this.cols)}getColById(e){var t;return(null==(t=this.cols)?void 0:t.map[e])??null}getColFromCollection(e,t){if(null==t)return null;const{map:n,list:r}=t;if("string"==typeof e&&n[e])return n[e];for(let a=0;a<r.length;a++)if(ON(r[a],e))return r[a];const{autoColSvc:o,selectionColSvc:i,groupHierarchyColSvc:s}=this.beans;return(null==o?void 0:o.getColumn(e))??(null==i?void 0:i.getColumn(e))??(null==s?void 0:s.getColumn(e))??null}},class extends YM{constructor(){super(...arguments),this.beanName="pageBounds",this.pixelOffset=0}getFirstRow(){var e;return(null==(e=this.topRowBounds)?void 0:e.rowIndex)??-1}getLastRow(){var e;return(null==(e=this.bottomRowBounds)?void 0:e.rowIndex)??-1}getCurrentPageHeight(){const{topRowBounds:e,bottomRowBounds:t}=this;return e&&t?Math.max(t.rowTop+t.rowHeight-e.rowTop,0):0}getCurrentPagePixelRange(){const{topRowBounds:e,bottomRowBounds:t}=this;return{pageFirstPixel:(null==e?void 0:e.rowTop)??0,pageLastPixel:t?t.rowTop+t.rowHeight:0}}calculateBounds(e,t){const{rowModel:n}=this.beans,r=n.getRowBounds(e);r&&(r.rowIndex=e),this.topRowBounds=r;const o=n.getRowBounds(t);o&&(o.rowIndex=t),this.bottomRowBounds=o,this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){var e;const t=(null==(e=this.topRowBounds)?void 0:e.rowTop)??0;this.pixelOffset!==t&&(this.pixelOffset=t,this.eventSvc.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},class extends YM{constructor(){super(...arguments),this.beanName="pageBoundsListener"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventSvc.dispatchEvent({type:"paginationChanged",animate:(null==e?void 0:e.animate)??!1,newData:(null==e?void 0:e.newData)??!1,newPage:(null==e?void 0:e.newPage)??!1,newPageSize:(null==e?void 0:e.newPageSize)??!1,keepRenderedRows:(null==e?void 0:e.keepRenderedRows)??!1})}calculatePages(){const{pageBounds:e,pagination:t,rowModel:n}=this.beans;t?t.calculatePages():e.calculateBounds(0,n.getRowCount()-1)}},class extends YM{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{for(const e of this.getAllCellCtrls())e.onCellSelectionChanged()},t=()=>{for(const e of this.getAllCellCtrls())e.updateRangeBordersIfRangeCount()},n=()=>{this.eventSvc.addListener("cellSelectionChanged",e),this.eventSvc.addListener("columnMoved",t),this.eventSvc.addListener("columnPinned",t),this.eventSvc.addListener("columnVisible",t)},r=()=>{this.eventSvc.removeListener("cellSelectionChanged",e),this.eventSvc.removeListener("columnMoved",t),this.eventSvc.removeListener("columnPinned",t),this.eventSvc.removeListener("columnVisible",t)};this.addDestroyFunc(()=>r()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{QA(this.gos)?n():r()});QA(this.gos)&&n()}}wireBeans(e){this.pageBounds=e.pageBounds,this.colModel=e.colModel,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusSvc=e.focusSvc,this.rowContainerHeight=e.rowContainerHeight,this.ctrlsSvc=e.ctrlsSvc,this.editSvc=e.editSvc}postConstruct(){this.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),pinnedRowsChanged:this.onPinnedRowsChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",e=>this.onSuppressCellFocusChanged(e.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.addManagedPropertyListener("cellSelection",({currentValue:e,previousValue:t})=>{(!t&&e||t&&!e)&&this.redrawRows()});const{stickyRowSvc:e,gos:t,showRowGroupCols:n}=this.beans;if(n&&this.addManagedPropertyListener("showOpenedGroup",()=>{const e=n.getShowRowGroupCols();e.length&&this.refreshCells({columns:e,force:!0})}),e)this.stickyRowFeature=e.createStickyRowFeature(this,this.createRowCon.bind(this),this.destroyRowCtrls.bind(this));else{const e=this.gridBodyCtrl;e.setStickyTopHeight(0),e.setStickyBottomHeight(0)}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=GA(t,"print"),this.embedFullWidthRows=this.printLayout||t.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=null!=e?e:3;this.cachedRowCtrls=new x_(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){var e;return(null==(e=this.stickyRowFeature)?void 0:e.stickyTopRowCtrls)??[]}getStickyBottomRowCtrls(){var e;return(null==(e=this.stickyRowFeature)?void 0:e.stickyBottomRowCtrls)??[]}updateAllRowCtrls(){var e;const t=Object.values(this.rowCtrlsByRowIndex),n=Object.values(this.zombieRowCtrls),r=(null==(e=this.cachedRowCtrls)?void 0:e.getEntries())??[];n.length>0||r.length>0?this.allRowCtrls=[...t,...n,...r]:this.allRowCtrls=t}isCellBeingRendered(e,t){var n;const r=this.rowCtrlsByRowIndex[e];if(!t||!r)return!!r;if(r.isFullWidth())return!0;return!!(null==(n=this.beans.spannedRowRenderer)?void 0:n.getCellByPosition({rowIndex:e,column:t,rowPinned:null}))||!!r.getCellCtrl(t)||!r.isRowRendered()}updateCellFocus(e){for(const t of this.getAllCellCtrls())t.onCellFocused(e);for(const t of this.getFullWidthRowCtrls())t.onFullWidthRowFocused(e)}onCellFocusChanged(e){if(null!=(null==e?void 0:e.rowIndex)&&!e.rowPinned){const t=this.beans.colModel.getCol(e.column)??void 0;this.isCellBeingRendered(e.rowIndex,t)||this.redraw()}this.updateCellFocus(e)}onSuppressCellFocusChanged(e){for(const t of this.getAllCellCtrls())t.onSuppressCellFocusChanged(e);for(const t of this.getFullWidthRowCtrls())t.onSuppressCellFocusChanged(e)}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>this.onCellFocusChanged(e),cellFocusCleared:()=>this.updateCellFocus(),flashCells:e=>{const{cellFlashSvc:t}=this.beans;if(t)for(const n of this.getAllCellCtrls())t.onFlashCells(n,e)},columnHoverChanged:()=>{for(const e of this.getAllCellCtrls())e.onColumnHover()},displayedColumnsChanged:()=>{for(const e of this.getAllCellCtrls())e.onDisplayedColumnsChanged()},displayedColumnsWidthChanged:()=>{if(this.printLayout)for(const e of this.getAllCellCtrls())e.onLeftChanged()}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){for(const e of this.destroyFuncsForColumnListeners)e();this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners();const e=this.colModel.getCols();for(const t of e){const e=e=>{for(const n of this.getAllCellCtrls())n.column===t&&e(n)},n=()=>{e(e=>e.onLeftChanged())},r=()=>{e(e=>e.onWidthChanged())},o=()=>{e(e=>e.onFirstRightPinnedChanged())},i=()=>{e(e=>e.onLastLeftPinnedChanged())},s=()=>{e(e=>e.onColDefChanged())};t.__addEventListener("leftChanged",n),t.__addEventListener("widthChanged",r),t.__addEventListener("firstRightPinnedChanged",o),t.__addEventListener("lastLeftPinnedChanged",i),t.__addEventListener("colDefChanged",s),this.destroyFuncsForColumnListeners.push(()=>{t.__removeEventListener("leftChanged",n),t.__removeEventListener("widthChanged",r),t.__removeEventListener("firstRightPinnedChanged",o),t.__removeEventListener("lastLeftPinnedChanged",i),t.__removeEventListener("colDefChanged",s)})}}onDomLayoutChanged(){const e=GA(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),n=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,n&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsNotSpanningForColumn(e){var t;const n=[];for(const r of this.getAllRowCtrls()){const o=null==(t=r.getCellCtrl(e,!0))?void 0:t.eGui;o&&n.push(o)}return n}refreshFloatingRowComps(e=!0){this.refreshFloatingRows(this.topRowCtrls,"top",e),this.refreshFloatingRows(this.bottomRowCtrls,"bottom",e)}refreshFloatingRows(e,t,n){const{pinnedRowModel:r,beans:o,printLayout:i}=this,s=Object.fromEntries(e.map(e=>[e.rowNode.id,e]));null==r||r.forEachPinnedRow(t,(a,l)=>{const c=e[l];c&&void 0===r.getPinnedRowById(c.rowNode.id,t)&&(c.destroyFirstPass(),c.destroySecondPass()),a.id in s&&n?(e[l]=s[a.id],delete s[a.id]):e[l]=new u_(a,o,!1,!1,i)});const a=("top"===t?null==r?void 0:r.getPinnedTopRowCount():null==r?void 0:r.getPinnedBottomRowCount())??0;e.length=a}onPinnedRowDataChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}onPinnedRowsChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e,t=!1){var n,r;if(e.sticky)null==(n=this.stickyRowFeature)||n.refreshStickyNode(e);else{if(null==(r=this.cachedRowCtrls)?void 0:r.has(e))return void this.cachedRowCtrls.removeRow(e);{const t=t=>{const n=t[e.rowIndex];n&&n.rowNode===e&&(n.destroyFirstPass(),n.destroySecondPass(),t[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":t(this.topRowCtrls);break;case"bottom":t(this.bottomRowCtrls);break;default:t(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){const{editSvc:t}=this.beans;(null==t?void 0:t.isEditing())&&(t.isBatchEditing()?t.cleanupEditors():t.stopEditing(void 0,{source:"api"}));if(null!=e){for(const t of e??[])this.redrawRow(t,!0);this.dispatchDisplayedRowsChanged(!1)}else this.redrawAfterModelUpdate()}redrawAfterModelUpdate(e={}){var t;this.getLockOnRefresh();const n=null==(t=this.beans.focusSvc)?void 0:t.getFocusCellToUseAfterRefresh();this.updateContainerHeights(),this.scrollToTopIfNewData(e);const r=!e.domLayoutChanged&&!!e.recycleRows,o=e.animate&&XA(this.gos),i=r?this.getRowsToRecycle():null;r||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender();const{stickyRowFeature:s,gos:a}=this;if(s){s.checkStickyRows();const e=s.extraTopHeight+s.extraBottomHeight;e&&this.updateContainerHeights(e)}this.recycleRows(i,o),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(a.get("enableRowPinning")?r:void 0),this.dispatchDisplayedRowsChanged(),null!=n&&this.restoreFocusedCell(n),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){var t;const n=e.newData||e.newPage,r=this.gos.get("suppressScrollOnNewData");n&&!r&&(this.gridBodyCtrl.scrollFeature.scrollToTop(),null==(t=this.stickyRowFeature)||t.resetOffsets())}updateContainerHeights(e=0){const{rowContainerHeight:t}=this;if(this.printLayout)return void t.setModelHeight(null);let n=this.pageBounds.getCurrentPageHeight();0===n&&(n=1),t.setModelHeight(n+e)}getLockOnRefresh(){var e,t;if(this.refreshInProgress)throw new Error(LA(252));this.refreshInProgress=!0,null==(t=(e=this.beans.frameworkOverrides).getLockOnRefresh)||t.call(e)}releaseLockOnRefresh(){var e,t;this.refreshInProgress=!1,null==(t=(e=this.beans.frameworkOverrides).releaseLockOnRefresh)||t.call(e)}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){if(!e)return;const t=this.beans.focusSvc,n=this.findPositionToFocus(e);n?e.rowIndex===n.rowIndex&&e.rowPinned==n.rowPinned?t.doesRowOrCellHaveBrowserFocus()||this.updateCellFocus(nN(this.gos,{...n,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"})):t.setFocusedCell({...n,preventScrollOnBrowserFocus:!0,forceBrowserFocus:!0}):t.focusHeaderPosition({headerPosition:{headerRowIndex:CL(this.beans)-1,column:e.column}})}findPositionToFocus(e){const{pagination:t,pageBounds:n}=this.beans;let r=e;for(null==r.rowPinned&&t&&n&&!t.isRowInPage(r.rowIndex)&&(r={rowPinned:null,rowIndex:n.getFirstRow()});r;){if(null==r.rowPinned&&n)if(r.rowIndex<n.getFirstRow()){if(r=uB(this.beans,{rowPinned:null,rowIndex:0}),!r)return null}else r.rowIndex>n.getLastRow()&&(r={rowPinned:null,rowIndex:n.getLastRow()});const t=this.getRowByPosition(r);if(null==t?void 0:t.isAlive())return{...t.getRowPosition(),column:e.column};r=uB(this.beans,r)}return null}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),n=t.length;for(let r=0;r<n;r++){const n=t[r].getAllCellCtrls(),o=n.length;for(let t=0;t<o;t++)e.push(n[t])}return e}getAllRowCtrls(){const{spannedRowRenderer:e}=this.beans,t=this.getStickyTopRowCtrls(),n=this.getStickyBottomRowCtrls();return[...this.topRowCtrls,...this.bottomRowCtrls,...t,...n,...(null==e?void 0:e.getCtrls("top"))??[],...(null==e?void 0:e.getCtrls("bottom"))??[],...(null==e?void 0:e.getCtrls("center"))??[],...Object.values(this.rowCtrlsByRowIndex)]}addRenderedRowListener(e,t,n){const r=this.rowCtrlsByRowIndex[t];r&&r.addEventListener(e,n)}refreshCells({rowNodes:e,columns:t,force:n,suppressFlash:r}={}){const o={force:n,newData:!1,suppressFlash:r};for(const i of this.getCellCtrls(e,t))i.refreshOrDestroyCell(o);this.refreshFullWidth(e)}refreshRows(e={}){for(const t of this.getRowCtrls(e.rowNodes))t.refreshRow(e);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=!1;for(const n of this.getRowCtrls(e)){if(!n.isFullWidth())continue;n.refreshFullWidth()||(t=!0,this.redrawRow(n.rowNode,!0))}t&&this.dispatchDisplayedRowsChanged(!1)}getRowCtrls(e){const t=S_(e),n=this.getAllRowCtrls();return e&&t?n.filter(e=>k_(e.rowNode,t)):n}getCellCtrls(e,t){let n;BD(t)&&(n={},t.forEach(e=>{const t=this.colModel.getCol(e);BD(t)&&(n[t.getId()]=!0)}));const r=[];for(const o of this.getRowCtrls(e))for(const e of o.getAllCellCtrls()){const t=e.column.getId();n&&!n[t]||r.push(e)}return r}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){var t;const n=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(n,e),null==(t=this.stickyRowFeature)||t.destroyStickyCtrls()}getRowsToRecycle(){const e=[];for(const n of Object.keys(this.rowCtrlsByRowIndex)){null==this.rowCtrlsByRowIndex[n].rowNode.id&&e.push(n)}this.removeRowCtrls(e);const t={};for(const n of Object.values(this.rowCtrlsByRowIndex)){t[n.rowNode.id]=n}return this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){for(const n of e){const e=this.rowCtrlsByRowIndex[n];e&&(e.destroyFirstPass(t),e.destroySecondPass()),delete this.rowCtrlsByRowIndex[n]}}onBodyScroll(e){"vertical"===e.direction&&this.redraw({afterScroll:!0})}redraw(e={}){const{focusSvc:t,animationFrameSvc:n}=this.beans,{afterScroll:r}=e;let o;const i=this.stickyRowFeature;i&&(o=(null==t?void 0:t.getFocusCellToUseAfterRefresh())||void 0);const s=this.firstRenderedRow,a=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let l=!1;if(i){l=i.checkStickyRows();const e=i.extraTopHeight+i.extraBottomHeight;e&&this.updateContainerHeights(e)}const c=this.firstRenderedRow!==s||this.lastRenderedRow!==a;if((!r||l||c)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,r),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(r&&!l),null!=o)){const e=null==t?void 0:t.getFocusCellToUseAfterRefresh();null!=o&&null==e&&(null==n||n.flushAllFrames(),this.restoreFocusedCell(o))}}removeRowCompsNotToDraw(e,t){const n={};for(const o of e)n[o]=!0;const r=Object.keys(this.rowCtrlsByRowIndex).filter(e=>!n[e]);this.removeRowCtrls(r,t)}calculateIndexesToDraw(e){var t,n;const r=[];for(let l=this.firstRenderedRow;l<=this.lastRenderedRow;l++)r.push(l);const o=this.beans.pagination,i=null==(n=null==(t=this.beans.focusSvc)?void 0:t.getFocusedCell())?void 0:n.rowIndex;null!=i&&(i<this.firstRenderedRow||i>this.lastRenderedRow)&&(!o||o.isRowInPage(i))&&i<this.rowModel.getRowCount()&&r.push(i);const s=e=>{const t=e.rowNode.rowIndex;null!=t&&t!==i&&(t<this.firstRenderedRow||t>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(e)&&r.push(t)};for(const l of Object.values(this.rowCtrlsByRowIndex))s(l);if(e)for(const l of Object.values(e))s(l);r.sort((e,t)=>e-t);const a=[];for(let l=0;l<r.length;l++){const e=r[l],t=this.rowModel.getRow(e);t&&!t.sticky&&a.push(e)}return a}recycleRows(e,t=!1,n=!1){const r=this.calculateIndexesToDraw(e);(this.printLayout||n)&&(t=!1),this.removeRowCompsNotToDraw(r,!t);for(const o of r)this.createOrUpdateRowCtrl(o,e,t,n);if(e){const{animationFrameSvc:r}=this.beans;(null==r?void 0:r.active)&&n&&!this.printLayout?r.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventSvc.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const{visibleCols:e}=this.beans,t=e.isPinningLeft(),n=e.isPinningRight();(this.pinningLeft!==t||n!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=n,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];for(const t of this.getFullWidthRowCtrls()){const n=t.rowNode.rowIndex;e.push(n.toString())}this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=S_(e);return this.getAllRowCtrls().filter(e=>{if(!e.isFullWidth())return!1;const n=e.rowNode;return!(null!=t&&!k_(n,t))})}createOrUpdateRowCtrl(e,t,n,r){let o,i=this.rowCtrlsByRowIndex[e];i||(o=this.rowModel.getRow(e),BD(o)&&BD(t)&&t[o.id]&&o.alreadyRendered&&(i=t[o.id],t[o.id]=null));if(!i){if(o||(o=this.rowModel.getRow(e)),!BD(o))return;i=this.createRowCon(o,n,r)}o&&(o.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=i}destroyRowCtrls(e,t){const n=[];if(e)for(const r of Object.values(e))if(r)if(this.cachedRowCtrls&&r.isCacheable())this.cachedRowCtrls.addRow(r);else if(r.destroyFirstPass(!t),t){const e=r.instanceId;this.zombieRowCtrls[e]=r,n.push(()=>{r.destroySecondPass(),delete this.zombieRowCtrls[e]})}else r.destroySecondPass();t&&(n.push(()=>{this.isAlive()&&(this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged())}),window.setTimeout(()=>{for(const e of n)e()},400))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){return this.getRowBuffer()*$A(this.beans)}workOutFirstAndLastRowsToRender(){const{rowContainerHeight:e,pageBounds:t,rowModel:n}=this;let r,o;if(e.updateOffset(),n.isRowsToRender())if(this.printLayout)this.beans.environment.refreshRowHeightVariable(),r=t.getFirstRow(),o=t.getLastRow();else{const i=this.getRowBufferInPixels(),s=this.ctrlsSvc.getScrollFeature(),a=this.gos.get("suppressRowVirtualisation");let l,c,u=!1;do{const n=t.getPixelOffset(),{pageFirstPixel:r,pageLastPixel:o}=t.getCurrentPagePixelRange(),d=e.divStretchOffset,h=s.getVScrollPosition(),p=h.top,f=h.bottom;a?(l=r+d,c=o+d):(l=Math.max(p+n-i,r)+d,c=Math.min(f+n+i,o)+d),this.firstVisibleVPixel=Math.max(p+n,r)+d,this.lastVisibleVPixel=Math.min(f+n,o)+d,u=this.ensureAllRowsInRangeHaveHeightsCalculated(l,c)}while(u);let d=n.getRowIndexAtPixel(l),h=n.getRowIndexAtPixel(c);const p=t.getFirstRow(),f=t.getLastRow();d<p&&(d=p),h>f&&(h=f),r=d,o=h}else r=0,o=-1;const i=GA(this.gos,"normal"),s=this.gos.get("suppressMaxRenderedRowRestriction"),a=Math.max(this.getRowBuffer(),500);i&&!s&&o-r>a&&(o=r+a);const l=r!==this.firstRenderedRow,c=o!==this.lastRenderedRow;(l||c)&&(this.firstRenderedRow=r,this.lastRenderedRow=o,this.eventSvc.dispatchEvent({type:"viewportChanged",firstRow:r,lastRow:o}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,DM(this.beans,()=>{this.beans.eventSvc.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){var n,r;const o=null==(n=this.pinnedRowModel)?void 0:n.ensureRowHeightsValid(),i=null==(r=this.stickyRowFeature)?void 0:r.ensureRowHeightsValid(),{pageBounds:s,rowModel:a}=this,l=a.ensureRowHeightsValid(e,t,s.getFirstRow(),s.getLastRow());return(l||i)&&this.eventSvc.dispatchEvent({type:"recalculateRowBounds"}),!!(i||l||o)&&(this.updateContainerHeights(),!0)}doNotUnVirtualiseRow(e){var t;const n=!1,r=e.rowNode,o=this.focusSvc.isRowFocused(r.rowIndex,r.rowPinned),i=null==(t=this.editSvc)?void 0:t.isEditing(e),s=r.detail;if(!(o||i||s))return n;return!!this.isRowPresent(r)||n}isRowPresent(e){var t;return!!this.rowModel.isRowPresent(e)&&((null==(t=this.beans.pagination)?void 0:t.isRowInPage(e.rowIndex))??!0)}createRowCon(e,t,n){var r,o;const i=(null==(r=this.cachedRowCtrls)?void 0:r.getRow(e))??null;if(i)return i;const s=n&&!this.printLayout&&!!(null==(o=this.beans.animationFrameSvc)?void 0:o.active);return new u_(e,this.beans,t,s,this.printLayout)}getRenderedNodes(){const e=Object.values(this.rowCtrlsByRowIndex).map(e=>e.rowNode);return[...this.getStickyTopRowCtrls().map(e=>e.rowNode),...e,...this.getStickyBottomRowCtrls().map(e=>e.rowNode)]}getRowByPosition(e){let t;const{rowIndex:n}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[n];break;case"bottom":t=this.bottomRowCtrls[n];break;default:t=this.rowCtrlsByRowIndex[n],t||(t=this.getStickyTopRowCtrls().find(e=>e.rowNode.rowIndex===n)||null,t||(t=this.getStickyBottomRowCtrls().find(e=>e.rowNode.rowIndex===n)||null))}return t}isRangeInRenderedViewport(e,t){if(null==e||null==t)return!1;const n=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!n}},class extends YM{constructor(){super(...arguments),this.beanName="valueSvc",this.hasEditSvc=!1,this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionSvc=e.expressionSvc,this.colModel=e.colModel,this.valueCache=e.valueCache,this.dataTypeSvc=e.dataTypeSvc,this.editSvc=e.editSvc,this.hasEditSvc=!!e.editSvc}postConstruct(){this.initialised||this.init()}init(){this.executeValueGetter=this.valueCache?this.executeValueGetterWithValueCache.bind(this):this.executeValueGetterWithoutValueCache.bind(this),this.isSsrm=_A(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const e=e=>this.callColumnCellValueChangedHandler(e);this.eventSvc.addListener("cellValueChanged",e,!0),this.addDestroyFunc(()=>this.eventSvc.removeListener("cellValueChanged",e,!0)),this.addManagedPropertyListener("treeData",e=>this.isTreeData=e.currentValue)}getValueForDisplay(e,t,n=!1,r=!1,o="ui"){const{showRowGroupColValueSvc:i}=this.beans,s=!e&&t.group,a=null==e?void 0:e.colDef.showRowGroup,l=!this.isTreeData||t.footer;if(i&&l&&(s||a)){const o=i.getGroupValue(t,e);if(null==o)return{value:null,valueFormatted:null};if(!n)return{value:o.value,valueFormatted:null};const s=i.formatAndPrefixGroupColValue(o,e,r);return{value:o.value,valueFormatted:s}}if(!e)return{value:t.key,valueFormatted:null};const c=t.leafGroup&&this.colModel.isPivotMode(),u=t.group&&t.expanded&&!t.footer&&!c,d=this.gos.get("groupSuppressBlankHeader")||!t.sibling,h=u&&!d,p=this.getValue(e,t,h,o);return{value:p,valueFormatted:n&&!(r&&!1===e.colDef.useValueFormatterForExport)?this.formatValue(e,t,p):null}}getValue(e,t,n=!1,r="ui"){var o;if(this.initialised||this.init(),!t)return;const i=e.getColDef(),s=i.field,a=e.getColId(),l=t.data;if(this.hasEditSvc&&"ui"===r){const n=this.editSvc;if(n.isEditing()){const r=n.getCellDataValue({rowNode:t,column:e},!0);if(void 0!==r)return r}}let c;const u=i.showRowGroup;if("string"==typeof u){if(((null==(o=this.beans.rowGroupColsSvc)?void 0:o.getColumnIndex(u))??-1)>t.level)return null}const d="string"!=typeof u||!t.group,h=t.groupData&&a in t.groupData,p=!n&&t.aggData&&void 0!==t.aggData[a],f=this.isSsrm&&n&&!!i.aggFunc,g=this.isSsrm&&t.footer&&t.field&&(!0===i.showRowGroup||i.showRowGroup===t.field);if(this.isTreeData&&p)c=t.aggData[a];else if(this.isTreeData&&i.valueGetter)c=this.executeValueGetter(i.valueGetter,l,e,t);else if(this.isTreeData&&s&&l)c=HB(l,s,e.isFieldContainsDots());else if(h)c=t.groupData[a];else if(p)c=t.aggData[a];else if(i.valueGetter&&!f){if(!d)return c;c=this.executeValueGetter(i.valueGetter,l,e,t)}else if(g)c=HB(l,t.field,e.isFieldContainsDots());else if(s&&l&&!f){if(!d)return c;c=HB(l,s,e.isFieldContainsDots())}if(this.cellExpressions&&"string"==typeof c&&0===c.indexOf("=")){const n=c.substring(1);c=this.executeValueGetter(n,l,e,t)}return c}parseValue(e,t,n,r){var o;const i=e.getColDef(),s=i.valueParser;if(BD(s)){const a=nN(this.gos,{node:t,data:null==t?void 0:t.data,oldValue:r,newValue:n,colDef:i,column:e});return"function"==typeof s?s(a):null==(o=this.expressionSvc)?void 0:o.evaluate(s,a)}return n}getDeleteValue(e,t){return BD(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay(e,t).value)??null:null}formatValue(e,t,n,r,o=!0){const{expressionSvc:i}=this.beans;let s,a=null;const l=e.getColDef();if(r?s=r:o&&(s=l.valueFormatter),s){const r=t?t.data:null,o=nN(this.gos,{value:n,node:t,data:r,colDef:l,column:e});a="function"==typeof s?s(o):i?i.evaluate(s,o):null}else if(l.refData)return l.refData[n]||"";return null==a&&Array.isArray(n)&&(a=n.join(", ")),a}setValue(e,t,n,r){var o,i;const s=this.colModel.getColDefCol(t);if(!e||!s)return!1;HD(e.data)&&(e.data={});const{field:a,valueSetter:l}=s.getColDef();if(HD(a)&&HD(l))return TA(17),!1;if(this.dataTypeSvc&&!this.dataTypeSvc.checkType(s,n))return TA(135),!1;const c=nN(this.gos,{node:e,data:e.data,oldValue:this.getValue(s,e,void 0,r),newValue:n,colDef:s.getColDef(),column:s});let u;if(c.newValue=n,u=BD(l)?"function"==typeof l?l(c):null==(o=this.expressionSvc)?void 0:o.evaluate(l,c):this.setValueUsingField(e.data,a,n,s.isFieldContainsDots()),void 0===u&&(u=!0),!u)return!1;e.resetQuickFilterAggregateText(),null==(i=this.valueCache)||i.onDataChanged();const d=this.getValue(s,e);return this.dispatchCellValueChangedEvent(e,c,d,r),e.pinnedSibling&&this.dispatchCellValueChangedEvent(e.pinnedSibling,c,d,r),!0}dispatchCellValueChangedEvent(e,t,n,r){this.eventSvc.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:t.column,colDef:t.colDef,data:e.data,node:e,oldValue:t.oldValue,newValue:n,value:n,source:r})}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;"function"==typeof t&&this.beans.frameworkOverrides.wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,n,r){if(!t)return!1;let o=!1;if(r){const r=t.split(".");let i=e;for(;r.length>0&&i;){const e=r.shift();0===r.length?(o=i[e]===n,o||(i[e]=n)):i=i[e]}}else o=e[t]===n,o||(e[t]=n);return!o}executeValueGetterWithValueCache(e,t,n,r){const o=n.getColId(),i=this.valueCache.getValue(r,o);if(void 0!==i)return i;const s=this.executeValueGetterWithoutValueCache(e,t,n,r);return this.valueCache.setValue(r,o,s),s}executeValueGetterWithoutValueCache(e,t,n,r){var o;const i=nN(this.gos,{data:t,node:r,column:n,colDef:n.getColDef(),getValue:this.getValueCallback.bind(this,r)});let s;return s="function"==typeof e?e(i):null==(o=this.expressionSvc)?void 0:o.evaluate(e,i),s}getValueCallback(e,t){const n=this.colModel.getColDefCol(t);return n?this.getValue(n,e):null}getKeyForNode(e,t){const n=this.getValue(e,t),r=e.getColDef().keyCreator;let o=n;if(r){o=r(nN(this.gos,{value:n,colDef:e.getColDef(),column:e,node:t,data:t.data}))}return"string"==typeof o||null==o||(o=String(o),"[object Object]"===o&&TA(121)),o}},class extends YM{constructor(){super(...arguments),this.beanName="focusSvc",this.focusFallbackTimeout=null,this.needsFocusRestored=!1}wireBeans(e){this.colModel=e.colModel,this.visibleCols=e.visibleCols,this.rowRenderer=e.rowRenderer,this.navigation=e.navigation,this.filterManager=e.filterManager,this.overlays=e.overlays}postConstruct(){const e=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:e,columnRowGroupChanged:e}),this.addDestroyFunc(lF(this.beans))}attemptToRecoverFocus(){this.needsFocusRestored=!0,null!=this.focusFallbackTimeout&&clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=window.setTimeout(this.setFocusRecovered.bind(this),100)}setFocusRecovered(){this.needsFocusRestored=!1,null!=this.focusFallbackTimeout&&(clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=null)}shouldTakeFocus(){return this.gos.get("suppressFocusAfterRefresh")?(this.setFocusRecovered(),!1):this.needsFocusRestored?(this.setFocusRecovered(),!0):this.doesRowOrCellHaveBrowserFocus()}onColumnEverythingChanged(){if(!this.focusedCell)return;const e=this.focusedCell.column,t=this.colModel.getCol(e.getId());e!==t&&this.clearFocusedCell()}getFocusCellToUseAfterRefresh(){const{gos:e,focusedCell:t}=this;return e.get("suppressFocusAfterRefresh")||e.get("suppressCellFocus")||!t?null:this.doesRowOrCellHaveBrowserFocus()?t:null}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeader?null:this.isDomDataPresentInHierarchy(KD(this.beans),ML)?this.focusedHeader:null}doesRowOrCellHaveBrowserFocus(){const e=KD(this.beans);return!!this.isDomDataPresentInHierarchy(e,II)||this.isDomDataPresentInHierarchy(e,BI)}isDomDataPresentInHierarchy(e,t){let n=e;for(;n;){if(KA(this.gos,n,t))return!0;n=n.parentNode}return!1}getFocusedCell(){return this.focusedCell}getFocusEventParams(e){const{rowIndex:t,rowPinned:n,column:r}=e,o={rowIndex:t,rowPinned:n,column:r,isFullWidthCell:!1},i=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:n});return i&&(o.isFullWidthCell=i.isFullWidth()),o}clearFocusedCell(){if(null==this.focusedCell)return;const e=this.getFocusEventParams(this.focusedCell);this.focusedCell=null,this.eventSvc.dispatchEvent({type:"cellFocusCleared",...e})}setFocusedCell(e){this.setFocusRecovered();const{column:t,rowIndex:n,rowPinned:r,forceBrowserFocus:o=!1,preventScrollOnBrowserFocus:i=!1,sourceEvent:s}=e,a=this.colModel.getCol(t);if(!a)return void(this.focusedCell=null);this.focusedCell={rowIndex:n,rowPinned:LD(r),column:a};const l=this.getFocusEventParams(this.focusedCell);this.eventSvc.dispatchEvent({type:"cellFocused",...l,...this.previousCellFocusParams&&{previousParams:this.previousCellFocusParams},forceBrowserFocus:o,preventScrollOnBrowserFocus:i,sourceEvent:s}),this.previousCellFocusParams=l}isCellFocused(e){return null!=this.focusedCell&&function(e,t){const n=e.column===t.column,r=e.rowPinned===t.rowPinned,o=e.rowIndex===t.rowIndex;return n&&r&&o}(e,this.focusedCell)}isHeaderWrapperFocused(e){if(null==this.focusedHeader)return!1;const{column:t,rowCtrl:{rowIndex:n,pinned:r}}=e,{column:o,headerRowIndex:i}=this.focusedHeader;return t===o&&n===i&&r==o.getPinned()}focusHeaderPosition(e){var t;if(this.setFocusRecovered(),yL(this.beans))return!1;const{direction:n,fromTab:r,allowUserOverride:o,event:i,fromCell:s,rowWithoutSpanValue:a,scroll:l=!0}=e;let{headerPosition:c}=e;if(s&&(null==(t=this.filterManager)?void 0:t.isAdvFilterHeaderActive()))return this.focusAdvancedFilter(c);if(o){const e=this.focusedHeader,t=CL(this.beans);if(r){const r=this.gos.getCallback("tabToNextHeader");r&&(c=this.getHeaderPositionFromUserFunc({userFunc:r,direction:n,currentPosition:e,headerPosition:c,headerRowCount:t}))}else{const n=this.gos.getCallback("navigateToNextHeader");if(n&&i){c=n({key:i.key,previousHeaderPosition:e,nextHeaderPosition:c,headerRowCount:t,event:i})}}}return!!c&&this.focusProvidedHeaderPosition({headerPosition:c,direction:n,event:i,fromCell:s,rowWithoutSpanValue:a,scroll:l})}focusHeaderPositionFromUserFunc(e){if(yL(this.beans))return!1;const{userFunc:t,headerPosition:n,direction:r,event:o}=e,i=this.focusedHeader,s=CL(this.beans),a=this.getHeaderPositionFromUserFunc({userFunc:t,direction:r,currentPosition:i,headerPosition:n,headerRowCount:s});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:r,event:o})}getHeaderPositionFromUserFunc(e){const{userFunc:t,direction:n,currentPosition:r,headerPosition:o,headerRowCount:i}=e,s=t({backwards:"Before"===n,previousHeaderPosition:r,nextHeaderPosition:o,headerRowCount:i});return!0===s?r:!1===s?null:s}focusProvidedHeaderPosition(e){const{headerPosition:t,direction:n,fromCell:r,rowWithoutSpanValue:o,event:i,scroll:s=!0}=e,{column:a,headerRowIndex:l}=t,{filterManager:c,ctrlsSvc:u,headerNavigation:d}=this.beans;if(this.focusedHeader&&(h=e.headerPosition,p=this.focusedHeader,h.headerRowIndex===p.headerRowIndex&&h.column===p.column))return!1;var h,p;if(-1===l)return(null==c?void 0:c.isAdvFilterHeaderActive())?this.focusAdvancedFilter(t):this.focusGridView({column:a,event:i});s&&(null==d||d.scrollToColumn(a,n));const f=u.getHeaderRowContainerCtrl(a.getPinned()),g=(null==f?void 0:f.focusHeader(t.headerRowIndex,a,i))||!1;return d&&g&&(null!=o||r)&&(d.currentHeaderRowWithoutSpan=o??-1),g}focusFirstHeader(){var e;if((null==(e=this.overlays)?void 0:e.isExclusive())&&this.focusOverlay())return!0;const t=this.visibleCols.allCols[0];if(!t)return!1;const n=jH(this.beans,t,0);return this.focusHeaderPosition({headerPosition:n,rowWithoutSpanValue:0})}focusLastHeader(e){var t;if((null==(t=this.overlays)?void 0:t.isExclusive())&&this.focusOverlay(!0))return!0;const n=CL(this.beans)-1,r=gN(this.visibleCols.allCols);return this.focusHeaderPosition({headerPosition:{headerRowIndex:n,column:r},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){var t;return(null==(t=this.filterManager)?void 0:t.isAdvFilterHeaderActive())?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCell}isRowFocused(e,t){return null!=this.focusedCell&&(this.focusedCell.rowIndex===e&&this.focusedCell.rowPinned===LD(t))}focusOverlay(e){var t,n;const r=(null==(t=this.overlays)?void 0:t.isVisible())&&(null==(n=this.overlays.eWrapper)?void 0:n.getGui());return!!r&&uF(r,e)}focusGridView(e){var t,n,r,o,i,s;const{backwards:a=!1,canFocusOverlay:l=!0,event:c}=e;if(null==(t=this.overlays)?void 0:t.isExclusive())return l&&this.focusOverlay(a);if(bL(this.beans))return a&&!yL(this.beans)?this.focusLastHeader():!(!l||!this.focusOverlay(a))||!a&&wL(this.beans,a);const u=a?function(e){let t,n=null;const{pinnedRowModel:r,pageBounds:o}=e,i=null==r?void 0:r.getPinnedBottomRowCount(),s=null==r?void 0:r.getPinnedTopRowCount();return i?(n="bottom",t=i-1):e.rowModel.getRowCount()?t=o.getLastRow():s&&(n="top",t=s-1),void 0===t?null:{rowIndex:t,rowPinned:n}}(this.beans):function(e){let t,n=0;const{pinnedRowModel:r,rowModel:o,pageBounds:i}=e;return(null==r?void 0:r.getPinnedTopRowCount())?t="top":o.getRowCount()?(t=null,n=i.getFirstRow()):(null==r?void 0:r.getPinnedBottomRowCount())&&(t="bottom"),void 0===t?null:{rowIndex:n,rowPinned:t}}(this.beans);if(u){const t=e.column??(null==(n=this.focusedHeader)?void 0:n.column),{rowIndex:l,rowPinned:d}=u,h=lB(this.beans,u);if(!t||!h||null==l)return!1;if(t.isSuppressNavigable(h)){const e=this.gos.get("enableRtl");let n;return n=c&&c.key!==PT?c.key:e?ET:MT,null==(r=this.beans.navigation)||r.navigateToNextCell(null,n,{rowIndex:l,column:t,rowPinned:d||null},!0),!0}if(null==(o=this.navigation)||o.ensureCellVisible({rowIndex:l,column:t,rowPinned:d}),a){const e=this.rowRenderer.getRowByPosition(u);if((null==e?void 0:e.isFullWidth())&&(null==(i=this.navigation)?void 0:i.tryToFocusFullWidthRow(u,a)))return!0}return this.setFocusedCell({rowIndex:l,column:t,rowPinned:LD(d),forceBrowserFocus:!0}),null==(s=this.beans.rangeSvc)||s.setRangeToCell({rowIndex:l,rowPinned:d,column:t}),!0}return!(!l||!this.focusOverlay(a))||!(!a||!this.focusLastHeader())}focusAdvancedFilter(e){var t;return this.advFilterFocusColumn=null==e?void 0:e.column,(null==(t=this.beans.advancedFilter)?void 0:t.getCtrl().focusHeaderComp())??!1}focusNextFromAdvancedFilter(e,t){var n;const r=(t?void 0:this.advFilterFocusColumn)??(null==(n=this.visibleCols.allCols)?void 0:n[0]);return e?this.focusHeaderPosition({headerPosition:{column:r,headerRowIndex:CL(this.beans)-1}}):this.focusGridView({column:r})}clearAdvancedFilterColumn(){this.advFilterFocusColumn=void 0}},class extends iI{constructor(){super(...arguments),this.sizeEls=new Map,this.lastKnownValues=new Map,this.sizesMeasured=!1}initVariables(){this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.getSizeEl(wH),this.getSizeEl(CH),this.getSizeEl(xH),this.getSizeEl(SH),this.getSizeEl(kH),this.refreshRowBorderWidthVariable()}getPinnedRowBorderWidth(){return this.getCSSVariablePixelValue(kH)}getRowBorderWidth(){return this.getCSSVariablePixelValue(SH)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(wH)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(CH)}getDefaultCellHorizontalPadding(){return this.getCSSVariablePixelValue(vH)}getCellPaddingLeft(){const e=this.getDefaultCellHorizontalPadding(),t=this.getCSSVariablePixelValue(yH);return e-1+this.getCSSVariablePixelValue(bH)*t}getCellPadding(){const e=this.getDefaultCellHorizontalPadding()-1;return this.getCellPaddingLeft()+e}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(xH)}refreshRowHeightVariable(){const{eRootDiv:e}=this,t=e.style.getPropertyValue("--ag-line-height").trim(),n=this.gos.get("rowHeight");if(null==n||isNaN(n)||!isFinite(n))return null!==t&&e.style.setProperty("--ag-line-height",null),-1;const r=`${n}px`;return t!=r?(e.style.setProperty("--ag-line-height",r),n):""!=t?Number.parseFloat(t):-1}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(null!=t)return t;const n=this.measureSizeEl(e);return"detached"===n||"no-styles"===n?(e.cacheDefault&&this.lastKnownValues.set(e,e.defaultValue),e.defaultValue):(this.lastKnownValues.set(e,n),n)}measureSizeEl(e){const t=this.getSizeEl(e);if(null==t.offsetParent)return"detached";const n=t.offsetWidth;return n===PH?"no-styles":(this.sizesMeasured=!0,n)}getMeasurementContainer(){let e=this.eMeasurementContainer;return e||(e=this.eMeasurementContainer=wI({tag:"div",cls:"ag-measurement-container"}),this.eRootDiv.appendChild(e)),e}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;const n=this.getMeasurementContainer();t=wI({tag:"div"});const{border:r,noWarn:o}=e;r?(t.className="ag-measurement-element-border",t.style.setProperty("--ag-internal-measurement-border",`var(${e.cssName}, solid ${PH}px)`)):t.style.width=`var(${e.cssName}, ${PH}px)`,n.appendChild(t),this.sizeEls.set(e,t);let i=this.measureSizeEl(e);"no-styles"!==i||o||TA(9,{variable:e});const s=EM(this.beans,t,()=>{const t=this.measureSizeEl(e);"detached"!==t&&"no-styles"!==t&&(this.lastKnownValues.set(e,t),t!==i&&(i=t,this.fireStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>s()),t}fireStylesChangedEvent(e){"rowBorderWidthChanged"===e&&this.refreshRowBorderWidthVariable(),this.eventSvc.dispatchEvent({type:"gridStylesChanged",[e]:!0})}refreshRowBorderWidthVariable(){const e=this.getCSSVariablePixelValue(SH);this.eRootDiv.style.setProperty("--ag-internal-row-border-width",`${e}px`)}postProcessThemeChange(e,t){e&&getComputedStyle(this.getMeasurementContainer()).getPropertyValue("--ag-legacy-styles-loaded")&&FA(t?106:239)}getAdditionalCss(){const e=new Map;return e.set("core",['.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-tab-guard{display:block;height:0;position:absolute;width:0}:where(.ag-virtual-list-viewport) .ag-tab-guard{position:sticky}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport,.ag-virtual-list-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-viewport{position:relative}.ag-spanning-container{position:absolute;top:0;z-index:1}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important;&::-webkit-scrollbar{display:none!important}}.ag-body-viewport{display:flex;overflow-x:hidden;&:where(.ag-layout-normal){overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-floating-bottom-container,.ag-floating-top-container,.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-virtual-list-viewport{overflow:auto;width:100%}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-right-cols-container,.ag-sticky-bottom-container,.ag-sticky-top-container,.ag-virtual-list-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}:where(.ag-ltr) .ag-floating-bottom-full-width-container,:where(.ag-ltr) .ag-floating-top-full-width-container,:where(.ag-ltr) .ag-full-width-container,:where(.ag-ltr) .ag-sticky-bottom-full-width-container,:where(.ag-ltr) .ag-sticky-top-full-width-container{left:0}:where(.ag-rtl) .ag-floating-bottom-full-width-container,:where(.ag-rtl) .ag-floating-top-full-width-container,:where(.ag-rtl) .ag-full-width-container,:where(.ag-rtl) .ag-sticky-bottom-full-width-container,:where(.ag-rtl) .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-virtual-list-container{overflow:hidden}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&:where(.ag-scrollbar-invisible){bottom:0;position:absolute;&:where(.ag-apple-scrollbar){opacity:0;transition:opacity .4s;visibility:hidden;&:where(.ag-scrollbar-scrolling,.ag-scrollbar-active){opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&:where(.ag-scrollbar-invisible){left:0;right:0}}.ag-body-vertical-scroll{height:100%;&:where(.ag-scrollbar-invisible){top:0;z-index:10}}:where(.ag-ltr) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){right:0}}:where(.ag-rtl) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&:where(.ag-scroller-corner){overflow-x:hidden}}:where(.ag-row-animation) .ag-row{transition:transform .4s,top .4s,opacity .2s;&:where(.ag-after-created){transition:transform .4s,top .4s,height .4s,opacity .2s}}:where(.ag-row-animation.ag-prevent-animation) .ag-row{transition:none!important;&:where(.ag-row.ag-after-created){transition:none!important}}:where(.ag-row-no-animation) .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap;&:focus-visible{box-shadow:none}}.ag-cell-value{flex:1 1 auto}.ag-cell-value:not(.ag-allow-overflow),.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}:where(.ag-cell) .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-top:not(.ag-invisible)){border-bottom:var(--ag-pinned-row-border)}.ag-floating-bottom{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-bottom:not(.ag-invisible)){border-top:var(--ag-pinned-row-border)}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-data-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%;z-index:1}.ag-opacity-zero{opacity:0!important}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}:where(.ag-right-aligned-header){.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr){direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}:where(.ag-rtl){direction:rtl;text-align:right;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}.ag-measurement-container{height:0;overflow:hidden;visibility:hidden;width:0}.ag-measurement-element-border{display:inline-block;&:before{border-left:var(--ag-internal-measurement-border);content:"";display:block}}.ag-group{position:relative;width:100%}.ag-group-title-bar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-title{display:inline;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-group-title-bar) .ag-group-title{cursor:default}.ag-group-toolbar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-container{display:flex}.ag-disabled .ag-group-container{pointer-events:none}.ag-disabled-group-container,.ag-disabled-group-title-bar{opacity:.5}.ag-group-container-horizontal{flex-flow:row wrap}.ag-group-container-vertical{flex-direction:column}.ag-group-title-bar-icon{cursor:pointer;flex:none}:where(.ag-ltr) .ag-group-title-bar-icon{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-group-title-bar-icon{margin-left:var(--ag-spacing)}:where(.ag-group-item-alignment-stretch) .ag-group-item{align-items:stretch}:where(.ag-group-item-alignment-start) .ag-group-item{align-items:flex-start}:where(.ag-group-item-alignment-end) .ag-group-item{align-items:flex-end}:where(.ag-ltr) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}:where(.ag-rtl) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}:where(.ag-ltr) .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}:where(.ag-rtl) .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row,.ag-spanned-row{color:var(--ag-cell-text-color);font-family:var(--ag-cell-font-family);font-size:var(--ag-data-font-size);white-space:nowrap;--ag-internal-content-line-height:calc(min(var(--ag-row-height), var(--ag-line-height, 1000px)) - var(--ag-internal-row-border-width, 1px) - 2px)}.ag-row{background-color:var(--ag-data-background-color);border-bottom:var(--ag-row-border);height:var(--ag-row-height);width:100%;&.ag-row-editing-invalid{background-color:var(--ag-full-row-edit-invalid-background-color)}}:where(.ag-body-vertical-content-no-gap>div>div>div,.ag-body-vertical-content-no-gap>div>div>div>div)>.ag-row-last{border-bottom-color:transparent}.ag-sticky-bottom{border-top:var(--ag-row-border);box-sizing:content-box!important}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height);-webkit-font-smoothing:subpixel-antialiased}:where(.ag-ltr) .ag-cell{border-right:var(--ag-column-border)}:where(.ag-rtl) .ag-cell{border-left:var(--ag-column-border)}.ag-spanned-cell-wrapper{background-color:var(--ag-data-background-color);position:absolute}.ag-spanned-cell-wrapper>.ag-spanned-cell{display:block;position:relative}:where(.ag-ltr) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}:where(.ag-rtl) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;>:where(:not(.ag-cell-value,.ag-group-value)){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}&:where(.ag-row-group){align-items:flex-start}:where(.ag-full-width-row) &:where(.ag-row-group){align-items:center;height:100%}}:where(.ag-ltr) .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-rtl) .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-cell-wrap-text:not(.ag-cell-auto-height)) .ag-cell-wrapper{align-items:normal;height:100%;:where(.ag-cell-value){height:100%}}:where(.ag-ltr) .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-context-menu-open .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}.ag-full-width-row.ag-row-focus:focus{box-shadow:none}:where(.ag-ltr) .ag-group-contracted,:where(.ag-ltr) .ag-group-expanded,:where(.ag-ltr) .ag-row-drag,:where(.ag-ltr) .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-contracted,:where(.ag-rtl) .ag-group-expanded,:where(.ag-rtl) .ag-row-drag,:where(.ag-rtl) .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}:where(.ag-ltr) .ag-group-child-count{margin-left:3px}:where(.ag-rtl) .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after,.ag-row-highlight-inside:after{background-color:var(--ag-range-selection-border-color);content:"";height:1px;pointer-events:none;position:absolute;width:calc(100% - 1px)}:where(.ag-ltr) .ag-row-highlight-above:after,:where(.ag-ltr) .ag-row-highlight-below:after,:where(.ag-ltr) .ag-row-highlight-inside:after{left:1px}:where(.ag-rtl) .ag-row-highlight-above:after,:where(.ag-rtl) .ag-row-highlight-below:after,:where(.ag-rtl) .ag-row-highlight-inside:after{right:1px}.ag-row-highlight-above:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-highlight-indent:after{display:block;width:auto}:where(.ag-ltr) .ag-row-highlight-indent:after{left:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size));right:1px}:where(.ag-rtl) .ag-row-highlight-indent:after{left:1px;right:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size))}.ag-row-highlight-inside:after{background-color:var(--ag-selected-row-background-color);border:1px solid var(--ag-range-selection-border-color);display:block;height:auto;inset:0;width:auto}.ag-body,.ag-floating-bottom,.ag-floating-top{background-color:var(--ag-data-background-color)}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-header-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}:where(.ag-ltr) .ag-right-aligned-cell{text-align:right}:where(.ag-rtl) .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}:where(.ag-ltr) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-ltr) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}:where(.ag-rtl) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-rtl) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-data-background-color);padding:calc(var(--ag-spacing)*3.75)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-loading-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}:where(.ag-ltr) .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}:where(.ag-rtl) .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{background-color:var(--ag-row-loading-skeleton-effect-color)}50%{background-color:color-mix(in srgb,transparent,var(--ag-row-loading-skeleton-effect-color) 40%)}to{background-color:var(--ag-row-loading-skeleton-effect-color)}}.ag-loading{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-ltr) .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);display:flex;font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;white-space:nowrap;width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,:where(.ag-header-cell-sortable) .ag-header-cell-label{cursor:pointer}:where(.ag-ltr) .ag-header-expand-icon{margin-left:4px}:where(.ag-rtl) .ag-header-expand-icon{margin-right:4px}.ag-header-row:where(:not(:first-child)){:where(.ag-header-cell:not(.ag-header-span-height.ag-header-span-total,.ag-header-parent-hidden),.ag-header-group-cell.ag-header-group-cell-with-group){border-top:var(--ag-header-row-border)}}.ag-header-row:where(:not(.ag-header-row-column-group)){overflow:hidden}:where(.ag-header.ag-header-allow-overflow) .ag-header-row{overflow:visible}.ag-header-cell{display:inline-flex;overflow:hidden}.ag-header-group-cell{contain:paint;display:flex}.ag-header-cell,.ag-header-group-cell{align-items:center;gap:var(--ag-cell-widget-spacing);height:100%;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:where(:not(.ag-floating-filter)),.ag-header-group-cell{&:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}&:where(:hover):before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}&:where(.ag-header-cell-moving):before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}}:where(.ag-header-cell:not(.ag-floating-filter) *,.ag-header-group-cell *){position:relative;z-index:1}.ag-header-cell-menu-button:where(:not(.ag-header-menu-always-show)){opacity:0;transition:opacity .2s}.ag-header-cell-filter-button,:where(.ag-header-cell.ag-header-active) .ag-header-cell-menu-button{opacity:1}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;overflow:hidden;padding:5px 0}:where(.ag-ltr) .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-header-cell-label{text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;overflow:visible;position:sticky}:where(.ag-ltr) .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-cell-comp-wrapper{width:100%}:where(.ag-header-group-cell) .ag-header-cell-comp-wrapper{display:flex}:where(.ag-header-cell:not(.ag-header-cell-auto-height)) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-header-cell-comp-wrapper-limited-height>*{overflow:hidden}:where(.ag-right-aligned-header) .ag-header-cell-label{flex-direction:row-reverse}:where(.ag-ltr) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-ltr) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}:where(.ag-ltr) .ag-header-cell:after,:where(.ag-ltr) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-right:var(--ag-header-column-border);right:0}:where(.ag-rtl) .ag-header-cell:after,:where(.ag-rtl) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-accent-color);content:"";height:100%;position:absolute;width:1px}:where(.ag-ltr) .ag-header-highlight-before:after{left:0}:where(.ag-rtl) .ag-header-highlight-before:after{right:0}:where(.ag-ltr) .ag-header-highlight-after:after{right:0;:where(.ag-pinned-left-header) &{right:1px}}:where(.ag-rtl) .ag-header-highlight-after:after{left:0;:where(.ag-pinned-left-header) &{left:1px}}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2;&:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}}:where(.ag-ltr) .ag-header-cell-resize{right:-3px;&:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-rtl) .ag-header-cell-resize{left:-3px;&:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-header-cell.ag-header-span-height) .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group:where(.ag-header-span-height){display:none}.ag-sort-indicator-container{display:flex;gap:var(--ag-spacing)}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}ag-grid,ag-grid-angular{display:block}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}.ag-virtual-list-item{height:var(--ag-list-item-height);position:absolute;width:100%}.ag-list-item-hovered:after{background-color:var(--ag-accent-color);content:"";height:1px;left:0;position:absolute;right:0}.ag-item-highlight-top:after{top:0}.ag-item-highlight-bottom:after{bottom:0}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab;:where(.ag-icon){color:var(--ag-drag-handle-color)}}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons,:where(.ag-group-contracted) .ag-icon,:where(.ag-group-expanded) .ag-icon{background-color:var(--ag-icon-button-background-color);border-radius:var(--ag-icon-button-border-radius);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-background-color);color:var(--ag-icon-button-color);&:hover{background-color:var(--ag-icon-button-hover-background-color);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-hover-background-color);color:var(--ag-icon-button-hover-color)}}.ag-filter-active{background-image:linear-gradient(var(--ag-icon-button-active-background-color),var(--ag-icon-button-active-background-color));border-radius:1px;outline:solid var(--ag-icon-button-background-spread) var(--ag-icon-button-active-background-color);position:relative;&:after{background-color:var(--ag-icon-button-active-indicator-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}:where(.ag-icon-filter){clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z");color:var(--ag-icon-button-active-color)}}:where(.ag-ltr) .ag-filter-active{&:after{right:-1px}}:where(.ag-rtl) .ag-filter-active{&:after{left:-1px}}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;overflow-y:auto;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}']),function(e,t){for(const n of t.sort((e,t)=>e.moduleName.localeCompare(t.moduleName))){const t=n.css;t&&e.set(`module-${n.moduleName}`,t)}}(e,Array.from(new Set(mA))),e}getDefaultTheme(){return mH}themeError(e){FA(240,{theme:e})}},class extends YM{constructor(){super(...arguments),this.beanName="scrollVisibleSvc"}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colAnimation=e.colAnimation}postConstruct(){this.horizontalScrollShowing=!0===this.gos.get("alwaysShowHorizontalScroll"),this.verticalScrollShowing=!0===this.gos.get("alwaysShowVerticalScroll"),this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.updateScrollVisible.bind(this),displayedColumnsWidthChanged:this.updateScrollVisible.bind(this)})}updateScrollVisible(){const{colAnimation:e}=this;(null==e?void 0:e.isActive())?e.executeLaterVMTurn(()=>{e.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){var e;const t=this.ctrlsSvc.get("center");if(!t||(null==(e=this.colAnimation)?void 0:e.isActive()))return;const n={horizontalScrollShowing:t.isHorizontalScrollShowing(),verticalScrollShowing:this.verticalScrollShowing};this.setScrollsVisible(n),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsSvc.get("center"),t=e.hasHorizontalScrollGap(),n=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==n)&&(this.horizontalScrollGap=t,this.verticalScrollGap=n,this.eventSvc.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventSvc.dispatchEvent({type:"scrollVisibilityChanged"}))}getScrollbarWidth(){if(null==this.scrollbarWidth){const e=this.gos.get("scrollbarWidth"),t="number"==typeof e&&e>=0?e:(null==xT&&ZT(),xT);null!=t&&(this.scrollbarWidth=t,this.eventSvc.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},class extends YM{constructor(){super(...arguments),this.beanName="ctrlsSvc",this.params={},this.ready=!1,this.readyCallbacks=[]}postConstruct(){var e,t;this.addEventListener("ready",()=>{if(this.updateReady(),this.ready){for(const e of this.readyCallbacks)e(this.params);this.readyCallbacks.length=0}},(null==(t=(e=this.beans.frameworkOverrides).runWhenReadyAsync)?void 0:t.call(e))??!1)}updateReady(){const e=Object.values(this.params);this.ready=23===e.length&&e.every(e=>(null==e?void 0:e.isAlive())??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{const e=this.readyCallbacks.indexOf(t);e>=0&&this.readyCallbacks.splice(e,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:n}=this.params;return[e,n,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}getScrollFeature(){return this.getGridBodyCtrl().scrollFeature}},class extends YM{constructor(){super(...arguments),this.beanName="syncSvc",this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.beans.ctrlsSvc.whenReady(this,()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){const{colModel:t,rowModel:n}=this.beans;t.setColumnDefs(e??[],"gridInitializing"),n.start()}gridReady(){const{eventSvc:e,gos:t}=this;e.dispatchEvent({type:"gridReady"}),hA(t,`initialised successfully, enterprise = ${t.isModuleRegistered("EnterpriseCore")}`)}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t)return this.waitingForColumns?(this.waitingForColumns=!1,void this.setColumnsAndData(t)):void this.beans.colModel.setColumnDefs(t,jN(e.source))}},class extends YM{constructor(){super(...arguments),this.beanName="colNames"}getDisplayNameForColumn(e,t,n=!1){if(!e)return null;const r=this.getHeaderName(e.getColDef(),e,null,null,t),{aggColNameSvc:o}=this.beans;return n&&o?o.getHeaderName(e,r):r}getDisplayNameForProvidedColumnGroup(e,t,n){const r=null==t?void 0:t.getColGroupDef();return r?this.getHeaderName(r,null,e,t,n):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,n,r,o){var i;const s=e.headerValueGetter;if(s){const a=nN(this.gos,{colDef:e,column:t,columnGroup:n,providedColumnGroup:r,location:o});return"function"==typeof s?s(a):"string"==typeof s?(null==(i=this.beans.expressionSvc)?void 0:i.evaluate(s,a))??null:""}return null!=e.headerName?e.headerName:e.field?(a=e.field)&&null!=a?a.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z])([a-z])/g,"$1 $2$3").replace(/\./g," ").split(" ").map(e=>e.substring(0,1).toUpperCase()+(e.length>1?e.substring(1,e.length):"")).join(" "):null:"";var a}},class extends YM{constructor(){super(...arguments),this.beanName="colViewport",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.columnsToRenderLeft=[],this.columnsToRenderRight=[],this.columnsToRenderCenter=[]}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,n=!1){const{visibleCols:r}=this,o=r.isBodyWidthDirty;if(!(e===this.scrollWidth&&t===this.scrollPosition&&!o)){if(this.scrollWidth=e,this.scrollPosition=t,r.isBodyWidthDirty=!0,this.gos.get("enableRtl")){const n=r.bodyWidth;this.viewportLeft=n-t-e,this.viewportRight=n-t}else this.viewportLeft=t,this.viewportRight=e+t;this.colModel.ready&&this.checkViewportColumns(n)}}getColumnHeadersToRender(e){switch(e){case"left":return this.columnsToRenderLeft;case"right":return this.columnsToRenderRight;default:return this.columnsToRenderCenter}}getHeadersToRender(e,t){let n;switch(e){case"left":n=this.rowsOfHeadersToRenderLeft[t];break;case"right":n=this.rowsOfHeadersToRenderRight[t];break;default:n=this.rowsOfHeadersToRenderCenter[t]}return n??[]}extractViewportColumns(){const e=this.visibleCols.centerCols;this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||0===this.viewportRight}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return!(!e.isAutoHeaderHeight()&&!function(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}(e))||this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,n=t+e.getActualWidth(),r=this.viewportLeft-200,o=this.viewportRight+200;return!(t<r&&n<r)&&!(t>o&&n>o)}getViewportColumns(){const{leftCols:e,rightCols:t}=this.visibleCols;return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.colModel.colSpanActive)return this.colsWithinViewport;const t=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),{visibleCols:n}=this,r=n.centerCols;return n.getColsForRow(e,r,t,e=>{const t=e.getLeft();return BD(t)&&t>this.viewportLeft})}checkViewportColumns(e=!1){this.extractViewport()&&this.eventSvc.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}calculateHeaderRows(){const{leftCols:e,rightCols:t}=this.visibleCols;this.columnsToRenderLeft=e,this.columnsToRenderRight=t,this.columnsToRenderCenter=this.colsWithinViewport;const n=e=>{const t=new Set,n={};for(const r of e){let e=r.getParent();const o=r.isSpanHeaderHeight();for(;e&&!t.has(e);){if(o&&e.isPadding()){e=e.getParent();continue}const r=e.getProvidedColumnGroup().getLevel();n[r]??(n[r]=[]),n[r].push(e),t.add(e),e=e.getParent()}}return n};this.rowsOfHeadersToRenderLeft=n(e),this.rowsOfHeadersToRenderRight=n(t),this.rowsOfHeadersToRenderCenter=n(this.headerColsWithinViewport)}extractViewport(){this.extractViewportColumns();const e=this.getViewportColumns().map(e=>`${e.getId()}-${e.getPinned()||"normal"}`).join("#"),t=this.colsWithinViewportHash!==e;return t&&(this.colsWithinViewportHash=e,this.calculateHeaderRows()),t}},class extends YM{constructor(){super(...arguments),this.beanName="iconSvc"}createIconNoSpan(e,t){return GL(e,this.beans,null==t?void 0:t.column)}}],icons:{selectOpen:"small-down",smallDown:"small-down",colorPicker:"color-picker",smallUp:"small-up",checkboxChecked:"small-up",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off",smallLeft:"small-left",smallRight:"small-right"},apiFunctions:{getGridId:function(e){return e.context.getId()},destroy:function(e){e.gridDestroySvc.destroy()},isDestroyed:function(e){return e.gridDestroySvc.destroyCalled},getGridOption:function(e,t){return e.gos.get(t)},setGridOption:function(e,t,n){aB(e,{[t]:n})},updateGridOptions:aB,isModuleRegistered:function(e,t){const n=t.replace(/Module$/,"");return e.gos.isModuleRegistered(n)}},dependsOn:[UB,jB,DB,P_,zH,FB,$H,C_,O_,UH,h_,f_,g_,KH,XB,KB,j_,BB,v_]};var E_=new WeakMap,D_=new WeakMap,M_=1,A_=class{create(e,t,n,r,o,i){const s=lA.applyGlobalGridOptions(t),a=s.gridId??String(M_++),l=this.getRegisteredModules(o,a,s.rowModelType),c=this.createBeansList(s.rowModelType,l,a),u=this.createProvidedBeans(e,s,o);if(!c)return;const d={providedBeanInstances:u,beanClasses:c,id:a,beanInitComparator:QL,beanDestroyComparator:eB,derivedBeans:[ZL],destroyCallback:()=>{D_.delete(p),E_.delete(e),function(e){delete yA[e]}(a),null==i||i()}},h=new rI(d);this.registerModuleFeatures(h,l),n(h),h.getBean("syncSvc").start(),null==r||r(h);const p=h.getBean("gridApi");return E_.set(e,p),D_.set(p,e),p}getRegisteredModules(e,t,n){var r;return xA(R_,void 0,!0),null==(r=null==e?void 0:e.modules)||r.forEach(e=>xA(e,t)),function(e,t){const n=yA[e]??{};return[...Object.values(vA.all??{}),...Object.values(n.all??{}),...Object.values(vA[t]??{}),...Object.values(n[t]??{})]}(t,N_(n))}registerModuleFeatures(e,t){const n=e.getBean("registry"),r=e.getBean("apiFunctionSvc");for(const o of t){n.registerModule(o);const e=o.apiFunctions;if(e){const t=Object.keys(e);for(const n of t)null==r||r.addFunction(n,e[n])}}}createProvidedBeans(e,t,n){let r=n?n.frameworkOverrides:null;HD(r)&&(r=new YL);const o={gridOptions:t,eGridDiv:e,eRootDiv:e,globalListener:n?n.globalListener:null,globalSyncListener:n?n.globalSyncListener:null,frameworkOverrides:r};return(null==n?void 0:n.providedBeanInstances)&&Object.assign(o,n.providedBeanInstances),o}createBeansList(e,t,n){const r={clientSide:"ClientSideRowModel",infinite:"InfiniteRowModel",serverSide:"ServerSideRowModel",viewport:"ViewportRowModel"},o=N_(e),i=r[o];if(!i)return void IA(201,{rowModelType:o},`Unknown rowModelType ${o}.`);if(!bA)return void IA(272,void 0,"No AG Grid modules are registered! It is recommended to start with all Community features via the AllCommunityModule:\n                    \n    import { ModuleRegistry, AllCommunityModule } from 'ag-grid-community';\n    \n    ModuleRegistry.registerModules([ AllCommunityModule ]);\n    ");if(!e){const e=Object.entries(r).filter(([e,t])=>SA(t,n,e));if(1==e.length){const[t,n]=e[0];if(t!==o){const e={moduleName:n,rowModelType:t};return void IA(275,e,function({moduleName:e,rowModelType:t}){return`To use the ${e}Module you must set the gridOption "rowModelType='${t}'"`}(e))}}}if(!SA(i,n,o))return void IA(200,{reasonOrId:`rowModelType = '${o}'`,moduleName:i,gridScoped:kA(),gridId:n,rowModelType:o},`Missing module ${i}Module for rowModelType ${o}.`);const s=new Set;for(const a of t)for(const e of a.beans??[])s.add(e);return Array.from(s)}};function N_(e){return e??"clientSide"}var T_=class{wrap(e,t,n,r){const o=this.createWrapper(e,r);for(const i of t??[])this.createMethod(o,i,!0);for(const i of n??[])this.createMethod(o,i,!1);return o}createMethod(e,t,n){e.addMethod(t,this.createMethodProxy(e,t,n))}createMethodProxy(e,t,n){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(n&&TA(49,{methodName:t}),null)}}};new Set(Object.keys({paste:"api",rangeSvc:"api",fillHandle:"api",cellClear:"api",bulk:"api"}));var F_=u.createContext({}),I_=u.createContext("default"),L_=(e,t,n,r)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const o=e.newAgStackInstance();let i,s,a=!1;return o.then(e=>{a?t.destroyBean(e):(i=e,s=i.getGui(),n.appendChild(s),B_(r,i))}),()=>{a=!0,i&&(null==s||s.remove(),t.destroyBean(i),r&&B_(r,void 0))}},B_=(e,t)=>{if(e)if(e instanceof Function){e(t)}else{e.current=t}},H_=(...e)=>e.filter(e=>null!=e&&""!==e).join(" "),__=class e{constructor(...e){this.classesMap={};for(const t of e)this.classesMap[t]=!0}setClass(t,n){if(!!this.classesMap[t]==n)return this;const r=new e;return r.classesMap={...this.classesMap},r.classesMap[t]=n,r}toString(){return Object.keys(this.classesMap).filter(e=>this.classesMap[e]).join(" ")}},G_=e=>"function"==typeof e&&!(e.prototype&&e.prototype.isReactComponent)||"object"==typeof e&&e.$$typeof===("function"==typeof Symbol&&Symbol.for?Symbol.for("react.memo"):60115),V_=null==(n=u.version)?void 0:n.split(".")[0],W_="16"===V_||"17"===V_;var z_=!1;var $_=(e,t)=>{W_||!e||z_?t():d.flushSync(t)};function U_(e,t,n){if(null==t||null==e)return t;if(e===t||0===t.length&&0===e.length)return e;if(n||0===e.length&&t.length>0||e.length>0&&0===t.length)return t;const r=[],o=[],i=new Map,s=new Map;for(let a=0;a<t.length;a++){const e=t[a];s.set(e.instanceId,e)}for(let a=0;a<e.length;a++){const t=e[a];i.set(t.instanceId,t),s.has(t.instanceId)&&r.push(t)}for(let a=0;a<t.length;a++){const e=t[a],n=e.instanceId;i.has(n)||o.push(e)}return r.length===e.length&&0===o.length?e:0===r.length&&o.length===t.length?t:0===r.length?o:0===o.length?r:[...r,...o]}var K_=r.forwardRef((e,t)=>{var n;const{registry:o,context:i}=r.useContext(F_),s=r.useRef(null),a=r.useRef(null),l=r.useRef(null),c=r.useRef(null),d=r.useRef(null),h=r.useRef(),[p,f]=r.useState(),[g,m]=r.useState(),[v,y]=r.useState(),[b,w]=r.useState(()=>new __),[C,x]=r.useState(()=>new __("ag-hidden")),[S,k]=r.useState(()=>new __("ag-hidden")),[P,j]=r.useState(()=>new __("ag-invisible"));r.useImperativeHandle(t,()=>({refresh:()=>!1})),r.useLayoutEffect(()=>L_(p,i,a.current),[p]);const O=r.useCallback(t=>{if(s.current=t,!t||i.isDestroyed())return void(h.current=i.destroyBean(h.current));const n={setInnerRenderer:(e,t)=>{f(e),y(t)},setChildCount:e=>m(e),toggleCss:(e,t)=>w(n=>n.setClass(e,t)),setContractedDisplayed:e=>k(t=>t.setClass("ag-hidden",!e)),setExpandedDisplayed:e=>x(t=>t.setClass("ag-hidden",!e)),setCheckboxVisible:e=>j(t=>t.setClass("ag-invisible",!e)),setCheckboxSpacing:e=>j(t=>t.setClass("ag-group-checkbox-spacing",e))},r=o.createDynamicBean("groupCellRendererCtrl",!0);r&&(h.current=i.createBean(r),h.current.init(n,t,l.current,c.current,d.current,K_,e))},[]),R=r.useMemo(()=>`ag-cell-wrapper ${b.toString()}`,[b]),E=r.useMemo(()=>`ag-group-expanded ${C.toString()}`,[C]),D=r.useMemo(()=>`ag-group-contracted ${S.toString()}`,[S]),M=r.useMemo(()=>`ag-group-checkbox ${P.toString()}`,[P]),A=null==p?void 0:p.componentFromFramework,N=A?p.componentClass:void 0,T=null==p&&null!=v,F=zD(v);return u.createElement("span",{className:R,ref:O,...e.colDef?{}:{role:null==(n=h.current)?void 0:n.getCellAriaRole()}},u.createElement("span",{className:E,ref:c}),u.createElement("span",{className:D,ref:d}),u.createElement("span",{className:M,ref:l}),u.createElement("span",{className:"ag-group-value",ref:a},T?F:A?u.createElement(N,{...p.params}):null),u.createElement("span",{className:"ag-group-child-count"},g))}),q_=K_,X_=r.createContext({setMethods:()=>{}}),Y_=r.memo(e=>{const{initialProps:t,addUpdateCallback:n,CustomComponentClass:o,setMethods:i}=e,[{key:s,...a},l]=r.useState(t);return r.useEffect(()=>{n(e=>l(e))},[]),u.createElement(X_.Provider,{value:{setMethods:i}},u.createElement(o,{key:s,...a}))}),Z_=0;function J_(){return"agPortalKey_"+ ++Z_}var Q_=class{constructor(e,t,n,r){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=n,this.suppressFallbackMethods=!!r,this.statelessComponent=this.isStateless(this.reactComponent),this.key=J_(),this.portalKey=J_(),this.instanceCreated=this.isStatelessComponent()?QN.resolve(!1):new QN(e=>{this.resolveInstanceCreated=e})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&"function"==typeof this.componentInstance.destroy&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),n=document.createElement(t||"div");return n.classList.add("ag-react-container"),e.reactContainer=n,n}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return"function"==typeof Symbol&&Symbol.for}isStateless(e){return"function"==typeof e&&!(e.prototype&&e.prototype.isReactComponent)||"object"==typeof e&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&null!=t[e]||this.fallbackMethodAvailable(e)}callMethod(e,t){const n=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!n)return void setTimeout(()=>this.callMethod(e,t));const r=n[e];return r?r.apply(n,t):this.fallbackMethodAvailable(e)?this.fallbackMethod(e,t&&t[0]?t[0]:{}):void 0}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new QN(e=>this.createReactComponent(e))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=e=>{var t;this.componentInstance=e,null==(t=this.resolveInstanceCreated)||t.call(this,!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=o.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return r.createElement(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!(this.isStatelessComponent()||!this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const n=this[`${e}Component`];if(!this.suppressFallbackMethods&&n)return n.bind(this)(t)}fallbackMethodAvailable(e){if(this.suppressFallbackMethods)return!1;return!!this[`${e}Component`]}};function eG(e,t,n){for(const r of e){const e=t[r];e&&(n[r]=e)}}var tG=class extends Q_{constructor(){super(...arguments),this.awaitUpdateCallback=new QN(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=Y_}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:e=>this.setMethods(e),addUpdateCallback:e=>{this.updateCallback=()=>(e(this.getProps()),new QN(e=>{setTimeout(()=>{e()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,eG(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new QN(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},nG=class extends tG{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},rG=class extends tG{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},oG=class extends tG{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:t,icon:n,shake:r}=this;return e.label=t,e.icon=n,e.shake=r,e}},iG=class extends tG{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new QN(e=>{this.resolveSetMethodsCallback=e})}isFilterActive(){return null!=this.model}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){var t;const n=this.providedMethods;n?null==(t=n.afterGuiAttached)||t.call(n,e):this.awaitSetMethodsCallback.then(()=>{var t,n;return null==(n=null==(t=this.providedMethods)?void 0:t.afterGuiAttached)?void 0:n.call(t,e)})}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){var t,n;!1===this.expectingNewMethods&&this.hasBeenActive&&(null==(t=this.providedMethods)?void 0:t.doesFilterPass)!==(null==e?void 0:e.doesFilterPass)&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback(),null==(n=this.resolveFilterPassCallback)||n.call(this),this.resolveFilterPassCallback=void 0}updateModel(e){var t;null==(t=this.resolveFilterPassCallback)||t.call(this);const n=new QN(e=>{this.resolveFilterPassCallback=e});this.setModel(e).then(()=>{n.then(()=>{this.sourceParams.filterChangedCallback()})})}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,e}},sG=class extends tG{constructor(){super(...arguments),this.awaitSetMethodsCallback=new QN(e=>{this.resolveSetMethodsCallback=e})}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){var t;const n=this.providedMethods;n?null==(t=n.afterGuiAttached)||t.call(n,e):this.awaitSetMethodsCallback.then(()=>{var t,n;return null==(n=null==(t=this.providedMethods)?void 0:t.afterGuiAttached)?void 0:n.call(t,e)})}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","onAnyFilterChanged"]}setMethods(e){super.setMethods(e),this.resolveSetMethodsCallback()}};function aG(e,t){e.parentFilterInstance(n=>{(n.setModel(t)||QN.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var lG=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=e=>this.updateModel(e)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){eG(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),aG(this.floatingFilterParams,e)}},cG=class extends tG{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),aG(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},uG=class extends tG{refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}},dG=class extends tG{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},hG=class extends tG{refresh(e){this.sourceParams=e,this.refreshProps()}},pG=class extends tG{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},fG=class extends tG{refresh(e){this.sourceParams=e,this.refreshProps()}},gG=class extends tG{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},mG=class extends tG{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function vG(){TA(231)}var yG=class{constructor(e,t,n){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=n||1e3}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(t=>t!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,n){this.portals=[...this.portals,e],this.waitForInstance(t,n),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t,n=Date.now()){if(this.destroyed)t(null);else if(e.rendered())t(e);else{if(Date.now()-n>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate)return $_(!0,()=>this.refresher()),void(e.rendered()&&t(e));window.setTimeout(()=>{this.waitForInstance(e,t,n)})}}},bG=r.memo(({ctrl:e})=>{const t=e.isAlive(),{context:n}=r.useContext(F_),[o,i]=r.useState(),[s,a]=r.useState(),l=r.useRef(),c=r.useRef(null),d=r.useRef(null),h=r.useRef(null),p=r.useRef(),f=r.useRef();t&&!f.current&&(f.current=new XN(()=>c.current));const g=r.useCallback(t=>{if(c.current=t,!t||!e.isAlive()||n.isDestroyed())return void(l.current=n.destroyBean(l.current));l.current=n.createBean(new UN);const r=()=>{var t;const n=e.getSelectAllGui();n&&(null==(t=d.current)||t.insertAdjacentElement("afterend",n),l.current.addDestroyFunc(()=>n.remove()))},o={setWidth:e=>{c.current&&(c.current.style.width=e)},toggleCss:(e,t)=>f.current.toggleCss(e,t),setUserStyles:e=>a(e),setAriaSort:e=>{c.current&&(e?function(e,t){JD(e,"sort",t)}(c.current,e):QD(c.current,"sort"))},setUserCompDetails:e=>i(e),getUserCompInstance:()=>p.current||void 0,refreshSelectAllGui:r,removeSelectAllGui:()=>{var t;return null==(t=e.getSelectAllGui())?void 0:t.remove()}};e.setComp(o,t,d.current,h.current,l.current),r()},[]);r.useLayoutEffect(()=>L_(o,n,h.current,p),[o]),r.useEffect(()=>{e.setDragSource(c.current)},[o]);const m=r.useMemo(()=>!!((null==o?void 0:o.componentFromFramework)&&G_(o.componentClass)),[o]),v=null==o?void 0:o.componentFromFramework,y=null==o?void 0:o.componentClass;return u.createElement("div",{ref:g,style:s,className:"ag-header-cell",role:"columnheader"},u.createElement("div",{ref:d,className:"ag-header-cell-resize",role:"presentation"}),u.createElement("div",{ref:h,className:"ag-header-cell-comp-wrapper",role:"presentation"},v?m?u.createElement(y,{...o.params}):u.createElement(y,{...o.params,ref:p}):null))}),wG=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t}getProps(){return this.floatingFilterParams}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){eG(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}},CG=r.memo(({ctrl:e})=>{const{context:t,gos:n}=r.useContext(F_),[o,i]=r.useState(),[s,a]=r.useState(()=>new __("ag-header-cell","ag-floating-filter")),[l,c]=r.useState(()=>new __),[d,h]=r.useState(()=>new __("ag-floating-filter-button","ag-hidden")),[p,f]=r.useState("false"),[g,m]=r.useState(),[,v]=r.useState(1),y=r.useRef(),b=r.useRef(null),w=r.useRef(null),C=r.useRef(null),x=r.useRef(null),S=r.useRef(),k=r.useRef(),P=e=>{null!=e&&S.current&&S.current(e)},j=r.useCallback(n=>{if(b.current=n,!n||!e.isAlive()||t.isDestroyed())return void(y.current=t.destroyBean(y.current));y.current=t.createBean(new UN),k.current=new QN(e=>{S.current=e});const r={toggleCss:(e,t)=>a(n=>n.setClass(e,t)),setUserStyles:e=>i(e),addOrRemoveBodyCssClass:(e,t)=>c(n=>n.setClass(e,t)),setButtonWrapperDisplayed:e=>{h(t=>t.setClass("ag-hidden",!e)),f(e?"false":"true")},setWidth:e=>{b.current&&(b.current.style.width=e)},setCompDetails:e=>m(e),getFloatingFilterComp:()=>k.current?k.current:null,setMenuIcon:e=>{var t;return null==(t=x.current)?void 0:t.appendChild(e)}};e.setComp(r,n,x.current,w.current,y.current)},[]);r.useLayoutEffect(()=>L_(g,t,w.current,P),[g]);const O=r.useMemo(()=>s.toString(),[s]),R=r.useMemo(()=>l.toString(),[l]),E=r.useMemo(()=>d.toString(),[d]),D=r.useMemo(()=>!!(g&&g.componentFromFramework&&G_(g.componentClass)),[g]),M=r.useMemo(()=>n.get("reactiveCustomComponents"),[]),A=r.useMemo(()=>n.get("enableFilterHandlers"),[]),[N,T]=r.useState();r.useEffect(()=>{if(null==g?void 0:g.componentFromFramework)if(M){const e=new(A?wG:lG)(g.params,()=>v(e=>e+1));P(e),T(e)}else vG()},[g]);const F=null==N?void 0:N.getProps(),I=null==g?void 0:g.componentFromFramework,L=null==g?void 0:g.componentClass;return u.createElement("div",{ref:j,style:o,className:O,role:"gridcell"},u.createElement("div",{ref:w,className:R,role:"presentation"},I?M?F&&u.createElement(X_.Provider,{value:{setMethods:e=>N.setMethods(e)}},u.createElement(L,{...F})):u.createElement(L,{...g.params,ref:D?()=>{}:P}):null),u.createElement("div",{ref:C,"aria-hidden":p,className:E,role:"presentation"},u.createElement("button",{ref:x,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))}),xG=r.memo(({ctrl:e})=>{const{context:t}=r.useContext(F_),[n,o]=r.useState(),[i,s]=r.useState(()=>new __),[a,l]=r.useState(()=>new __),[c,d]=r.useState("false"),[h,p]=r.useState(),[f,g]=r.useState(),m=r.useRef(),v=r.useRef(null),y=r.useRef(null),b=r.useRef(null),w=r.useRef(),C=r.useCallback(n=>{if(v.current=n,!n||!e.isAlive()||t.isDestroyed())return void(m.current=t.destroyBean(m.current));m.current=t.createBean(new UN);const r={setWidth:e=>{v.current&&(v.current.style.width=e)},toggleCss:(e,t)=>s(n=>n.setClass(e,t)),setUserStyles:e=>o(e),setHeaderWrapperHidden:e=>{const t=b.current;t&&(e?t.style.setProperty("display","none"):t.style.removeProperty("display"))},setHeaderWrapperMaxHeight:e=>{const t=b.current;t&&(null!=e?t.style.setProperty("max-height",`${e}px`):t.style.removeProperty("max-height"),t.classList.toggle("ag-header-cell-comp-wrapper-limited-height",null!=e))},setUserCompDetails:e=>g(e),setResizableDisplayed:e=>{l(t=>t.setClass("ag-hidden",!e)),d(e?"false":"true")},setAriaExpanded:e=>p(e),getUserCompInstance:()=>w.current||void 0};e.setComp(r,n,y.current,b.current,m.current)},[]);r.useLayoutEffect(()=>L_(f,t,b.current),[f]),r.useEffect(()=>{v.current&&e.setDragSource(v.current)},[f]);const x=r.useMemo(()=>!!((null==f?void 0:f.componentFromFramework)&&G_(f.componentClass)),[f]),S=r.useMemo(()=>"ag-header-group-cell "+i.toString(),[i]),k=r.useMemo(()=>"ag-header-cell-resize "+a.toString(),[a]),P=null==f?void 0:f.componentFromFramework,j=null==f?void 0:f.componentClass;return u.createElement("div",{ref:C,style:n,className:S,role:"columnheader","aria-expanded":h},u.createElement("div",{ref:b,className:"ag-header-cell-comp-wrapper",role:"presentation"},P?x?u.createElement(j,{...f.params}):u.createElement(j,{...f.params,ref:w}):null),u.createElement("div",{ref:y,"aria-hidden":c,className:k}))}),SG=r.memo(({ctrl:e})=>{const{gos:t,context:n}=r.useContext(F_),{topOffset:o,rowHeight:i}=r.useMemo(()=>e.getTopAndHeight(),[]),s=r.useMemo(()=>t.get("tabIndex"),[]),[a,l]=r.useState(()=>e.getAriaRowIndex()),c=e.headerRowClass,[d,h]=r.useState(()=>i+"px"),[p,f]=r.useState(()=>o+"px"),g=r.useRef(null),[m,v]=r.useState(()=>e.getUpdatedHeaderCtrls()),y=r.useRef(),b=r.useRef(null),w=r.useCallback(t=>{if(b.current=t,!t||!e.isAlive()||n.isDestroyed())return void(y.current=n.destroyBean(y.current));y.current=n.createBean(new UN);const r={setHeight:e=>h(e),setTop:e=>f(e),setHeaderCtrls:(e,t,n)=>{const r=g.current,o=U_(r,e,t);o!==r&&(g.current=o,$_(n,()=>v(o)))},setWidth:e=>{b.current&&(b.current.style.width=e)},setRowIndex:e=>{l(e)}};e.setComp(r,y.current,!1)},[]),C=r.useMemo(()=>({height:d,top:p}),[d,p]),x=r.useCallback(t=>{switch(e.type){case"group":return u.createElement(xG,{ctrl:t,key:t.instanceId});case"filter":return u.createElement(CG,{ctrl:t,key:t.instanceId});default:return u.createElement(bG,{ctrl:t,key:t.instanceId})}},[]);return u.createElement("div",{ref:w,className:c,role:"row",style:C,tabIndex:s,"aria-rowindex":a},m.map(x))}),kG=r.memo(({pinned:e})=>{const[t,n]=r.useState(!0),[o,i]=r.useState([]),{context:s}=r.useContext(F_),a=r.useRef(null),l=r.useRef(null),c=r.useRef(),d="left"===e,h="right"===e,p=!d&&!h,f=r.useCallback(t=>{if(a.current=t,!t||s.isDestroyed())return void(c.current=s.destroyBean(c.current));c.current=s.createBean(new LL(e));const r={setDisplayed:n,setCtrls:e=>i(e),setCenterWidth:e=>{l.current&&(l.current.style.width=e)},setViewportScrollLeft:e=>{a.current&&(a.current.scrollLeft=e)},setPinnedContainerWidth:e=>{a.current&&(a.current.style.width=e,a.current.style.minWidth=e,a.current.style.maxWidth=e)}};c.current.setComp(r,a.current)},[]),g=t?"":"ag-hidden",m=()=>o.map(e=>u.createElement(SG,{ctrl:e,key:e.instanceId}));return d?u.createElement("div",{ref:f,className:"ag-pinned-left-header "+g,"aria-hidden":!t,role:"rowgroup"},m()):h?u.createElement("div",{ref:f,className:"ag-pinned-right-header "+g,"aria-hidden":!t,role:"rowgroup"},m()):p?u.createElement("div",{ref:f,className:"ag-header-viewport "+g,role:"rowgroup",tabIndex:-1},u.createElement("div",{ref:l,className:"ag-header-container",role:"presentation"},m())):null}),PG=r.memo(()=>{const[e,t]=r.useState(()=>new __),[n,o]=r.useState(),{context:i}=r.useContext(F_),s=r.useRef(null),a=r.useRef(),l=r.useCallback(e=>{if(s.current=e,!e||i.isDestroyed())return void(a.current=i.destroyBean(a.current));a.current=i.createBean(new RL);const n={toggleCss:(e,n)=>t(t=>t.setClass(e,n)),setHeightAndMinHeight:e=>o(e)};a.current.setComp(n,e,e)},[]),c=r.useMemo(()=>"ag-header "+e.toString(),[e]),d=r.useMemo(()=>({height:n,minHeight:n}),[n]);return u.createElement("div",{ref:l,className:c,style:d,role:"presentation"},u.createElement(kG,{pinned:"left"}),u.createElement(kG,{pinned:null}),u.createElement(kG,{pinned:"right"}))}),jG=(e,t)=>{r.useEffect(()=>{const n=t.current;if(n){const t=n.parentElement;if(t){const r=document.createComment(e);return t.insertBefore(r,n),()=>{r.remove()}}}},[e])},OG=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new QN(e=>{this.resolveInstanceCreated=e}),this.onValueChange=e=>this.updateValue(e),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){eG(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){var t;this.componentInstance=e,null==(t=this.resolveInstanceCreated)||t.call(this),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached","getValidationErrors","getValidationElement"]}updateValue(e){this.value=e,this.refreshProps()}},RG=r.memo(e=>{const[t,n]=r.useState(),i=r.useContext(F_),{context:s,popupSvc:a,gos:l,editSvc:c}=i,{editDetails:u,cellCtrl:d,eParentCell:h}=e;return(e=>{const t=r.useRef(e),n=r.useRef(),o=r.useRef(!1),i=r.useRef(!1),[,s]=r.useState(0);o.current&&(i.current=!0),r.useEffect(()=>(o.current||(n.current=t.current(),o.current=!0),s(e=>e+1),()=>{var e;i.current&&(null==(e=n.current)||e.call(n))}),[])})(()=>{var t,r;const{compDetails:o}=u,i=l.get("stopEditingWhenCellsLoseFocus");let p,f;if(!s.isDestroyed()){f=s.createBean(c.createPopupEditorWrapper(o.params));const l=f.getGui();if(e.jsChildComp){const t=e.jsChildComp.getGui();t&&l.appendChild(t)}const{column:g,rowNode:m}=d,v={column:g,rowNode:m,type:"popupCellEditor",eventSource:h,ePopup:l,position:u.popupPosition,keepWithinBounds:!0},y=null==a?void 0:a.positionPopupByComponent.bind(a,v),b=null==a?void 0:a.addPopup({modal:i,eChild:l,closeOnEsc:!0,closedCallback:()=>{d.onPopupEditorClosed()},anchorToElement:h,positionCallback:y,ariaOwns:h});p=b?b.hideFunc:void 0,n(f),null==(r=null==(t=e.jsChildComp)?void 0:t.afterGuiAttached)||r.call(t)}return()=>{null==p||p(),s.destroyBean(f)}}),r.useLayoutEffect(()=>()=>{d.isCellFocused()&&(null==t?void 0:t.getGui().contains(KD(i)))&&h.focus({preventScroll:!0})},[t]),t&&e.wrappedContent?o.createPortal(e.wrappedContent,t.getGui()):null}),EG=(e,t,n)=>e.compProxy?((e,t,n)=>{const{compProxy:r}=e;n(r);const o=r.getProps(),i=G_(t);return u.createElement(X_.Provider,{value:{setMethods:e=>r.setMethods(e)}},i?u.createElement(t,{...o}):u.createElement(t,{...o,ref:e=>r.setRef(e)}))})(e,t,n):u.createElement(t,{...e.compDetails.params,ref:n}),DG=(e,t,n,o,i,s)=>{const{context:a}=r.useContext(F_),l=r.useCallback(()=>{const e=i.current;if(!e)return;const t=e.getGui();t&&t.parentElement&&t.remove(),a.destroyBean(e),i.current=void 0},[]);r.useEffect(()=>{const r=null!=e,o=(null==e?void 0:e.compDetails)&&!e.compDetails.componentFromFramework;if(!(r&&o&&!(t&&null==n)))return void l();const a=e.compDetails;if(i.current){const t=i.current,n=!!(null!=t.refresh&&0==e.force)&&t.refresh(a.params);if(!0===n||void 0===n)return;l()}a.newAgStackInstance().then(e=>{if(!e)return;const r=e.getGui();if(!r)return;(t?n:s.current).appendChild(r),i.current=e})},[e,t,o]),r.useEffect(()=>l,[])},MG=({cellCtrl:e,parent:t})=>{var n;const o=r.useRef(),i=r.useMemo(()=>{const{loadingComp:t}=e.getDeferLoadingCellRenderer();return t?{value:void 0,compDetails:t,force:!1}:void 0},[e]);if(DG(i,!1,void 0,1,o,t),null==(n=null==i?void 0:i.compDetails)?void 0:n.componentFromFramework){const e=i.compDetails.componentClass;return u.createElement(e,{...i.compDetails.params})}return u.createElement(u.Fragment,null)},AG=r.memo(({cellCtrl:e,printLayout:t,editingCell:n})=>{const o=r.useContext(F_),{context:i}=o,{column:{colIdSanitised:s},instanceId:a}=e,l=r.useRef(),[c,d]=r.useState(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[h,p]=r.useState(),[f,g]=r.useState(1),[m,v]=r.useState(),[y,b]=r.useState(!1),[w,C]=r.useState(!1),[x,S]=r.useState(!1),[k,P]=r.useState(),j=r.useMemo(()=>e.isForceWrapper(),[e]),O=r.useMemo(()=>e.getCellAriaRole(),[e]),R=r.useRef(null),E=r.useRef(null),D=r.useRef(null),M=r.useRef(),A=r.useRef(),N=r.useRef(),T=r.useRef([]),F=r.useRef(),I=r.useRef(),[L,B]=r.useState(0),H=r.useCallback(e=>{I.current=e,B(e=>e+1)},[]),_=null!=c&&(y||x||w)&&(null==h||!!h.popup),G=j||_,V=r.useMemo(()=>e.getCellValueClass(),[e]),W=r.useCallback(t=>{if(A.current=t,t){const n=t.isCancelBeforeStart&&t.isCancelBeforeStart();setTimeout(()=>{n?(e.stopEditing(!0),e.focusCell(!0)):(e.cellEditorAttached(),e.enableEditorTooltipFeature(t))})}},[e]),z=r.useRef();z.current||(z.current=new XN(()=>R.current)),DG(c,G,I.current,L,M,R);const $=r.useRef();r.useLayoutEffect(()=>{var e,t;const n=$.current,r=c;if($.current=c,null==n||null==n.compDetails||null==r||null==r.compDetails)return;null==(e=F.current)||e.refreshVisibility();const o=n.compDetails,i=r.compDetails;if(o.componentClass!=i.componentClass)return;if(null==(null==(t=D.current)?void 0:t.refresh))return;1!=D.current.refresh(i.params)&&g(e=>e+1)},[c]),r.useLayoutEffect(()=>{if(!(h&&!h.compDetails.componentFromFramework)||i.isDestroyed())return;const t=h.compDetails,n=!0===h.popup,r=t.newAgStackInstance();return r.then(e=>{var t;if(!e)return;const r=e.getGui();if(W(e),!n){const n=(j?N:R).current;null==n||n.appendChild(r),null==(t=e.afterGuiAttached)||t.call(e)}P(e)}),()=>{r.then(t=>{const n=t.getGui();e.disableEditorTooltipFeature(),i.destroyBean(t),W(void 0),P(void 0),null==n||n.remove()})}},[h]);const U=r.useCallback(t=>{if(N.current=t,!t||i.isDestroyed()||!e.isAlive()){const e=T.current;T.current=[];for(const t of e)t();return}let n;const r=e=>{e&&(t.insertAdjacentElement("afterbegin",e.getGui()),T.current.push(()=>{bM(e.getGui()),i.destroyBean(e),F.current===n&&(F.current=void 0)}))};y&&r(e.createSelectionCheckbox()),x&&r(e.createDndSource()),w&&(n=e.createRowDragComp(),F.current=n,n&&(r(n),n.refreshVisibility()))},[e,i,x,w,y]),K=r.useCallback(()=>{const r=!e.isCellSpanning()||E.current,o=R.current;if(!o||!r||!e||!e.isAlive()||i.isDestroyed())return void(l.current=i.destroyBean(l.current));l.current=i.createBean(new UN);const s={toggleCss:(e,t)=>z.current.toggleCss(e,t),setUserStyles:e=>v(e),getFocusableElement:()=>R.current,setIncludeSelection:e=>b(e),setIncludeRowDrag:e=>C(e),setIncludeDndSource:e=>S(e),getCellEditor:()=>A.current??null,getCellRenderer:()=>D.current??M.current,getParentOfValue:()=>I.current??N.current??R.current,setRenderDetails:(t,n,r)=>{var o;const i=()=>{d(e=>(null==e?void 0:e.compDetails)!==t||(null==e?void 0:e.value)!==n||(null==e?void 0:e.force)!==r?{value:n,compDetails:t,force:r}:e)};if((null==(o=null==t?void 0:t.params)?void 0:o.deferRender)&&!e.rowNode.group){const{loadingComp:t,onReady:n}=e.getDeferLoadingCellRenderer();if(t)return d({value:void 0,compDetails:t,force:!1}),void n.then(()=>{return e=i,void(W_?e():u.startTransition(e));var e})}i()},setEditDetails:(t,n,r,o)=>{if(t){let e;t.componentFromFramework&&(o?e=new OG(t.params,()=>g(e=>e+1)):vG()),p({compDetails:t,popup:n,popupPosition:r,compProxy:e}),n||d(void 0)}else{e.hasBrowserFocus()&&s.getFocusableElement().focus({preventScroll:!0}),A.current=void 0,p(void 0)}},refreshEditStyles:(e,t)=>{if(!R.current)return;const{current:n}=z;n.toggleCss("ag-cell-value",!G),n.toggleCss("ag-cell-inline-editing",!!e&&!t),n.toggleCss("ag-cell-popup-editing",!!e&&!!t),n.toggleCss("ag-cell-not-inline-editing",!e||!!t)}},a=N.current||void 0;e.setComp(s,o,E.current??void 0,a,t,n,l.current)},[]),q=r.useCallback(e=>{R.current=e,K()},[]),X=r.useCallback(e=>{E.current=e,K()},[]),Y=r.useMemo(()=>{var e;return!!((null==(e=null==c?void 0:c.compDetails)?void 0:e.componentFromFramework)&&G_(c.compDetails.componentClass))},[c]);r.useLayoutEffect(()=>{if(!R.current)return;const{current:e}=z;e.toggleCss("ag-cell-value",!G),e.toggleCss("ag-cell-inline-editing",!!h&&!h.popup),e.toggleCss("ag-cell-popup-editing",!!h&&!!h.popup),e.toggleCss("ag-cell-not-inline-editing",!h||!!h.popup)});const Z=()=>{var t;const{compDetails:n,value:o}=c;if(!n)return(null==(t=null==o?void 0:o.toString)?void 0:t.call(o))??o;if(n.componentFromFramework){const t=n.componentClass;return u.createElement(r.Suspense,{fallback:u.createElement(MG,{cellCtrl:e,parent:R})},Y?u.createElement(t,{...n.params,key:f}):u.createElement(t,{...n.params,key:f,ref:D}))}},J=()=>{const t=()=>null==c?null:G?u.createElement("span",{role:"presentation",id:`cell-${a}`,className:V,ref:H},Z()):Z(),n=t=>((e,t,n,r,o)=>{const i=e.compDetails,s=i.componentClass,a=i.componentFromFramework&&!e.popup,l=i.componentFromFramework&&e.popup,c=!i.componentFromFramework&&e.popup;return a?EG(e,s,t):l?u.createElement(RG,{editDetails:e,cellCtrl:r,eParentCell:n,wrappedContent:EG(e,s,t)}):c&&o?u.createElement(RG,{editDetails:e,cellCtrl:r,eParentCell:n,jsChildComp:o}):null})(t,W,R.current,e,k);return null!=h?h.popup?u.createElement(u.Fragment,null,t(),n(h)):n(h):t()},Q=()=>u.createElement("div",{ref:q,style:m,role:O,"col-id":s},G?u.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:U},J()):J());return e.isCellSpanning()?u.createElement("div",{ref:X,className:"ag-spanned-cell-wrapper",role:"presentation"},Q()):Q()}),NG=r.memo(({rowCtrl:e,containerType:t})=>{const{context:n,gos:o,editSvc:i}=r.useContext(F_),s="default"===r.useContext(I_),a=r.useRef(),l=r.useRef(e.getDomOrder()),c=e.isFullWidth(),d=e.rowNode.displayed,[h,p]=r.useState(()=>d?e.rowNode.getRowIndexString():null),[f,g]=r.useState(()=>e.rowId),[m,v]=r.useState(()=>e.businessKey),[y,b]=r.useState(()=>e.rowStyles),w=r.useRef(null),[C,x]=r.useState(()=>null),[S,k]=r.useState(),[P,j]=r.useState(()=>d?e.getInitialRowTop(t):void 0),[O,R]=r.useState(()=>d?e.getInitialTransform(t):void 0),E=r.useRef(null),D=r.useRef(),M=r.useRef(),A=r.useRef(!1),[N,T]=r.useState(0);r.useEffect(()=>{var t;if(A.current||!S||N>10)return;const n=null==(t=E.current)?void 0:t.firstChild;n?(e.setupDetailRowAutoHeight(n),A.current=!0):T(e=>e+1)},[S,N]);const F=r.useRef();F.current||(F.current=new XN(()=>E.current));const I=r.useRef(()=>{}),L=r.useCallback(e=>(I.current=e,()=>{I.current=()=>{}}),[]),B=(H=L,_=()=>w.current,G=[],u.useSyncExternalStore?u.useSyncExternalStore(H,_):G);var H,_,G;const V=s?B:C,W=r.useCallback(r=>{if(E.current=r,a.current=r?n.createBean(new UN):n.destroyBean(a.current),!r)return void e.unsetComp(t);if(!e.isAlive()||n.isDestroyed())return;const o={setTop:j,setTransform:R,toggleCss:(e,t)=>F.current.toggleCss(e,t),setDomOrder:e=>l.current=e,setRowIndex:p,setRowId:g,setRowBusinessKey:v,setUserStyles:b,setCellCtrls:(e,t)=>{const n=w.current,r=U_(n,e,l.current);r!==n&&(w.current=r,s?I.current():$_(t,()=>x(r)))},showFullWidth:e=>{M.current=e.params,k(e)},getFullWidthCellRenderer:()=>D.current,getFullWidthCellRendererParams:()=>M.current,refreshFullWidth:e=>{const t=e();return M.current=t,q.current?(k(e=>({...e,params:t})),!0):!(!D.current||!D.current.refresh)&&D.current.refresh(t)}};e.setComp(o,r,t,a.current)},[]);r.useLayoutEffect(()=>L_(S,n,E.current,D),[S]);const z=r.useMemo(()=>{const e={top:P,transform:O};return Object.assign(e,y),e},[P,O,y]),$=c&&(null==S?void 0:S.componentFromFramework),U=!c&&null!=V,K=r.useMemo(()=>!!((null==S?void 0:S.componentFromFramework)&&G_(S.componentClass)),[S]),q=r.useRef(!1);r.useEffect(()=>{q.current=K&&!!S&&!!o.get("reactiveCustomComponents")},[K,S]);return u.createElement("div",{ref:W,role:"row",style:z,"row-index":h,"row-id":f,"row-business-key":m},U?null==V?void 0:V.map(t=>u.createElement(AG,{cellCtrl:t,editingCell:(null==i?void 0:i.isEditing(t,{withOpenEditor:!0}))??!1,printLayout:e.printLayout,key:t.instanceId})):$?(()=>{const e=S.componentClass;return K?u.createElement(e,{...S.params}):u.createElement(e,{...S.params,ref:D})})():null)}),TG=r.memo(({name:e})=>{const{context:t,gos:n}=r.useContext(F_),o=r.useMemo(()=>eL(e),[e]),i=r.useRef(null),s=r.useRef(null),a=r.useRef(null),l=r.useRef([]),c=r.useRef([]),[d,h]=r.useState(()=>[]),p=!!n.get("enableCellSpan")&&!!o.getSpannedRowCtrls,f=r.useRef([]),g=r.useRef([]),[m,v]=r.useState(()=>[]),y=r.useRef(!1),b=r.useRef(),w=r.useMemo(()=>H_("ag-viewport",JI(e)),[e]),C=r.useMemo(()=>H_(QI(e)),[e]),x=r.useMemo(()=>H_("ag-spanning-container",function(e){return`ag-${eL(e).name}-spanned-cells-container`}(e)),[e]),S="center"===o.type||p;jG(" AG Row Container "+e+" ",S?i:s);const k=r.useCallback(()=>{const e=!S||null!=i.current,t=null!=s.current,n=!p||null!=a.current;return e&&t&&n},[]),P=r.useCallback(()=>null==i.current&&null==s.current&&null==a.current,[]),j=r.useCallback(()=>{if(P()&&(b.current=t.destroyBean(b.current)),!t.isDestroyed()&&k()){const n=e=>{const t=U_(c.current,l.current,y.current);t!==c.current&&(c.current=t,$_(e,()=>h(t)))},r=e=>{const t=U_(g.current,f.current,y.current);t!==g.current&&(g.current=t,$_(e,()=>v(t)))},o={setHorizontalScroll:e=>{i.current&&(i.current.scrollLeft=e)},setViewportHeight:e=>{i.current&&(i.current.style.height=e)},setRowCtrls:({rowCtrls:e,useFlushSync:t})=>{const r=!!t&&l.current.length>0&&e.length>0;l.current=e,n(r)},setSpannedRowCtrls:(e,t)=>{const n=!!t&&f.current.length>0&&e.length>0;f.current=e,r(n)},setDomOrder:e=>{y.current!=e&&(y.current=e,n(!1))},setContainerWidth:e=>{s.current&&(s.current.style.width=e)},setOffsetTop:e=>{s.current&&(s.current.style.transform=`translateY(${e})`)}};b.current=t.createBean(new cL(e)),b.current.setComp(o,s.current,a.current??void 0,i.current)}},[k,P]),O=r.useCallback(e=>{s.current=e,j()},[j]),R=r.useCallback(e=>{a.current=e,j()},[j]),E=r.useCallback(e=>{i.current=e,j()},[j]),D=()=>u.createElement("div",{className:C,ref:O,role:S?"presentation":"rowgroup"},d.map(e=>u.createElement(NG,{rowCtrl:e,containerType:o.type,key:e.instanceId})));if(!S)return D();return u.createElement("div",{className:w,ref:E,role:"rowgroup"},D(),p?u.createElement("div",{className:x,ref:R,role:"presentation"},m.map(e=>u.createElement(NG,{rowCtrl:e,containerType:o.type,key:e.instanceId}))):null)}),FG=r.memo(()=>{const e=r.useContext(F_),{context:t,overlays:n}=e,[o,i]=r.useState(""),[s,a]=r.useState(0),[l,c]=r.useState(0),[d,h]=r.useState("0px"),[p,f]=r.useState("0px"),[g,m]=r.useState("100%"),[v,y]=r.useState("0px"),[b,w]=r.useState("0px"),[C,x]=r.useState("100%"),[S,k]=r.useState(!0),[P,j]=r.useState(!0),[O,R]=r.useState(null),[E,D]=r.useState(""),[M,A]=r.useState(null),[N,T]=r.useState("ag-layout-normal"),F=r.useRef();F.current||(F.current=new XN(()=>I.current));const I=r.useRef(null),L=r.useRef(null),B=r.useRef(null),H=r.useRef(null),_=r.useRef(null),G=r.useRef(null),V=r.useRef(null),W=r.useRef([]),z=r.useRef([]);jG(" AG Grid Body ",I),jG(" AG Pinned Top ",L),jG(" AG Sticky Top ",B),jG(" AG Middle ",G),jG(" AG Pinned Bottom ",V);const $=r.useCallback(r=>{if(I.current=r,!r||t.isDestroyed()){W.current=t.destroyBeans(W.current);for(const e of z.current)e();return void(z.current=[])}const o=(e,t)=>{e.appendChild(t),z.current.push(()=>t.remove())},s=(e,n,r)=>{o(e,document.createComment(r)),o(e,(e=>{const n=t.createBean(new e);return W.current.push(n),n})(n).getGui())};s(r,pL," AG Fake Horizontal Scroll ");const l=null==n?void 0:n.getOverlayWrapperCompClass();l&&s(r,l," AG Overlay Wrapper "),_.current&&s(_.current,gL," AG Fake Vertical Scroll ");const u={setRowAnimationCssOnBodyViewport:i,setColumnCount:e=>{I.current&&JD(I.current,"colcount",e)},setRowCount:e=>{I.current&&JD(I.current,"rowcount",e)},setTopHeight:a,setBottomHeight:c,setStickyTopHeight:h,setStickyTopTop:f,setStickyTopWidth:m,setTopInvisible:k,setBottomInvisible:j,setColumnMovingCss:(e,t)=>F.current.toggleCss(e,t),updateLayoutClasses:T,setAlwaysVerticalScrollClass:R,setPinnedTopBottomOverflowY:D,setCellSelectableCss:(e,t)=>A(t?e:null),setBodyViewportWidth:e=>{G.current&&(G.current.style.width=e)},registerBodyViewportResizeListener:t=>{if(G.current){const n=EM(e,G.current,t);z.current.push(()=>n())}},setStickyBottomHeight:y,setStickyBottomBottom:w,setStickyBottomWidth:x,setGridRootRole:e=>r.setAttribute("role",e)},d=t.createBean(new uL);W.current.push(d),d.setComp(u,r,G.current,L.current,V.current,B.current,H.current)},[]),U=r.useMemo(()=>H_("ag-root","ag-unselectable",N),[N]),K=r.useMemo(()=>H_("ag-body-viewport",o,N,O,M),[o,N,O,M]),q=r.useMemo(()=>H_("ag-body",N),[N]),X=r.useMemo(()=>H_("ag-floating-top",S?"ag-invisible":null,M),[M,S]),Y=r.useMemo(()=>H_("ag-sticky-top",M),[M]),Z=r.useMemo(()=>H_("ag-sticky-bottom","0px"===v?"ag-invisible":null,M),[M,v]),J=r.useMemo(()=>H_("ag-floating-bottom",P?"ag-invisible":null,M),[M,P]),Q=r.useMemo(()=>({height:s,minHeight:s,overflowY:E}),[s,E]),ee=r.useMemo(()=>({height:d,top:p,width:g}),[d,p,g]),te=r.useMemo(()=>({height:v,bottom:b,width:C}),[v,b,C]),ne=r.useMemo(()=>({height:l,minHeight:l,overflowY:E}),[l,E]),re=e=>u.createElement(TG,{name:e,key:`${e}-container`}),oe=({section:e,children:t,className:n,style:r})=>u.createElement("div",{ref:e,className:n,role:"presentation",style:r},t.map(re));return u.createElement("div",{ref:$,className:U},u.createElement(PG,null),oe({section:L,className:X,style:Q,children:["topLeft","topCenter","topRight","topFullWidth"]}),u.createElement("div",{className:q,ref:_,role:"presentation"},oe({section:G,className:K,children:["left","center","right","fullWidth"]})),oe({section:B,className:Y,style:ee,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),oe({section:H,className:Z,style:te,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),oe({section:V,className:J,style:ne,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))}),IG=r.forwardRef((e,t)=>{const{children:n,eFocusableElement:o,onTabKeyDown:i,gridCtrl:s,forceFocusOutWhenTabGuardsAreEmpty:a,isEmpty:l}=e,{context:c}=r.useContext(F_),d=r.useRef(null),h=r.useRef(null),p=r.useRef(),f=e=>{var t,n;const r=null==e?void 0:parseInt(e,10).toString();for(const o of[d,h])void 0===r?null==(t=o.current)||t.removeAttribute("tabindex"):null==(n=o.current)||n.setAttribute("tabindex",r)};r.useImperativeHandle(t,()=>({forceFocusOutOfContainer(e){var t;null==(t=p.current)||t.forceFocusOutOfContainer(e)}}));const g=r.useCallback(()=>{const e=d.current,t=h.current;if(!e&&!t||c.isDestroyed())p.current=c.destroyBean(p.current);else if(e&&t){const n={setTabIndex:f};p.current=c.createBean(new qL({comp:n,eTopGuard:e,eBottomGuard:t,eFocusableElement:o,onTabKeyDown:i,forceFocusOutWhenTabGuardsAreEmpty:a,focusInnerElement:e=>s.focusInnerElement(e),isEmpty:l}))}},[]),m=r.useCallback(e=>{d.current=e,g()},[g]),v=r.useCallback(e=>{h.current=e,g()},[g]),y=e=>{const t="top"===e?UL:KL;return u.createElement("div",{className:`${$L} ${t}`,role:"presentation",ref:"top"===e?m:v})};return u.createElement(u.Fragment,null,y("top"),n,y("bottom"))}),LG=r.memo(IG),BG=r.memo(({context:e})=>{const[t,n]=r.useState(""),[o,i]=r.useState(""),[s,a]=r.useState(null),[l,c]=r.useState(null),[d,h]=r.useState(!1),[p,f]=r.useState(),g=r.useRef(),m=r.useRef(null),v=r.useRef(),[y,b]=r.useState(null),w=r.useRef(()=>{}),C=r.useRef(),x=r.useRef([]),S=r.useCallback(()=>{},[]);jG(" AG Grid ",m);const k=r.useCallback(t=>{if(m.current=t,g.current=t?e.createBean(new tB):e.destroyBean(g.current),!t||e.isDestroyed())return;const r=g.current;w.current=r.focusInnerElement.bind(r);const o={destroyGridUi:()=>{},setRtlClass:n,forceFocusOutOfContainer:e=>{var t,n;e||!(null==(t=C.current)?void 0:t.isDisplayed())?null==(n=v.current)||n.forceFocusOutOfContainer(e):C.current.forceFocusOutOfContainer(e)},updateLayoutClasses:i,getFocusableContainers:()=>{var e;const t=[],n=null==(e=m.current)?void 0:e.querySelector(".ag-root");n&&t.push({getGui:()=>n});for(const r of x.current)r.isDisplayed()&&t.push(r);return t},setCursor:a,setUserSelect:c};r.setComp(o,t,t),h(!0)},[]);r.useEffect(()=>{const t=g.current,n=m.current;if(!p||!t||!y||!n||e.isDestroyed())return;const r=[],{watermarkSelector:o,paginationSelector:i,sideBarSelector:s,statusBarSelector:a,gridHeaderDropZonesSelector:l}=t.getOptionalSelectors(),c=[];if(l){const t=e.createBean(new l.component),o=t.getGui();n.insertAdjacentElement("afterbegin",o),c.push(o),r.push(t)}if(s){const t=e.createBean(new s.component),n=t.getGui(),o=y.querySelector(".ag-tab-guard-bottom");o&&(o.insertAdjacentElement("beforebegin",n),c.push(n)),r.push(t),x.current.push(t)}const u=t=>{const o=e.createBean(new t),i=o.getGui();return n.insertAdjacentElement("beforeend",i),c.push(i),r.push(o),o};if(a&&u(a.component),i){const e=u(i.component);C.current=e,x.current.push(e)}return o&&u(o.component),()=>{e.destroyBeans(r);for(const e of c)e.remove()}},[p,y,e]);const P=r.useMemo(()=>H_("ag-root-wrapper",t,o),[t,o]),j=r.useMemo(()=>H_("ag-root-wrapper-body","ag-focus-managed",o),[o]),O=r.useMemo(()=>({userSelect:null!=l?l:"",WebkitUserSelect:null!=l?l:"",cursor:null!=s?s:""}),[l,s]),R=r.useCallback(e=>{v.current=e,f(null!==e)},[]),E=r.useCallback(()=>{var e;return!(null==(e=g.current)?void 0:e.isFocusable())},[]);return u.createElement("div",{ref:k,className:P,style:O,role:"presentation"},u.createElement("div",{className:j,ref:b,role:"presentation"},d&&y&&!e.isDestroyed()&&u.createElement(F_.Provider,{value:e.getBeans()},u.createElement(LG,{ref:R,eFocusableElement:y,onTabKeyDown:S,gridCtrl:g.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:E},u.createElement(FG,null)))))}),HG=class extends YM{postConstruct(){if(this.beans.colAutosize){const e=this.queueResizeOperationsForTick.bind(this);this.addManagedEventListeners({rowExpansionStateChanged:e,expandOrCollapseAll:e,cellValueChanged:e,rowNodeDataChanged:e,rowDataUpdated:e})}}queueResizeOperationsForTick(){const e=this.beans.colAutosize;e.shouldQueueResizeOperations=!0,setTimeout(()=>{e.processResizeOperations()},0)}areHeaderCellsRendered(){return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(e=>e.areCellsRendered()))}areCellsRendered(){return this.beans.rowRenderer.getAllRowCtrls().every(e=>e.isRowRendered()&&e.getAllCellCtrls().every(e=>!!e.eGui))}},_G={setGridApi:void 0,maxComponentCreationTimeMs:void 0,children:void 0},GG={gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,passGridApi:void 0,componentWrappingElement:void 0,..._G},VG=new Set(Object.keys(GG)),WG=new Set(Object.keys(_G)),zG=e=>{var t;const n=r.useRef(),o=r.useRef(null),i=r.useRef(null),s=r.useRef([]),a=r.useRef([]),l=r.useRef(e),c=r.useRef(),d=r.useRef(),h=r.useRef(!1),[p,f]=r.useState(void 0),[,g]=r.useState(0),m=r.useCallback(t=>{if(o.current=t,!t){for(const e of s.current)e();return void(s.current.length=0)}const r=e.modules||[];i.current||(i.current=new yG(()=>g(e=>e+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),s.current.push(()=>{var e;null==(e=i.current)||e.destroy(),i.current=null}));const l=function(e,t,n){"object"!=typeof e&&(e={});const r={...e};for(const o of n){const e=t[o];void 0!==e&&(r[o]=e)}return r}(e.gridOptions,e,Object.keys(e).filter(e=>!VG.has(e))),u=new KG(()=>{if(h.current){const e=()=>{var e;return(null==(e=c.current)?void 0:e.shouldQueueUpdates())?void 0:a.current.shift()};let t=e();for(;t;)t(),t=e()}});c.current=u;const p=new HG,m={providedBeanInstances:{frameworkCompWrapper:new $G(i.current,l),renderStatus:p},modules:r,frameworkOverrides:u,setThemeOnGridDiv:!0},v=new A_;l.gridId??(l.gridId=d.current),n.current=v.create(t,l,t=>{f(t),t.createBean(p),s.current.push(()=>{t.destroy()}),t.getBean("ctrlsSvc").whenReady({addDestroyFunc:e=>{s.current.push(e)}},()=>{var r;if(t.isDestroyed())return;const o=n.current;o&&(null==(r=e.passGridApi)||r.call(e,o))})},e=>{e.getBean("ctrlsSvc").whenReady({addDestroyFunc:e=>{s.current.push(e)}},()=>{for(const e of a.current)e();a.current.length=0,h.current=!0})},m),s.current.push(()=>{n.current=void 0}),n.current&&(d.current=n.current.getGridId())},[]),v=r.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),y=r.useCallback(e=>{var t;h.current&&!(null==(t=c.current)?void 0:t.shouldQueueUpdates())?e():a.current.push(e)},[]);r.useEffect(()=>{const t=function(e,t){const n={};for(const r of Object.keys(t)){if(VG.has(r)){WG.has(r)&&TA(274,{prop:r});continue}const o=t[r];e[r]!==o&&(n[r]=o)}return n}(l.current,e);l.current=e,y(()=>{n.current&&function(e,t){if(!e)return;const n={};let r=!1;for(const s of Object.keys(e))n[s]=e[s],r=!0;if(!r)return;const o={type:"gridOptionsChanged",options:n};t.dispatchEvent(o);const i={type:"componentStateChanged",...n};t.dispatchEvent(i)}(t,n.current)})},[e]);const b=u.useSyncExternalStore&&"legacy"!==rN(e,"renderingMode")?"default":"legacy";return u.createElement("div",{style:v,className:e.className,ref:m},u.createElement(I_.Provider,{value:b},p&&!p.isDestroyed()?u.createElement(BG,{key:p.instanceId,context:p}):null,(null==(t=i.current)?void 0:t.getPortals())??null))};var $G=class extends T_{constructor(e,t){super(),this.parent=e,this.gridOptions=t}createWrapper(e,t){const n=this.gridOptions;if(rN(n,"reactiveCustomComponents")){const r=(e=>{switch(e){case"filter":return rN(n,"enableFilterHandlers")?sG:iG;case"floatingFilterComponent":return rN(n,"enableFilterHandlers")?uG:cG;case"dateComponent":return rG;case"dragAndDropImageComponent":return oG;case"loadingOverlayComponent":return hG;case"noRowsOverlayComponent":return fG;case"statusPanel":return gG;case"toolPanel":return mG;case"menuItem":return pG;case"cellRenderer":return nG;case"innerHeaderComponent":return dG}})(t.name);if(r)return new r(e,this.parent,t)}else switch(t.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":vG()}const r=!t.cellRenderer&&"toolPanel"!==t.name;return new Q_(e,this.parent,t,r)}},UG=r.forwardRef((e,t)=>{const n=r.useContext(F_),{registry:o,context:i,gos:s,rowModel:a}=n,[l,c]=r.useState(()=>new __),[d,h]=r.useState(()=>new __),[p,f]=r.useState(),[g,m]=r.useState(),v=r.useRef(),y=r.useRef(null),b=r.useRef(),w=r.useMemo(()=>function(e,t){const n=yA[e]??{};return[...Object.values(n.all??{}),...Object.values(n[t]??{})]}(e.api.getGridId(),(null==p?void 0:p.rowModelType)??"clientSide"),[e]),C=r.useMemo(()=>l.toString()+" ag-details-row",[l]),x=r.useMemo(()=>d.toString()+" ag-details-grid",[d]);t&&r.useImperativeHandle(t,()=>({refresh(){var e;return(null==(e=v.current)?void 0:e.refresh())??!1}})),e.template&&TA(230);const S=r.useCallback(t=>{var r;if(y.current=t,!t||i.isDestroyed())return v.current=i.destroyBean(v.current),void(null==(r=b.current)||r.call(b));const l={toggleCss:(e,t)=>c(n=>n.setClass(e,t)),toggleDetailGridCss:(e,t)=>h(n=>n.setClass(e,t)),setDetailGrid:e=>f(e),setRowData:e=>m(e),getGui:()=>y.current},u=o.createDynamicBean("detailCellRendererCtrl",!0);if(u&&(i.createBean(u),u.init(l,e),v.current=u,s.get("detailRowAutoHeight"))){const r=()=>{if(null==y.current)return;const t=y.current.clientHeight;if(null!=t&&t>0){setTimeout(()=>{e.node.setRowHeight(t),(HA(s)||_A(s))&&a.onRowHeightChanged()},0)}};b.current=EM(n,t,r),r()}},[]),k=r.useCallback(e=>{var t;null==(t=v.current)||t.registerDetailWithMaster(e)},[]);return u.createElement("div",{className:C,ref:S},p&&u.createElement(zG,{className:x,...p,modules:w,rowData:g,passGridApi:k}))}),KG=class extends YL{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:q_,agGroupRowRenderer:q_,agDetailCellRenderer:UG},this.wrapIncoming=(e,t)=>{return"ensureVisible"===t?(n=e,z_||setTimeout(()=>z_=!1,0),z_=!0,n()):e();var n}}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return"19"===V_}},qG=class extends r.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e;for(const t of this.apiListeners)t(e)}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return u.createElement(zG,{...this.props,passGridApi:this.setGridApi})}};const XG=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Number(e||0)),YG=e=>{const t=Number(e);return Number.isFinite(t)?t:0},ZG=({mode:e,existingCards:t,card:n,onClose:o,onSave:i})=>{const s="edit"===e,[a,l]=r.useState(()=>({name:(null==n?void 0:n.name)||"",last4:(null==n?void 0:n.last4)||"",dotation_limit:(null==n?void 0:n.dotation_limit)??"",cold_balance:(null==n?void 0:n.cold_balance)??0,real_balance:(null==n?void 0:n.real_balance)??0})),[c,u]=r.useState(!1),[d,h]=r.useState(null),p=r.useMemo(()=>{const e=a.name.trim().toLowerCase();return!!e&&t.some(t=>t.name.trim().toLowerCase()===e&&t.id!==(null==n?void 0:n.id))},[t,a.name,null==n?void 0:n.id]);return O.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:O.jsxs("div",{className:"card w-full max-w-lg p-6 animate-scale-in",children:[O.jsxs("div",{className:"flex items-center justify-between mb-6",children:[O.jsx("h2",{className:"text-lg font-semibold text-surface-900",children:s?"Edit Card":"Add Card"}),O.jsx("button",{onClick:o,className:"icon-btn",type:"button",children:O.jsx(Ae,{className:"w-5 h-5"})})]}),O.jsxs("form",{onSubmit:async e=>{e.preventDefault();const t=(()=>{if(!a.name.trim())return"Name is required";if(p)return"Name must be unique";if(!/^\d{4}$/.test(a.last4.trim()))return"Last 4 digits must be exactly 4 digits";if(YG(a.dotation_limit)<0)return"Dotation must be a positive number";if(!s){const e=YG(a.cold_balance),t=YG(a.real_balance);if(e<0||t<0)return"Balances must be positive numbers"}return null})();if(t)h(t);else{h(null),u(!0);try{s?await M.updateMarketingCard(n.id,{name:a.name.trim(),last4:a.last4.trim(),dotation_limit:YG(a.dotation_limit)}):await M.createMarketingCard({name:a.name.trim(),last4:a.last4.trim(),dotation_limit:YG(a.dotation_limit),cold_balance:YG(a.cold_balance),real_balance:YG(a.real_balance)}),i()}catch(r){h(r.message||"Failed to save card")}finally{u(!1)}}},className:"space-y-4",children:[O.jsxs("div",{children:[O.jsx("label",{className:"label",children:"Name"}),O.jsx("input",{className:p?"input-error":"input",value:a.name,onChange:e=>l({...a,name:e.target.value}),placeholder:"e.g., Visa Main",autoFocus:!0}),p&&O.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Name already exists."})]}),O.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[O.jsxs("div",{children:[O.jsx("label",{className:"label",children:"Last 4 digits"}),O.jsx("input",{className:"input",value:a.last4,onChange:e=>l({...a,last4:e.target.value}),placeholder:"1234",maxLength:4,inputMode:"numeric"})]}),O.jsxs("div",{children:[O.jsx("label",{className:"label",children:"Dotation (limit)"}),O.jsx("input",{className:"input",value:a.dotation_limit,onChange:e=>l({...a,dotation_limit:e.target.value}),placeholder:"0",inputMode:"decimal"})]})]}),!s&&O.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[O.jsxs("div",{children:[O.jsx("label",{className:"label",children:"Cold balance"}),O.jsx("input",{className:"input",value:a.cold_balance,onChange:e=>l({...a,cold_balance:e.target.value}),placeholder:"0",inputMode:"decimal"})]}),O.jsxs("div",{children:[O.jsx("label",{className:"label",children:"Real balance"}),O.jsx("input",{className:"input",value:a.real_balance,onChange:e=>l({...a,real_balance:e.target.value}),placeholder:"0",inputMode:"decimal"})]})]}),d&&O.jsx("div",{className:"p-3 rounded-lg border border-red-200 bg-red-50 text-red-700 text-sm",children:d}),O.jsxs("div",{className:"flex gap-3 pt-2",children:[O.jsx("button",{type:"button",onClick:o,className:"flex-1 btn-secondary",disabled:c,children:"Cancel"}),O.jsx("button",{type:"submit",className:"flex-1 btn-primary",disabled:c,children:c?"Saving...":s?"Update":"Create"})]})]})]})})},JG=({mode:e,cards:t,account:n,onClose:o,onSave:i})=>{const s="edit"===e,[a,l]=r.useState(()=>({name:(null==n?void 0:n.name)||"",linked_card_ids:(null==n?void 0:n.linked_card_ids)||[]})),[c,u]=r.useState(!1),[d,h]=r.useState(null);return O.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:O.jsxs("div",{className:"card w-full max-w-lg p-6 animate-scale-in",children:[O.jsxs("div",{className:"flex items-center justify-between mb-6",children:[O.jsx("h2",{className:"text-lg font-semibold text-surface-900",children:s?"Edit Ad Account":"Add Ad Account"}),O.jsx("button",{onClick:o,className:"icon-btn",type:"button",children:O.jsx(Ae,{className:"w-5 h-5"})})]}),O.jsxs("form",{onSubmit:async e=>{e.preventDefault();const t=a.name.trim()?null:"Name is required";if(t)h(t);else{u(!0),h(null);try{s?await M.updateMarketingAdAccount(n.id,{name:a.name.trim(),linked_card_ids:a.linked_card_ids}):await M.createMarketingAdAccount({name:a.name.trim(),linked_card_ids:a.linked_card_ids}),i()}catch(r){h(r.message||"Failed to save ad account")}finally{u(!1)}}},className:"space-y-4",children:[O.jsxs("div",{children:[O.jsx("label",{className:"label",children:"Name"}),O.jsx("input",{className:"input",value:a.name,onChange:e=>l({...a,name:e.target.value}),placeholder:"e.g., Facebook - US",autoFocus:!0})]}),O.jsxs("div",{children:[O.jsx("label",{className:"label",children:"Linked cards"}),O.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:t.map(e=>O.jsxs("button",{type:"button",onClick:()=>(e=>{const t=a.linked_card_ids.includes(e);l({...a,linked_card_ids:t?a.linked_card_ids.filter(t=>t!==e):[...a.linked_card_ids,e]})})(e.id),className:"flex items-center justify-between px-3 py-2 rounded-lg border transition-colors "+(a.linked_card_ids.includes(e.id)?"bg-primary-50 border-primary-200 text-primary-900":"bg-white border-surface-200 text-surface-700 hover:bg-surface-50"),children:[O.jsx("span",{className:"text-sm font-medium truncate",children:e.name}),O.jsx("span",{className:"text-xs text-surface-500",children:e.last4?`•••• ${e.last4}`:""})]},e.id))})]}),d&&O.jsx("div",{className:"p-3 rounded-lg border border-red-200 bg-red-50 text-red-700 text-sm",children:d}),O.jsxs("div",{className:"flex gap-3 pt-2",children:[O.jsx("button",{type:"button",onClick:o,className:"flex-1 btn-secondary",disabled:c,children:"Cancel"}),O.jsx("button",{type:"submit",className:"flex-1 btn-primary",disabled:c,children:c?"Saving...":s?"Update":"Create"})]})]})]})})},QG=({cards:e,adAccounts:t,cardId:n,onClose:o,onSave:i})=>{const[s,a]=r.useState(!1),[l,c]=r.useState(null),[u,d]=r.useState("revenue_cold_to_real"),[h,p]=r.useState(()=>({amount:"",source_card_id:"",ad_account_id:"",note:""})),f=YG(h.amount),g=e.filter(e=>e.id!==n);return O.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:O.jsxs("div",{className:"card w-full max-w-lg p-6 animate-scale-in",children:[O.jsxs("div",{className:"flex items-center justify-between mb-6",children:[O.jsx("h2",{className:"text-lg font-semibold text-surface-900",children:"New Transaction"}),O.jsx("button",{onClick:o,className:"icon-btn",type:"button",children:O.jsx(Ae,{className:"w-5 h-5"})})]}),O.jsxs("form",{onSubmit:async e=>{e.preventDefault();const t=(()=>{if(f<=0)return"Amount must be greater than 0";if("revenue_from_card_cold"===u){const e=Number(h.source_card_id);if(!e)return"Source card is required";if(e===n)return"Source card must be different"}if("expense_spend_ad"===u&&!Number(h.ad_account_id))return"Ad account is required";return null})();if(t)c(t);else{c(null),a(!0);try{"revenue_cold_to_real"===u?await M.createMarketingRevenueColdToReal({card_id:n,amount:f,note:h.note.trim()||null}):"revenue_from_card_cold"===u?await M.createMarketingRevenueFromOtherCardCold({source_card_id:Number(h.source_card_id),target_card_id:n,amount:f,note:h.note.trim()||null}):"expense_spend_ad"===u?await M.createMarketingExpenseSpend({card_id:n,ad_account_id:Number(h.ad_account_id),amount:f,note:h.note.trim()||null}):"expense_real_to_cold"===u&&await M.createMarketingExpenseRealToCold({card_id:n,amount:f,note:h.note.trim()||null}),i()}catch(r){c(r.message||"Failed to create transaction")}finally{a(!1)}}},className:"space-y-4",children:[O.jsxs("div",{children:[O.jsx("label",{className:"label",children:"Type"}),O.jsxs("select",{className:"input",value:u,onChange:e=>d(e.target.value),children:[O.jsx("option",{value:"revenue_cold_to_real",children:"Revenue: Cold → Real (same card)"}),O.jsx("option",{value:"revenue_from_card_cold",children:"Revenue: Other card cold → This card real"}),O.jsx("option",{value:"expense_spend_ad",children:"Expense: Spend on ad account"}),O.jsx("option",{value:"expense_real_to_cold",children:"Expense: Real → Cold (refund)"})]})]}),"revenue_from_card_cold"===u&&O.jsxs("div",{children:[O.jsx("label",{className:"label",children:"Source card"}),O.jsxs("select",{className:"input",value:h.source_card_id,onChange:e=>p({...h,source_card_id:e.target.value}),children:[O.jsx("option",{value:"",children:"Select..."}),g.map(e=>O.jsxs("option",{value:e.id,children:[e.name," ",e.last4?`•••• ${e.last4}`:""]},e.id))]})]}),"expense_spend_ad"===u&&O.jsxs("div",{children:[O.jsx("label",{className:"label",children:"Ad account"}),O.jsxs("select",{className:"input",value:h.ad_account_id,onChange:e=>p({...h,ad_account_id:e.target.value}),children:[O.jsx("option",{value:"",children:"Select..."}),t.map(e=>O.jsx("option",{value:e.id,children:e.name},e.id))]})]}),O.jsxs("div",{children:[O.jsx("label",{className:"label",children:"Amount"}),O.jsx("input",{className:"input",value:h.amount,onChange:e=>p({...h,amount:e.target.value}),placeholder:"0",inputMode:"decimal",autoFocus:!0})]}),O.jsxs("div",{children:[O.jsx("label",{className:"label",children:"Note"}),O.jsx("input",{className:"input",value:h.note,onChange:e=>p({...h,note:e.target.value}),placeholder:"Optional"})]}),l&&O.jsx("div",{className:"p-3 rounded-lg border border-red-200 bg-red-50 text-red-700 text-sm",children:l}),O.jsxs("div",{className:"flex gap-3 pt-2",children:[O.jsx("button",{type:"button",onClick:o,className:"flex-1 btn-secondary",disabled:s,children:"Cancel"}),O.jsx("button",{type:"submit",className:"flex-1 btn-primary",disabled:s,children:s?"Creating...":"Create"})]})]})]})})},eV=()=>{const{toasts:e,success:t,error:n,removeToast:o}=ND(),[i,s]=r.useState(!0),[a,l]=r.useState(null),[c,u]=r.useState({key:"name",dir:"asc"}),[d,h]=r.useState(null),[p,f]=r.useState({}),[g,m]=r.useState(!1),[v,y]=r.useState(!1),[b,w]=r.useState(null),[C,x]=r.useState(!1),[S,k]=r.useState(null),[P,j]=r.useState(!1),[R,E]=r.useState(null),D=async()=>{s(!0);try{const e=await M.getMarketingOverview();l(e)}catch(e){n(e.message||"Failed to load marketing overview")}finally{s(!1)}};r.useEffect(()=>{D()},[]);const A=(null==a?void 0:a.cards)||[],N=(null==a?void 0:a.ad_accounts)||[],T=null==a?void 0:a.summary,F=r.useMemo(()=>{const e=[...A],t="asc"===c.dir?1:-1;return e.sort((e,n)=>{const r=null==e?void 0:e[c.key],o=null==n?void 0:n[c.key];return"number"==typeof r&&"number"==typeof o?(r-o)*t:String(r??"").localeCompare(String(o??""))*t}),e},[A,c]),I=async e=>{m(!0);try{const t=await M.getMarketingCardTransactions(e);f(n=>({...n,[e]:t.transactions}))}catch(t){n(t.message||"Failed to load transactions")}finally{m(!1)}},L=r.useMemo(()=>[{headerName:"Date",field:"created_at",valueFormatter:e=>new Date(e.value).toLocaleString(),minWidth:170},{headerName:"Type",field:"type",minWidth:110},{headerName:"Kind",field:"kind",minWidth:170},{headerName:"Amount",field:"amount",valueFormatter:e=>XG(e.value),minWidth:130},{headerName:"Ad Account",field:"ad_account_name",minWidth:180},{headerName:"Source Card",field:"source_card_name",minWidth:180},{headerName:"Note",field:"note",flex:1,minWidth:220},{headerName:"",field:"id",minWidth:90,cellRenderer:e=>O.jsx("button",{className:"btn-danger btn-sm",onClick:()=>(async e=>{if(confirm("Delete this transaction? This will reverse its balance effects."))try{await M.deleteMarketingTransaction(e.id),t("Transaction deleted"),await D(),d&&await I(d)}catch(r){n(r.message||"Failed to delete transaction")}})(e.data),type:"button",children:O.jsx(je,{className:"w-4 h-4"})})}],[d]);return i?O.jsx("div",{className:"flex items-center justify-center py-20",children:O.jsx("div",{className:"w-8 h-8 border-2 border-primary-200 border-t-primary-600 rounded-full animate-spin"})}):O.jsxs(O.Fragment,{children:[O.jsx(FD,{toasts:e,removeToast:o}),O.jsxs("div",{className:"max-w-7xl mx-auto animate-fade-in",children:[O.jsxs("div",{className:"flex items-start justify-between gap-4 mb-6",children:[O.jsxs("div",{children:[O.jsx("h1",{className:"text-xl font-bold text-surface-900",children:"Marketing Management"}),O.jsx("p",{className:"text-surface-500 text-sm",children:"Cards, dotation, balances, and ad account spend"})]}),O.jsxs("button",{className:"btn-secondary",onClick:D,type:"button",children:[O.jsx(we,{className:"w-4 h-4"}),"Refresh"]})]}),T&&O.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4 mb-8",children:[O.jsxs("div",{className:"card p-4",children:[O.jsx("p",{className:"text-xs text-surface-500 mb-1",children:"Total Cold"}),O.jsx("p",{className:"text-lg font-semibold text-surface-900",children:XG(T.total_cold_balance)})]}),O.jsxs("div",{className:"card p-4",children:[O.jsx("p",{className:"text-xs text-surface-500 mb-1",children:"Total Real"}),O.jsx("p",{className:"text-lg font-semibold text-surface-900",children:XG(T.total_real_balance)})]}),O.jsxs("div",{className:"card p-4",children:[O.jsx("p",{className:"text-xs text-surface-500 mb-1",children:"Total Balance"}),O.jsx("p",{className:"text-lg font-semibold text-surface-900",children:XG(T.total_balance)})]}),O.jsxs("div",{className:"card p-4",children:[O.jsx("p",{className:"text-xs text-surface-500 mb-1",children:"Total Dotation"}),O.jsx("p",{className:"text-lg font-semibold text-surface-900",children:XG(T.total_dotation_limit)})]}),O.jsxs("div",{className:"card p-4",children:[O.jsx("p",{className:"text-xs text-surface-500 mb-1",children:"Dotation Left"}),O.jsx("p",{className:"text-lg font-semibold text-surface-900",children:XG(T.total_dotation_left)})]})]}),O.jsxs("div",{className:"card p-5 mb-8",children:[O.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-4",children:[O.jsxs("div",{children:[O.jsx("h2",{className:"font-semibold text-surface-900",children:"Credit Cards"}),O.jsx("p",{className:"text-sm text-surface-500",children:"Click a card to view its transactions"})]}),O.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center",children:[O.jsxs("div",{className:"flex gap-2",children:[O.jsxs("select",{className:"input !py-2.5",value:c.key,onChange:e=>u({...c,key:e.target.value}),children:[O.jsx("option",{value:"name",children:"Sort: Name"}),O.jsx("option",{value:"dotation_limit",children:"Sort: Dotation"}),O.jsx("option",{value:"dotation_left",children:"Sort: Dotation left"}),O.jsx("option",{value:"total_balance",children:"Sort: Total balance"})]}),O.jsxs("select",{className:"input !py-2.5",value:c.dir,onChange:e=>u({...c,dir:e.target.value}),children:[O.jsx("option",{value:"asc",children:"Asc"}),O.jsx("option",{value:"desc",children:"Desc"})]})]}),O.jsxs("button",{className:"btn-primary",onClick:()=>{w(null),y(!0)},type:"button",children:[O.jsx(be,{className:"w-4 h-4"}),"Add Card"]})]})]}),O.jsx("div",{className:"space-y-3",children:0===F.length?O.jsx("div",{className:"text-sm text-surface-500 py-8 text-center bg-surface-50 rounded-lg border border-surface-100",children:"No cards yet."}):F.map(e=>{const r=d===e.id,o=p[e.id]||[];return O.jsxs("div",{className:"border border-surface-200 rounded-xl overflow-hidden",children:[O.jsx("button",{type:"button",onClick:()=>(async e=>{d!==e?(h(e),p[e]||await I(e)):h(null)})(e.id),className:"w-full text-left bg-white hover:bg-surface-50 transition-colors",children:O.jsxs("div",{className:"p-4 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3",children:[O.jsxs("div",{className:"flex items-center justify-between gap-3",children:[O.jsxs("div",{children:[O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("h3",{className:"font-semibold text-surface-900",children:e.name}),e.last4&&O.jsxs("span",{className:"badge badge-default",children:["•••• ",e.last4]})]}),O.jsxs("p",{className:"text-xs text-surface-500 mt-1",children:["Dotation left: ",XG(e.dotation_left)," / ",XG(e.dotation_limit)]})]}),O.jsx("div",{className:"lg:hidden",children:r?O.jsx(Z,{className:"w-5 h-5"}):O.jsx(q,{className:"w-5 h-5"})})]}),O.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 lg:gap-6",children:[O.jsxs("div",{children:[O.jsx("p",{className:"text-[11px] text-surface-500",children:"Cold"}),O.jsx("p",{className:"text-sm font-medium text-surface-900",children:XG(e.cold_balance)})]}),O.jsxs("div",{children:[O.jsx("p",{className:"text-[11px] text-surface-500",children:"Real"}),O.jsx("p",{className:"text-sm font-medium text-surface-900",children:XG(e.real_balance)})]}),O.jsxs("div",{children:[O.jsx("p",{className:"text-[11px] text-surface-500",children:"Total"}),O.jsx("p",{className:"text-sm font-medium text-surface-900",children:XG(e.total_balance)})]}),O.jsxs("div",{className:"flex items-center justify-end gap-2",children:[O.jsxs("button",{type:"button",className:"btn-secondary btn-sm",onClick:t=>{t.stopPropagation(),w(e),y(!0)},children:[O.jsx(ye,{className:"w-4 h-4"}),"Edit"]}),O.jsxs("button",{type:"button",className:"btn-danger btn-sm",onClick:r=>{r.stopPropagation(),(async e=>{if(confirm(`Delete card "${e.name}"? This will also delete its transactions.`))try{await M.deleteMarketingCard(e.id),t("Card deleted"),await D(),h(t=>t===e.id?null:t)}catch(r){n(r.message||"Failed to delete card")}})(e)},children:[O.jsx(je,{className:"w-4 h-4"}),"Delete"]}),O.jsx("div",{className:"hidden lg:block ml-2",children:r?O.jsx(Z,{className:"w-5 h-5 text-surface-500"}):O.jsx(q,{className:"w-5 h-5 text-surface-500"})})]})]})]})}),r&&O.jsxs("div",{className:"bg-surface-50 border-t border-surface-200 p-4",children:[O.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[O.jsxs("div",{children:[O.jsx("h4",{className:"font-semibold text-surface-900",children:"Transactions"}),O.jsx("p",{className:"text-xs text-surface-500",children:"Revenue/expense history for this card"})]}),O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsxs("button",{className:"btn-secondary btn-sm",type:"button",onClick:()=>I(e.id),disabled:g,children:[O.jsx(we,{className:"w-4 h-4"}),"Reload"]}),O.jsxs("button",{className:"btn-primary btn-sm",type:"button",onClick:()=>{return t=e.id,E(t),void j(!0);var t},children:[O.jsx(be,{className:"w-4 h-4"}),"New"]})]})]}),O.jsx("div",{className:"ag-theme-quartz",style:{height:320,width:"100%"},children:O.jsx(qG,{rowData:o,columnDefs:L,defaultColDef:{sortable:!0,filter:!0,resizable:!0},animateRows:!0,pagination:!0,paginationPageSize:25})})]})]},e.id)})})]}),O.jsxs("div",{className:"card p-5",children:[O.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-4",children:[O.jsxs("div",{children:[O.jsx("h2",{className:"font-semibold text-surface-900",children:"Ad Accounts"}),O.jsx("p",{className:"text-sm text-surface-500",children:"Transactions can reference ad accounts"})]}),O.jsxs("button",{className:"btn-primary",onClick:()=>{k(null),x(!0)},type:"button",children:[O.jsx(be,{className:"w-4 h-4"}),"Add Ad Account"]})]}),0===N.length?O.jsx("div",{className:"text-sm text-surface-500 py-8 text-center bg-surface-50 rounded-lg border border-surface-100",children:"No ad accounts yet."}):O.jsx("div",{className:"overflow-x-auto",children:O.jsxs("table",{className:"min-w-full",children:[O.jsx("thead",{children:O.jsxs("tr",{className:"text-xs text-surface-500 border-b border-surface-200",children:[O.jsx("th",{className:"text-left py-2 pr-4 font-medium",children:"Name"}),O.jsx("th",{className:"text-left py-2 pr-4 font-medium",children:"Linked Cards"}),O.jsx("th",{className:"text-right py-2 font-medium",children:"Actions"})]})}),O.jsx("tbody",{children:N.map(e=>O.jsxs("tr",{className:"border-b border-surface-100",children:[O.jsx("td",{className:"py-3 pr-4 text-sm font-medium text-surface-900",children:e.name}),O.jsx("td",{className:"py-3 pr-4",children:O.jsx("div",{className:"flex flex-wrap gap-2",children:0===(e.linked_cards||[]).length?O.jsx("span",{className:"text-sm text-surface-400",children:"None"}):e.linked_cards.map(e=>O.jsx("span",{className:"badge badge-default",children:e.name},e.id))})}),O.jsx("td",{className:"py-3 text-right",children:O.jsxs("div",{className:"flex justify-end gap-2",children:[O.jsxs("button",{className:"btn-secondary btn-sm",type:"button",onClick:()=>(k(e),void x(!0)),children:[O.jsx(ye,{className:"w-4 h-4"}),"Edit"]}),O.jsxs("button",{className:"btn-danger btn-sm",type:"button",onClick:()=>(async e=>{if(confirm(`Delete ad account "${e.name}"?`))try{await M.deleteMarketingAdAccount(e.id),t("Ad account deleted"),await D()}catch(r){n(r.message||"Failed to delete ad account")}})(e),children:[O.jsx(je,{className:"w-4 h-4"}),"Delete"]})]})})]},e.id))})]})})]})]}),v&&O.jsx(ZG,{mode:b?"edit":"create",existingCards:A,card:b,onClose:()=>y(!1),onSave:async()=>{y(!1),t("Saved"),await D()}}),C&&O.jsx(JG,{mode:S?"edit":"create",cards:A,account:S,onClose:()=>x(!1),onSave:async()=>{x(!1),t("Saved"),await D()}}),P&&R&&O.jsx(QG,{cards:A,adAccounts:N,cardId:R,onClose:()=>{j(!1),E(null)},onSave:async()=>{j(!1),E(null),t("Transaction created"),await D(),d&&await I(d)}})]})},tV={mention:"text-primary-600",assignment:"text-emerald-600",unassignment:"text-amber-600",status_change:"text-blue-600",comment_added:"text-purple-600",task_deleted:"text-red-600",project_invitation:"text-primary-600",role_change:"text-amber-600",default:"text-surface-400"},nV="bg-primary-500",rV="bg-primary-50/30",oV="bg-white",iV="bg-primary-50/50",sV="ring-2 ring-primary-500",aV="text-surface-600",lV="text-surface-900 font-medium",cV="text-surface-400",uV="bg-primary-100 text-primary-700",dV="text-surface-600 hover:bg-surface-100",hV="text-surface-900",pV="text-surface-400",fV="text-surface-500",gV="text-red-600 hover:text-red-700",mV="hover:bg-red-50 hover:text-red-600",vV="text-primary-600",yV="hover:bg-primary-100 hover:text-primary-700",bV="border-surface-300 text-primary-600 focus:ring-primary-500",wV=e=>{const t="w-4 h-4",n=(e=>tV[e]||tV.default)(e);switch(e){case"mention":return O.jsx(G,{className:`${t} ${n}`});case"assignment":return O.jsx(Ee,{className:`${t} ${n}`});case"unassignment":return O.jsx(Re,{className:`${t} ${n}`});case"status_change":return O.jsx(U,{className:`${t} ${n}`});case"comment_added":return O.jsx(pe,{className:`${t} ${n}`});case"task_deleted":return O.jsx(je,{className:`${t} ${n}`});case"project_invitation":return O.jsx(se,{className:`${t} ${n}`});case"role_change":return O.jsx(Se,{className:`${t} ${n}`});default:return O.jsx(V,{className:`${t} ${n}`})}},CV=e=>{const{type:t,payload:n,actor_name:r}=e,o=r||"Someone";switch(t){case"mention":return`${o} mentioned you in ${"comment"===(null==n?void 0:n.context)?"a comment":"a task"}`;case"assignment":return`${o} assigned you to "${null==n?void 0:n.task_title}"`;case"unassignment":return`${o} removed you from "${null==n?void 0:n.task_title}"`;case"status_change":return`"${null==n?void 0:n.task_title}" status changed to ${null==n?void 0:n.new_status}`;case"comment_added":return`${o} commented on "${null==n?void 0:n.task_title}"`;case"task_deleted":return`"${null==n?void 0:n.task_title}" was deleted`;case"project_invitation":return`${o} invited you to "${null==n?void 0:n.project_name}"`;case"role_change":return`Your role in "${null==n?void 0:n.project_name}" changed to ${null==n?void 0:n.new_role}`;default:return"New notification"}},xV=e=>{if(!e)return"Just now";const t=new Date;let n;if(n=e instanceof Date?e:new Date(e),isNaN(n.getTime()))return"Just now";const r=t-n;if(r<0)return"Just now";const o=Math.floor(r/1e3),i=Math.floor(r/6e4),s=Math.floor(r/36e5),a=Math.floor(r/864e5);return o<10?"Just now":o<60?`${o}s ago`:i<60?`${i}m ago`:s<24?`${s}h ago`:`${a}d ago`},SV=({onClose:e})=>{const{notifications:t,markAsRead:n,markAllAsRead:o,removeNotification:s}=Le(),a=i(),{toasts:l,success:c,error:u,removeToast:d}=ND(),[h,p]=r.useState(null),[f,g]=r.useState(null),[m,v]=r.useState("all"),[y,b]=r.useState(new Set),[w,C]=r.useState(!1),x=r.useMemo(()=>"unread"===m?t.filter(e=>!e.read):t,[t,m]),S=r.useMemo(()=>t.filter(e=>!e.read).length,[t]),k=e=>{b(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})};return O.jsxs(O.Fragment,{children:[O.jsx(FD,{toasts:l,removeToast:d}),O.jsxs("div",{className:"absolute right-0 mt-2 w-96 dropdown animate-scale-in z-[100] overflow-hidden",onClick:e=>{e.stopPropagation()},onMouseDown:e=>{e.stopPropagation()},children:[O.jsxs("div",{className:"px-4 py-3 border-b border-surface-100",children:[O.jsxs("div",{className:"flex items-center justify-between mb-2",children:[O.jsx("h3",{className:`font-semibold ${hV}`,children:"Notifications"}),O.jsx("div",{className:"flex items-center gap-1",children:w?O.jsxs(O.Fragment,{children:[O.jsx("button",{onClick:async()=>{if(0===y.size)return;const e=Array.from(y);try{for(const t of e)await n(t);c(`Marked ${e.length} notification(s) as read`),b(new Set),C(!1)}catch(t){u("Failed to mark notifications as read")}},disabled:0===y.size,className:"icon-btn",title:"Mark selected as read",children:O.jsx(U,{className:"w-4 h-4"})}),O.jsx("button",{onClick:async()=>{if(0===y.size)return;if(!confirm(`Delete ${y.size} notification(s)?`))return;const e=Array.from(y);let t=0;try{for(const r of e)try{await M.deleteNotification(r),s(r),t++}catch(n){console.error("Failed to delete notification:",n)}t>0&&c(`Deleted ${t} notification(s)`),b(new Set),C(!1)}catch(n){u("Failed to delete some notifications")}},disabled:0===y.size,className:`icon-btn ${gV}`,title:"Delete selected",children:O.jsx(je,{className:"w-4 h-4"})}),O.jsx("button",{onClick:()=>{C(!1),b(new Set)},className:"icon-btn",title:"Cancel selection",children:O.jsx(Ae,{className:"w-4 h-4"})})]}):O.jsxs(O.Fragment,{children:[O.jsx("button",{onClick:()=>C(!0),className:"icon-btn",title:"Select multiple",children:O.jsx(J,{className:"w-4 h-4"})}),O.jsx("button",{onClick:o,disabled:0===S,className:"icon-btn",title:"Mark all as read",children:O.jsx(z,{className:"w-4 h-4"})}),O.jsx("button",{onClick:e,className:"icon-btn",children:O.jsx(Ae,{className:"w-4 h-4"})})]})})]}),O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsxs("button",{onClick:()=>v("all"),className:`px-3 py-1 text-xs font-medium rounded-lg transition-colors ${"all"===m?uV:dV}`,children:["All (",t.length,")"]}),O.jsxs("button",{onClick:()=>v("unread"),className:`px-3 py-1 text-xs font-medium rounded-lg transition-colors ${"unread"===m?uV:dV}`,children:["Unread (",S,")"]})]})]}),O.jsx("div",{className:"max-h-96 overflow-y-auto",children:0===x.length?O.jsxs("div",{className:"px-4 py-12 text-center",children:[O.jsx("div",{className:"w-12 h-12 rounded-full bg-surface-100 flex items-center justify-center mx-auto mb-3",children:O.jsx(V,{className:`w-6 h-6 ${pV}`})}),O.jsx("p",{className:`${fV} text-sm`,children:"unread"===m?"No unread notifications":"No notifications yet"})]}):x.map(t=>{const r=y.has(t.id);return O.jsxs("div",{className:`flex items-start gap-3 px-4 py-3 hover:bg-surface-50 transition-all border-b border-surface-50 ${t.read?oV:rV} ${r?`${sV} ${iV}`:""} ${w?"cursor-default":"cursor-pointer"}`,onClick:()=>{w?k(t.id):(async t=>{var r;t.read||await n(t.id),(null==(r=t.payload)?void 0:r.project_id)&&(a(`/project/${t.payload.project_id}`),e())})(t)},children:[w&&O.jsx("div",{className:"flex-shrink-0 mt-1",children:O.jsx("input",{type:"checkbox",checked:r,onChange:()=>k(t.id),onClick:e=>e.stopPropagation(),className:`w-4 h-4 rounded ${bV}`})}),!w&&!t.read&&O.jsx("div",{className:`w-2 h-2 rounded-full ${nV} flex-shrink-0 mt-2`}),O.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-surface-100 flex items-center justify-center",children:wV(t.type)}),O.jsxs("div",{className:"flex-1 min-w-0",children:[O.jsx("p",{className:`text-sm leading-snug ${t.read?aV:lV}`,children:CV(t)}),O.jsx("p",{className:`text-xs ${cV} mt-1`,children:xV(t.created_at)})]}),!w&&O.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[t.read?O.jsx("button",{onClick:e=>{e.stopPropagation(),(async e=>{e.stopPropagation(),console.log("Mark as unread not yet implemented in backend")})(e,t.id)},className:"p-1.5 rounded hover:bg-surface-200 transition-colors opacity-60 hover:opacity-100",title:"Mark as unread",children:O.jsx(J,{className:"w-3.5 h-3.5 text-surface-500"})}):O.jsx("button",{onClick:e=>(async(e,t)=>{e.stopPropagation(),g(t);try{await n(t),c("Marked as read")}catch(r){u("Failed to mark as read")}finally{g(null)}})(e,t.id),disabled:f===t.id,className:`p-1.5 rounded ${yV} transition-colors disabled:opacity-50`,title:"Mark as read",children:f===t.id?O.jsx("div",{className:"w-3.5 h-3.5 border-2 border-surface-300 border-t-primary-600 rounded-full animate-spin"}):O.jsx(U,{className:`w-3.5 h-3.5 ${vV}`})}),O.jsx("button",{onClick:e=>(async(e,t)=>{if(e.stopPropagation(),confirm("Delete this notification?")){p(t);try{await M.deleteNotification(t),s(t),c("Notification deleted")}catch(n){console.error("Failed to delete notification:",n),u("Failed to delete notification")}finally{p(null)}}})(e,t.id),disabled:h===t.id,className:`p-1.5 rounded ${mV} transition-colors disabled:opacity-50`,title:"Delete notification",children:h===t.id?O.jsx("div",{className:"w-3.5 h-3.5 border-2 border-surface-300 border-t-red-600 rounded-full animate-spin"}):O.jsx(je,{className:"w-3.5 h-3.5 text-surface-500"})})]})]},t.id)})})]})]})},kV=({onClose:e})=>{const[t,n]=r.useState([]),[o,i]=r.useState(!0),[s,a]=r.useState(""),[l,c]=r.useState(!1);r.useEffect(()=>{u()},[]);const u=async()=>{try{const e=await M.getTodos();n(e.todos)}catch(e){console.error("Failed to load todos:",e)}finally{i(!1)}},d=t.filter(e=>e.completed).length,h=t.length>0?d/t.length*100:0;return O.jsxs(O.Fragment,{children:[O.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 animate-fade-in",onClick:e}),O.jsxs("div",{className:"fixed right-0 top-0 h-full w-80 bg-white border-l border-surface-200 z-50 animate-slide-up shadow-elevated flex flex-col",children:[O.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-surface-200",children:[O.jsxs("div",{children:[O.jsx("h2",{className:"font-semibold text-surface-900",children:"My To-Do List"}),O.jsxs("p",{className:"text-xs text-surface-500 mt-0.5",children:[d," of ",t.length," completed"]})]}),O.jsx("button",{onClick:e,className:"icon-btn",children:O.jsx(Ae,{className:"w-5 h-5"})})]}),t.length>0&&O.jsx("div",{className:"px-5 py-3 border-b border-surface-100",children:O.jsx("div",{className:"h-1.5 bg-surface-100 rounded-full overflow-hidden",children:O.jsx("div",{className:"h-full bg-primary-600 rounded-full transition-all duration-500 ease-smooth",style:{width:`${h}%`}})})}),O.jsx("form",{onSubmit:async e=>{if(e.preventDefault(),s.trim()){c(!0);try{const e=await M.createTodo(s);n([...t,e]),a("")}catch(r){console.error("Failed to add todo:",r)}finally{c(!1)}}},className:"px-5 py-4 border-b border-surface-100",children:O.jsxs("div",{className:"flex gap-2",children:[O.jsx("input",{type:"text",value:s,onChange:e=>a(e.target.value),placeholder:"Add a new todo...",className:"input text-sm py-2",disabled:l}),O.jsx("button",{type:"submit",disabled:l||!s.trim(),className:"btn-primary btn-sm px-3",children:O.jsx(be,{className:"w-4 h-4"})})]})}),O.jsx("div",{className:"flex-1 overflow-y-auto p-3",children:o?O.jsx("div",{className:"flex items-center justify-center py-8",children:O.jsx("div",{className:"w-6 h-6 border-2 border-primary-200 border-t-primary-600 rounded-full animate-spin"})}):0===t.length?O.jsxs("div",{className:"text-center py-12 px-4",children:[O.jsx("div",{className:"w-12 h-12 rounded-full bg-surface-100 flex items-center justify-center mx-auto mb-3",children:O.jsx($,{className:"w-6 h-6 text-surface-400"})}),O.jsx("p",{className:"text-surface-600 text-sm font-medium",children:"No todos yet"}),O.jsx("p",{className:"text-xs text-surface-400 mt-1",children:"Add your first todo above"})]}):O.jsx("div",{className:"space-y-1",children:t.map((e,r)=>O.jsxs("div",{className:"group flex items-center gap-3 p-3 rounded-lg transition-all duration-150 "+(e.completed?"bg-surface-50":"hover:bg-surface-50"),style:{animationDelay:30*r+"ms"},children:[O.jsx("button",{onClick:()=>(async e=>{try{const r=await M.toggleTodo(e);n(t.map(t=>t.id===e?{...t,completed:r.completed}:t))}catch(r){console.error("Failed to toggle todo:",r)}})(e.id),className:"flex-shrink-0 transition-transform active:scale-90",children:e.completed?O.jsx($,{className:"w-5 h-5 text-primary-600"}):O.jsx(J,{className:"w-5 h-5 text-surface-300 hover:text-surface-400"})}),O.jsx("span",{className:"flex-1 text-sm transition-all "+(e.completed?"line-through text-surface-400":"text-surface-700"),children:e.title}),O.jsx("button",{onClick:()=>(async e=>{try{await M.deleteTodo(e),n(t.filter(t=>t.id!==e))}catch(r){console.error("Failed to delete todo:",r)}})(e.id),className:"flex-shrink-0 p-1 text-surface-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-all",children:O.jsx(je,{className:"w-4 h-4"})})]},e.id))})})]})]})},PV=()=>{const{user:e,logout:t,isAdmin:n}=N(),{unreadCount:o}=Le(),a=h(),l=i(),[c,u]=r.useState(!1),[d,f]=r.useState(!1),[g,m]=r.useState(!1),v=r.useRef(null),y=r.useRef(null);r.useEffect(()=>{const e=e=>{if(c&&v.current&&!v.current.contains(e.target)){e.target.closest('button[title="Notifications"]')||u(!1)}if(g&&y.current&&!y.current.contains(e.target)){const t=e.target.closest("button");t&&t.contains(y.current)||m(!1)}};if(c||g)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[c,g]);const b=[{path:"/",icon:le,label:"Dashboard"}];return n&&(b.push({path:"/admin",icon:Se,label:"Admin Panel"}),b.push({path:"/marketing",icon:he,label:"Marketing Management"})),O.jsxs("div",{className:"min-h-screen bg-surface-50 flex",children:[O.jsx("aside",{className:"w-64 bg-white border-r border-surface-200 flex-shrink-0 flex flex-col h-screen sticky top-0",children:O.jsxs("div",{className:"flex flex-col h-full",children:[O.jsx("div",{className:"h-16 px-6 flex items-center border-b border-surface-200",children:O.jsxs(s,{to:"/",className:"flex items-center gap-3",children:[O.jsx("div",{className:"w-9 h-9 rounded-lg bg-primary-800 flex items-center justify-center",children:O.jsx(ie,{className:"w-5 h-5 text-white"})}),O.jsx("span",{className:"text-xl font-bold text-surface-900",children:"Meetat"})]})}),O.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:b.map(e=>{const t=e.icon,n=a.pathname===e.path;return O.jsxs(s,{to:e.path,className:"flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-150 "+(n?"bg-primary-50 text-primary-800 font-medium":"text-surface-600 hover:bg-surface-50 hover:text-surface-900"),children:[O.jsx(t,{className:"w-5 h-5"}),O.jsx("span",{children:e.label})]},e.path)})}),O.jsx("div",{className:"p-4 border-t border-surface-200",children:O.jsxs("div",{className:"flex items-center gap-3 px-3 py-2",children:[O.jsx(_e,{user:e,size:"md"}),O.jsxs("div",{className:"flex-1 min-w-0",children:[O.jsx("p",{className:"font-medium text-surface-900 truncate text-sm",children:null==e?void 0:e.name}),O.jsx("p",{className:"text-xs text-surface-500 truncate",children:null==e?void 0:e.email})]})]})})]})}),O.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[O.jsxs("header",{className:"h-16 bg-white border-b border-surface-200 flex items-center justify-between px-4 lg:px-6 sticky top-0 z-30",children:[O.jsx("div",{className:"flex-1"}),O.jsxs("div",{className:"flex items-center gap-1",children:[O.jsx("button",{className:"icon-btn relative",onClick:()=>f(!d),title:"My To-Do List",children:O.jsx(K,{className:"w-5 h-5"})}),O.jsxs("div",{className:"relative",ref:v,children:[O.jsxs("button",{className:"icon-btn relative",onClick:e=>{e.stopPropagation(),u(!c)},title:"Notifications",children:[O.jsx(V,{className:"w-5 h-5"}),o>0&&O.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-4 h-4 bg-red-500 rounded-full text-[10px] text-white flex items-center justify-center font-medium",children:o>9?"9+":o})]}),c&&O.jsx(SV,{onClose:()=>u(!1)})]}),O.jsxs("div",{className:"relative ml-2",ref:y,children:[O.jsxs("button",{className:"flex items-center gap-2 py-1.5 px-2 rounded-lg hover:bg-surface-50 transition-colors",onClick:()=>m(!g),children:[O.jsx(_e,{user:e,size:"sm"}),O.jsx(q,{className:"w-4 h-4 text-surface-400"})]}),g&&O.jsxs("div",{className:"absolute right-0 mt-2 w-48 dropdown animate-scale-in z-50",children:[O.jsxs("div",{className:"px-4 py-3 border-b border-surface-100",children:[O.jsx("p",{className:"font-medium text-surface-900 text-sm",children:null==e?void 0:e.name}),O.jsx("p",{className:"text-xs text-surface-500 capitalize",children:null==e?void 0:e.role})]}),O.jsxs("button",{onClick:()=>{t(),l("/login")},className:"dropdown-item w-full",children:[O.jsx(ue,{className:"w-4 h-4"}),O.jsx("span",{children:"Sign out"})]})]})]})]})]}),O.jsx("main",{className:"flex-1 overflow-auto p-4 lg:p-6",children:O.jsx(p,{})})]}),d&&O.jsx(kV,{onClose:()=>f(!1)})]})},jV=({size:e="medium",className:t=""})=>O.jsx("div",{className:`flex items-center justify-center ${t}`,children:O.jsx("div",{className:`${{small:"w-5 h-5 border-2",medium:"w-8 h-8 border-3",large:"w-12 h-12 border-4"}[e]} border-primary-500/30 border-t-primary-500 rounded-full animate-spin`})}),OV=({children:e,adminOnly:t=!1})=>{const{user:n,loading:r,isAdmin:o}=N();return r?O.jsx("div",{className:"min-h-screen flex items-center justify-center",children:O.jsx(jV,{size:"large"})}):n?t&&!o?O.jsx(m,{to:"/",replace:!0}):e:O.jsx(m,{to:"/login",replace:!0})},RV=({children:e})=>{const{user:t,loading:n}=N();return n?O.jsx("div",{className:"min-h-screen flex items-center justify-center",children:O.jsx(jV,{size:"large"})}):t?O.jsx(m,{to:"/",replace:!0}):e};function EV(){return O.jsxs(f,{children:[O.jsx(g,{path:"/login",element:O.jsx(RV,{children:O.jsx(Ne,{})})}),O.jsx(g,{path:"/register",element:O.jsx(RV,{children:O.jsx(Te,{})})}),O.jsxs(g,{path:"/",element:O.jsx(OV,{children:O.jsx(PV,{})}),children:[O.jsx(g,{index:!0,element:O.jsx(Fe,{})}),O.jsx(g,{path:"project/:projectId",element:O.jsx(Ye,{})}),O.jsx(g,{path:"project/:projectId/ads",element:O.jsx(ED,{})}),O.jsx(g,{path:"admin",element:O.jsx(OV,{adminOnly:!0,children:O.jsx(MD,{})})}),O.jsx(g,{path:"marketing",element:O.jsx(OV,{adminOnly:!0,children:O.jsx(eV,{})})})]}),O.jsx(g,{path:"*",element:O.jsx(m,{to:"/",replace:!0})})]})}R.createRoot(document.getElementById("root")).render(O.jsx(u.StrictMode,{children:O.jsx(v,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:O.jsx(T,{children:O.jsx(Be,{children:O.jsx(EV,{})})})})}));
